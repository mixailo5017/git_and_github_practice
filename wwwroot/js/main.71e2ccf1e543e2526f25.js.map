{"version":3,"sources":["webpack:///main.71e2ccf1e543e2526f25.js","webpack:///./build/_js/_custom/_changeLanguage.js","webpack:///./build/_js/_custom/_nav_mobile.js","webpack:///./build/_js/_custom/_searchbox.js","webpack:///./build/_js/_custom/_signup_edit.js","webpack:///./build/_js/_custom/_signup_pickphoto.js","webpack:///./build/_js/_custom/_trimHTML.js","webpack:///./build/_js/_custom/_video_lightbox.js","webpack:///./build/_js/_custom/main.js","webpack:///./build/_js/_lib/filedrop.js","webpack:///./build/_js/_lib/jquery.tipsy.js","webpack:///./build/_js/_lib/jquery.validation.js","webpack:///./node_modules/cropper/dist/cropper.js"],"names":["webpackJsonp","./build/_js/_custom/_changeLanguage.js","module","exports","__webpack_require__","$","changeLanguage","language","callback","post","done","data","location","reload","fail","always","e","call","./build/_js/_custom/_nav_mobile.js","nav_mobile","docWidth","window","width","mobileMenuState","ddOpen","$mw","$wrapper","$userPro","$userMenu","$mmAlt","$intMenu","$langIcon","$dropDown","$mnav","$activeLang","attr","on","show","hide","animate","right","addClass","removeClass","left","find","hasClass","this","parent","is","blur","document","target","closest","length","./build/_js/_custom/_searchbox.js","searchbox","hitsSource","index","autocomplete","sources","hits","hitsPerPage","algoliasearch","trimHTML","client","members","initIndex","algoliaIndexMembers","projects","algoliaIndexProjects","hint","keyboardShortcuts","source","query","suggestions","dummySuggestion","dummy","uri","param","searchtext","noResults","push","displayKey","suggestion","lang","replace","firstname","lastname","templates","header","organizationDisplayHTML","_highlightResult","organization","value","image","empty","projectname","country","footer","event","dataset","segmentAnalytics","name","properties","Category","uid","Target Id","parseInt","objectID","Target Name","href","./build/_js/_custom/_signup_edit.js","mailcheck","modelMatcher","params","parentText","trim","term","children","match","extend","c","child","text","splice","original","toUpperCase","indexOf","template","container","id","$email","$spellingHint","$companyHint","companyHint","focus","suggested","element","address","domain","html","fadeIn","companyDomain","val","substr","defaultDomains","defaultSecondLevelDomains","console","log","fadeOut","change","ready","select2","maximumSelectionLength","placeholder","matcher","templateSelection","minimumResultsForSearch","Infinity","errorLabelsFromServer","filter","errorObjects","each","inputName","prevAll","errorObject","formToValidate","validationSettings","submit","settings","errorListClass","dynamic","trigger","validate","key","addError","scrollToError","nameToRemove","removeError","./build/_js/_custom/_signup_pickphoto.js","jQuery","filedrop","logging","fixHeight","setTimeout","rotateHeight","height","css","displayError","msg","saveCroppedImageResponse","resp","status","error","loadCropper","imageUrl","$imgCrop","cropper","zoomable","modal","aspectRatio","aniHeight","triggerBasicCropper","$cropper","$crop_wrap","opacity","fileName","removeImage","removeUrl","saveImage","savingImage","postData","fd-file","raw-file","uploadUrl","$cropZone","zone","$this","method","option","_top","prepend","top","toDataURL","tipsy","gravity","createElement","options","iframe","FileDrop","files","file","fs","Number","size","fileSize","fileName1","fileType","toLowerCase","current","total","byID","style","xhr","parseJSON","responseText","sendTo","./build/_js/_custom/_trimHTML.js","inputHTML","maxChars","regex","splitCompany","split","characterCount","insideEm","trimmedHTML","forEach","array","substring","./build/_js/_custom/_video_lightbox.js","magnificPopup","type","patterns","youtube","src","srcAction","./build/_js/_custom/main.js","global","./build/_js/_lib/filedrop.js","__webpack_provided_window_dot_jQuery","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","root","init","undefined","apply","randomID","prefix","Math","random","toFixed","uniqueID","isTag","getElementById","tag","nodeType","tagName","newXHR","XMLHttpRequest","activex","i","ActiveXObject","isArray","Object","prototype","toString","toArray","skipFirst","Array","slice","addEvent","attachEvent","addEventListener","stopEvent","cancelBubble","returnValue","stopPropagation","preventDefault","setClass","className","append","classRegExp","test","RegExp","base","overwrite","prop","callAll","list","args","obj","res","callAllOfObject","hasConsole","handlers","events","info","dir","preview","onObjectCall","concat","any","appendEventsToObject","funcs","addEventsToObject","arguments","funcNS","ns","splitNS","fi","callee","previewToObject","pusher","func","nsProp","str","all","isIE6","isIE9","isChrome","navigator","vendor","DropHandle","opt","self","el","zoneClass","inputClass","url","callbackParam","fileParam","input","recreateInput","fullDocDragDetect","multiple","dropEffect","dragEnter","dragLeave","dragOver","dragEnd","dragExit","upload","uploadElsewhere","inputSetup","iframeSetup","iframeDone","hook","zoneNode","prepareInput","hookDragOn","hookDropOn","delegate","body","clientX","clientY","relatedTarget","domEvent","selfEvent","findInputRecursive","createInputAt","form","parentNode","getAttribute","childNodes","node","cont","innerHTML","firstChild","setAttribute","display","lastChild","nextChild","nextSibling","insertBefore","appendChild","abortIFrame","sendViaIFrame","response","responseXML","readyState","statusText","getAllResponseHeaders","getResponseHeader","setRequestHeader","statusCode","abort","cbInput","resetForm","clone","cloneNode","replaceChild","enable","removeAttribute","onInputSetup","oldInput","clearAttributes","mergeAttributes","position","div","overflow","onDragOver","dataTransfer","onUpload","dragClassChanger","isHovered","dragOverClass","handle","force","send","fileSetup","eventFiles","warn","orFalse","result","FileList","srcElement","entries","items","names","File","setNativeEntry","nativeEntry","pop","last","first","remove","se","f","clear","reverse","floor","copy","sort","cx","j","temp","sortBy","a","b","invoke","arg_1","findCompare","largest","smallest","oldest","modDate","getTime","newest","ofType","mime","images","named","nativeFile","lastModifiedDate","Date","extraHeaders","xRequestedWith","xhrSetup","xhrSend","progress","sendXHR","FileReader","reader","onload","sendDataReadyTo","onerror","readAsArrayBuffer","hookXHR","open","overrideMimeType","encodeURIComponent","toGMTString","reqWith","evtHost","onreadystatechange","onprogress","lengthComputable","loaded","readData","onDone","onError","read","readDataURL","readDataURI","reason","message","fdError","Function","blob","start","end","String","fromCharCode","Uint8Array","readAsText","listEntries","dequeue","count","enqueued","isDirectory","createReader","readEntries","fromEntry","item","webkitGetAsEntry","onXhrSend","fn","firstArgs","$node","triggerHandler","host","$el","./build/_js/_lib/jquery.tipsy.js","maybeCall","thing","ctx","isElementInDOM","ele","Tipsy","$element","enabled","fixTitle","title","getTitle","$tip","tip","visibility","prependTo","tp","pos","offset","offsetWidth","offsetHeight","actualWidth","actualHeight","charAt","fade","stop","$e","removeAttr","o","fallback","disable","toggleEnabled","get","elementOptions","enter","hoverState","delayIn","leave","delayOut","defaults","live","binder","eventIn","eventOut","revalidate","pointee","metadata","autoNS","scrollTop","autoWE","scrollLeft","autoBounds","margin","prefer","ew","boundTop","boundLeft","./build/_js/_lib/jquery.validation.js","_buildRegexFromString","_regexDebug","Debug","function","pattern","modifier","print","rule","separator","Validation","labels","hasScrolled","preventExtensions","_rules","NOTEMPTY","INTEGER","NUMERIC","MIXED","NAME","NOSPACE","TRIM","DATE","EMAIL","URL","PHONE","OPTIONAL","COMPARISON","_messages","default","<","<=",">",">=","==","!=","_data","validation","validationMessage","regexReverse","regexMessage","group","label","errorList","_options","insertion","allErrors","button","errorClass","errorListContainer","inputContainer","onInit","onValidate","onBeforeSubmit","onSubmit","onAfterSubmit","delay","onSuccess","onComplete","rules","messages","debug","_supported","extendRules","extendMessages","extendOptions","tpmOptions","hasOwnProperty","inArray","JSON","stringify","delegateDynamicValidation","delegateSuffix","unbind","keyCode","_typeWatch","validateInput","_executeCallback","displayOneError","errors","delegateValidation","off","resetErrors","validateForm","formData","submitForm","displayErrors","isValid","_getInputValue","prepareFormData","matches","tmpObject","tmpArray","k","inputShortName","validationArray","validationRegex","validationRegexReverse","validationRegexMessage","validateOnce","_api","_splitValidation","validateRule","registerError","reversed","comparison","operator","compared","comparedValue","isNaN","eval","parseFloat","capitalize","hasError","inputId","errorContainer","groupInput","parentsUntil","resetSuffix","d","resetOneError","duration","destroy","timer","ms","clearTimeout","extraParams","_callback","_exploded","_params","_isValid","_splitIndex","merge","__construct","addValidation","removeValidation","alterValidationRules","_formatValidation","oneValidation","_joinValidation","join","nodeName","selector","validationData","validationIndex","onlyOnce","ruleObj","table","debugObject","isEmptyObject","groupCollapsed","groupEnd","elt","len","from","ceil","t","n","v","json","arr","constructor","./node_modules/cropper/dist/cropper.js","factory","isNumber","isUndefined","proxy","context","_len","_key","_len2","args2","_key2","objectKeys","keys","isCrossOriginURL","parts","protocol","hostname","port","addTimestamp","timestamp","getImageSize","naturalWidth","IS_SAFARI_OR_UIWEBVIEW","naturalHeight","newImage","getTransform","transforms","translateX","translateY","rotate","scaleX","scaleY","getRotatedSizes","isReversed","deg","abs","degree","arc","PI","sinArc","sin","cosArc","cos","newWidth","newHeight","getSourceCanvas","canvas","getContext","dstX","dstY","dstWidth","dstHeight","scalable","rotatable","advanced","canvasWidth","canvasHeight","rotated","fillColor","fillStyle","fillRect","save","translate","scale","imageSmoothingEnabled","imageSmoothingQuality","drawImage","restore","getStringFromCharCode","dataView","getUint8","getOrientation","arrayBuffer","DataView","byteLength","orientation","exifIDCode","tiffOffset","firstIFDOffset","littleEndian","endianness","app1Start","ifdStart","getUint16","getUint32","setUint16","dataURLToArrayBuffer","dataURL","base64","REGEXP_DATA_URL_HEAD","binary","atob","ArrayBuffer","charCodeAt","arrayBufferToDataURL","btoa","getPointer","_ref","endOnly","pageX","pageY","endX","endY","startX","startY","getMaxZoomRatio","pointers","pointers2","ratios","pointerId","pointer","pointerId2","pointer2","x1","y1","x2","y2","z1","sqrt","z2","ratio","_toConsumableArray","arr2","getPointersCenter","_classCallCheck","instance","Constructor","TypeError","DEFAULTS","viewMode","dragMode","NaN","responsive","checkCrossOrigin","checkOrientation","guides","center","highlight","background","autoCrop","autoCropArea","movable","zoomOnTouch","zoomOnWheel","wheelZoomRatio","cropBoxMovable","cropBoxResizable","toggleDragModeOnDblclick","minCanvasWidth","minCanvasHeight","minCropBoxWidth","minCropBoxHeight","minContainerWidth","minContainerHeight","cropstart","cropmove","cropend","crop","zoom","REGEXP_USERAGENT","userAgent","render","initContainer","initCanvas","initCropBox","renderCanvas","cropped","renderCropBox","$container","hidden","max","containerWidth","containerHeight","imageNaturalWidth","imageNaturalHeight","is90Degree","oldLeft","oldTop","limited","limitCanvas","initialImage","initialCanvas","isSizeLimited","isPositionLimited","cropBox","minWidth","minHeight","maxWidth","maxHeight","newCanvasLeft","newCanvasTop","minLeft","min","minTop","maxLeft","maxTop","isChanged","isSquareImage","rotated2","$canvas","transform","renderImage","limitCropBox","output","$clone","initialCropBox","maxCropBoxWidth","maxCropBoxHeight","$face","$cropBox","disabled","completed","getData","initPreview","crossOrigin","crossOriginUrl","$clone2","$preview","$viewBox","img","cssText","resetPreview","removeData","cropBoxWidth","cropBoxHeight","originalWidth","originalHeight","PointerEvent","EVENT_POINTER_DOWN","EVENT_POINTER_MOVE","EVENT_POINTER_UP","bind","isFunction","cropStart","wheel","dblclick","onCropMove","cropMove","onCropEnd","cropEnd","onResize","resize","REGEXP_ACTIONS","canvasData","cropBoxData","getCanvasData","getCropBoxData","setCanvasData","setCropBoxData","setDragMode","$dragBox","originalEvent","wheeling","delta","deltaY","wheelDelta","detail","action","changedTouches","touch","identifier","isDefaultPrevented","cropping","toggleClass","bottom","renderable","shiftKey","range","x","y","move","p","methods","reset","onlyColorChanged","isImg","add","replaced","load","originalUrl","unbuild","offsetX","offsetY","moveTo","changed","_event","zoomTo","oldRatio","rotateTo","_scaleX","_scaleY","isRounded","round","setData","isScaled","isPlainObject","getContainerData","getImageData","widthChanged","heightChanged","getCroppedCanvas","HTMLCanvasElement","scaledWidth","scaledHeight","scaledRatio","parameters","sourceWidth","sourceHeight","srcX","srcY","srcWidth","srcHeight","setAspectRatio","mode","croppable","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","protoProps","staticProps","REGEXP_DATA_URL","REGEXP_DATA_URL_JPEG","Cropper","Event","responseType","withCredentials","complete","one","insertAfter","$image","build","after","completing","OtherCropper","setDefaults","noConflict"],"mappings":"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","file":"main.71e2ccf1e543e2526f25.js","sourcesContent":["webpackJsonp([\"main\"],{\n\n/***/ \"./build/_js/_custom/_changeLanguage.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function($) {\n\n/* Depends on jQuery as $ */\n\nvar changeLanguage = function(language, callback) {\n\n    var posting = $.post('/language', {\n        language: language\n    }, \"json\");\n\n    posting.done(function(data) {\n        if (typeof callback == 'function') {\n            callback();\n        }\n        location.reload();\n    }).fail(function() {\n        //\n    }).always(function(e) {\n        //\n    });\n}\n\nmodule.exports = changeLanguage;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"./node_modules/jquery/dist/jquery.js\")))\n\n/***/ }),\n\n/***/ \"./build/_js/_custom/_nav_mobile.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar $ = __webpack_require__(\"./node_modules/jquery/dist/jquery.js\");\n\nvar nav_mobile = function() {\n\tif($('.m-navbar .nav-main')) {\n\t\tvar docWidth = $(window).width(),\n\t\t\tuserTimer,\n\t\t\tmobileMenuState = 'closed',\n\t\t\tddOpen = false,\n\t\t\t$mw = $('.m-wrap'),\n\t\t\t$wrapper = $('.wrapper'),\n\t\t\t$mainHeader = $('.main-header'),\n\t\t\t$userPro = $('.user-profile'),\n\t\t\t$userMenu = $('.user-menu'),\n\t\t\t$mainMenu = $('.icon-menu'),\n\t\t\t$mmAlt = $('.icon-menu, .iicon-menu'),\n\t\t\t$intMenu = $('.nav-main'),\n\t\t\t$langIcon = $('.active-language'),\n\t\t\t$langMenu = $('.m-language'),\n\t\t\t$dropDown = $('.m-dropdown'),\n\t\t\t$mnav = $('.m-nav');\n\t\t\t$activeLang = $('.m-language .active img').attr('src');\n\n\t\t$(window).on('resize', function() {\n\t\t\tdocWidth = $(window).width();\n\t\t\tif(docWidth <= 1024) {\n\t\t\t\t$userMenu.show();\n\t\t\t} else {\n\t\t\t\t$userMenu.hide();\n\t\t\t}\n\t\t});\n\n\t\t$langIcon.attr('src', $activeLang);\n\n\t\t$userPro.on('click', function() {\n\t\t\tif(docWidth <= 1024) {\n\t\t\t\t\n\t\t\t\tif(mobileMenuState === 'closed') {\n\t\t\t\t\t$wrapper.animate({\n\t\t\t\t\t\t'right': '50%'\n\t\t\t\t\t}, 250);\n\t\t\t\t\t$userMenu.animate({\n\t\t\t\t\t\t'right': '0%'\n\t\t\t\t\t}, 250);\n\t\t\t\t\t$userPro.addClass('active');\n\t\t\t\t\tmobileMenuState = 'user';\n\t\t\t\t} else if(mobileMenuState === 'user') {\n\t\t\t\t\t$wrapper.animate({\n\t\t\t\t\t\t'right': '0%'\n\t\t\t\t\t}, 250);\n\t\t\t\t\t$userMenu.animate({\n\t\t\t\t\t\t'right': '-50%'\n\t\t\t\t\t}, 250);\n\t\t\t\t\t$userPro.removeClass('active');\n\t\t\t\t\tmobileMenuState = 'closed';\n\t\t\t\t}\n\n\t\t\t\t\n\t\t\t}\n\t\t});\n\n\t\t$mmAlt.on('click', function() {\n\t\t\tif(docWidth <= 1024) {\n\t\t\t\tif(mobileMenuState === 'closed') {\n\t\t\t\t\t$wrapper.animate({\n\t\t\t\t\t\t'right': '-50%'\n\t\t\t\t\t}, 250);\n\t\t\t\t\t$intMenu.animate({\n\t\t\t\t\t\t'left': '0%'\n\t\t\t\t\t}, 250);\n\t\t\t\t\t$mmAlt.addClass('active');\n\t\t\t\t\t$mw.addClass('h-lock');\n\t\t\t\t\tmobileMenuState = 'main';\n\t\t\t\t} else if(mobileMenuState === 'main') {\n\t\t\t\t\t$wrapper.animate({\n\t\t\t\t\t\t'right': '0%'\n\t\t\t\t\t}, 250);\n\t\t\t\t\t$intMenu.animate({\n\t\t\t\t\t\t'left': '-50%'\n\t\t\t\t\t}, 250, function() {\n\t\t\t\t\t\t$mmAlt.removeClass('active');\n\t\t\t\t\t\t$mw.removeClass('h-lock');\n\t\t\t\t\t});\n\t\t\t\t\tmobileMenuState = 'closed';\n\t\t\t\t}\t\n\t\t\t}\n\t\t});\n\n\t\t$dropDown.on('click', function() {\n\t\t\t// Clear old Dropdowns\n\t\t\tif($mnav.find($('.dropdown-menu')).hasClass('active')) {\n\t\t\t\t// So that you can close it if you click it.\n\t\t\t\tif(!$(this).find($('.dropdown-menu'))) {\n\t\t\t\t\t$mnav.find($('.dropdown-menu')).removeClass('active');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(docWidth <= 1024) {\n\t\t\t\tif($(this).parent().parent().attr('class') !== 'm-nav nav-main') {\n\t\t\t\t\tif($(this).find($('.dropdown-menu')).is(':hidden')) {\n\t\t\t\t\t\t$(this).find($('.dropdown-menu')).addClass('active');\n\t\t\t\t\t\t$(this).addClass('open');\n\t\t\t\t\t\tddOpen = true;\n\t\t\t\t\t} else if($(this).find($('.dropdown-menu')).is(':visible')) {\n\t\t\t\t\t\t$(this).find($('.dropdown-menu')).removeClass('active');\n\t\t\t\t\t\t$(this).removeClass('open');\n\t\t\t\t\t\t$(this).blur();\n\t\t\t\t\t\tddOpen = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t$(document).on('click touchstart', function(e) {\n\t\t\tif(docWidth <= 1024) {\n\t\t\t\tif(ddOpen === true) {\n\t\t\t\t\tif(!$(e.target).closest('.m-dropdown').length) {\n\t\t\t\t\t\t$dropDown.find($('.dropdown-menu')).removeClass('active');\n\t\t\t\t\t\t$dropDown.removeClass('open');\n\t\t\t\t\t\tddOpen = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n};\n\nmodule.exports = nav_mobile;\n\n/***/ }),\n\n/***/ \"./build/_js/_custom/_searchbox.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar $ = __webpack_require__(\"./node_modules/jquery/dist/jquery.js\");\n\nvar searchbox = function() {\n\n\tvar algoliasearch = __webpack_require__(\"./node_modules/algoliasearch/src/browser/builds/algoliasearch.js\");\n\tvar autocomplete = __webpack_require__(\"./node_modules/autocomplete.js/index.js\");\n\tvar trimHTML = __webpack_require__(\"./build/_js/_custom/_trimHTML.js\");\n\tvar client = algoliasearch(\"61EU8IS2O1\", \"fdcec7b6178f9a9c128ae03d9b7f5f40\");\n\tvar members = client.initIndex(algoliaIndexMembers);\n\tvar projects = client.initIndex(algoliaIndexProjects);\n\n\t// Returns the relevant Algolia source function given an index\n\tfunction hitsSource(index) {\n\t\treturn autocomplete.sources.hits(index, { hitsPerPage: 3 });\n\t}\n\n\t//initialize autocomplete on search input (ID selector must match)\n\tautocomplete('#aa-search-input', \n\t\t{\n\t\t\thint: false,\n\t\t\t// debug: true,\n\t\t\tkeyboardShortcuts: ['/']\n\t\t}, \n\t\t[\n\t\t\t{\n\t\t\t  // Custom source function: returns up to three hits from Algolia,\n\t\t\t  // plus a fourth row linking to the Advanced Search page\n\t\t\t  source: function(query, callback) {\n\t\t\t\t  var memberHitsSource = hitsSource(members);\n\t\t\t\t  memberHitsSource(query, function(suggestions) {\n\t\t\t\t    var dummySuggestion = {\n\t\t\t\t\t\tdummy: true,\n\t\t\t\t\t\turi: '/expertise?' + $.param({searchtext: '\"' + query + '\"'}),\n\t\t\t\t\t\tquery: query\n\t\t\t\t\t};\n\t\t\t\t    if (suggestions.length === 0) {\n\t\t\t\t\t\tdummySuggestion.noResults = true;\n\t\t\t\t\t\tdummySuggestion.uri = '/expertise';\n\t\t\t\t\t}\n\t\t\t\t    // Add the dummy suggestion to the bottom\n\t\t\t\t\tsuggestions.push(dummySuggestion);\n\t\t\t\t    callback(suggestions, query);\n\t\t\t\t  });\n\t\t\t\t},\n\t\t\t  //value to be displayed in input control after user's suggestion selection\n\t\t\t  displayKey: function(suggestion) {\n\t\t\t  \tif (suggestion.dummy) {\n\t\t\t  \t\tif (suggestion.noResults) {\n\t\t\t  \t\t\treturn lang['NoResultsFound'] + ' ' + lang['AdvancedSearch'];\n\t\t\t  \t\t}\n\t\t\t  \t\treturn lang['FindMoreExperts'].replace('%s', \"'\" + suggestion.query + \"'\");\n\t\t\t  \t}\n\n\t\t\t  \treturn suggestion.firstname + ' ' + suggestion.lastname;\n\t\t\t  },\n\t\t\t  //hash of templates used when rendering dataset\n\t\t\t  templates: {\n\t\t\t    header: '<div class=\"aa-suggestions-category\">' + lang['Experts'] + '</div>',\n\t\t\t    //'suggestion' templating function used to render a single suggestion\n\t\t\t    suggestion: function(suggestion, query) {\n\t\t\t      if (suggestion.dummy) {\n\t\t\t      \tif (suggestion.noResults) {\n\t\t\t      \t\treturn '<div>' + lang['NoResultsFound'] + ' <a href=\"/expertise\">' + lang['AdvancedSearch'] + '</a></div>';\n\t\t\t      \t}\n\t\t\t      \treturn lang['FindMoreExperts'].replace('%s', \"'\" + query + \"'\");\n\t\t\t      }\n\n\t\t\t      var maxChars = 35;\n\t\t\t      var organizationDisplayHTML = suggestion._highlightResult.organization.value;\n\t\t\t      if (suggestion.organization.length > maxChars) {\n\t\t\t      \torganizationDisplayHTML = trimHTML(organizationDisplayHTML, maxChars);\n\t\t\t      }\n\t\t\t      return '<img src=\"' + suggestion.image + '\"><span>' +\n\t\t\t        suggestion._highlightResult.firstname.value + ' ' +\n\t\t\t        suggestion._highlightResult.lastname.value + '</span> <span>' +\n\t\t\t        organizationDisplayHTML + '</span>';\n\t\t\t    },\n\t\t\t    empty: '<div class=\"aa-suggestion aa-suggestion-empty\">' + lang['NoResultsFound'] + '&nbsp;<a href=\"/expertise/\">' + lang['AdvancedSearch'] + '</a></div>'\n\t\t\t  }\n\t\t\t},\n\t\t\t{\n\t\t\t  source: function(query, callback) {\n\t\t\t\t  var projectHitsSource = hitsSource(projects);\n\t\t\t\t  projectHitsSource(query, function(suggestions) {\n\t\t\t\t    // Add the dummy suggestion to the bottom\n\t\t\t\t\tvar dummySuggestion = {\n\t\t\t\t\t\tprojectname: lang['FindMoreProjects'].replace('%s', \"'\" + query + \"'\"),\n\t\t\t\t\t\tdummy: true,\n\t\t\t\t\t\turi: '/projects?' + $.param({searchtext: '\"' + query + '\"'}),\n\t\t\t\t\t\tquery: query\n\t\t\t\t\t};\n\t\t\t\t\tif (suggestions.length === 0) {\n\t\t\t\t\t\tdummySuggestion.projectname = lang['NoResultsFound'] + ' ' + lang['AdvancedSearch'];\n\t\t\t\t\t\tdummySuggestion.noResults = true;\n\t\t\t\t\t\tdummySuggestion.uri = '/projects';\n\t\t\t\t\t}\n\t\t\t\t\tsuggestions.push(dummySuggestion);\n\t\t\t\t    callback(suggestions, query);\n\t\t\t\t  });\n\t\t\t\t},\n\t\t\t  //value to be displayed in input control after user's suggestion selection\n\t\t\t  displayKey: 'projectname',\n\t\t\t  //hash of templates used when rendering dataset\n\t\t\t  templates: {\n\t\t\t    header: '<div class=\"aa-suggestions-category\">' + lang['Projects'] + '</div>',\n\t\t\t    //'suggestion' templating function used to render a single suggestion\n\t\t\t    suggestion: function(suggestion, query) {\n\t\t\t      if (suggestion.dummy) {\n\t\t\t      \tif (suggestion.noResults) {\n\t\t\t      \t\treturn '<div>' + lang['NoResultsFound'] + ' <a href=\"/projects\">' + lang['AdvancedSearch'] + '</a></div>';\n\t\t\t      \t}\n\n\t\t\t      \treturn lang['FindMoreProjects'].replace('%s', \"'\" + query + \"'\");\n\t\t\t      }\n\n\t\t\t      if (typeof suggestion._highlightResult.country != 'undefined') {\n\t\t\t      \tvar country = suggestion._highlightResult.country.value;\n\t\t\t      } else {\n\t\t\t      \tvar country = '';\n\t\t\t      }\n\t\t\t      return '<img src=\"' + suggestion.image + '\"><span>' +\n\t\t\t        suggestion._highlightResult.projectname.value + '</span><span>' +\n\t\t\t        country + '</span>';\n\t\t\t    },\n\t\t\t    empty: '<div class=\"aa-suggestion aa-suggestion-empty\">' + lang['NoResultsFound'] + '&nbsp;<a href=\"/projects/\">' + lang['AdvancedSearch'] + '</a></div>',\n\t\t\t    footer: '<div class=\"aa-suggestions-footer\">Powered by <img src=\"/images/Algolia_logo_bg-white.svg\" width=\"48\" height=\"17\"></div>'\n\t\t\t  }\n\t\t\t}\n\t\t])\n\t\t.on('autocomplete:selected', function(event, suggestion, dataset) {\n\t\t\tif (! suggestion.dummy) {\n\t\t\t\tsegmentAnalytics({\n\t                \"event\": {\n\t                    \"name\": \"Dropdown Search Result Followed\",\n\t                    \"properties\": {\n\t                        \"Category\"    : suggestion.uid ? 'Expert' : 'Project',\n\t                        \"Target Id\"   : parseInt(suggestion.objectID),\n\t                        \"Target Name\" : suggestion.uid ? suggestion.firstname + ' ' + suggestion.lastname : suggestion.projectname\n\t                    }\n\t                }\n\t            });\n            }\n\t\t\twindow.location.href = suggestion.uri;\n\t\t});\n};\n\nmodule.exports = searchbox;\n\n/***/ }),\n\n/***/ \"./build/_js/_custom/_signup_edit.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar $ = __webpack_require__(\"./node_modules/jquery/dist/jquery.js\");\nvar mailcheck = __webpack_require__(\"./node_modules/mailcheck/src/mailcheck.js\");\nvar select2 = __webpack_require__(\"./node_modules/select2/dist/js/select2.js\");\n__webpack_require__(\"./build/_js/_lib/jquery.validation.js\");\n\nmodule.exports = function() {\n  var $email = $('#email');\n  var $spellingHint = $(\"#spelling-hint\");\n  var $companyHint =$(\"#company-hint\");\n\n  var companyHint = \"We recommend using your professional email address.\";\n\n  $email.focus(function() {\n    $spellingHint.empty();\n    $companyHint.empty();\n  });\n\n  $email.on('change',function() {\n      $(this).mailcheck({\n          suggested: function(element, suggestion) {\n              var hint = \"Also, did you mean <b><i><a href='#' class='suggestion'>\" +\n                  \"<span class='address'>\" + suggestion.address + \"</span>\"\n                  + \"@<span class='domain'>\" + suggestion.domain + \n                  \"</i></b></a></span>?\";\n                \n              $spellingHint.hide().html(hint).fadeIn(500);\n              $companyHint.hide().html(companyHint).fadeIn(500);\n          },\n          empty: function (element) {\n              var companyDomain = $email.val().substr($email.val().indexOf(\"@\") + 1);\n              if (mailcheck.defaultDomains.indexOf(companyDomain) >= 0 || mailcheck.defaultSecondLevelDomains.indexOf(companyDomain.substr(companyDomain.indexOf(\".\"))) >= 0) {\n                  console.log(\"found a personal email address, spelled correctly\");\n                  $companyHint.hide().html(companyHint).fadeIn(500);\n              }\n              else $companyHint.empty();\n\n          }\n      });\n  });\n\n  $spellingHint.on('click', '.suggestion', function() {\n      // On click, fill in the field with the suggestion and remove the hint\n      $email.val($(\".suggestion\").text());\n      $spellingHint.fadeOut(300, function() {\n          $(this).empty();\n      });\n      $(\"#discipline\").focus();\n      $email.change();\n      return false;\n  });\n\n  /**\n   * Matching algorithm for Select2. Used for sector/subsector input box on user signup form.\n   * Taken from https://stackoverflow.com/questions/21992727/display-result-matching-optgroup-using-select2\n   * \n   * @param  {[type]} params [description]\n   * @param  {[type]} data   [description]\n   * @return {[type]}        [description]\n   */\n  function modelMatcher (params, data) {\n    data.parentText = data.parentText || \"\";\n\n    // Always return the object if there is nothing to compare\n    if ($.trim(params.term) === '') {\n      return data;\n    }\n\n    // Do a recursive check for options with children\n    if (data.children && data.children.length > 0) {\n      // Clone the data object if there are children\n      // This is required as we modify the object to remove any non-matches\n      var match = $.extend(true, {}, data);\n\n      // Check each child of the option\n      for (var c = data.children.length - 1; c >= 0; c--) {\n        var child = data.children[c];\n        child.parentText += data.parentText + \" \" + data.text;\n\n        var matches = modelMatcher(params, child);\n\n        // If there wasn't a match, remove the object in the array\n        if (matches == null) {\n          match.children.splice(c, 1);\n        }\n      }\n\n      // If any children matched, return the new object\n      if (match.children.length > 0) {\n        return match;\n      }\n\n      // If there were no matching children, check just the plain object\n      return modelMatcher(params, match);\n    }\n\n    // If the typed-in term matches the text of this term, or the text from any\n    // parent term, then it's a match.\n    var original = (data.parentText + ' ' + data.text).toUpperCase();\n    var term = params.term.toUpperCase();\n\n\n    // Check if the text contains the term\n    if (original.indexOf(term) > -1) {\n      return data;\n    }\n\n    // If it doesn't contain the term, don't return anything\n    return null;\n  }\n\n  $(document).ready(function() {\n      $('#project_sector_sub_select2').select2({\n          maximumSelectionLength: 6,\n          placeholder: '- Type to Search -',\n          matcher: modelMatcher,\n          templateSelection: template\n      });\n      $('#public_status').select2({\n          minimumResultsForSearch: Infinity\n      });\n      $('#discipline').select2();\n      $('#country').select2();\n  });\n\n  // Function to return label values for subsector dropdown box. Adds name of sector in front of subsector\n  function template(data, container) {\n    return data.id.replace(':',' ');\n  }\n\n\n  var errorLabelsFromServer = $('div.errormsg label').filter(function () { // Filter removes any label elements that do not have any text inside them\n      return !!$(this).text();\n      });\n  var errorObjects = []; // Will hold the errors that must be removed from the DOM, and re-added via jQuery Validation\n  errorLabelsFromServer.each(function(index) {\n    var inputName = $(this).parent().prevAll(\"input, select\").attr('name');\n    var errorObject = {};\n    errorObject[inputName] = $(this).text();\n    errorObjects.push(errorObject);\n    $(this).empty();\n  });\n\n  var formToValidate = $('form.form');\n  var validationSettings = {\n        submit: {\n            settings: {\n                errorListClass: 'errormsg'\n            },\n            callback: {\n                // add optional callback here e.g. for error handling\n            }\n        },\n        dynamic: {\n            settings: {\n                trigger: \"focusout\"\n            }\n        }\n    };\n  formToValidate.validate(validationSettings);\n\n  for (var key in errorObjects) {\n    formToValidate.addError(errorObjects[key]);\n  }\n\n  validationSettings.submit.settings.scrollToError = true;\n  formToValidate.validate(validationSettings);\n\n  // jQuery validation doesn't automatically pick up on interaction with Select2. This code listens for the event generated by Select2 when it is opened and manually calls jQuery Validation's remove method\n  $('select').on(\"select2:open\", function (e) { \n      var nameToRemove = $(this).attr('name');\n      formToValidate.removeError(nameToRemove);\n    });\n\n};\n\n/***/ }),\n\n/***/ \"./build/_js/_custom/_signup_pickphoto.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(jQuery) {var $ = __webpack_require__(\"./node_modules/jquery/dist/jquery.js\");\nvar filedrop = __webpack_require__(\"./build/_js/_lib/filedrop.js\");\n// Don't log FileDrop events to console\nfiledrop.logging = false;\n\nvar tipsy = __webpack_require__(\"./build/_js/_lib/jquery.tipsy.js\");\nvar cropper = __webpack_require__(\"./node_modules/cropper/dist/cropper.js\"); // https://github.com/fengyuanchen/cropper\n\nmodule.exports = function() {\n\n    $(function () {\n        'use strict'; \n\n        var uploadUrl = '/signup/photo/upload',\n            removeUrl = '/signup/photo/remove',\n            fileName = '',\n            $imgCrop = $('.crop-wrap > img'),\n            $cropZone = $('.crop-zone'),\n            zone = null,\n            savingImage = false;\n\n        function hasDraggable() {\n            return 'draggable' in document.createElement('span');\n        }\n\n        function fixHeight() {\n            setTimeout(function () {\n                var rotateHeight = $('.cropper-container').height() + 60;\n                $('.crop-here').css({ 'height': rotateHeight});\n            }, 500);\n        }\n\n        function displayError(msg) {\n            $('.error-head').html(msg);\n        }\n\n        function saveCroppedImageResponse(resp) {\n\n            if (resp.status === 'error') {\n                displayError(resp.error);\n            }\n            if (resp.status === 'success') {\n                window.location = '/signup/confirm';\n            }\n        }\n\n        function loadCropper(imageUrl) {\n            $('#zone').removeClass('fd-zone');\n            $('#zone').removeClass('filedrop');\n            $('.fd-file, .drop-meta').hide();\n            $('.crop-controls, .crop-confirm').show();\n            $imgCrop.attr('src', imageUrl).cropper({\n                zoomable: false,\n                modal: true,\n                aspectRatio: 1 / 1,\n                //done: function (data) {}\n            });\n            setTimeout(function () {\n                var aniHeight = $('.cropper-container').height();\n                $('.crop-wrap').css({ 'height': aniHeight});\n            }, 1000);\n        }\n\n        function triggerBasicCropper() {\n            var $cropper = $('#cropper_image'),\n                $crop_wrap = $('.crop-wrap');\n\n            if ($cropper.length) {\n                $crop_wrap.css({ 'opacity': 0 });\n                fileName = $('#cropper_image').attr('src').replace('/images/signup/', '');\n                $().hide();\n                $('.drop-meta').hide();\n                setTimeout(function () {\n                    $('.fd-file').hide();\n                    $crop_wrap.animate({ 'opacity': 1 }, 500);\n                }, 500);\n\n                loadCropper($cropper.attr('src'));\n            }\n        }\n\n        function doBasicUpload() {  \n            $('#basicUpload').show();\n            triggerBasicCropper();\n        }\n\n        function removeImage() {\n            $.post(removeUrl, {})\n                .done(function () {\n                    window.location.reload();\n                })\n                .fail(function () {\n                    displayError('ohh no!');\n                });\n        }\n\n        function saveImage(data, name) {\n\n            if (!savingImage) {\n                savingImage = true;\n                var postData = {\n                    'fd-file': name,\n                    'raw-file': data\n                };\n                $.post(uploadUrl, $.param(postData, true))\n                    .done(function (resp) {\n                        saveCroppedImageResponse(resp);\n                        savingImage = false;\n\n                    })\n                    .fail(function () {\n                        $cropZone.removeClass('disabled');\n                        displayError('There was an error saving the image.');\n                        savingImage = false;\n                    });\n            }\n        }\n\n        function loadFileDrop() {  \n            $('#zone').show();\n\n            // We can deal with iframe uploads using this URL:\n            var options = {\n                iframe: false\n            }; //{url: '/signup/photo/upload', callbackParam: 'fd-callback'}}\n            \n            // 'zone' is an ID but you can also give a DOM node:\n            zone = new filedrop.FileDrop('zone', options);\n            zone.event('send', function (files) {\n\n                files.each(function (file) {\n\n                    displayError('');\n\n                    var fs = Number(file.size / 1024),\n                        fileSize = Number(((fs / 1024) * 100) / 100),\n                        fileName1 = file.name,\n                        fileType = fileName1.replace(/^.*\\./, '').toLowerCase();\n\n                    if (fileType !== 'png' && fileType !== 'jpg' && fileType !== 'gif') {\n                        displayError('Error: File must be a \\'jpg\\', \\'png\\', or \\'gif\\'');\n                    } else if (fileSize > 5) {\n                        displayError('Error: Upload file must be less than 5 MB');\n                    } else {\n                        $('.fd-file').hide();\n                        $('.progress').fadeIn('fast');\n                        file.event('progress', function (current, total) {\n                            var width = current / total * 100 + '%';\n                            filedrop.byID('bar_zone').style.width = width;\n                        });\n                        file.event('done', function (xhr) {\n                            $('.progress').fadeOut('fast', function () {\n                                var resp = jQuery.parseJSON(xhr.responseText);\n                                if (typeof resp.status !== 'undefined' && resp.status === 'success') {\n\n                                    // trigger cropper\n                                    loadCropper(resp.original);\n                                    return;\n                                }\n                                if (typeof resp.status !== 'undefined' && resp.status === 'error') {\n                                    displayError('Error: ' + resp.error);\n                                     $('.fd-file').show();\n                                    return;\n                                }\n\n                                // general error message\n                                displayError('Error: File could not be uploaded');\n                                $('.fd-file').show();\n                            });\n\n                        });\n                        file.sendTo(uploadUrl);\n                    }\n                    file.event('error', function () {\n                        // need better error\n                        //alert('Error uploading ' + this.name + ': ' + xhr.status + ', ' + xhr.statusText);\n                        displayError('Error uploading ' + this.name);\n                        $('.fd-file').show();\n                    });\n\n                });\n            });\n        }\n\n        $cropZone.on('click', '[data-method]', function () {\n\n            var $this = $(this),\n                data = $this.data(),\n                id = $this.attr('id');\n\n            if ($cropZone.hasClass('disabled')) {\n                return false;\n            }\n\n            if (data.method) {\n                $imgCrop.cropper(data.method, data.option);\n                if (data.method === 'rotate') {\n                    fixHeight();\n                }\n\n            }\n\n            if (id === 'saveImage') {\n                var _top = $('.cropper-container').height() / 2;\n                $('.progress').fadeIn('fast').prepend('Saving image please wait.').css({'top':_top}).children().css({'width':'100%'});\n                $cropZone.addClass('disabled');\n                saveImage($imgCrop.cropper('getCroppedCanvas').toDataURL(), fileName);\n            }\n\n            if (id === 'removeImage') {\n                $cropZone.addClass('disabled');\n                removeImage();\n            }\n        });\n\n\n        // function resetUpload() {\n        //     $('.crop-here').css({ 'opacity': 0 });\n        //     $('input.uploaded').off();\n        //     $('input.start-over').off();\n        //     setTimeout(function () {\n        //         $('.crop-here').css({ 'width': '0%', 'height': '0'});\n        //         $('input.input-file').val('Choose Photo');\n        //         $('input.start-over').removeClass('start-over');\n        //         $('input[name=\"next\"]').removeClass('uploaded');\n        //         $('#zone').removeClass('inactive');\n        //     }, 500);\n        // }\n\n\n\n        // Tooltips\n        $('#rotateLeft').tipsy({gravity: 's'});\n        $('#rotateRight').tipsy({gravity: 's'});\n\n        // IE9\n        if ($('html').hasClass('ie9')) {\n            $('#basicUpload input[type=\"file\"]').on('change', function () {\n                $('#upload_photo').fadeIn();\n            });\n        }\n\n        triggerBasicCropper();\n\n        if (hasDraggable()) {\n            loadFileDrop();\n        } else {\n            doBasicUpload();\n        }\n\n    });\n};\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"./node_modules/jquery/dist/jquery.js\")))\n\n/***/ }),\n\n/***/ \"./build/_js/_custom/_trimHTML.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar trimHTML = function(inputHTML, maxChars) {\n\tvar regex = /<\\/?em>/;\n\tvar splitCompany = inputHTML.split(regex);\n\tvar characterCount = 0;\n\tvar insideEm = false;\n\tvar trimmedHTML = '';\n\n\tif (splitCompany[0] === '') {\n\t    insideEm = true;\n\t}\n\n\tsplitCompany.forEach(function(element, index, array) {\n\t  if (element.length === 0) {\n\t  \treturn;\n\t  }\n\t  if (characterCount < maxChars) {\n\t  \tif (insideEm) {\n\t    \ttrimmedHTML += '<em>';\n\t    }\n\t    trimmedHTML += element.substring(0, (maxChars - characterCount));\n\t    if (insideEm) {\n\t    \ttrimmedHTML += '</em>';\n\t    }\n\t    insideEm = !insideEm;\n\t    characterCount += element.length;\n\t    if (characterCount > maxChars) {\n\t    \ttrimmedHTML += '';\n\t    }\n\t  }\n\t});\n\n\treturn trimmedHTML;\n};\n\nmodule.exports = trimHTML;\n\n\n/***/ }),\n\n/***/ \"./build/_js/_custom/_video_lightbox.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar $ = __webpack_require__(\"./node_modules/jquery/dist/jquery.js\");\n\nmodule.exports = function(){\n\n\t// Don't try running magnificPopup if there are no videos on the page\n\tvar videos = $('.play').length > 0;\n\n\tif (videos) {\n\t\t$('.play').magnificPopup({\n\t\t\ttype: 'iframe',\n\t\t\tiframe: {\n\t\t\t\tpatterns: {\n\t\t\t\t    youtube: {\n\t\t\t\t      index: 'youtube.com/', // String that detects type of video (in this case YouTube). Simply via url.indexOf(index).\n\n\t\t\t\t      id: 'v=', // String that splits URL in a two parts, second part should be %id%\n\t\t\t\t      // Or null - full URL will be returned\n\t\t\t\t      // Or a function that should return %id%, for example:\n\t\t\t\t      // id: function(url) { return 'parsed id'; }\n\n\t\t\t\t      src: '//www.youtube.com/embed/%id%?autoplay=1&rel=0&showinfo=0' // URL that will be set as a source for iframe.\n\t\t\t\t    }\n\t\t\t\t},\n\t\t\t\tsrcAction: 'iframe_src'\n\t\t\t}\n\t\t});\n\t}\n\n};\n\n/***/ }),\n\n/***/ \"./build/_js/_custom/main.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(global) {var $ = __webpack_require__(\"./node_modules/jquery/dist/jquery.js\");\n\n$(function() {\n\t\n\t__webpack_require__(\"./build/_js/_custom/_nav_mobile.js\")();\n\n\t__webpack_require__(\"./build/_js/_custom/_searchbox.js\")();\n\n\tvar magnific = __webpack_require__(\"./node_modules/magnific-popup/dist/jquery.magnific-popup.js\");\n\n\t__webpack_require__(\"./build/_js/_custom/_video_lightbox.js\")();\n\n\t// Specifically for the signup edit page\n\tvar onSignupEdit = $(\"form[name='signup_edit']\").length > 0;\n\tif (onSignupEdit) {\n\t\t__webpack_require__(\"./build/_js/_custom/_signup_edit.js\")();\n\t}\n\n\t// Specifically for the signup pickphoto page\n\tvar onSignupPickphoto = $('#zone.signup-info').length > 0;\n\tif (onSignupPickphoto) {\n\t\t__webpack_require__(\"./build/_js/_custom/_signup_pickphoto.js\")();\n\t}\n\n});\n\nglobal.changeLanguage = __webpack_require__(\"./build/_js/_custom/_changeLanguage.js\");\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"./node_modules/webpack/buildin/global.js\")))\n\n/***/ }),\n\n/***/ \"./build/_js/_lib/filedrop.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(jQuery, __webpack_provided_window_dot_jQuery) {var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!\n  FileDrop Revamped - HTML5 & legacy file upload\n  in public domain  | http://filedropjs.org\n  by Proger_XP      | http://proger.me\n\n  Supports IE 6+, FF 3.6+, Chrome 7+, Safari 5+, Opera 11+.\n  Fork & report problems at https://github.com/ProgerXP/FileDrop\n*/\n\n;(function (root, init) {\n  if (true) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports], __WEBPACK_AMD_DEFINE_RESULT__ = function (exports) { init(root, exports) }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__))\n  } else if (typeof exports !== 'undefined') {\n    init(root, exports)\n  } else {\n    init(root, root.fd = root.fd || {})\n  }\n})(this, function (root, global) {\n  /***\n    Global Utility Functions\n   ***/\n\n  // Produces random ID (non necessary unique to anything) with given prefix\n  // or 'fd' if it's not passed.\n  //\n  //? randomID()        //=> 'fd_9854'\n  //? randomID('foo')   //=> 'foo_1582'\n  global.randomID = function (prefix) {\n    return (prefix || 'fd') + '_' + (Math.random() * 10000).toFixed()\n  }\n\n  // Generates random DOM node ID that's unique to this document with given prefix\n  // or 'fd' if it's not passed.\n  //\n  //? randomID()        //=> 'fd_9854'\n  //? randomID('foo')   //=> 'foo_1582'\n  global.uniqueID = function (prefix) {\n    do { var id = global.randomID(prefix) } while (global.byID(id))\n    return id\n  }\n\n  // Retrieves DOM element by its ID attribute or returns id itself if it's\n  // an element.\n  //\n  //? byID('foo')       //=> <p id=\"foo\">\n  //? byID('abracadabra!')  //=> null\n  //? byID({foo: 1})    //=> null\n  //? byID(null)        //=> null\n  //\n  //? byID(document.createElement('p'))\n  //    //=> <p>\n  global.byID = function (id) {\n    return global.isTag(id) ? id : document.getElementById(id)\n  }\n\n  // Checks if given object is a proper DOM node. If tag is passed also\n  // checks if that DOM node is of the same tag (case-insensitive).\n  // Returns true or false.\n  //\n  //? isTag('foo')        //=> false\n  //? isTag({foo: 1})     //=> false\n  //? isTag(null)         //=> false\n  //? isTag(window)       //=> false\n  //? isTag(document.body)          //=> true\n  //? isTag(document.body, 'BoDy')  //=> true\n  //? isTag(document.body, 'head')  //=> false\n  //\n  //? var el = byID('foo')    //=> <p id=\"foo\">\n  //  isTag(el, 'p')    //=> true\n  //  isTag(el, 'P')    //=> true\n  //  isTag(el, 'div')  //=> false\n  //  isTag(el, 'DiV')  //=> false\n  //\n  //? isTag(document.createElement('p'))\n  //    //=> true\n  //\n  //? isTag(document.createElement('p'), 'div')\n  //    //=> false\n  global.isTag = function (element, tag) {\n    return typeof element == 'object' && element && element.nodeType == 1 &&\n           ( !tag || element.tagName.toUpperCase() == tag.toUpperCase() )\n  }\n\n  // Creates new XMLHttpRequest object. Falls back for ActiveX for IE 6.\n  // Throws an exception if couldn't succeed (this shouldn't happen these days).\n  //\n  //? newXHR()    //=> XMLHttpRequest\n  global.newXHR = function () {\n    try {\n      return new XMLHttpRequest\n    } catch (e) {\n      // IE 6.\n      var activex = ['MSXML2.XMLHTTP.6.0', 'MSXML2.XMLHTTP.5.0',\n                     'MSXML2.XMLHTTP.4.0', 'MSXML2.XMLHTTP.3.0',\n                     'MSXML2.XMLHTTP', 'Microsoft.XMLHTTP']\n\n      for (var i = 0; i < activex.length; i++) {\n        try {\n          return new ActiveXObject(activex[i])\n        } catch (e) {}\n      }\n    }\n\n    throw 'Cannot create XMLHttpRequest.'\n  }\n\n  // Checks if given value is a native Array object. Note that jQuery and\n  // other pseudo-arrays are reported as false.\n  //\n  //? isArray([])       //=> true\n  //? isArray([])       //=> true\n  //? isArray(new Array)    //=> true\n  //? isArray({})       //=> false\n  //? isArray('foo')    //=> false\n  //? isArray(null)     //=> false\n  //? isArray($('a'))   //=> false\n  //? isArray(arguments)    //=> false\n  //? isArray($('a').toArray())   //=> true\n  global.isArray = function (value) {\n    return Object.prototype.toString.call(value) === '[object Array]'\n  }\n\n  // Converts passed value into an array. If value is already an array its\n  // copy is returned (so changing value later doesn't affect the returned\n  // clone).\n  //\n  // skipFirst, if given, omits specified number of elements from the start.\n  // Useful for turning arguments into arrays.\n  //\n  //? toArray([])           //=> [] (copy)\n  //? toArray(['foo'])      //=> ['foo'] (copy)\n  //? toArray(['foo'], 1)   //=> []\n  //? toArray(['foo'], 999)   //=> []\n  //? toArray('foo')        //=> ['foo']\n  //? toArray('foo', 1)     //=> []\n  //? toArray('foo', 999)   //=> []\n  //? toArray({foo: 1})     //=> [{foo: 1}]\n  //? toArray({foo: 1}, 1)  //=> []\n  //? toArray(null)         //=> []\n  //? toArray(new Array('foo', 'bar'))      => ['foo', 'bar'] (copy)\n  //? toArray(new Array('foo', 'bar'), 1)   => ['bar']\n  //? toArray(new Array('foo', 'bar'), 2)   => []\n  //\n  //? function showMessage(func, line1, line2, ...) {\n  //    window[func](toArray(arguments, 1).join('\\n'))\n  //  }\n  //\n  //  showMessage('confirm', 'It\\'s first line.', 'Second line.')\n  //    //=> confirm('It\\'s first line.\\nSecond line.')\n  //\n  //  showMessage('alert', 'First', 'Second')\n  //    //=> alert('First\\nSecond')\n  global.toArray = function (value, skipFirst) {\n    if (value === null || typeof value == 'undefined') {\n      return []\n    } else if (!global.isArray(value) && (typeof value != 'object' || !('callee' in value))) {\n      // Made sure it's not 'arguments'.\n      value = [value]\n    }\n\n    return Array.prototype.slice.call(value, skipFirst || 0)\n  }\n\n  // Adds an event listener to a DOM element. Works for old IE as well\n  // as modern W3C-compliant browsers. type is short event name (without\n  // 'on' prefix). Does nothing if any parameter is invalid.\n  // Returns the DOM element itself or whatever was given as this argument.\n  //\n  //? addEvent(byID('p'), 'mousemove', function () { alert('Whoosh!') })\n  //? addEvent(window, 'load', function () { alert('Done loading.') })\n  //\n  //? addEvent(null, 'blur', function () { })   // nothing.\n  //? addEvent(window, null, function () { })   // nothing.\n  //? addEvent(window, 'blur', null)            // nothing.\n  //\n  //? addEvent(window, 'nonstandard', function () { })\n  //      // works.\n  global.addEvent = function (element, type, callback) {\n    if (element && type && callback) {\n      if (element.attachEvent) {\n        element['e' + type + callback] = callback\n        element[type + callback] = function() {\n          element['e' + type + callback](window.event)\n        }\n        element.attachEvent('on' + type, element[type + callback])\n      } else {\n        element.addEventListener(type, callback, false)\n      }\n    }\n\n    return element\n  }\n\n  // Stops propagation and default browser action of an event.\n  // Works for old IE and modern W3C-compliant browsers.\n  //\n  //? byID('p').onmousemove = function (e) { stopEvent(e) }\n  global.stopEvent = function (event) {\n    event.cancelBubble = true\n    event.returnValue = false\n    event.stopPropagation && event.stopPropagation()\n    event.preventDefault && event.preventDefault()\n    return event\n  }\n\n  // Adds or removes HTML class of a DOM element. Keeps old classes.\n  // element can be either ID string or a DOM node.\n  // Returns the element (even if ID was passed) or null if passed value\n  // is neither a string nor a DOM node or if there's no element with\n  // this ID.\n  //\n  //? setClass(byID('p'), 'foo')      //=> <p class=\"... foo\">\n  //? setClass(byID('p'), 'foo', true)  // equivalent to above\n  //? setClass(byID('p'), 'foo', false)   //=> <p class=\"...\"> (no 'foo')\n  //? setClass('anID', 'foo')         //=> <a id=\"anID\" class=\"... foo\">\n  //? setClass('anID', 'foo', false)  //=> <a> without 'foo' class\n  //?\n  global.setClass = function (element, className, append) {\n    if ((element = global.byID(element)) && className != null) {\n      if (typeof append != 'undefined' && !append) {\n        element.className = element.className.replace(global.classRegExp(className), ' ')\n      } else if (!global.hasClass(element, className)) {\n        element.className += ' ' + className\n      }\n    }\n\n    return element\n  }\n\n  // Determines if given element has class attribute containing the className\n  // word. Accepts DOM element or ID string. Returns true or false.\n  // Examples below refer to <p class=\"cls1 cls2\" id=\"anID\">\n  //\n  //? hasClass(byID('anID'), 'cls1')  //=> true\n  //? hasClass('anID', 'cls1')        // equivalent to above\n  //? hasClass('anID', 'cls')         //=> false\n  //? hasClass('anID', 'foo')         //=> false\n  //? hasClass('abra!', 'cls1')       //=> false (no such element)\n  //? hasClass('anID', '')            //=> false (empty class)\n  //? hasClass('anID', null)          //=> false\n  //? hasClass('anID', {foo: 1})      //=> false (not a string)\n  //? hasClass(null, 'foo')           //=> false\n  //? hasClass({foo: 1}, 'foo')       //=> false (not a DOM node)\n  //? hasClass(window, foo)           //=> false\n  global.hasClass = function (element, className) {\n    return global.classRegExp(className).test( (global.byID(element) || {}).className )\n  }\n\n  // Returns a regular expression suitable for testing of HTML class-like\n  // strings to find out if it contains a given word or not (it's not as\n  // simple as a substring match: 'some class' contains words 'some' and\n  // 'class' but not 'som' and 'cl' or 'ame' and 'ass').\n  //\n  // Shouldn't be used for testing multiple words (space-separated) - will\n  // only match if they are in the same position in testing string which\n  // doesn't have to be true: classRegExp('some class') would match\n  // 'this is some class' but won't match 'some of the class'.\n  //\n  // Returns a never matching regexp for bad parameter like object or an\n  // empty string.\n  //\n  //? classRegExp('foo')        //=> RegExp /(^|\\s+)foo(\\s+|$)/ig\n  //? classRegExp('x').test('x y z')  //=> true\n  //? classRegExp('foo bar')    // works but not advised\n  //? classRegExp({foo: 1})     //=> RegExp /$o_O/\n  //? classRegExp(null)         // the same as above\n  //? classRegExp(window)       // the same as above\n  //? classRegExp(null).test('foo')  //=> false (always)\n  global.classRegExp = function (className) {\n    if (className == '' || typeof className == 'object') {\n      return /$o_O/  // never matches.\n    } else {\n      return new RegExp('(^|\\\\s+)' + className + '(\\\\s+|$)', 'gi')\n    }\n  }\n\n  // Copies properties from object base to object child. If overwrite\n  // is passed and true then base's properties will replace those\n  // in child even if child has its own properties of that name.\n  // Note that it doesn't clone child, it's edited in-place.\n  // Also note that defined properties that are 'undefined' on child are\n  // replaced by base's even if overwrite is false (see examples).\n  //\n  // Returns the modified child (first argument).\n  //\n  //? extend({common: 1, child: false}, {common: 'foo', base: true})\n  //    //=> {common: 1, child: false, base: true}\n  //\n  //? extend({common: 1, child: false}, {common: 'foo', base: true}, true)\n  //    //=> {common: 'foo', child: false, base: true}\n  //\n  //? extend({x: undefined}, {x: 1})    //=> {x: 1}\n  //? extend({x: null}, {x: 1})         //=> {x: null}\n  //\n  //? var child = {y: 1}\n  //  extend(child, {x: 1}) === child   //=> true (same object)\n  //  console.dir(child)    //=> {y: 1, x: 1}\n  global.extend = function (child, base, overwrite) {\n    child = child || {}\n    base = base || {}\n\n    for (var prop in base) {\n      if (overwrite || typeof child[prop] == 'undefined') {\n        child[prop] = base[prop]\n      }\n    }\n\n    return child\n  }\n\n  /***\n    Event Manipulation Functions\n   ***/\n\n  // Calls every handler of the passed callback list with given arguments\n  // and in context of obj or 'this' if it's omitted.\n  //\n  // list can be undefined, a single function or an array (non-function members\n  // are skipped). Throws exception if list is something else.\n  // args is converted to array with toArray() so it can be a single value,\n  // an arguments object or something else - see that function for info.\n  //\n  // Returns result of the last called function. If any function returns\n  // a non-null and non-undefined value all following handlers are skipped.\n  //\n  //? callAll(function (a) { return a + 'foo' }, 'arg1')\n  //    //=> 'arg1foo'\n  //? callAll([ function () { } ], ['arg1'])\n  //    // equivalent to above\n  //\n  //? var list = [function (a) { return a[0] == 'a' ? a + 'foo' : null },\n  //              function (a) { alert(a) }]\n  //  callAll(list, 'arg1')   //=> 'arg1foo' (first handler)\n  //  callAll(list, 'foo')    //=> alert('foo') (second handler)\n  //\n  //? callAll(function () { alert(this.x) }, [], {x: 'foo'})\n  //    //=> alert('foo')\n  //\n  //? callAll(function () { alert(this.x) }).call({x: 'foo'})\n  //    // equivalent to above\n  //\n  //? window.onload = function () {\n  //    callAll([...], arguments, window)\n  //      // equivalent to callAll([...], toArray(arguments), window)\n  //  }\n  global.callAll = function (list, args, obj) {\n    var res\n    args = global.toArray(args)\n    typeof list == 'function' && (list = [list])\n\n    if (global.isArray(list)) {\n      for (var i = 0; i < list.length; i++) {\n        if (typeof list[i] == 'function') {\n          res = list[i].apply(obj || this, args)\n          if (res != null) { break }\n        }\n      }\n    } else if (list) {\n      throw 'FileDrop event list must be either an Array, Function, undefined or' +\n            ' null but ' + (typeof list) + ' was given.'\n    }\n\n    return res\n  }\n\n  // Calls event handlers attached on given FileDrop object to passed\n  // event name with arguments. Hands off most work to callAll().\n  // obj is an object with the 'events' property (object with keys = event\n  // names and values = arrays of functions).\n  //\n  // Before calling handlers of obj looks if global configuration has\n  // a preview handler specified - if it does then calls that handler\n  // and if it returns non-null and non-undefined value doesn't call\n  // obj's handlers but returns that value immediately. After the global\n  // preview function it checks for object-wise preview - its 'any' event\n  // handlers which are treated likewise.\n  // Preview functions are called with event name pushed in front of\n  // the other event args.\n  //\n  //? var obj = {events: { foo: [function (a) { alert(a); return true }] }}\n  //  callAllOfObject(obj, 'foo', 'arg1')   //=> true after alert('arg1')\n  //\n  //? window.fd.onObjectCall = function (e) { alert(e + ': tee hee'); return false }\n  //  var obj = ...   // as above\n  //  callAllOfObject(obj, 'foo', 'arg1')   //=> false after alert('foo: tee hee')\n  //\n  //? var obj = {events: { any: [function (e) { return false }] }}\n  //  callAllOfObject(obj, 'anyevent')\n  //    // because of the object-wise preview handler that returns false\n  //    // any event we call will return false bypassing its actual handlers.\n  global.callAllOfObject = function (obj, event, args) {\n    if (global.logging && global.hasConsole) {\n      var handlers = obj.events[event] ? obj.events[event].length || 0 : 0\n      console.info('FileDrop ' + event + ' event (' + handlers + ') args:')\n      console.dir([args])\n    }\n\n    var preview = [global.onObjectCall].concat(obj.events.any)\n    var res = global.callAll(preview, [event].concat(global.toArray(args)), obj)\n    return res != null ? res : global.callAll(obj.events[event], args, obj)\n  }\n\n  // Appends event listeners to given object with 'events' property according\n  // to passed parameters. See DropHandle.event() for details.\n  // 'this' must be set to the object which events are updated.\n  global.appendEventsToObject = function (events, funcs) {\n    if (global.addEventsToObject(this, false, arguments)) {\n      return this\n    }\n\n    switch (arguments.length) {\n    case 0:\n      return global.extend({}, this.events)\n\n    case 1:\n      if (events === null) {\n        this.events = {}\n        return this\n      } else if (global.isArray(events)) {\n        var res = {}\n\n        for (var i = 0; i < events.length; i++) {\n          res[events[i]] = global.toArray(this.events[events[i]])\n        }\n\n        return res\n      } else if (typeof events == 'function') {\n        return global.funcNS(events)\n      } else if (typeof events == 'string') {\n        return global.toArray(this.events[events])\n      }\n\n    case 2:\n      events = global.toArray(events)\n\n      if (funcs === null) {\n        for (var i = 0; i < events.length; i++) {\n          var ns = global.splitNS(events[i])\n\n          if (!ns[0]) {\n            for (var event in this.events) {\n              arguments.callee.call(this, [event + ':' + ns[1]], null)\n            }\n          } else if (!ns[1]) {\n            this.events[ns[0]] = []\n          } else if (this.events[ns[0]]) {\n            for (var fi = this.events[ns[0]].length - 1; fi >= 0; fi--) {\n              if (global.funcNS( this.events[ns[0]][fi] ) == ns[1]) {\n                this.events[ns[0]].splice(fi, 1)\n              }\n            }\n          }\n        }\n\n        return this\n      }\n    }\n\n    throw 'Bad parameters for FileDrop event().'\n  }\n\n  // Prepends event listeners to given object with 'events' property according\n  // to passed parameters. See DropHandle.event() for details.\n  // 'this' must be set to the object which events are updated.\n  global.previewToObject = function (events, funcs) {\n    if (global.addEventsToObject(this, true, arguments)) {\n      return this\n    } else {\n      throw 'Bad parameters for FileDrop preview().'\n    }\n  }\n\n  // Adds event listeners to given object with 'events' property according\n  // to passed parameters. See DropHandle.event() for details.\n  // Returns nothing if couldn't handle given parameter combination.\n  global.addEventsToObject = function (obj, prepend, args) {\n    var events = args[0]\n    var funcs = args[1]\n\n    switch (args.length) {\n    case 1:\n      if (events && typeof events == 'object' && !global.isArray(events)) {\n        for (var event in events) {\n          arguments.callee(obj, prepend, [event, events[event]])\n        }\n\n        return true\n      }\n\n    case 2:\n      if (typeof funcs == 'function' || global.isArray(funcs)) {\n        events = global.toArray(events)\n        funcs = global.toArray(funcs)\n        var pusher = prepend ? 'unshift' : 'push'\n\n        for (var i = 0; i < events.length; i++) {\n          var ns = global.splitNS(events[i])\n          for (var fi = 0; fi < funcs.length; fi++) {\n            global.funcNS(funcs[fi], ns[1])\n          }\n\n          obj.events[ns[0]] = obj.events[ns[0]] || []\n          obj.events[ns[0]][pusher].apply(obj.events[ns[0]], funcs)\n        }\n\n        return true\n      }\n    }\n  }\n\n  // Adds namespace identifier to a Function object. Used when labeling event\n  // listeners in DropHandle.event(). If given just one parameter reads\n  // attached namespace, if present.\n  //\n  //? funcNS(function () { }, 'foo')\n  //? funcNS(function () { })   //=> 'foo'\n  global.funcNS = function (func, ns) {\n    if (typeof func != 'function') {\n      return func\n    } else if (arguments.length == 1) {\n      return (func[global.nsProp] || '').toString()\n    } else {\n      func[global.nsProp] = (ns || '').toString()\n      return func\n    }\n  }\n\n  // Extracts namespace identifier from the string. Uses jQuery notation:\n  // 'event:namespace'. Both parts can be empty. If colon is omitted returns\n  // '' instead of namespace.\n  // Returns array with two items - event name (or other prefix) and namespace.\n  //\n  //? splitNS('')       //=> ['', '']\n  //? splitNS(null)     // identical to above\n  //? splitNS(':')      // identical to above\n  //? splitNS('x:')     //=> ['x', '']\n  //? splitNS(':y')     //=> ['', 'y']\n  //? splitNS('x:y')    //=> ['x', 'y']\n  //? splitNS('x:y:z')  //=> ['x', 'y:z']\n  global.splitNS = function (str) {\n    return (str || '').match(/^([^:]*):?(.*)$/).slice(1)\n  }\n\n  /***\n    Global Configuration\n   ***/\n\n  global.extend(global, {\n    // If set all event calls will be logged to console if one is present.\n    logging: true,\n\n    // Indicates if console.log and console.dir are available for usage.\n    hasConsole: 'console' in window && console.log && console.dir,\n\n    // If set must be a function that's called on every event being fired.\n    // See how it works in callAllOfObject().\n    onObjectCall: null,\n\n    // All DropHandle objects that were instantinated on this page.\n    // Note that these are not FileDrop instances as not all DropHandles\n    // might be part of FileDrops. Use DropHandle.filedrop property.\n    all: [],\n\n    // Tests for IE versions, must be true for 6-7/9 and below and\n    // false for any other version/browser.\n    // IE 6 on XP SP 3 gives JScript version 5.7 while IE 8 - 5.8.\n    // IE 9 on Win7 gives 9.\n    isIE6: /*@cc_on/*@if(@_jscript_version<=5.7)true@else@*/false/*@end@*/,\n    isIE9: /*@cc_on/*@if(@_jscript_version<=9)true@else@*/false/*@end@*/,\n\n    // Test for Google Chrome. This isn't used to determine available\n    // File API but only to work around certain event glitches.\n    isChrome: (navigator.vendor || '').indexOf('Google') != -1,\n\n    // Name of Function object property where event namespace is stored.\n    // See funcNS(), splitNS(), DropHandle.event().\n    nsProp: '_fdns'\n  })\n\n  /***\n    Basic Drop Handle Class\n   ***\n\n    Has some file upload functionality (mostly legacy <iframe>) but is mainly\n    used to handle all drag & drop operations in a cross-browser way.\n    You can use it as a basis for your own component.\n    Main FileDrop class extends it and listens for produced drop events.\n   ***/\n\n  // Parameters:\n  // * zone - ID or DOM element which accepts drag & drop. This is often a\n  //          <fieldset>. If such element doesn't exist an exception is thrown\n  //          when trying to create the class. DropHandle will add some children\n  //          to this element to facilitate external drop events. Once created this\n  //          element is accessible as (new DropHandle(...)).el property.\n  //\n  // * opt -  object, key/value pairs of options. See the code for the list of\n  //          keys and their purpose. Can be omitted or empty to use defaults.\n  //          Current option values are accessible as the opt property.\n  //\n  //? new fd.DropHandle('anID')\n  //? new fd.DropHandle(document.body, {zoneClass: 'with-filedrop'})\n  global.DropHandle = function (zone, opt) {\n    // Persistent 'this' instance reference.\n    var self = this\n\n    self.el = zone = global.byID(zone)\n    if (!zone) { throw 'Cannot locate DOM node given to new FileDrop class.' }\n\n    /***\n      DropHandle Options\n     ***\n\n      Changing these on runtime after the class was created doesn't affect\n      anything so make sure to pass desired values to the constructor.\n     ***/\n\n    self.opt = {\n      // The zone element gets this HTML class appended immediately after\n      // the DropHandle object is created.\n      zoneClass: 'fd-zone',\n\n      // DropHandle creates a hidden form and <input type=\"file\">. The input\n      // is completely transparent so the contents underneath is visible\n      // but at the same time a dropped object lands on the input triggering\n      // its DOM events. This option specifies the class name assigned\n      // to this input.\n      inputClass: 'fd-file',\n\n      // Options for fallback upload via <iframe> for browsers lacking\n      // native drag & drop support - IE and others.\n      iframe: {\n        // URL to send uploaded file to. It's a regular form upload with\n        // enctype=\"multipart/form-data\" so if you're using PHP it's handled\n        // with $_FILES as usual. The URL can have query string. It will have\n        // the 'fd-callback' parameter appended containing the name of\n        // function your server script must call when generating JavaScript\n        // output - if it does the upload succeeds, otherwise it \"fails\".\n        // Calling external function is the only reliable way to know that\n        // we've uploaded the file right. Plus you can pass any data to\n        // that function as its parameters.\n        // For the practical server-side example see included upload.php.\n        //\n        // If unset <iframe> upload is disabled so only drag & drop-aware\n        // browsers (Firefox and Crhome-based) will handle this drop zone.\n        url: '',\n\n        // Name of GET input variable containing the name of the global window\n        // callback function to be called by the server in the generated\n        // page after uploading a file via <iframe>.\n        callbackParam: 'fd-callback',\n\n        // Name of POST file input variable (<input type=\"file\" name=\"$nameParam\">).\n        // Maps to $_FILE[] in PHP.\n        fileParam: 'fd-file'\n      },\n\n      // Contains DOM nodes of fallback upload via <iframe>. If null necessary\n      // elements for <iframe> upload will be created automatically.\n      //\n      // If this is false (boolean) then DropHandle creates no input at all.\n      // This is useful if you need pure drag & drop upload that works in\n      // Firefox and Chrome-based browsers, no <iframe> uploads for IE 9-,\n      // Opera, Safari and others. This creates \"perfect\" drop zone that\n      // doesn't prevent user interaction with underlying components so the\n      // zone can be extended onto large document area or the entire window.\n      input: null,\n\n      // After construction opt.input's structure is as follows: {\n        // If unset DropHandle will first recursively look for <input type=\"file\">\n        // among the children of the zone element and having opt.inputClass among\n        // its HTML classes. If found no new element will be created. This makes it\n        // safe to create multiple DropHandle objects for the same zone handle (not\n        // tested though).\n        //\n        // If unset but no suitable node would be found (see above) then DropHandle\n        // creates the input automatically along with the form which is usually\n        // exactly what you need.\n        //file: null,\n\n        // This value is set to match the parent form of <input type=\"file\">.\n        // Changing it isn't recommended.\n        //form: null\n      //},\n\n      // If using <input type=\"file\"> (legacy <iframe> upload, see input option)\n      // some browsers including IE 6-10 and Opera will keep last selected file\n      // in the input after upload which will prevent the user from uploading\n      // the same file twice in a row (this doesn't apply to drag & drop uploads).\n      // When enabled, this option will let FileDrop recreate the file input\n      // thus resetting file selection. This is safe in most cases but if your\n      // project does some extra customization on opt.input.file this might erase\n      // them and attached events unless you are doing that in inputSetup event.\n      // When disabled, input will be cleared in Firefox/Chrome thus preventing\n      // user from reuploading the same file one after another in other browsers.\n      recreateInput: true,\n\n      // Chrome, unlike Firefox, dispatches drag events for the entire document\n      // rather than the input element. For Chrome this option is always true.\n      // If you want the same behaviout in Firefox then you can manually set\n      // it to true to let all of your drop zones receive drag events as soon\n      // as they enter the browser's window but not those zones' boundaries.\n      // Note that drop events (when user releases the mouse button) are always\n      // dispatched to drop zone under the mouse pointer, if there's any.\n      // This only makes drag (hover) events fire for all zones regardless of\n      // the pointer position.\n      fullDocDragDetect: false,\n\n      // Initial state of the multiple selection in browser's Open File dialog\n      // appearing when clickin on the drop zone (<input type=\"file\">).\n      // After this object was created toggle this setting with this.multiple().\n      multiple: false,\n\n      // Cursor displayed when a user drags an object over this drop zone.\n      // Working values depend on the browser. 'copy' and 'none' work for\n      // Firefox and Chrome; the latter also supports 'move', 'link'.\n      // Setting to 'none' will cause \"No Drop\" cursor and will cause drop\n      // operation to be ignored on this drop zone (on-drop event not fired).\n      // This option can be set on runtime.\n      dropEffect: 'copy'\n    }\n\n    // Keeping track of all DropHandle instances.\n    global.all.push(self)\n    // If this DropHandle was created by a FileDrop instance this property\n    // will point to that instance.\n    self.filedrop = null\n\n    var iframe = self.opt.iframe\n    global.extend(self.opt, opt, true)\n    // In case user options contained {iframe} without full set of properties.\n    global.extend(self.opt.iframe, iframe)\n\n    // Chrome dispatches drop events document-wise rather than zone-wise.\n    // If unset we won't receive any reaction on individual elements.\n    global.isChrome && (self.opt.fullDocDragDetect = true)\n\n    /***\n      DropHandle Events\n     ***\n\n      Attach new listeners with (new DropHandle).event('dragEnter', function ...).\n      As a low-level alternative you can change/move items around this array\n      directly but it's not future-proof.\n\n      Note that all callbacks are executed with 'this' pointing to this\n      object so it's easy to know which DropHandle has caused that particular\n      event. For example:\n\n        var dh = new DropHandle('myzone')\n        dh.event('dragEnter', function () {\n          alert('Entering the ' + this.el.id + ' drop zone!')\n        })\n     ***/\n\n    self.events = {\n      // Object-wise event preview handlers. They get executed on any event\n      // of this object (like dragEnter) and if any of them returns a non-null\n      // and non-undefined value actual event handlers are not called and\n      // that value is returned. These callbacks receive the same arguments\n      // as the target event plus that event's name in front.\n      // See callAllOfObject() for more details.\n      any: [],\n\n      // Occurs when a user drags something across this zone element (Firefox)\n      // or across the entire browser window (Chrome or if opt.fullDocDragDetect\n      // is set).\n      //\n      // function (eventObject)\n      dragEnter: [],\n\n      // Occurs when user drags the object away from the zone element (Firefox)\n      // or outside of the window (Chrome or opt.fullDocDragDetect).\n      //\n      // function (eventObject)\n      dragLeave: [],\n\n      // Occurs periodically after dragEnter while user is still dragging an\n      // object inside the drop zone. If not using DropHandle be aware that\n      // Chrome requires a listener attached to ondragover or it will discard\n      // the drop operation. DropHandle takes care of this for you.\n      //\n      // function (eventObject)\n      dragOver: [],\n\n      // The following 2 events are somewhat superficient and not really useful\n      // or working but they're still listened to in case you need to hook them.\n      //\n      // function (eventObject)\n      dragEnd: [],\n      dragExit: [],\n\n      // Occurs when a file has been dropped on the zone element or when a file\n      // was selected in/dropped onto fallback <form> to trigger <iframe> upload.\n      // The former occurs in Firefox and Chrome-based browsers that support\n      // drag & drop natively. The latter occurs in Opera and others that only\n      // work with regular form file uploads.\n      //\n      // function (eventObject)\n      //    - is passed native browser-dependent event object.\n      upload: [],\n\n      // Occurs when another DropHandle object on the page initiates upload\n      // event. Can be used to reset some visual state of all drop zones but\n      // the one that's actually got the file landed.\n      //\n      // function (DropHandle)\n      //    - is passed another DropHandle object that has initiated the\n      //      upload event.\n      uploadElsewhere: [],\n\n      // Occurs after <input type=\"file\"> used to accept file drops was created\n      // or found (see the description of the 'input' option). Here it's used to\n      // assign it some HTML classes. You can do similar setup.\n      // Is also fired after recreating file input on upload if opt.recreateInput\n      // is set - in this case is passed old <input type=\"file\"> (that was cloned).\n      //\n      // function ({ file: DOM_Input, form: DOM_Form }, oldFileInput)\n      //    - is passed an object with the same keys as 'input' option -\n      //      the DOM element of the <input type=\"file\"> and its parent\n      //      <form> DOM element.\n      inputSetup: [],\n\n      // Occurs when a fallback <iframe> element was created. Can be used for\n      // setup actions similar to inputSetup.\n      //\n      // function (DOM_Iframe)\n      //    - is passed the DOM element of the new <iframe>.\n      iframeSetup: [],\n\n      // Occurs when a file was successfully uploaded to the server, i.e.\n      // when the form was submitted and the server has returned the output\n      // that calls 'fd-callback' function to indicate successful (or unsuccessful)\n      // upload to the client page. See the 'iframe' option and included upload.php\n      // for samples and explanations.\n      //\n      // function (response)\n      //    - is passed the same data as given by the server-generated JavaScript\n      //      to the global 'fd-callback'. Note that it's the first argument to\n      //      that function, all others are ignored.\n      //      This object will mimic some of XMLHttpRequest properties so you\n      //      can use single handler for both XHR and <iframe> uploads - see\n      //      sendViaIFrame() for details.\n      iframeDone: []\n    }\n\n    // Old FireDrop compatibility. Now deprecated.\n    self.on = self.events\n    self.zone = self.el\n\n    /***\n      DropHandle Methods\n     ***/\n\n    // Prepares target DOM element for drag & drop and <iframe> uploads by\n    // adding more child nodes and listening to appropriate events.\n    // Usually you don't need to call this function since it's automatically\n    // called for the zone element (given to the constructor).\n    //\n    //? hook(byID('myzone'))\n    self.hook = function (zoneNode) {\n      // If <input type=\"file\"> support was turned off then we're not aiming\n      // for the support of uploads without File API, i.e. via <iframe> for\n      // all but Firefox and Chrome. If such we're not creating the form and\n      // other supportive elements.\n      if (self.opt.input != false) {\n        self.opt.input = self.opt.input || self.prepareInput(zoneNode)\n        self.opt.input && global.callAllOfObject(self, 'inputSetup', self.opt.input)\n      }\n\n      self.hookDragOn(zoneNode)\n      self.hookDropOn(zoneNode)\n    }\n\n    // Attaches listeners for drag events - when an object is moved in or out\n    // the scope of the zone element (or document for Chrome). This provides\n    // common layer for various browser-specific ways to utilize drag* events.\n    // Once a suitable event occurs DropHandle's own event callbacks are invoked.\n    self.hookDragOn = function (zoneNode) {\n      // With dragenter we detect when user moves object over our zone or\n      // document window to display some feedback.\n      //\n      // With dragleave we do the opposite and restore previous component state\n      // when an object is being moved away or drag & drop is cancelled.\n\n      if (self.opt.fullDocDragDetect) {\n        self.delegate(document.body, 'dragEnter')\n\n        global.addEvent(document, 'dragleave', function (e) {\n          // Chrome (at least in earlier versions) fires dragleave randomly,\n          // this is used to normalize it to just one real occurrence.\n          if ((e.clientX == 0 && e.clientY == 0) || global.isTag(e.relatedTarget, 'html')) {\n            global.stopEvent(e)\n            global.callAllOfObject(self, 'dragLeave', e)\n          }\n        })\n      } else {\n        self.delegate(zoneNode, 'dragEnter')\n        self.delegate(zoneNode, 'dragLeave')\n      }\n\n      self.delegate(zoneNode, 'dragOver')\n      self.delegate(zoneNode, 'dragEnd')    // doesn't work anywhere; unused by FileDrop.\n      self.delegate(zoneNode, 'dragExit')   // works in Firefox; unused by FileDrop.\n    }\n\n    // Attaches listeners to drop events. Just like hookDragOn provides\n    // common browser-independent ground by normalizing occurred events\n    // and calling DropHandle's own event handlers.\n    self.hookDropOn = function (zoneNode) {\n      // IE 6-9 fire 'drop' event if you drop a file onto a file input. However,\n      // if the form is submitted after this event IE will send empty POST body\n      // instead of the actual file data. So handling of this event is disabled here\n      // although technically it could've worked since IE 6 if not for that bug (?).\n      //\n      // Firefox and Chrome-based browsers are the only ones supporting this\n      // event which we use to read dropped file data in the FileDrop class.\n      global.isIE9 || self.delegate(zoneNode, 'drop', 'upload')\n    }\n\n    // Listens for DOM events and initiates corresponding DropHandle's events.\n    // Third argument can specify DropHandle's event name if it differs from\n    // the DOM event. Propagation of caught events is stopped.\n    //\n    //? delegate(byID('myzone'), 'dragleave')\n    //? delegate(byID('myzone'), 'drop', 'upload')\n    self.delegate = function (zoneNode, domEvent, selfEvent) {\n      global.addEvent(zoneNode, domEvent.toLowerCase(), function (e) {\n        global.stopEvent(e)\n        global.callAllOfObject(self, selfEvent || domEvent, e)\n      })\n    }\n\n    // Finds or creates <input type=\"file\"> used to facilitate non-drag & drop\n    // uploads for browsers othat than Firefox and Chrome-based.\n    // Returns that input's DOM element and its parent <form> or, if none,\n    // throws an exception since there's no meaning in having <input type=\"file\">\n    // and no <form> as both are only reuqired for fallback <iframe> upload.\n    // This result is assigned to 'input' option.\n    self.prepareInput = function (parent) {\n      var file = self.findInputRecursive(parent) || self.createInputAt(parent)\n\n      if (file) {\n        var form = file.parentNode\n        while (form && !global.isTag(form, 'form')) {\n          form = form.parentNode\n        }\n\n        if (!form) { throw 'FileDrop file input has no parent form element.' }\n\n        // See if the located form has proper target and if that target\n        // (supposedly <iframe>) really exists - we don't want to reload\n        // the entire document on file upload since it defeats the purpose\n        // of AJAX and is probably an error condition.\n        var target = form ? form.getAttribute('target') : ''\n\n        if (target && global.isTag(global.byID(target), 'iframe')) {\n          // Once here it means the setup is good to go. Return with success.\n          return {file: file, form: form}\n        }\n      }\n\n      // Similarly to opt.input == false this means there's input/form found\n      // so turn off <iframe> upload or create our own elements.\n      return false\n    }\n\n    // Searches for <input type=\"file\"> containing HTML class opt.inputClass\n    // among the children of parent. Is used to autodetect pre-created input\n    // of a drop zone. parent must be a DOM element.\n    // Returns DOM element or null.\n    //\n    //? // <form id=\"myzone\"><input type=\"file\" class=\"fd-input\"></form>\n    //  findInputRecursive(byID('myzone'))\n    //    //=> <input type=\"file\" class=\"fd-input\">\n    //\n    //? findInputRecursive(byID('foo'))   //=> null\n    self.findInputRecursive = function (parent) {\n      for (var i = 0; i < parent.childNodes.length; i++) {\n        var node = parent.childNodes[i]\n\n        if (global.isTag(node, 'input') && node.getAttribute('type') == 'file' &&\n            global.hasClass(node, self.opt.inputClass)) {\n          return node\n        } else if (node = arguments.callee(node)) {\n          return node\n        }\n      }\n    }\n\n    // Creates elements necessary for <iframe> upload to work - the input,\n    // form and iframe itself. A random unique ID is generated and assigned to\n    // the iframe, plus new form's target attribute. Once <input type=\"file\">\n    // gets clicked (and file chosen in the appeared dialog) or once it gets\n    // a file dropped onto (supported by some browsers) its onchange event\n    // occurs which we're intercepting in hookDropOn(). With that we trigger\n    // <form> submission which sends data to our hidden <iframe>. Just like\n    // old times.\n    //\n    // Returns the DOM element of (new) <input type=\"file\">.\n    self.createInputAt = function (parent) {\n      do { var id = global.randomID() } while (global.byID(id))\n\n      var cont = document.createElement('div')\n      // <iframe> code and several other things around are courtesy of\n      // QQ File Uploader (https://github.com/valums/file-uploader).\n      cont.innerHTML = '<iframe src=\"javascript:false\" name=\"' + id + '\"></iframe>' +\n                       '<form method=\"post\" enctype=\"multipart/form-data\">' +\n                         '<input type=\"hidden\" name=\"' + self.opt.iframe.callbackParam + '\" />' +\n                         '<input type=\"file\" name=\"' + self.opt.iframe.fileParam + '\" />' +\n                       '</form>'\n\n      // <iframe>.\n      cont.firstChild.setAttribute('id', id)\n      cont.firstChild.style.display = 'none'\n      // <form>.\n      cont.lastChild.setAttribute('target', id)\n\n      var nextChild = parent.firstChild\n      // Opera doesn't recognize <legend> and doesn't put it on top of the fieldset\n      // unless it's the first child. For this we skip over <legend> which can\n      // happen if parent is a <fieldset>.\n      while (nextChild && (!global.isTag(nextChild) || global.isTag(nextChild, 'legend'))) {\n        nextChild = nextChild.nextSibling\n      }\n\n      // Now put our controls as first child so they overlap the contents and\n      // <input type=\"file\"> can be clicked or dropped onto to fire the events.\n      if (nextChild) {\n        // Firefox 10 requires that immediate parent has position: relative for\n        // overflow: hidden to work on the input this in turn requires that the\n        // parent is the first child, otherwise top: 0 of the file input won't work.\n        parent.insertBefore(cont, nextChild)\n      } else {\n        // parent has no children or it's just <legend> - append controls to the end.\n        parent.appendChild(cont)\n      }\n\n      // The file input.\n      return cont.lastChild.lastChild\n    }\n\n    // Can be used to abort <iframe> upload. Isn't guaranteed to work since\n    // it's unreliable and highly browser-dependent (especially IE) but at\n    // least it might work. Does nothing if this DropHandle doesn't use\n    // <iframe> upload (see the input option).\n    self.abortIFrame = function () {\n      if (self.opt.input.form) {\n        var iframe = global.byID(self.opt.input.form.getAttribute('target'))\n        iframe && iframe.setAttribute('src', 'javascript:false')\n      }\n    }\n\n    // Sends the data via <iframe> as a fallback for proper File API AJAX upload.\n    // If url is omitted iframe.url option is used. See its description for more\n    // info. Does nothing if this DropHandle doesn't use <iframe> upload (see\n    // the input option). FileDrop class calls this automatically if an upload\n    // was triggered by an unsupported browser (neither Firefox nor Chrome-based).\n    //\n    // Unlike FileAPI events that let you decide what to do with the file - read,\n    // upload or descrad it - <iframe> upload is an imitation that simply submits\n    // the form as logn as <input type=\"file\"> was changed according to onchange\n    // event. There's no way to make sure it was populated or retrieve any info\n    // about the file - this can only be done by the server which may return\n    // something useful in response. For this reason DropHandle automatically\n    // facilitates the upload and offers only one 'iframeDone' event when all\n    // went fine.\n    //\n    // Returns true if upload was sent (but no guarantees about its success,\n    // use 'iframeDone' event for this purpose).\n    //\n    //? sendViaIFrame('http://my.host/upload.php?var=foo&var2=123')\n    //? sendViaIFrame()   // uses opt.iframe.url\n    self.sendViaIFrame = function (url) {\n      url = url || self.opt.iframe.url\n      var form = (self.opt.input || {}).form\n\n      if (url && form) {\n        do { var callback = global.randomID() } while (callback in window)\n\n        // This function is meant for calling by the code generated by the\n        // server-side script to which we've sent the file via the <form>.\n        // callback is that function's globally unique name (window-wise).\n        window[callback] = function (resp) {\n          // If server didn't pass a JS object let's mimic XMLHttpRequest\n          // and put that response data there.\n          if (typeof resp != 'object') {\n            resp = {\n              response: resp,\n              responseXML: '',\n              responseText: (resp || '').toString(),\n              readyState: 4,\n              status: 200,\n              statusText: 'OK',\n              // A bunch of XMLHttpRequest/jqXHR stub methods.\n              getAllResponseHeaders: function () { return '' },\n              getResponseHeader: function () { return '' },\n              setRequestHeader: function () { return this },\n              statusCode: function () { return this },\n              abort: function () { return this }\n            }\n          }\n\n          // These are extra properties given to event handlers so they\n          // can differentiate between AJAX upload and <iframe> fallback.\n          // Note that if properties with these names are already present\n          // in response they won't be overwritten.\n          global.extend(resp, {\n            // Just an indicator that it's an upload via <iframe>.\n            iframe: true,\n            // This URL contains full URL to which the data was sent (usually\n            // opt.iframe.url) that might include 'fd-callback' parameter.\n            url: url\n          })\n\n          global.callAllOfObject(self, 'iframeDone', resp)\n        }\n\n        // Setting the hidden input with the callback name to our newly generated name.\n        var cbInput = form.firstChild\n        while (cbInput && (!global.isTag(cbInput, 'input') ||\n               cbInput.name != self.opt.iframe.callbackParam)) {\n          cbInput = cbInput.nextSibling\n        }\n\n        if (cbInput) {\n          cbInput.value = callback\n        } else {\n          // This shouldn't happen with standard usage but if the hidden field\n          // is missing let's append callback name to the URL itself.\n          url = url.replace(/[?&]+$/, '') +\n                (url.indexOf('?') == -1 ? '?' : '&') +\n                self.opt.iframe.callbackParam + '=' + callback\n        }\n\n        form.setAttribute('action', url)\n        global.callAllOfObject(self, 'iframeSetup', form)\n        form.submit()\n        setTimeout(self.resetForm, 300)\n\n        return true\n      }\n    }\n\n    // Clears value of the file input so that the same file (with the same\n    // local path) can be uploaded again without reloading the page.\n    // Thanks to @rafaelmaiolla for the tips.\n    self.resetForm = function () {\n      var input = self.opt.input && self.opt.input.file\n      if (input) {\n        // Works in Firefox/Chrome only. Funny fact is that cloneNode() there\n        // will clone file selection too. IE doesn't support value = '' but\n        // node cloning erases it.\n        input.value = ''\n\n        if (self.opt.recreateInput) {\n          var clone = self.opt.input.file = input.cloneNode(true)\n          input.parentNode.replaceChild(clone, input)\n          global.callAllOfObject(self, 'inputSetup', [self.opt.input, input])\n        }\n      }\n    }\n\n    // Toggles selection of multiple files in the browser's open file dialog\n    // that appears when you click on <input type=\"file\">. Does nothing if\n    // this DropHandle doesn't use <iframe> upload (see the input option).\n    //\n    // If an argument is given it's used to set the new state. If no arguments\n    // are passed then current state is read.\n    //\n    // When doing initial setup on object construction you can pass {multiple: true}\n    // as an option instead of calling this method right after.\n    //\n    //? multiple(true)    //=> true; multiple file selection is possible\n    //? multiple(false)   //=> false; only one file can be selected\n    //? multiple()        //=> true if multiple selection is enabled or false otherwise\n    //? multiple(undefined)   // equivalent to above\n    self.multiple = function (enable) {\n      if (self.opt.input && typeof enable != 'undefined') {\n        enable ? self.opt.input.file.setAttribute('multiple', 'multiple')\n               : self.opt.input.file.removeAttribute('multiple')\n      }\n\n      return self.opt.input && !!self.opt.input.file.getAttribute('multiple')\n    }\n\n    // Function to manipulate events that correspond to DropHandle's events - not\n    // DOM node events. If you need to listen to them instead then use this:\n    //   addEvent(yourDropHandle.el, 'mousemove', function ...)\n    // Or any other standard way, e.g. with jQuery:\n    //   $(yourDropHandle.el).mousemove(function () { ... })\n    //\n    // Without parameters returns copy of {event: [func, func, ...], ...}\n    // event map - all handlers attached to this zone.\n    //\n    // When given a single non-array parameter returns array of handlers\n    // of that particular event:\n    //   event('iframeDone')     //=> [function () { ... }, func, ...]\n    //\n    // When givne a single array parameter acts similarly to parameterless\n    // form - returns event map of those particular events:\n    //   event(['inputSetup', 'iframeDone'])\n    //     //=> { inputSetup: [function () { ... }], iframeDone: [func, ...] }\n    //\n    // When givne one object parameter - an event map - all its handlers\n    // are added (values can be either functions or arrays, namespaces are\n    // not supported by this call form):\n    //   event({ inputSetup: [func, func, ...], iframeDone: func })\n    //     //=> this (DropHandle)\n    //\n    // When given two parameters and the second is null removes all handlers\n    // of event(s) listen in the first parameter (array or string):\n    //   event('inputSetup', null)    //=> this (DropHandle) - and below\n    //   event(['inputSetup', 'iframeDone'], null)\n    //\n    // When given two parameters and the second is either a function or array\n    // adds listeners to listed event(s):\n    //   event('inputSetup', function () { alert('New listener') })\n    //     //=> this (DropHandle) - here and below\n    //   event(['inputSetup', 'iframeDone'], function () { ... })\n    //   event('inputSetup', [func_1, func_2, ...])\n    //   event(['inputSetup', 'iframeDone'], [func_1, func_2, ...])\n    //\n    // Since two parameter-long calls return 'this' you can easily chain\n    // multiple calls to the object methods like in jQuery.\n    //\n    // New listeners are pushed at the end of event chain (see callAll()).\n    // Use preview() to add handlers in front of others.\n    //\n    // Event names can contain namespaces in form 'event:namespace' - this\n    // string identifier (not necessary unique) is assigned to every function\n    // handler and can be used later to remove that handler or a bunch of others\n    // with the same ID. Empty namespace ('event:') is the same as just 'event'.\n    // Registering new handler with the same NS in the same event doesn't remove\n    // the former (NS can duplicate). On unlisten, empty event name with non-empty\n    // namespace looks over all events.\n    //\n    //   event('event:myns', [func_1, func_2])\n    //     // adds 2 handlers, both under 'myns' namespace.\n    //   event('event', func_3)\n    //     // adds third function under empty namespace.\n    //   event('event:myns', null)    // removes 2 functions added first.\n    //   event(':myns', null)   // removes all 'myns' functions from all events.\n    //   event('event')   //=> {event: func_3}\n    //\n    // Any other parameter combination will result in exception.\n    //\n    // You can preview any event (execute your own handlers before any occurring\n    // event's handlers are executed) with 'any' event name (see callAllOfObject()):\n    //\n    //   event('any', function () { return false })\n    //     // suppresses all events.\n    //   event('any:myns', function () { return false })\n    //     // the same but lets you later remove this namespaced handler.\n    //   event('any:myns', null)    // removes the handler set above.\n    //\n    // There are also more special call forms. With one null parameter all\n    // handlers on this zone are removed - can be used to transfer all handlers\n    // from one DropHandle to another or save/restore their state:\n    //   var old = event()    //=> {event: [func], ...}\n    //   event(null)\n    //   event(old)\n    //\n    // With one function parameter this function's namespace is returned\n    // or empty strign if there's none:\n    //   event(function () { })     //=> ''\n    //\n    //? event('inputSetup', function (input) {\n    //    alert('Setting up file input of ' + input.form.target)\n    //  })\n    //\n    //? event('iframeDone', [handler_1, handler_2, ...])\n    //? event(['inputSetup', 'iframeDone'], function () { alert(this.el.id) })\n    //? event('any:namespace', ...)\n    self.event = function (events, funcs) {\n      return global.appendEventsToObject.apply(self, arguments)\n    }\n\n    // A simplified companion of event() that adds listeners not after\n    // existing but in front of them. Useful for intercepting and overriding\n    // calls of certain events. Supports namespaces.\n    //\n    // Has several call forms which are identical to event():\n    // 1. One parameter - object (event map)\n    // 2. Two parameters - array/array, array/func, string/array, string/func\n    //\n    // Any other parameter combination will result in exception.\n    //\n    //? preview('iframeDone', function () { alert('Abort!'); return false })\n    //? preview(['inputSetup:myns'], [func, func])\n    //? preview('any:myns', function () { alert('Stop that!'); return false })\n    self.preview = function (events, funcs) {\n      return global.previewToObject.apply(self, arguments)\n    }\n\n    /***\n      Standard DropHandle Event Callbacks\n     ***\n\n      These are used to support default behaviour like assignment of HTML\n      classes to zone and input nodes.\n     ***/\n\n    self.onInputSetup = function (input, oldInput) {\n      if (oldInput) {\n        // IE clones elements \"by reference\" so when one's attributes or\n        // events are changed the other also reflects the change.\n        // Taken from jQuery which borrowed that from MooTools.\n        input.file.clearAttributes && input.file.clearAttributes()\n        input.file.mergeAttributes && input.file.mergeAttributes(oldInput)\n      } else {\n        self.multiple(self.opt.multiple)\n      }\n\n      global.setClass(input.file, self.opt.inputClass)\n\n      // We listen for <input type=\"file\">'s onchange event - when it occurs\n      // we trigger submission of the hidden form which navigates hidden\n      // <iframe> to upload the file to the server script and read its response.\n      // This can be used in drag & drop-aware browsers (Firefox and Chrome-based)\n      // to create a \"Browse for file\" button as an alternative to drag & drop.\n      // For more details see the 'iframe' option.\n      self.delegate(input.file, 'change', 'upload')\n\n      var parent = input.file.parentNode\n      if (parent && parent.style.display.match(/^(static)?$/)) {\n        // We need to anchor <input>'s position relative to its parent node.\n        parent.style.position = 'relative'\n      }\n\n      if (global.isTag(zone, 'fieldset')) {\n        // Firefox 13 or so has started to ignore overflow: hidden on fieldsets.\n        // We need to wrap it in a <div> that by itself will hide any overflow.\n        var div = document.createElement('div')\n        div.style.position = 'relative'\n        div.style.overflow = 'hidden'\n        zone.parentNode.insertBefore(div, zone)\n        div.appendChild(zone)\n      }\n    }\n\n    self.onDragOver = function (e) {\n      global.stopEvent(e)\n      e.dataTransfer && (e.dataTransfer.dropEffect = self.opt.dropEffect)\n    }\n\n    self.onUpload = function () {\n      for (var i = 0; i < global.all.length; i++) {\n        if (global.all[i] !== self && global.all[i].events) {\n          global.callAllOfObject(global.all[i], 'uploadElsewhere', self)\n        }\n      }\n    }\n\n    self.event({\n      inputSetup: self.onInputSetup,\n      dragOver: self.onDragOver,\n      upload: self.onUpload\n    })\n\n    // Initialization.\n    global.setClass(zone, self.opt.zoneClass)\n    self.hook(zone)\n  }\n\n  /***\n    Main FileDrop Class\n   ***\n\n    Based on DropHandle to abstract from browser-specific drag & drop\n    and fallback <iframe> upload quirks, this class adds actual upload\n    functionality. It listens for drop events and <iframe> submission\n    triggering dedicated events with normalized parameters. Underlying\n    DropHandle class can be accessed via this.handle property. It shares\n    options and events with FileDrop object so changing one affects another.\n\n    DropHandle properties and methods are available on this object as well.\n\n    This object is defined in window.fd and aliased as window.FileDrop.\n   ***/\n\n  // Parameters - identical to DropHandle, see its note for details.\n  //? new FileDrop('anID')\n  //? new FileDrop(document.body, {zoneClass: 'with-filedrop'})\n  global.FileDrop = function (zone, opt) {\n    // Persistent 'this' instance reference.\n    var self = this\n\n    zone = global.byID(zone)\n\n    // Underlying DropHandle instance providing browser-independent\n    // handlers for drag & drop and <iframe> upload facility.\n    // Constructor will throw an exception if zone is invalid/undefined.\n    self.handle = new global.DropHandle(zone, opt)\n    self.handle.filedrop = self\n\n    /***\n      FileDrop Options\n     ***\n\n      Changing these on runtime after the class was created doesn't affect\n      anything so make sure to pass desired values to the constructor.\n\n      Extends DropHandle options so check that class for more options and info.\n     ***/\n\n    global.extend(self.handle.opt, {\n      // HTML class name for the zone DOM node that is set when an object\n      // is being dragged over that zone (Firefox) or over entire document\n      // (Chrome-powered browsers). It's removed once the object was dragged\n      // away or drag & drop was cancelled.\n      dragOverClass: 'over'\n    })\n\n    global.extend(self.handle.opt.iframe, {\n      // opt.iframe.force - if set FileDrop will always upload files by using\n      // fallback <iframe> method. This only makes sense in debugging and\n      // for some browsers (Opera before migrating to Chrome engine).\n      force: false\n    })\n\n    /***\n      FileDrop Events\n     ***\n\n      Attach new listeners with (new FileDrop).event('send', function ...).\n      Extends DropHandle options so check that class for more events and info.\n\n      This only applies to FileDrop zone overall - it doesn't define events\n      for individual File objects being generated by this zone. This means\n      that to determine upload state or progress you need to attach listeners\n      to each produced File object - either inside FileDrop's 'send' event\n      before sending a file to the server or inside its 'fileSetup' event\n      which is fired right after the creation of File object.\n\n      Note that all callbacks are executed with 'this' pointing to this\n      object so it's easy to know which FileDrop has caused that particular\n      event. For example:\n\n        var dh = new FileDrop('myzone')\n        dh.event('send', function (files) {\n          alert('Sending files via ' + this.el.id)\n\n          for (var i = 0; i < files.length; i++) {\n            files[i].sendTo('http://my.host/upload.php')\n          }\n        })\n     ***/\n\n    global.extend(self.handle.events, {\n      // Occurs when a file is ready to be sent via drag & drop. Doesn't\n      // occur for <iframe> uploads since the only thing you can do about them\n      // is submit the file to the server (no file info is available).\n      // If for some reason you still need to know when a file was *potentially*\n      // placed into <input type=\"file\"> for such fallback uploads listen or\n      // preview the 'upload' event (inherited from DropHandle).\n      //\n      // function (fd.FileList)\n      //    - is passed list of files that were dropped onto this zone - see\n      //      the description of this object for more details.\n      send: [],\n\n      // Occurs when a new fd.File object was created. You can use this to\n      // attach your own events if you don't want to do this on every 'send'\n      // occurrence.\n      //\n      // function (fd.File)\n      //    - is passed instance of the newly created File object.\n      fileSetup: []\n    })\n\n    // Handles upload that happens when a user drops a file onto the zone\n    // (Firefox, Chrome-based) or its <input type=\"file\" (Opera, others).\n    self.onUpload = function (e) {\n      var files = !self.opt.iframe.force && self.eventFiles(e, true)\n\n      // This was likely triggered by onchange event of <input type=\"file\">\n      // which means the browser doesn't support drag & drop or the user\n      // has picked file by clicking on the drop zone, bringing up Open File\n      // dialog and selecting a file there.\n      // If that's the case we don't have any file info available so just\n      // submit the form to the server and see what it responds with (only\n      // if <iframe> upload was enabled by filling out opt.iframe.url).\n      if (!files) {\n        if (!self.handle.sendViaIFrame() && global.hasConsole) {\n          // Must set opt.iframe.url if <iframe> fallback needs to work.\n          console.warn('FileDrop fallback upload triggered but iframe options' +\n                       ' were not configured - doing nothing.')\n        }\n      } else if (files.length > 0) {\n        // Dropped one or more files and we have FileAPI available (Firefox,\n        // Chrome-based) so fire off the usual on-drop event.\n        global.callAllOfObject(self, 'send', [files])\n      }\n    }\n\n    // Retrieves fd.File objects from an on-drop event. Returns a fd.FileList\n    // array-like object (not W3C FileList).\n    // If orFalse is unset always returns a FileList even if event was invalid,\n    // otherwise returns false in such occurrences instead of empty FileList.\n    self.eventFiles = function (e, orFalse) {\n      var result = new global.FileList(e)\n\n      // IE 8 supplies dataTransfer but it's of its own format (getData(), etc.)\n      // and not standardized. Has no file objects.\n      if (e.dataTransfer && (e.dataTransfer.length || e.dataTransfer.files)) {\n        var list = e.dataTransfer\n      } else {\n        // IE 10 provides dataTransfer on drag & drop but when selecting with\n        // Open File dialog of <input type=\"file\"> it only has e.srcElement.files.\n        // Thanks to @rafaelmaiolla for this correction.\n        var list = (e.target && e.target.files) || (e.srcElement && e.srcElement.files)\n      }\n\n      if (list) {\n        var entries = list.items || []\n        list.files && (list = list.files)   // Firefox 3.6.\n        var names = {}\n\n        for (var i = 0; i < list.length; i++) {\n          var file = new global.File(list[i])\n\n          // Safari Windows adds first file several times so skip them.\n          // ...while iOS Safari adds files under the same name - image.jpg (#30).\n          if (!names[file.name] || file.name == 'image.jpg') {\n            names[file.name] = true\n            file.setNativeEntry(entries[i])\n            global.callAllOfObject(self, 'fileSetup', file)\n\n            // Directories have zero size but in Chrome they are useful\n            // since you can access underlying DIrectoryEntry and read files.\n            if (file.size > 0 || file.nativeEntry) {\n              result.push(file)\n            }\n          }\n        }\n      } else if (orFalse) {\n        result = false\n      }\n\n      return result\n    }\n\n    // Linking both classes together. Objects become references so changing,\n    // for example, handle.events affects this.events. Functions of DropHandle\n    // become available on this FileDrop instance which is fine since they\n    // operate on 'self' bound to DropHandle object rather than 'this' of FileDrop.\n    global.extend(self, self.handle)\n\n    /***\n      Standard FileDrop Event Callbacks\n     ***\n\n      These are used to support default behaviour like actual upload process\n      after dropping a file or updating zone HTML classes on drag over/out.\n     ***/\n\n    function dragClassChanger(isHovered) {\n      return function () {\n        global.setClass(zone, self.opt.dragOverClass, isHovered)\n      }\n    }\n\n    self.event({\n      upload:           self.onUpload,\n      send:             self.resetForm,\n      // Add/remove on-drag HTML classes to/from the zone element.\n      dragEnter:        dragClassChanger(true),\n      dragLeave:        dragClassChanger(false),\n      uploadElsewhere:  dragClassChanger(false)\n    })\n\n    self.preview({\n      // Placing handler to reset on-drop state of the zone for better\n      // visual feedback - the user immediately recognizes that the file is no\n      // more dragged even if actual upload handler takes some time to execute.\n      upload:           dragClassChanger(false)\n    })\n  }\n\n  /***\n    FileList Class\n   ***\n\n    It's sort of W3C class (that has no special methods defined in the spec)\n    with a bunch of File-oriented methods that this object is meant to contain.\n    It's an array-like object with length, splice and other methods.\n   ***/\n\n  global.FileList = function (event) {\n    // Persistent 'this' instance reference.\n    var self = this\n\n    // If set can be 'copy', 'move' or other action. Doesn't reliably work\n    // cross-browser and cross-platform. See MDN for more info:\n    // https://developer.mozilla.org/en-US/docs/Web/API/DataTransfer\n    self.dropEffect = (event && event.dropEffect) || ''\n    self.length = 0\n\n    // No need to hold the reference to this variable.\n    event = null\n\n    self.push = function (file) {\n      self[self.length++] = file\n      return self\n    }\n\n    // Returns undefind if this list is empty.\n    self.pop = function () {\n      if (self.length > 0) {\n        var file = self.last()\n        delete self[--self.length]\n        return file\n      }\n    }\n\n    self.first = function () {\n      return self[0]\n    }\n\n    self.last = function () {\n      return self[self.length - 1]\n    }\n\n    self.remove = function (i) {\n      for (; i < self.length - 1; i++) {\n        self[i] = self[i + 1]\n      }\n\n      se.f.pop()\n      return self\n    }\n\n    self.clear = function () {\n      for (var i = 0; i < self.length; i++) {\n        delete self[i]\n      }\n\n      self.length = 0\n      return self\n    }\n\n    // Reverses order of files in this list (changes self).\n    self.reverse = function () {\n      for (var i = 0; i < Math.floor(self.length / 2); i++) {\n        self[i] = self[self.length - i - 1]\n      }\n      return self\n    }\n\n    // Creates copy of this list and adds items from FileList or array\n    // to the end of the returned copy.\n    self.concat = function (list) {\n      var copy = new global.FileList\n      for (var i = 0; i < self.length; i++) {\n        copy[i] = self[i]\n      }\n\n      for (var i = 0; list && i < list.length; i++) {\n        copy[self.length + i + 1] = list[i]\n      }\n\n      copy.length = self.length + (list || []).length\n      return self\n    }\n\n    // Sorts this list by calling comparator in context cx (or 'this' FileList).\n    // func = function (File a, File b, aIndex, bIndex) - if returns < 0 second\n    // file (b) must go before first (a). Very similar to Array.sort().\n    //\n    //? sort(function (a, b) { return a.name > b.name ? +1 : -1 })\n    self.sort = function (func, cx) {\n      for (var i = 0; i < self.length; i++) {\n        for (var j = 0; j < self.length; j++) {\n          if (func.call(cx || this, self[i], self[j], i, j) < 0) {\n            var temp = self[i]\n            self[i] = self[j]\n            self[j] = temp\n          }\n        }\n      }\n\n      return self\n    }\n\n    // Sorts this list by calling func on each File alone and using that value\n    // (hash) to compare itsems between themselves. Like Underscore's sortBy().\n    // func = function (File, index) - returns something comparable, e.g. string,\n    // number or Date.\n    //\n    //? sortBy(function (file) { return file.modDate })\n    //? sortBy(function () { return Math.random() })\n    self.sortBy = function (func, cx) {\n      var list = []\n\n      for (var i = 0; i < self.length; i++) {\n        list.push([ i, func.call(cx || this, self[i], i) ])\n      }\n\n      list.sort(function (a, b) {\n        return a[1] > b[1] ? +1 : (a[1] < b[1] ? -1 : 0)\n      })\n\n      for (var i = 0; i < list.length; i++) {\n        self[i] = list[i][0]\n      }\n\n      return self\n    }\n\n    // Calls func in context cx for every File in the list and if it returns\n    // a non-null value returns the File object on which func was invoked.\n    // If this list is empty or if func didn't return anything for any file\n    // returns undfined.\n    //\n    //? find(function (f) { return f.name[0] == 'a' })\n    //    // returns first File which local name starts with 'a', if any.\n    self.find = function (func, cx) {\n      for (var i = 0; i < self.length; i++) {\n        var res = func.call(cx || this, self[i], i)\n        if (res != null) { return self[i] }\n      }\n    }\n\n    // The same as find() but ignores returned value of the callback invoking\n    // it for every File in the list.\n    //\n    //? each(function (f) { alert(f.name) })\n    self.each = function (func, cx) {\n      self.find(function () { func.apply(this, arguments) }, cx)\n      return self\n    }\n\n    // Calls method on every contained object with given arguments. Returns self.\n    //\n    //? invoke('fileMethod', 'arg1', 2, 3.33)\n    self.invoke = function (method, arg_1) {\n      var args = global.toArray(arguments, 1)\n      return this.each(function (file) { file[method].apply(file, args) })\n    }\n\n    // Aborts all uploads of files contained in this list. Does nothing if\n    // upload isn't active. Doesn't abort <iframe> uploads - for this call\n    // abortIFrame() on the corresponding DropHandle object.\n    //\n    //? abort()\n    self.abort = function () {\n      return this.invoke('abort')\n    }\n\n    // Runs through over all items in this list calling func in context cx (or\n    // this) and storing returned values. Returns File object for which func\n    // generated the largest value (or first such File for multiple same values).\n    // Returns undefined if this list is empty.\n    //\n    //? findCompare(function (f) { return f.size })\n    //    // returns largest file.\n    self.findCompare = function (func, cx) {\n      var file, value = null, res\n\n      self.each(function (f) {\n        if (value == null || value < (res = func.call(cx, file))) {\n          file = f\n        }\n      }, cx)\n\n      return file\n    }\n\n    // Returns new list that only contains items for which func called in context\n    // cx (or this) has returned a truthy value.\n    self.filter = function (func, cx) {\n      var list = new global.FileList\n\n      self.each(function (f) {\n        func.apply(this, arguments) && list.push(f)\n      }, cx)\n\n      return list\n    }\n\n    // Finds File with biggest size or undefined for empty list.\n    self.largest = function () {\n      return self.findCompare(function (f) { return f.size })\n    }\n\n    // Finds File with smallest size or undefined for empty list.\n    self.smallest = function () {\n      return self.findCompare(function (f) { return -f.size })\n    }\n\n    // Finds File that was changed the longest time before or undefined for empty list.\n    self.oldest = function () {\n      return self.findCompare(function (f) { return -f.modDate.getTime() })\n    }\n\n    // Finds File that was most recently changed or undefined for empty list.\n    self.newest = function () {\n      return self.findCompare(function (f) { return f.modDate })\n    }\n\n    // Returns new list of all files which MIME type matches. MIME shouldn't contain\n    // RegExp symbols except for '/'. To match MIME group like 'image/*' don't\n    // include trailing '/*' - just 'image'.\n    //\n    //? ofType('image').first()   //=> File or undefined if none\n    self.ofType = function (mime) {\n      mime += mime.indexOf('/') == -1 ? '/' : '$'\n      mime = new RegExp('^' + mime, 'i')\n      return self.filter(function (f) { return mime.test(f.type) })\n    }\n\n    // Returns new list with File items with image/* MIME type.\n    self.images = function () {\n      return self.ofType('image')\n    }\n\n    // If name is string returns File with name exactly matching that string\n    // If name is RegExp returns new list containing File items which 'name'\n    // match given RegExp.\n    //\n    //? named('myfile.txt')     //=> File or undefined\n    //? named(/^start_\\..+$/i)  //=> FileList (copy)\n    self.named = function (name) {\n      if (typeof name == 'string') {\n        return self.find(function (f) { return f.name == name })\n      } else {\n        return self.filter(function (f) { return name.test(f.name) })\n      }\n    }\n  }\n\n  // Making FileList array-like.\n  global.FileList.prototype.length = 0\n  global.FileList.prototype.splice = Array.prototype.splice\n\n  /***\n    Browser-Independent File Class\n   ***\n\n    It's passed on FileDrop 'send' event as members fd.FileList and provides\n    cross-browser access to file information and ability to upload it to the server.\n    Wraps around native browser's File object.\n   ***/\n\n  // Parameters:\n  // * file - native browser File object that was retrieved from the on-drop\n  //          event object. Can be accessed via this.nativeFile property.\n  global.File = function (file) {\n    // Persistent 'this' instance reference.\n    var self = this\n\n    // Native browser's File object as it was given in the on-drop event.\n    // Is null for directory entries if on lists produced by listEntries().\n    self.nativeFile = file\n\n    // In Chrome 21+ will be set to native Entry (FileEntry, DirectoryEntry, etc.)\n    // instance. See W3C spec: http://www.w3.org/TR/file-system-api/#the-entry-interface\n    self.nativeEntry = null\n\n    // Local file name.\n    self.name = file.fileName || file.name || ''\n\n    // Local file size (bytes).\n    self.size = file.fileSize || file.size || 0\n\n    // Local file MIME type.\n    self.type = self.mime = file.fileType || file.type || ''\n\n    // Last modification of the local time. Standard Date object.\n    self.modDate = file.lastModifiedDate || new Date\n\n    // XMLHttpRequest object that was used to upload the file to the server.\n    // Only filled after sendTo() was called.\n    self.xhr = null\n\n    /***\n      File Options\n     ***\n\n      Values here specify default values for sendTo() options - like HTTP\n      method used to submit the data. They can be overriden by passing an\n      object to sendTo() - e.g. sendTo('upload.php', {method: 'PUT'}).\n     ***/\n\n    self.opt = {\n      // If enabled this object will add several X-... headers to provide\n      // information about the original file to the server (e.g. name and size).\n      extraHeaders: true,\n\n      // The value of X-Requested-With header sent with XMLHttpRequest used\n      // to upload the dropped file(s). If false then this header is not set\n      // (but you can use xhrSetup/xhrSend events to set it). If true - it's\n      // set to one of 'FileDrop-XHR-...'. A string sets it to that string -\n      // e.g. 'XMLHttpRequest' would simulate regular $.ajax() request.\n      xRequestedWith: true,\n\n      // HTTP method used to submit the upload data. Useful for contacting\n      // WebDAV services which might accept PUT or DELETE. Given in sendTo()\n      // to XMLHttpRequest.open().\n      method: 'POST'\n    }\n\n    /***\n      File Events\n     ***\n\n      These are different from FileDrop events and are individual to each File.\n      See FileDrop events for more info on how to attach listeners here.\n     ***/\n\n    self.events = {\n      // Object-wise event preview handlers. See DropHandle's 'any' description.\n      any: [],\n\n      // Occurs after an XMLHttpRequest object was prepared to submit the file\n      // to the server. All FileDrop-specific headers and other customization\n      // (Content-Type, etc.) was already done. You can set extra headers or add\n      // event listeners here before it's dispatched to the server.\n      //\n      // function (XMLHttpRequest, opt)\n      //    - is passed the request object and the options object that was\n      //      passed to sendTo() with missing fields populated as this.opt.\n      xhrSetup: [],\n\n      // Occurs when a file and XMLHttpRequest were prepared for upload and need\n      // to be sent. It's handled by fd.File.xhrSend() but you might want to\n      // add your logic here.\n      //\n      // function (XMLHttpRequest, data, opt)\n      //    - is passed the request object, options and raw file data that is\n      //      browser-specific (it might not be raw binary stream in some\n      //      older browsers as it is in Firefox and Chrome-based). opt is the\n      //      object passed to sendTo() with missing fields populated as this.opt.\n      xhrSend: [],\n\n      // Occurs during file upload with information on current upload progress.\n      // This happens on browser-sepcific intervals and usually on somewhat large\n      // files only.\n      //\n      // function (sentBytes, totalBytes, XMLHttpRequest, eventObject)\n      //    - is passed two integers (already uploaded bytes and total amount\n      //      of data - local file size, of which first or both might be unset\n      //      if browser can't provide this info), the request object that is\n      //      uploading this file and native browser event object that was\n      //      given to the XHR's event handler of fd.File.\n      progress: [],\n\n      // Occurs when a file has successfully finished uploading.\n      //\n      // function (XMLHttpRequest, eventObject)\n      //    - is passed the request object that was used to upload the file and\n      //      native browser event object that was given to the XHR's event handler\n      //      of fd.File.\n      done: [],\n\n      // Occurs when a file has failed during upload much like regular XHR error.\n      // Note that \"failing\" means all response code except for 200 - even 2xx like\n      // 202 Accepted (WebDAV and such) or 3xx (redirects).\n      // This isn't called when upload was aborted - if you specifically need to\n      // track this call fd.addEvent(fileObject, 'abort', function ...).\n      //\n      // function (eventObject, [XMLHttpRequest])\n      //    - using passed objects you can determine the type of error as you\n      //      would outside of FileDrop - e.g. by XMLHttpRequest.statusText.\n      //      If XHR object is not passed this marks an error that has occurred\n      //      while reading file from local file system with readAsArrayBuffer().\n      error: []\n    }\n\n    // Old FireDrop compatibility. Now deprecated.\n    self.events.sendXHR = self.events.xhrSend\n\n    /***\n      File Methods\n     ***/\n\n    // Aborts current upload, if any.\n    //\n    //? file.abort()\n    self.abort = function () {\n      self.xhr && self.xhr.abort && self.xhr.abort()\n      return self\n    }\n\n    // Submits the dropped file to the server script at given URL and with\n    // optional options (fields default to this fd.File.opt).\n    // Incapsulates browser-specific logic behind reading a local file.\n    // If an upload request has been already made on this fd.File instance will\n    // abort it (unless it's finished) and start anew.\n    //\n    //? sendTo('http://my.host/upload.php?var=foo&var2=123')\n    //? sendTo('upload.php', {method: 'PUT'})\n    self.sendTo = function (url, opt) {\n      opt = global.extend(opt, self.opt)\n      opt.url = url\n\n      if (!self.size) {\n        // Zero size also indicates that it might be a directory.\n        global.hasConsole && console.warn('Trying to send an empty FileDrop.File.')\n      } else if (window.FileReader) {\n        // Using Firefox FileAPI.\n        var reader = new FileReader\n\n        reader.onload = function (e) { self.sendDataReadyTo(opt, e) }\n        reader.onerror = function (e) { global.callAllOfObject(self, 'error', [e]) }\n\n        reader.readAsArrayBuffer(self.nativeFile)\n      } else {\n        // Using early Chrome/Safari File API.\n        self.sendDataReadyTo(opt)\n      }\n\n      return self\n    }\n\n    // Internal method that's called when file data was read and is ready for\n    // upload. For FileAPI (Firefox) gets called on readAsArrayBuffer() onload\n    // event; for Safari/early Chrome it's called immediately and gets passed\n    // the native file object itself.\n    self.sendDataReadyTo = function (opt, e) {\n      self.abort()\n\n      self.xhr = global.newXHR()\n      self.hookXHR(self.xhr)\n\n      self.xhr.open(opt.method, opt.url, true)\n      // Missing in IE.\n      self.xhr.overrideMimeType && self.xhr.overrideMimeType('application/octet-stream')\n      self.xhr.setRequestHeader('Content-Type', 'application/octet-stream')\n\n      if (opt.extraHeaders) {\n        self.xhr.setRequestHeader('X-File-Name', encodeURIComponent(self.name))\n        self.xhr.setRequestHeader('X-File-Size', self.size)\n        self.xhr.setRequestHeader('X-File-Type', self.type)\n        self.xhr.setRequestHeader('X-File-Date', self.modDate.toGMTString())\n\n        var reqWith = opt.xRequestedWith\n        if (reqWith === true) {\n          var api = window.FileReader ? 'FileAPI' : 'Webkit'\n          reqWith = 'FileDrop-XHR-' + api\n        }\n\n        reqWith && self.xhr.setRequestHeader('X-Requested-With', reqWith)\n      }\n\n      global.callAllOfObject(self, 'xhrSetup', [self.xhr, opt])\n\n      // Some browsers allow reading raw data, some don't. See if ours allows\n      // and if not then it should support just passing the native file object\n      // to XMLHttpRequest.send().\n      var data = (e && e.target && e.target.result) ? e.target.result : self.nativeFile\n      global.callAllOfObject(self, 'xhrSend', [self.xhr, data, opt])\n      return self.xhr\n    }\n\n    // Attaches internal event listeners to the XMLHttpRequest object that is\n    // used to upload the dropped file. Not all browsers trigger upload events\n    // on the XHR object itself (hence evtHost).\n    self.hookXHR = function (xhr) {\n      var evtHost = xhr.upload || xhr\n\n      xhr.onreadystatechange = function (e) {\n        if (xhr.readyState == 4) {\n          try {\n            var event = xhr.status == 200 ? 'done' : 'error'\n          } catch (e) {\n            var event = 'error'\n          }\n\n          var args = event == 'error' ? [e, xhr] : [xhr, e]\n          global.callAllOfObject(self, event, args)\n        }\n      }\n\n      evtHost.onprogress = function (e) {\n        var current = e.lengthComputable ? e.loaded : null\n        global.callAllOfObject(self, 'progress', [current, e.total || null, xhr, e])\n      }\n    }\n\n    // Browser-independent way of reading binary data. Doesn't work on all browsers.\n    // Asynchronous. If onError is omitted then onDone is called with the usual\n    // arguments (errorObject). If onError is false errors are not reported\n    // (onDone not called).\n    //\n    // Third parameter specifies the way to read the file and if omitted or 'bin'\n    // reads binary data, if 'url', 'uri' or 'src' reads Data URI (very nice for\n    // generating thumbnails), if 'array' reads it as ArrayBuffer, if 'text' reads\n    // data as UTF-8 string, if starts with 'read' is assumed to be a method name on\n    // native File object which will be called. Any other string value istreated as\n    // character encoding (e.g. 'cp1251') and data is read as text in that encoding.\n    // If 3rd parameter is an array its first element is treated as File's method\n    // name and all other parameters are parameters for that method.\n    //\n    // Note that readAsBinaryString() is deprecated, missing in IE 10 and simulated\n    // by FileDrop using readAsArrayBuffer().\n    //\n    // errorObject will fdError string property describing the type of the problem:\n    // 1. 'read'      - browser has failed to read file data.\n    // 2. 'support'   - browser doesn't support File API.\n    //\n    // onDone   = function (string|array)\n    // onError  = function (errorObject)\n    //\n    //?\n    //  readData(function (uri) { byID('myImg').src = uri },\n    //           function (e) { alert('Terrible error!') },\n    //           'uri')\n    //      // reads dropped image into a thumbnail (Data URI).\n    //\n    //? readData(function (bytes) { alert(bytes) }, false)\n    //      // shows message with raw read byte string.\n    //\n    //? readData(function (bytes) { alert(bytes) }, false, 'bin')\n    //      // identical to above.\n    //\n    //? readData(function (bytes) { alert(bytes) }, false, 'readAsBinaryString')\n    //      // identical to above.\n    //\n    //? readData(function (bytes) { alert(bytes) }, false, ['readAsBinaryString'])\n    //      // identical to above but won't automatically fall back to\n    //      // readAsArrayBuffer() failing in IE and early Chrome.\n    //\n    //? readData(function (bytes) { alert(Array.prototype.slice.call(bytes)) }, false, 'array')\n    //      // shows message with comma-separated list of byte values.\n    //\n    //? readData(function (str) { alert(str) }, false, 'cp1251')\n    //      // shows message with file read as a string in CP-1251 charset.\n    //\n    //? readData(function (str) { alert(str), false, ['readAsText', 'cp1251'])\n    //      // identical to above.\n    //\n    //? readData(function (str) { alert(str), false, 'text')\n    //      // similar to above but treats string as UTF-8 encoded (default charset).\n    //\n    //? readData(function (str) { alert(str), false, 'utf-8')\n    //      // identical to above.\n    //\n    //? readData(function (str) { alert(str), false, 'readAsText')\n    //      // identical to above.\n    self.readData = function (onDone, onError, func) {\n      return self.read({onDone: onDone, onError: onError, func: func})\n    }\n\n    // Alias to readData() that reads Data URI suitable for <img src> attribute.\n    // Unlike readData() if onError isn't passed explicitly it's set to false\n    // (errors suppressed, onDone not called instead).\n    //\n    //?\n    //  readDataURI(function (uri) {\n    //    var img = new Image\n    //    img.src = uri\n    //    document.body.appendChild(img)\n    //  })\n    self.readDataURL = function (onDone, onError) {\n      return self.readData(onDone, onError || false, 'uri')\n    }\n\n    // Alias to readDataURL().\n    self.readDataURI = self.readDataURL;\n\n    // Advanced reading function that can be used to read Blobs and make\n    // slices of this file rather than load the entire data into memory.\n    // Accepts various options, see the code for information.\n    //\n    //? read({onDone: function (str) { alert(str) }, func: 'text', start: 0, end: 5})\n    //    // reads first 4 bytes of the file, treats them as UTF-8 and shows them.\n    self.read = function (opt) {\n      function error(reason, e) {\n        typeof e == 'object' || (e.message = e)\n        e.fdError = reason\n\n        if (opt.onError !== false) {\n          (opt.onError || opt.onDone).apply(this, arguments)\n        }\n      }\n\n      global.extend(opt, {\n        // function (data) - gets passed data according to selected func (below).\n        onDone: new Function,\n\n        // function (e), false (errors are not reported), null (calls onDone).\n        onError: null,\n\n        // Target File or Blob object to read data from.\n        blob: self.nativeFile,\n\n        // Reading method alias (e.g. 'uri'), name (e.g. 'readAsText') or\n        // array like ['readAsText', 'arg-1', ...].\n        func: '',\n\n        // New Blob slice options. Negative becomes 0.\n        start: 0,\n\n        // null = this.size. Note that according to W3C byte with this offset\n        // is not included in result (so last byte read is end - 1).\n        // If negative offset is counted from the end (-1 skips last 2 bytes).\n        end: null,\n\n        // contentType assigned to new Blob (empty leaves default).\n        mime: ''\n      })\n\n      if (!window.FileReader) {\n        return error('support', e)\n      }\n\n      if (opt.start > 0 || opt.end != null && opt.end) {\n        if (opt.blob.slice) {\n          opt.end == null && (opt.end = opt.blob.size || opt.blob.fileSize)\n          opt.blob = opt.blob.slice(opt.start, opt.end, opt.mime)\n        } else if (global.hasConsole) {\n          console.warn('File Blob/slice() are unsupported - operating on entire File.')\n        }\n      }\n\n      var reader = new FileReader\n      reader.onerror = function (e) { error('read', e) }\n\n      reader.onload = function (e) {\n        if (e.target && e.target.result) {\n          if (opt.func == 'readAsBinaryString') {\n            // Function actually used was readAsArrayBuffer() - see the note below.\n            e.target.result = String.fromCharCode.apply(null, new Uint8Array(e.target.result))\n          }\n\n          opt.onDone(e.target.result)\n        } else {\n          reader.onerror(e)\n        }\n      }\n\n      var func = opt.func\n\n      if (global.isArray(func)) {\n        var name = func[0]\n        func[0] = opt.blob\n        return reader[name].apply(reader, func)\n      } else {\n        if (!func || func == 'bin') {\n          func = 'readAsBinaryString'\n        } else if (func == 'url' || func == 'uri' || func == 'src') {\n          func = 'readAsDataURL'\n        } else if (func == 'array') {\n          func = 'readAsArrayBuffer'\n        } else if (func == 'text') {\n          func = 'readAsText'   // reads as UTF-8 by default.\n        } else if (func.substr(0, 4) != 'read') {\n          return reader.readAsText(opt.blob, func)\n        }\n\n        // readAsBinaryString() has been deprecated since mid-2012 in favour\n        // of readAsArrayBuffer(). Additionally, IE 10 only supports the latter.\n        // Result that's been read will be converted to string in onload.\n        func == 'readAsBinaryString' && (func = 'readAsArrayBuffer')\n\n        return reader[func](opt.blob)\n      }\n    }\n\n    // Uses W3C draft File System API to traverse this DirectoryEntry.\n    // Currently supported in Chrome 21+. Spec: http://www.w3.org/TR/file-system-api/\n    // Thanks to @kevinkrouse for pointing me to this wonderful interface.\n    // This function is not recursive.\n    //\n    // onDone is a function callback that receives FileDrop.FileList object.\n    // Each entry there can be either a file or a directory. Files have nativeFile\n    // set (but not in case of error - if so use nativeEntry's isDirectory and\n    // isFile props to determine which one is which). On these, correct files you\n    // can use any of FileDrop methods - sendTo(), readFile(), etc. On directories\n    // (but not failed files) you can use listEntries() to traverse them further.\n    //\n    // onError is an optional function called by the browser when it runs into errors.\n    // It gets passed error object. Note that it might be called multiple times\n    // and that onDone can be still called (this might happen if FileEntry can't\n    // read particular File object when using file()).\n    //\n    //? listEntries(function (files) { files.images().invoke('sendTo', 'upload.php') })\n    //      // sends all images in the dropped directory to upload.php; errors are\n    //      // ignored but if one has occurred while retrieving File API object this\n    //      // call with fail with a JavaScript error - this is fixed by removing\n    //      // all entries with null nativeFile before doing sendTo().\n    //\n    //? listEntries(function (files) { files.each(...) },\n    //              function (e) { alert('File System API error ' + e.code) })\n    self.listEntries = function (onDone, onError) {\n      if (self.nativeEntry && self.nativeEntry.isDirectory) {\n        onError = onError || new Function\n        var reader = self.nativeEntry.createReader()\n        var files = new global.FileList\n        var enqueued = 0\n\n        function dequeue(count) {\n          enqueued -= count\n          if (enqueued == 0 && onDone) {\n            onDone(files)\n            onDone = null\n          }\n        }\n\n        reader.readEntries(function (list) {\n          for (var i = 0; i < list.length; i++) {\n            var nativeEntry = list[i]\n\n            if (nativeEntry.file) {\n              // This entry is a file (FileEntry).\n              enqueued++\n              nativeEntry.file(\n                function (nativeFile) {\n                  var file = new global.File(nativeFile)\n                  file.setNativeEntry(nativeEntry)\n                  files.push(file)\n                  dequeue(1)\n                },\n                function () {\n                  // Error getting a File object. Let's still insert it\n                  // into the resulting list but without nativeFile (which\n                  // makes sendTo(), readData(), etc. unavailable).\n                  files.push( global.File.fromEntry(nativeEntry) )\n                  dequeue(1)\n                  onError.apply(this, arguments)\n                }\n              )\n            } else {\n              // This is a DirectoryEntry. It has no File object (that comes\n              // from File API spec: http://dev.w3.org/2006/webapi/FileAPI/).\n              // Don't try calling sendTo(), readFile() and the likes on the\n              // FileDrop.File items returned in the FileList passed to onDone.\n              files.push( global.File.fromEntry(nativeEntry) )\n            }\n          }\n\n          i ? reader.readEntries(arguments.callee, onError) : dequeue(0)\n        }, onError)\n\n        return true\n      }\n    }\n\n    // Internal method to assign data from a native Entry object.\n    self.setNativeEntry = function (item) {\n      self.nativeEntry = item && item.webkitGetAsEntry && item.webkitGetAsEntry()\n    }\n\n    // Adds event listeners to this object. See DropHandle.event() for\n    // extended comment and examples.\n    self.event = function (events, funcs) {\n      return global.appendEventsToObject.apply(self, arguments)\n    }\n\n    // Adds event listeners to this object in front of existing handlers.\n    // Can be used to intercept/override certain events. See DropHandle.event()\n    // for extended comment and examples.\n    self.preview = function (events, funcs) {\n      return global.previewToObject.apply(self, arguments)\n    }\n\n    /***\n      Standard File Event Callbacks\n     ***/\n\n    // Takes care of reading binary stream from file and sending it\n    // to the remote server using prepared XMLHttpRequest.\n    // data is either an ArrayBuffer (Gecko/Chrome) or a native file object\n    // (Safari). Either way, send() handles both. This used to deal with\n    // sendAsBinary() but it's specific to Firefox 3.6 and is removed now.\n    self.onXhrSend = function (xhr, data) {\n      xhr.send(data)\n    }\n\n    self.event({\n      xhrSend:        self.onXhrSend\n    })\n  }\n\n  // Static method of File that creates an object without attaching to any\n  // File API's File object. It's only useful if you have an Entry object\n  // that lets you get at least some of the info (e.g. file name) and list\n  // contents for DirectoryEntry. See listEntries(). Using sendTo(), readData()\n  // and others on such an instance will result in errors.\n  //\n  //? fromEntry( e.dataTransfer.items[0].webkitGetAsEntry() )\n  //      //=> FileDrop.File\n  global.File.fromEntry = function (nativeEntry) {\n    var file = new global.File(nativeEntry)\n    file.setNativeEntry(nativeEntry)\n    file.nativeFile = null\n    return file\n  }\n\n  /***\n    FileDrop jQuery Interface\n   ***\n\n    After both FileDrop and jQuery (v1 or v2) scripts have loaded call fd.jQuery().\n    Don't forget to include/write your FileDrop's CSS as well.\n\n    Once done it becomes possible to access FileDrop as $('#zone').filedrop()\n    and avoid accessing its methods and bind event altogether. FileDrop will\n    trigger events as if they originated from the DOM node itself and prefix\n    each event with either 'fd' (DropHandle/FileDrop classes) or 'file'\n    (File class). Arguments remain the same except that:\n    * jQuery always passes event object as the first argument so just skip it.\n    * File events ('file' prefix) get passed File object as second argument\n      (after jQuery event).\n\n    Note that 'this' points to jQuery collection and no more to the FileDrop\n    or File instance that has initiated the event.\n\n      $('<div><p>Drop something here...</p></div>')\n        .appendTo(document.body)\n        .filedrop()\n        .on('fdsend', function (e, files) {\n          // Occurs when FileDrop's 'send' event is initiated.\n          $.each(files, function (i, file) {\n            file.sendTo('upload.php')\n          })\n        })\n        .on('filedone', function (e, file) {\n          // Occurs when a File object has done uploading.\n          alert('Done uploading ' + file.name + ' on ' + this.tagName)\n        })\n\n    When constructing FileDrop instance by jQuery in addition to regular 'el'\n    property '$el' is set to point to $(el) - zone DOM node as jQuery collection.\n\n    Also, it's still possible to attach listeners to FileDrop object with\n    fd.event('event', func) but these events are called after corresponding\n    DOM events (added with jQuery). If a DOM event handler returns a non-null\n    and non-undefined value - FileDrop's handlers won't be called.\n\n    Event preview handlers ('any' event) can only be attached directly to FileDrop:\n\n      $('#zone')\n        .fildrop()\n        .filedrop().event('any', function () { ... })\n\n    You can access underlying FileDrop object by calling filedrop() without\n    parameters (first such call creates FileDrop, later calls return the\n    instance on the first element in the collection):\n\n      $('#zone')            // select <p id=\"zone\">\n        .filedrop()         // turn it into a FileDrop zone\n        .css({color: red})  // any normal jQuery code\n        .filedrop()         // retrieve FileDrop object\n        .multiple(true)     // call its method\n\n    Alternatively you can pass a string to filedrop() to select a property\n    or call a method - in this case their value/result is returned\n\n      $('#zone')\n        .filedrop()\n        .filedrop('multiple', true)\n          // returns the new state of 'multiple' option, not jQuery object.\n\n    It's also possible to pass custom options to FileDrop constructor:\n\n      $('#zone')\n        .filedrop({\n          multiple: true,\n          iframe: {url: '/upload.php'}\n        })\n   ***/\n\n  global.jQuery = function ($) {\n    $ = $ || jQuery || __webpack_provided_window_dot_jQuery\n    if (!$) { throw 'No window.jQuery object to integrate FileDrop into.' }\n\n    $.fn.filedrop = function (options) {\n      function delegate(prefix, firstArgs) {\n        return function (event) {\n          var args = (firstArgs || []).concat(global.toArray(arguments, 1))\n          return $node.triggerHandler((prefix + event).toLowerCase(), args)\n        }\n      }\n\n      var $node = this\n      var host = this.data('filedrop')\n\n      if (typeof options == 'string') {\n        if (!host) {\n          $.error(\"$.filedrop('comment') needs an initialized FilrDrop on this element.\")\n        } else if (typeof host[options] == 'undefined') {\n          $.error(\"There's no method or property FileDrop.\" + options + \".\")\n        } else {\n          var value = host[options]\n          if (typeof value == 'function') {\n            return value.apply(host, global.toArray(arguments, 1))\n          } else {\n            return value\n          }\n        }\n      } else if (!options || typeof options == 'object') {\n        if (!host) {\n          var zone = new FileDrop(this[0], options)\n          zone.$el = $(this)\n          this.first().data('filedrop', zone)\n\n          zone.event('any', delegate('fd'))\n\n          zone.on.fileSetup.push(function (file) {\n            file.event('any', delegate('file', [file]))\n          })\n        } else if (!options) {\n          return host\n        } else {\n          global.extend(host.opt, options, true)\n        }\n      } else {\n        $.error('Invalid $.filedrop() parameter - expected nothing (creates new zone),' +\n                ' a string (property to access) or an object (custom zone options).')\n      }\n\n      return $node\n    }\n  }\n\n  // Alias window.fd.FileDrop class to just window.FileDrop since it's most used.\n  root.FileDrop = global.FileDrop\n});\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"./node_modules/jquery/dist/jquery.js\"), __webpack_require__(\"./node_modules/jquery/dist/jquery.js\")))\n\n/***/ }),\n\n/***/ \"./build/_js/_lib/jquery.tipsy.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(jQuery) {// tipsy, facebook style tooltips for jquery\n// version 1.0.0a\n// (c) 2008-2010 jason frame [jason@onehackoranother.com]\n// released under the MIT license\n\n(function($) {\n    \n    function maybeCall(thing, ctx) {\n        return (typeof thing == 'function') ? (thing.call(ctx)) : thing;\n    };\n    \n    function isElementInDOM(ele) {\n      while (ele = ele.parentNode) {\n        if (ele == document) return true;\n      }\n      return false;\n    };\n    \n    function Tipsy(element, options) {\n        this.$element = $(element);\n        this.options = options;\n        this.enabled = true;\n        this.fixTitle();\n    };\n    \n    Tipsy.prototype = {\n        show: function() {\n            var title = this.getTitle();\n            if (title && this.enabled) {\n                var $tip = this.tip();\n                \n                $tip.find('.tipsy-inner')[this.options.html ? 'html' : 'text'](title);\n                $tip[0].className = 'tipsy'; // reset classname in case of dynamic gravity\n                $tip.remove().css({top: 0, left: 0, visibility: 'hidden', display: 'block'}).prependTo(document.body);\n                \n                var pos = $.extend({}, this.$element.offset(), {\n                    width: this.$element[0].offsetWidth,\n                    height: this.$element[0].offsetHeight\n                });\n                \n                var actualWidth = $tip[0].offsetWidth,\n                    actualHeight = $tip[0].offsetHeight,\n                    gravity = maybeCall(this.options.gravity, this.$element[0]);\n                \n                var tp;\n                switch (gravity.charAt(0)) {\n                    case 'n':\n                        tp = {top: pos.top + pos.height + this.options.offset, left: pos.left + pos.width / 2 - actualWidth / 2};\n                        break;\n                    case 's':\n                        tp = {top: pos.top - actualHeight - this.options.offset, left: pos.left + pos.width / 2 - actualWidth / 2};\n                        break;\n                    case 'e':\n                        tp = {top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left - actualWidth - this.options.offset};\n                        break;\n                    case 'w':\n                        tp = {top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left + pos.width + this.options.offset};\n                        break;\n                }\n                \n                if (gravity.length == 2) {\n                    if (gravity.charAt(1) == 'w') {\n                        tp.left = pos.left + pos.width / 2 - 15;\n                    } else {\n                        tp.left = pos.left + pos.width / 2 - actualWidth + 15;\n                    }\n                }\n                \n                $tip.css(tp).addClass('tipsy-' + gravity);\n                $tip.find('.tipsy-arrow')[0].className = 'tipsy-arrow tipsy-arrow-' + gravity.charAt(0);\n                if (this.options.className) {\n                    $tip.addClass(maybeCall(this.options.className, this.$element[0]));\n                }\n                \n                if (this.options.fade) {\n                    $tip.stop().css({opacity: 0, display: 'block', visibility: 'visible'}).animate({opacity: this.options.opacity});\n                } else {\n                    $tip.css({visibility: 'visible', opacity: this.options.opacity});\n                }\n            }\n        },\n        \n        hide: function() {\n            if (this.options.fade) {\n                this.tip().stop().fadeOut(function() { $(this).remove(); });\n            } else {\n                this.tip().remove();\n            }\n        },\n        \n        fixTitle: function() {\n            var $e = this.$element;\n            if ($e.attr('title') || typeof($e.attr('original-title')) != 'string') {\n                $e.attr('original-title', $e.attr('title') || '').removeAttr('title');\n            }\n        },\n        \n        getTitle: function() {\n            var title, $e = this.$element, o = this.options;\n            this.fixTitle();\n            var title, o = this.options;\n            if (typeof o.title == 'string') {\n                title = $e.attr(o.title == 'title' ? 'original-title' : o.title);\n            } else if (typeof o.title == 'function') {\n                title = o.title.call($e[0]);\n            }\n            title = ('' + title).replace(/(^\\s*|\\s*$)/, \"\");\n            return title || o.fallback;\n        },\n        \n        tip: function() {\n            if (!this.$tip) {\n                this.$tip = $('<div class=\"tipsy\"></div>').html('<div class=\"tipsy-arrow\"></div><div class=\"tipsy-inner\"></div>');\n                this.$tip.data('tipsy-pointee', this.$element[0]);\n            }\n            return this.$tip;\n        },\n        \n        validate: function() {\n            if (!this.$element[0].parentNode) {\n                this.hide();\n                this.$element = null;\n                this.options = null;\n            }\n        },\n        \n        enable: function() { this.enabled = true; },\n        disable: function() { this.enabled = false; },\n        toggleEnabled: function() { this.enabled = !this.enabled; }\n    };\n    \n    $.fn.tipsy = function(options) {\n        \n        if (options === true) {\n            return this.data('tipsy');\n        } else if (typeof options == 'string') {\n            var tipsy = this.data('tipsy');\n            if (tipsy) tipsy[options]();\n            return this;\n        }\n        \n        options = $.extend({}, $.fn.tipsy.defaults, options);\n        \n        function get(ele) {\n            var tipsy = $.data(ele, 'tipsy');\n            if (!tipsy) {\n                tipsy = new Tipsy(ele, $.fn.tipsy.elementOptions(ele, options));\n                $.data(ele, 'tipsy', tipsy);\n            }\n            return tipsy;\n        }\n        \n        function enter() {\n            var tipsy = get(this);\n            tipsy.hoverState = 'in';\n            if (options.delayIn == 0) {\n                tipsy.show();\n            } else {\n                tipsy.fixTitle();\n                setTimeout(function() { if (tipsy.hoverState == 'in') tipsy.show(); }, options.delayIn);\n            }\n        };\n        \n        function leave() {\n            var tipsy = get(this);\n            tipsy.hoverState = 'out';\n            if (options.delayOut == 0) {\n                tipsy.hide();\n            } else {\n                setTimeout(function() { if (tipsy.hoverState == 'out') tipsy.hide(); }, options.delayOut);\n            }\n        };\n        \n        if (!options.live) this.each(function() { get(this); });\n        \n        if (options.trigger != 'manual') {\n            var binder   = options.live ? 'live' : 'bind',\n                eventIn  = options.trigger == 'hover' ? 'mouseenter' : 'focus',\n                eventOut = options.trigger == 'hover' ? 'mouseleave' : 'blur';\n            this[binder](eventIn, enter)[binder](eventOut, leave);\n        }\n        \n        return this;\n        \n    };\n    \n    $.fn.tipsy.defaults = {\n        className: null,\n        delayIn: 0,\n        delayOut: 0,\n        fade: false,\n        fallback: '',\n        gravity: 'n',\n        html: false,\n        live: false,\n        offset: 0,\n        opacity: 0.8,\n        title: 'title',\n        trigger: 'hover'\n    };\n    \n    $.fn.tipsy.revalidate = function() {\n      $('.tipsy').each(function() {\n        var pointee = $.data(this, 'tipsy-pointee');\n        if (!pointee || !isElementInDOM(pointee)) {\n          $(this).remove();\n        }\n      });\n    };\n    \n    // Overwrite this method to provide options on a per-element basis.\n    // For example, you could store the gravity in a 'tipsy-gravity' attribute:\n    // return $.extend({}, options, {gravity: $(ele).attr('tipsy-gravity') || 'n' });\n    // (remember - do not modify 'options' in place!)\n    $.fn.tipsy.elementOptions = function(ele, options) {\n        return $.metadata ? $.extend({}, options, $(ele).metadata()) : options;\n    };\n    \n    $.fn.tipsy.autoNS = function() {\n        return $(this).offset().top > ($(document).scrollTop() + $(window).height() / 2) ? 's' : 'n';\n    };\n    \n    $.fn.tipsy.autoWE = function() {\n        return $(this).offset().left > ($(document).scrollLeft() + $(window).width() / 2) ? 'e' : 'w';\n    };\n    \n    /**\n     * yields a closure of the supplied parameters, producing a function that takes\n     * no arguments and is suitable for use as an autogravity function like so:\n     *\n     * @param margin (int) - distance from the viewable region edge that an\n     *        element should be before setting its tooltip's gravity to be away\n     *        from that edge.\n     * @param prefer (string, e.g. 'n', 'sw', 'w') - the direction to prefer\n     *        if there are no viewable region edges effecting the tooltip's\n     *        gravity. It will try to vary from this minimally, for example,\n     *        if 'sw' is preferred and an element is near the right viewable \n     *        region edge, but not the top edge, it will set the gravity for\n     *        that element's tooltip to be 'se', preserving the southern\n     *        component.\n     */\n     $.fn.tipsy.autoBounds = function(margin, prefer) {\n\t\treturn function() {\n\t\t\tvar dir = {ns: prefer[0], ew: (prefer.length > 1 ? prefer[1] : false)},\n\t\t\t    boundTop = $(document).scrollTop() + margin,\n\t\t\t    boundLeft = $(document).scrollLeft() + margin,\n\t\t\t    $this = $(this);\n\n\t\t\tif ($this.offset().top < boundTop) dir.ns = 'n';\n\t\t\tif ($this.offset().left < boundLeft) dir.ew = 'w';\n\t\t\tif ($(window).width() + $(document).scrollLeft() - $this.offset().left < margin) dir.ew = 'e';\n\t\t\tif ($(window).height() + $(document).scrollTop() - $this.offset().top < margin) dir.ns = 's';\n\n\t\t\treturn dir.ns + (dir.ew ? dir.ew : '');\n\t\t}\n\t};\n    \n})(jQuery);\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"./node_modules/jquery/dist/jquery.js\")))\n\n/***/ }),\n\n/***/ \"./build/_js/_lib/jquery.validation.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(__webpack_provided_window_dot_jQuery) {/*** IMPORTS FROM imports-loader ***/\n(function() {\n\n/*!\n * jQuery Form Validation\n * Copyright (C) 2015 RunningCoder.org\n * Licensed under the MIT license\n *\n * @author Tom Bertrand\n * @version 1.5.3 (2015-06-14)\n * @link http://www.runningcoder.org/jqueryvalidation/\n */\n;\n(function(window, document, $, undefined) {\n\n    window.Validation = {\n        form: [],\n        labels: {},\n        hasScrolled: false\n    };\n\n    if (typeof Object.preventExtensions !== \"function\") {\n        Object.preventExtensions = function(obj) {\n            return obj;\n        };\n    }\n    var _rules = {\n        NOTEMPTY: /\\S/,\n        INTEGER: /^\\d+$/,\n        NUMERIC: /^\\d+(?:[,\\s]\\d{3})*(?:\\.\\d+)?$/,\n        MIXED: /^[\\w\\s-]+$/,\n        NAME: /^['a-z\\s-]+$/i,\n        NOSPACE: /^(?!\\s)\\S*$/,\n        TRIM: /^[^\\s].*[^\\s]$/,\n        DATE: /^\\d{4}-\\d{2}-\\d{2}(\\s\\d{2}:\\d{2}(:\\d{2})?)?$/,\n        EMAIL: /^([^@]+?)@(([a-z0-9]-*)*[a-z0-9]+\\.)+([a-z0-9]+)$/i,\n        URL: /^(https?:\\/\\/)?((([a-z0-9]-*)*[a-z0-9]+\\.?)*([a-z0-9]+))(\\/[\\w?=\\.-]*)*$/,\n        PHONE: /^(\\()?\\d{3}(\\))?(-|\\s)?\\d{3}(-|\\s)\\d{4}$/,\n        OPTIONAL: /\\S/,\n        COMPARISON: /^\\s*([LV])\\s*([<>]=?|==|!=)\\s*([^<>=!]+?)\\s*$/\n    };\n\n    var _messages = {\n        'default': '$ contain error(s).',\n        'NOTEMPTY': '$ must not be empty.',\n        'INTEGER': '$ must be an integer.',\n        'NUMERIC': '$ must be numeric.',\n        'MIXED': '$ must be letters or numbers (no special characters).',\n        'NAME': '$ must not contain special characters.',\n        'NOSPACE': '$ must not contain spaces.',\n        'TRIM': '$ must not start or end with space character.',\n        'DATE': '$ is not a valid with format YYYY-MM-DD.',\n        'EMAIL': '$ is not valid.',\n        'URL': '$ is not valid.',\n        'PHONE': '$ is not a valid phone number.',\n        '<': '$ must be less than % characters.',\n        '<=': '$ must be less or equal to % characters.',\n        '>': '$ must be greater than % characters.',\n        '>=': '$ must be greater or equal to % characters.',\n        '==': '$ must be equal to %',\n        '!=': '$ must be different than %'\n    };\n\n    var _data = {\n        validation: 'data-validation',\n        validationMessage: 'data-validation-message',\n        regex: 'data-validation-regex',\n        regexReverse: 'data-validation-regex-reverse',\n        regexMessage: 'data-validation-regex-message',\n        group: 'data-validation-group',\n        label: 'data-validation-label',\n        errorList: 'data-error-list'\n    }\n\n    var _options = {\n        submit: {\n            settings: {\n                form: null,\n                display: \"inline\",\n                insertion: \"append\",\n                allErrors: false,\n                trigger: \"click\",\n                button: \"[type='submit']\",\n                errorClass: \"error\",\n                errorListClass: \"error-list\",\n                errorListContainer: null,\n                inputContainer: null,\n                clear: \"focusin\",\n                scrollToError: false\n            },\n            callback: {\n                onInit: null,\n                onValidate: null,\n                onError: null,\n                onBeforeSubmit: null,\n                onSubmit: null,\n                onAfterSubmit: null\n            }\n        },\n        dynamic: {\n            settings: {\n                trigger: null,\n                delay: 300\n            },\n            callback: {\n                onSuccess: null,\n                onError: null,\n                onComplete: null\n            }\n        },\n        rules: {},\n        messages: {},\n        labels: {},\n        debug: false\n    };\n\n    var _supported = {\n        submit: {\n            settings: {\n                display: [\"inline\", \"block\"],\n                insertion: [\"append\", \"prepend\"], //\"before\", \"insertBefore\", \"after\", \"insertAfter\"\n                allErrors: [true, false],\n                clear: [\"focusin\", \"keypress\", false],\n                trigger: [\n                    \"click\", \"dblclick\", \"focusout\",\n                    \"hover\", \"mousedown\", \"mouseenter\",\n                    \"mouseleave\", \"mousemove\", \"mouseout\",\n                    \"mouseover\", \"mouseup\", \"toggle\"\n                ]\n            }\n        },\n        dynamic: {\n            settings: {\n                trigger: [\"focusout\", \"keydown\", \"keypress\", \"keyup\"]\n            }\n        },\n        debug: [true, false]\n    };\n\n    var Validation = function(node, options) {\n\n        var errors = [],\n            messages = {},\n            formData = {},\n            delegateSuffix = \".vd\", // validation.delegate\n            resetSuffix = \".vr\"; // validation.resetError\n\n        window.Validation.hasScrolled = false;\n\n        function extendRules() {\n            options.rules = $.extend(\n                true, {},\n                _rules,\n                options.rules\n            );\n        }\n\n        function extendMessages() {\n            options.messages = $.extend(\n                true, {},\n                _messages,\n                options.messages\n            );\n        }\n\n        function extendOptions() {\n\n            if (!(options instanceof Object)) {\n                options = {};\n            }\n\n            var tpmOptions = Object.preventExtensions($.extend(true, {}, _options));\n\n            for (var method in options) {\n\n                if (!options.hasOwnProperty(method) || method === \"debug\") {\n                    continue;\n                }\n\n                if (~[\"labels\", \"messages\", \"rules\"].indexOf(method) && options[method] instanceof Object) {\n                    tpmOptions[method] = options[method];\n                    continue;\n                }\n\n                if (!_options[method] || !(options[method] instanceof Object)) {\n                    options.debug && window.Debug.log({\n                        'node': node,\n                        'function': 'extendOptions()',\n                        'arguments': '{' + method + ': ' + JSON.stringify(options[method]) + '}',\n                        'message': 'WARNING - ' + method + ' - invalid option'\n                    });\n\n                    continue;\n                }\n\n                for (var type in options[method]) {\n                    if (!options[method].hasOwnProperty(type)) {\n                        continue;\n                    }\n\n                    if (!_options[method][type] || !(options[method][type] instanceof Object)) {\n                        options.debug && window.Debug.log({\n                            'node': node,\n                            'function': 'extendOptions()',\n                            'arguments': '{' + type + ': ' + JSON.stringify(options[method][type]) + '}',\n                            'message': 'WARNING - ' + type + ' - invalid option'\n                        });\n\n                        continue;\n                    }\n\n                    for (var option in options[method][type]) {\n                        if (!options[method][type].hasOwnProperty(option)) {\n                            continue;\n                        }\n\n                        if (_supported[method] &&\n                            _supported[method][type] &&\n                            _supported[method][type][option] &&\n                            $.inArray(options[method][type][option], _supported[method][type][option]) === -1) {\n                            options.debug && window.Debug.log({\n                                'node': node,\n                                'function': 'extendOptions()',\n                                'arguments': '{' + option + ': ' + JSON.stringify(options[method][type][option]) + '}',\n                                'message': 'WARNING - ' + option.toString() + ': ' + JSON.stringify(options[method][type][option]) + ' - unsupported option'\n                            });\n\n                            delete options[method][type][option];\n                        }\n\n                    }\n                    if (tpmOptions[method] && tpmOptions[method][type]) {\n                        tpmOptions[method][type] = $.extend(Object.preventExtensions(tpmOptions[method][type]), options[method][type]);\n                    }\n                }\n            }\n            if (options.debug && $.inArray(options.debug, _supported.debug !== -1)) {\n                tpmOptions.debug = options.debug;\n            }\n            if (tpmOptions.dynamic.settings.trigger) {\n                if (tpmOptions.dynamic.settings.trigger === \"keypress\" && tpmOptions.submit.settings.clear === \"keypress\") {\n                    tpmOptions.dynamic.settings.trigger = \"keydown\";\n                }\n            }\n\n            options = tpmOptions;\n\n        }\n\n        function delegateDynamicValidation() {\n\n            if (!options.dynamic.settings.trigger) {\n                return false;\n            }\n            options.debug && window.Debug.log({\n                'node': node,\n                'function': 'delegateDynamicValidation()',\n                'message': 'OK - Dynamic Validation activated on ' + node.length + ' form(s)'\n            });\n\n            if (!node.find('[' + _data.validation + '],[' + _data.regex + ']')[0]) {\n                options.debug && window.Debug.log({\n                    'node': node,\n                    'function': 'delegateDynamicValidation()',\n                    'arguments': 'node.find([' + _data.validation + '],[' + _data.regex + '])',\n                    'message': 'ERROR - [' + _data.validation + '] not found'\n                });\n\n                return false;\n            }\n\n            var event = options.dynamic.settings.trigger + delegateSuffix;\n            if (options.dynamic.settings.trigger !== \"focusout\") {\n                event += \" change\" + delegateSuffix + \" paste\" + delegateSuffix;\n            }\n\n            $.each(\n                node.find('[' + _data.validation + '],[' + _data.regex + ']'),\n                function(index, input) {\n\n                    $(input).unbind(event).on(event, function(e) {\n\n                        if ($(this).is(':disabled')) {\n                            return false;\n                        }\n\n                        var input = this,\n                            keyCode = e.keyCode || null;\n\n                        _typeWatch(function() {\n\n                            if (!validateInput(input)) {\n\n                                displayOneError(input.name);\n                                _executeCallback(options.dynamic.callback.onError, [node, input, keyCode, errors[input.name]]);\n\n                            } else {\n\n                                _executeCallback(options.dynamic.callback.onSuccess, [node, input, keyCode]);\n\n                            }\n\n                            _executeCallback(options.dynamic.callback.onComplete, [node, input, keyCode]);\n\n                        }, options.dynamic.settings.delay);\n\n                    });\n                }\n            );\n        }\n\n        function delegateValidation() {\n\n            _executeCallback(options.submit.callback.onInit, [node]);\n\n            var event = options.submit.settings.trigger + '.vd';\n            options.debug && window.Debug.log({\n                'node': node,\n                'function': 'delegateValidation()',\n                'message': 'OK - Validation activated on ' + node.length + ' form(s)'\n            });\n\n            if (!node.find(options.submit.settings.button)[0]) {\n                options.debug && window.Debug.log({\n                    'node': node,\n                    'function': 'delegateValidation()',\n                    'arguments': '{button: ' + options.submit.settings.button + '}',\n                    'message': 'ERROR - node.find(\"' + options.submit.settings.button + '\") not found'\n                });\n\n                return false;\n\n            }\n\n            node.on(\"submit\", false);\n            node.find(options.submit.settings.button).off('.vd').on(event, function(e) {\n\n                e.preventDefault();\n\n                resetErrors();\n\n                _executeCallback(options.submit.callback.onValidate, [node]);\n\n                if (!validateForm()) {\n\n                    displayErrors();\n                    _executeCallback(options.submit.callback.onError, [node, errors, formData]);\n\n                } else {\n\n                    _executeCallback(options.submit.callback.onBeforeSubmit, [node]);\n\n                    (options.submit.callback.onSubmit) ? _executeCallback(options.submit.callback.onSubmit, [node, formData]): submitForm();\n\n                    _executeCallback(options.submit.callback.onAfterSubmit, [node]);\n\n                }\n                options.debug && window.Debug.print();\n\n                return false;\n\n            });\n\n        }\n\n        function validateForm() {\n\n            var isValid = true;\n\n            formData = {};\n\n\n            $.each(\n                node.find('input:not([type=\"submit\"]), select, textarea'),\n                function(index, input) {\n\n                    input = $(input);\n\n                    var value = _getInputValue(input[0]),\n                        inputName = input.attr('name');\n\n                    if (inputName) {\n                        formData[inputName] = value;\n                    }\n\n                    if (!input.attr('disabled') && (!!input.attr(_data.validation) || !!input.attr(_data.regex))) {\n                        if (!validateInput(input[0], value)) {\n                            isValid = false;\n                        }\n                    }\n                }\n            );\n\n            prepareFormData();\n\n            return isValid;\n\n        }\n\n        function prepareFormData() {\n\n            var data = {},\n                matches,\n                index;\n\n            for (var i in formData) {\n                if (!formData.hasOwnProperty(i)) continue;\n\n                index = 0;\n                matches = i.split(/\\[(.+?)]/g);\n\n                var tmpObject = {},\n                    tmpArray = [];\n\n                for (var k = matches.length - 1; k >= 0; k--) {\n                    if (matches[k] === \"\") {\n                        matches.splice(k, 1);\n                        continue;\n                    }\n\n                    if (tmpArray.length < 1) {\n                        tmpObject[matches[k]] = Number(formData[i]) || formData[i];\n                    } else {\n                        tmpObject = {};\n                        tmpObject[matches[k]] = tmpArray[tmpArray.length - 1];\n                    }\n                    tmpArray.push(tmpObject)\n\n                }\n\n                data = $.extend(true, data, tmpObject);\n\n            }\n\n            formData = data;\n\n        }\n\n        function validateInput(input, value) {\n\n            var inputName = $(input).attr('name'),\n                value = value || _getInputValue(input);\n\n            if (!inputName) {\n                options.debug && window.Debug.log({\n                    'node': node,\n                    'function': 'validateInput()',\n                    'arguments': '$(input).attr(\"name\")',\n                    'message': 'ERROR - Missing input [name]'\n                });\n\n                return false;\n            }\n\n            var matches = inputName.replace(/]$/, '').split(/]\\[|[[\\]]/g),\n                inputShortName = window.Validation.labels[inputName] ||\n                options.labels[inputName] ||\n                $(input).attr(_data.label) ||\n                matches[matches.length - 1],\n\n                validationArray = $(input).attr(_data.validation),\n                validationMessage = $(input).attr(_data.validationMessage),\n                validationRegex = $(input).attr(_data.regex),\n                validationRegexReverse = !($(input).attr(_data.regexReverse) === undefined),\n                validationRegexMessage = $(input).attr(_data.regexMessage),\n\n                validateOnce = false;\n\n            if (validationArray) {\n                validationArray = _api._splitValidation(validationArray);\n            }\n            if (validationArray instanceof Array && validationArray.length > 0) {\n                if ($.trim(value) === '' && ~validationArray.indexOf('OPTIONAL')) {\n                    return true;\n                }\n\n                $.each(validationArray, function(i, rule) {\n\n                    if (validateOnce === true) {\n                        return true;\n                    }\n\n                    try {\n\n                        validateRule(value, rule);\n\n                    } catch (error) {\n\n                        if (validationMessage || !options.submit.settings.allErrors) {\n                            validateOnce = true;\n                        }\n\n                        error[0] = validationMessage || error[0];\n\n                        registerError(inputName, error[0].replace('$', inputShortName).replace('%', error[1]));\n\n                    }\n\n                });\n\n            }\n            if (validationRegex) {\n\n                var rule = _buildRegexFromString(validationRegex);\n                if (!(rule instanceof RegExp)) {\n                    return true;\n                }\n\n                try {\n\n                    validateRule(value, rule, validationRegexReverse);\n\n                } catch (error) {\n\n                    error[0] = validationRegexMessage || error[0];\n\n                    registerError(inputName, error[0].replace('$', inputShortName));\n\n                }\n\n            }\n\n            return !errors[inputName] || errors[inputName] instanceof Array && errors[inputName].length === 0;\n\n        }\n\n        function validateRule(value, rule, reversed) {\n            if (rule instanceof RegExp) {\n                var isValid = rule.test(value);\n\n                if (reversed) {\n                    isValid = !isValid;\n                }\n\n                if (!isValid) {\n                    throw [options.messages['default'], ''];\n                }\n                return;\n            }\n\n            if (options.rules[rule]) {\n                if (!options.rules[rule].test(value)) {\n                    throw [options.messages[rule], ''];\n                }\n                return;\n            }\n            var comparison = rule.match(options.rules.COMPARISON);\n\n            if (!comparison || comparison.length !== 4) {\n                options.debug && window.Debug.log({\n                    'node': node,\n                    'function': 'validateRule()',\n                    'arguments': 'value: ' + value + ' rule: ' + rule,\n                    'message': 'WARNING - Invalid comparison'\n                });\n\n                return;\n            }\n\n            var type = comparison[1],\n                operator = comparison[2],\n                compared = comparison[3],\n                comparedValue;\n\n            switch (type) {\n                case \"L\":\n                    if (isNaN(compared)) {\n                        options.debug && window.Debug.log({\n                            'node': node,\n                            'function': 'validateRule()',\n                            'arguments': 'compare: ' + compared + ' rule: ' + rule,\n                            'message': 'WARNING - Invalid rule, \"L\" compare must be numeric'\n                        });\n\n                        return false;\n\n                    } else {\n\n                        if (!value || eval(value.length + operator + parseFloat(compared)) === false) {\n                            throw [options.messages[operator], compared];\n                        }\n\n                    }\n\n                    break;\n                case \"V\":\n                default:\n                    if (isNaN(compared)) {\n\n                        comparedValue = node.find('[name=\"' + compared + '\"]').val();\n                        if (!comparedValue) {\n                            options.debug && window.Debug.log({\n                                'node': node,\n                                'function': 'validateRule()',\n                                'arguments': 'compare: ' + compared + ' rule: ' + rule,\n                                'message': 'WARNING - Unable to find compared field [name=\"' + compared + '\"]'\n                            });\n\n                            return false;\n                        }\n\n                        if (!value || !eval('\"' + encodeURIComponent(value) + '\"' + operator + '\"' + encodeURIComponent(comparedValue) + '\"')) {\n                            throw [options.messages[operator].replace(' characters', ''), compared];\n                        }\n\n                    } else {\n                        if (!value || isNaN(value) || !eval(value + operator + parseFloat(compared))) {\n                            throw [options.messages[operator].replace(' characters', ''), compared];\n                        }\n\n                    }\n                    break;\n\n            }\n\n        }\n\n        function registerError(inputName, error) {\n\n            if (!errors[inputName]) {\n                errors[inputName] = [];\n            }\n\n            error = error.capitalize();\n\n            var hasError = false;\n            for (var i = 0; i < errors[inputName].length; i++) {\n                if (errors[inputName][i] === error) {\n                    hasError = true;\n                    break;\n                }\n            }\n\n            if (!hasError) {\n                errors[inputName].push(error);\n            }\n\n        }\n\n        function displayOneError(inputName) {\n\n            var input,\n                inputId,\n                errorContainer,\n                label,\n                html = '<div class=\"' + options.submit.settings.errorListClass + '\" ' + _data.errorList + '><ul></ul></div>',\n                group,\n                groupInput;\n\n            if (!errors.hasOwnProperty(inputName)) {\n                return false;\n            }\n\n            input = node.find('[name=\"' + inputName + '\"]');\n\n            label = null;\n\n            if (!input[0]) {\n                options.debug && window.Debug.log({\n                    'node': node,\n                    'function': 'displayOneError()',\n                    'arguments': '[name=\"' + inputName + '\"]',\n                    'message': 'ERROR - Unable to find input by name \"' + inputName + '\"'\n                });\n\n                return false;\n            }\n\n            group = input.attr(_data.group);\n\n            if (group) {\n\n                groupInput = node.find('[name=\"' + inputName + '\"]');\n                label = node.find('[id=\"' + group + '\"]');\n\n                if (label[0]) {\n                    label.addClass(options.submit.settings.errorClass);\n                    errorContainer = label;\n                }\n\n            } else {\n\n                input.addClass(options.submit.settings.errorClass);\n\n                if (options.submit.settings.inputContainer) {\n                    input.parentsUntil(node, options.submit.settings.inputContainer).addClass(options.submit.settings.errorClass);\n                }\n\n                inputId = input.attr('id');\n\n                if (inputId) {\n                    label = node.find('label[for=\"' + inputId + '\"]')[0];\n                }\n\n                if (!label) {\n                    label = input.parentsUntil(node, 'label')[0];\n                }\n\n                if (label) {\n                    label = $(label);\n                    label.addClass(options.submit.settings.errorClass);\n                }\n            }\n\n            if (options.submit.settings.display === 'inline') {\n                if (options.submit.settings.errorListContainer) {\n                    errorContainer = input.parentsUntil(node, options.submit.settings.errorListContainer);\n                } else {\n                    errorContainer = errorContainer || input.parent();\n                }\n            } else if (options.submit.settings.display === 'block') {\n                errorContainer = node;\n            }\n            if (options.submit.settings.display === 'inline' && errorContainer.find('[' + _data.errorList + ']')[0]) {\n                return false;\n            }\n\n            if (options.submit.settings.display === \"inline\" ||\n                (options.submit.settings.display === \"block\" && !errorContainer.find('[' + _data.errorList + ']')[0])\n            ) {\n                if (options.submit.settings.insertion === 'append') {\n                    errorContainer.append(html);\n                } else if (options.submit.settings.insertion === 'prepend') {\n                    errorContainer.prepend(html);\n                }\n            }\n\n            for (var i = 0; i < errors[inputName].length; i++) {\n                errorContainer.find('[' + _data.errorList + '] ul').append('<li>' + errors[inputName][i] + '</li>');\n            }\n\n            if (options.submit.settings.clear || options.dynamic.settings.trigger) {\n\n                if (group && groupInput) {\n                    input = groupInput;\n                }\n\n                var event = \"coucou\" + resetSuffix;\n                if (options.submit.settings.clear) {\n                    event += \" \" + options.submit.settings.clear + resetSuffix;\n                    if (~['radio', 'checkbox'].indexOf(input[0].type)) {\n                        event += \" change\" + resetSuffix;\n                    }\n                }\n                if (options.dynamic.settings.trigger) {\n                    event += \" \" + options.dynamic.settings.trigger + resetSuffix;\n                    if (options.dynamic.settings.trigger !== \"focusout\" && !~['radio', 'checkbox'].indexOf(input[0].type)) {\n                        event += \" change\" + resetSuffix + \" paste\" + resetSuffix;\n                    }\n                }\n\n                input.unbind(event).on(event, function(a, b, c, d, e) {\n\n                    return function() {\n                        if (e) {\n                            if ($(c).hasClass(options.submit.settings.errorClass)) {\n                                resetOneError(a, b, c, d, e);\n                            }\n                        } else if ($(b).hasClass(options.submit.settings.errorClass)) {\n                            resetOneError(a, b, c, d);\n                        }\n                    };\n\n                }(inputName, input, label, errorContainer, group));\n            }\n\n            if (options.submit.settings.scrollToError && !window.Validation.hasScrolled) {\n\n                window.Validation.hasScrolled = true;\n\n                var offset = parseFloat(options.submit.settings.scrollToError.offset) || 0,\n                    duration = parseFloat(options.submit.settings.scrollToError.duration) || 500,\n                    handle = (options.submit.settings.display === 'block') ? errorContainer : input;\n\n                $('html, body').animate({\n                    scrollTop: handle.offset().top + offset\n                }, duration);\n\n            }\n\n        }\n\n        function displayErrors() {\n\n            for (var inputName in errors) {\n                if (!errors.hasOwnProperty(inputName)) continue;\n                displayOneError(inputName);\n            }\n\n        }\n\n        function resetOneError(inputName, input, label, container, group) {\n\n            delete errors[inputName];\n\n            if (container) {\n\n                if (options.submit.settings.inputContainer) {\n                    (group ? label : input).parentsUntil(node, options.submit.settings.inputContainer).removeClass(options.submit.settings.errorClass);\n                }\n\n                label && label.removeClass(options.submit.settings.errorClass);\n\n                input.removeClass(options.submit.settings.errorClass);\n\n                if (options.submit.settings.display === 'inline') {\n                    container.find('[' + _data.errorList + ']').remove();\n                }\n\n            } else {\n\n                if (!input) {\n                    input = node.find('[name=\"' + inputName + '\"]');\n\n                    if (!input[0]) {\n                        options.debug && window.Debug.log({\n                            'node': node,\n                            'function': 'resetOneError()',\n                            'arguments': '[name=\"' + inputName + '\"]',\n                            'message': 'ERROR - Unable to find input by name \"' + inputName + '\"'\n                        });\n\n                        return false;\n                    }\n                }\n\n                input.trigger('coucou' + resetSuffix);\n            }\n\n        }\n\n        function resetErrors() {\n\n            errors = [];\n            window.Validation.hasScrolled = false;\n\n            node.find('[' + _data.errorList + ']').remove();\n            node.find('.' + options.submit.settings.errorClass).removeClass(options.submit.settings.errorClass);\n\n        }\n\n        function submitForm() {\n\n            node[0].submit()\n\n        }\n\n        function destroy() {\n\n            resetErrors();\n            node.find('[' + _data.validation + '],[' + _data.regex + ']').off(delegateSuffix + ' ' + resetSuffix);\n\n            node.find(options.submit.settings.button).off(delegateSuffix).on('click' + delegateSuffix, function() {\n                $(this).closest('form')[0].submit();\n            });\n\n            return true;\n\n        }\n\n        var _getInputValue = function(input) {\n\n            var value;\n            switch ($(input).attr('type')) {\n                case 'checkbox':\n                    value = ($(input).is(':checked')) ? 1 : '';\n                    break;\n                case 'radio':\n                    value = node.find('input[name=\"' + $(input).attr('name') + '\"]:checked').val() || '';\n                    break;\n                default:\n                    value = $(input).val();\n                    break;\n            }\n\n            return value;\n\n        };\n\n        var _typeWatch = (function() {\n            var timer = 0;\n            return function(callback, ms) {\n                clearTimeout(timer);\n                timer = setTimeout(callback, ms);\n            };\n        })();\n\n        var _executeCallback = function(callback, extraParams) {\n\n            if (!callback) {\n                return false;\n            }\n\n            var _callback;\n\n            if (typeof callback === \"function\") {\n\n                _callback = callback;\n\n            } else if (typeof callback === \"string\" || callback instanceof Array) {\n\n                _callback = window;\n\n                if (typeof callback === \"string\") {\n                    callback = [callback, []];\n                }\n\n                var _exploded = callback[0].split('.'),\n                    _params = callback[1],\n                    _isValid = true,\n                    _splitIndex = 0;\n\n                while (_splitIndex < _exploded.length) {\n\n                    if (typeof _callback !== 'undefined') {\n                        _callback = _callback[_exploded[_splitIndex++]];\n                    } else {\n                        _isValid = false;\n                        break;\n                    }\n                }\n\n                if (!_isValid || typeof _callback !== \"function\") {\n                    options.debug && window.Debug.log({\n                        'node': node,\n                        'function': '_executeCallback()',\n                        'arguments': JSON.stringify(callback),\n                        'message': 'WARNING - Invalid callback function\"'\n                    });\n\n                    return false;\n                }\n\n            }\n\n            _callback.apply(this, $.merge(_params || [], (extraParams) ? extraParams : []));\n            return true;\n\n        };\n\n        this.__construct = function() {\n\n            extendOptions();\n            extendRules();\n            extendMessages();\n\n            delegateDynamicValidation();\n            delegateValidation();\n            options.debug && window.Debug.print();\n\n        }();\n\n        return {\n\n            registerError: registerError,\n\n            displayOneError: displayOneError,\n\n            displayErrors: displayErrors,\n\n            resetOneError: resetOneError,\n\n            resetErrors: resetErrors,\n\n            destroy: destroy\n\n        };\n\n    };\n\n    $.fn.validate = $.validate = function(options) {\n\n        return _api.validate(this, options);\n\n    };\n\n    $.fn.addValidation = function(validation) {\n\n        return _api.addValidation(this, validation);\n\n    };\n\n    $.fn.removeValidation = function(validation) {\n\n        return _api.removeValidation(this, validation);\n\n    };\n\n    $.fn.addError = function(error) {\n\n        return _api.addError(this, error);\n\n    };\n\n    $.fn.removeError = function(error) {\n\n        return _api.removeError(this, error);\n\n    };\n\n    $.fn.alterValidationRules = $.alterValidationRules = function(rules) {\n\n        if (!(rules instanceof Array)) {\n            rules = [rules];\n        }\n\n        for (var i = 0; i < rules.length; i++) {\n            _api.alterValidationRules(rules[i]);\n        }\n\n    };\n\n    var _api = {\n\n        _formatValidation: function(validation) {\n\n            validation = validation.toString().replace(/\\s/g, '');\n\n            if (validation.charAt(0) === \"[\" && validation.charAt(validation.length - 1) === \"]\") {\n                validation = validation.replace(/^\\[|]$/g, '');\n            }\n\n            return validation;\n\n        },\n\n        _splitValidation: function(validation) {\n\n            var validationArray = this._formatValidation(validation).split(','),\n                oneValidation;\n\n            for (var i = 0; i < validationArray.length; i++) {\n                oneValidation = validationArray[i];\n                if (/^[a-z]+$/i.test(oneValidation)) {\n                    validationArray[i] = oneValidation.toUpperCase();\n                }\n            }\n\n            return validationArray;\n        },\n\n        _joinValidation: function(validation) {\n\n            return '[' + validation.join(', ') + ']';\n\n        },\n\n        validate: function(node, options) {\n\n            if (typeof node === \"function\") {\n\n                if (!options.submit.settings.form) {\n                    window.Debug.log({\n                        'node': node,\n                        'function': '$.validate()',\n                        'arguments': '',\n                        'message': 'Undefined property \"options.submit.settings.form - Validation dropped'\n                    });\n\n                    window.Debug.print();\n\n                    return;\n                }\n\n                node = $(options.submit.settings.form);\n\n                if (!node[0] || node[0].nodeName.toLowerCase() !== \"form\") {\n                    window.Debug.log({\n                        'function': '$.validate()',\n                        'arguments': options.submit.settings.form,\n                        'message': 'Unable to find jQuery form element - Validation dropped'\n                    });\n\n                    window.Debug.print();\n\n                    return;\n                }\n\n            } else if (typeof node[0] === 'undefined') {\n                window.Debug.log({\n                    'node': node,\n                    'function': '$.validate()',\n                    'arguments': '$(\"' + node.selector + '\").validate()',\n                    'message': 'Unable to find jQuery form element - Validation dropped'\n                });\n\n                window.Debug.print();\n\n                return;\n            }\n\n            if (options === \"destroy\") {\n\n                if (!window.Validation.form[node.selector]) {\n                    window.Debug.log({\n                        'node': node,\n                        'function': '$.validate(\"destroy\")',\n                        'arguments': '',\n                        'message': 'Unable to destroy \"' + node.selector + '\", perhaps it\\'s already destroyed?'\n                    });\n\n                    window.Debug.print();\n\n                    return;\n                }\n\n                window.Validation.form[node.selector].destroy();\n\n                return;\n\n            }\n\n            return node.each(function() {\n                window.Validation.form[node.selector] = new Validation($(this), options);\n            });\n\n        },\n\n        addValidation: function(node, validation) {\n\n            var self = this;\n\n            validation = self._splitValidation(validation);\n\n            if (!validation) {\n                return false;\n            }\n\n            return node.each(function() {\n\n                var $this = $(this),\n                    validationData = $this.attr(_data.validation),\n                    validationArray = (validationData && validationData.length) ? self._splitValidation(validationData) : [],\n                    oneValidation;\n\n                for (var i = 0; i < validation.length; i++) {\n\n                    oneValidation = self._formatValidation(validation[i]);\n\n                    if ($.inArray(oneValidation, validationArray) === -1) {\n                        validationArray.push(oneValidation);\n                    }\n                }\n\n                if (validationArray.length) {\n                    $this.attr(_data.validation, self._joinValidation(validationArray));\n                }\n\n            });\n\n        },\n\n        removeValidation: function(node, validation) {\n\n            var self = this;\n\n            validation = self._splitValidation(validation);\n            if (!validation) {\n                return false;\n            }\n\n            return node.each(function() {\n\n                var $this = $(this),\n                    validationData = $this.attr(_data.validation),\n                    validationArray = (validationData && validationData.length) ? self._splitValidation(validationData) : [],\n                    oneValidation,\n                    validationIndex;\n\n                if (!validationArray.length) {\n                    $this.removeAttr(_data.validation);\n                    return true;\n                }\n\n                for (var i = 0; i < validation.length; i++) {\n                    oneValidation = self._formatValidation(validation[i]);\n                    validationIndex = $.inArray(oneValidation, validationArray);\n                    if (validationIndex !== -1) {\n                        validationArray.splice(validationIndex, 1);\n                    }\n\n                }\n\n                if (!validationArray.length) {\n                    $this.removeAttr(_data.validation);\n                    return true;\n                }\n\n                $this.attr(_data.validation, self._joinValidation(validationArray));\n\n            });\n\n        },\n\n        addError: function(node, error) {\n\n            if (!window.Validation.form[node.selector]) {\n                window.Debug.log({\n                    'node': node,\n                    'function': '$.addError()',\n                    'arguments': 'window.Validation.form[' + node.selector + ']',\n                    'message': 'ERROR - Invalid node selector'\n                });\n\n                window.Debug.print();\n\n                return false;\n            }\n\n            if (typeof error !== \"object\" || Object.prototype.toString.call(error) !== \"[object Object]\") {\n                window.Debug.log({\n                    'node': node,\n                    'function': '$.addError()',\n                    'arguments': 'window.Validation.form[' + node.selector + ']',\n                    'message': 'ERROR - Invalid argument, must be type object'\n                });\n\n                window.Debug.print();\n\n                return false;\n            }\n\n            var input,\n                onlyOnce = true;\n            for (var inputName in error) {\n\n                if (!error.hasOwnProperty(inputName)) {\n                    continue;\n                }\n\n                if (!(error[inputName] instanceof Array)) {\n                    error[inputName] = [error[inputName]];\n                }\n\n                input = $(node.selector).find('[name=\"' + inputName + '\"]');\n                if (!input[0]) {\n                    window.Debug.log({\n                        'node': node,\n                        'function': '$.addError()',\n                        'arguments': inputName,\n                        'message': 'ERROR - Unable to find ' + '$(' + node.selector + ').find(\"[name=\"' + inputName + '\"]\")'\n                    });\n\n                    window.Debug.print();\n\n                    continue;\n                }\n\n                if (onlyOnce) {\n                    window.Validation.hasScrolled = false;\n                    onlyOnce = false;\n                }\n\n                window.Validation.form[node.selector].resetOneError(inputName, input);\n\n                for (var i = 0; i < error[inputName].length; i++) {\n\n                    if (typeof error[inputName][i] !== \"string\") {\n                        window.Debug.log({\n                            'node': node,\n                            'function': '$.addError()',\n                            'arguments': error[inputName][i],\n                            'message': 'ERROR - Invalid error object property - Accepted format: {\"inputName\": \"errorString\"} or {\"inputName\": [\"errorString\", \"errorString\"]}'\n                        });\n\n                        window.Debug.print();\n\n                        continue;\n                    }\n\n                    window.Validation.form[node.selector].registerError(inputName, error[inputName][i]);\n\n                }\n\n                window.Validation.form[node.selector].displayOneError(inputName);\n\n            }\n\n        },\n\n        removeError: function(node, inputName) {\n\n            if (!window.Validation.form[node.selector]) {\n                window.Debug.log({\n                    'node': node,\n                    'function': '$.removeError()',\n                    'arguments': 'window.Validation.form[' + node.selector + ']',\n                    'message': 'ERROR - Invalid node selector'\n                });\n\n                window.Debug.print();\n\n                return false;\n            }\n\n            if (!inputName) {\n                window.Validation.form[node.selector].resetErrors();\n                return false;\n            }\n\n            if (typeof inputName === \"object\" && Object.prototype.toString.call(inputName) !== \"[object Array]\") {\n                window.Debug.log({\n                    'node': node,\n                    'function': '$.removeError()',\n                    'arguments': inputName,\n                    'message': 'ERROR - Invalid inputName, must be type String or Array'\n                });\n\n                window.Debug.print();\n\n                return false;\n            }\n\n            if (!(inputName instanceof Array)) {\n                inputName = [inputName];\n            }\n\n            var input;\n            for (var i = 0; i < inputName.length; i++) {\n\n                input = node.find('[name=\"' + inputName[i] + '\"]');\n                if (!input[0]) {\n                    window.Debug.log({\n                        'node': node,\n                        'function': '$.removeError()',\n                        'arguments': inputName[i],\n                        'message': 'ERROR - Unable to find ' + '$(' + node.selector + ').find(\"[name=\"' + inputName[i] + '\"]\")'\n                    });\n\n                    window.Debug.print();\n\n                    continue;\n                }\n\n                window.Validation.form[node.selector].resetOneError(inputName[i], input);\n\n            }\n\n        },\n\n        alterValidationRules: function(ruleObj) {\n\n            if (!ruleObj.rule || (!ruleObj.regex && !ruleObj.message)) {\n                window.Debug.log({\n                    'function': '$.alterValidationRules()',\n                    'message': 'ERROR - Missing one or multiple parameter(s) {rule, regex, message}'\n                });\n                window.Debug.print();\n                return false;\n            }\n\n            ruleObj.rule = ruleObj.rule.toUpperCase();\n\n            if (ruleObj.regex) {\n\n                var regex = _buildRegexFromString(ruleObj.regex);\n\n                if (!(regex instanceof RegExp)) {\n                    window.Debug.log({\n                        'function': '$.alterValidationRules(rule)',\n                        'arguments': regex.toString(),\n                        'message': 'ERROR - Invalid rule'\n                    });\n                    window.Debug.print();\n                    return false;\n                }\n\n                _rules[ruleObj.rule] = regex;\n            }\n\n            if (ruleObj.message) {\n                _messages[ruleObj.rule] = ruleObj.message;\n            }\n\n            return true;\n        }\n\n    };\n\n    function _buildRegexFromString(regex) {\n\n        if (!regex || (typeof regex !== \"string\" && !(regex instanceof RegExp))) {\n            _regexDebug();\n            return false;\n        }\n\n        if (typeof regex !== 'string') {\n            regex = regex.toString();\n        }\n\n        var separator = regex.charAt(0),\n            index = regex.length - 1,\n            pattern,\n            modifier,\n            rule;\n\n        while (index > 0) {\n            if (/[gimsxeU]/.test(regex.charAt(index))) {\n                index--;\n            } else {\n                break;\n            }\n        }\n\n        if (regex.charAt(index) !== separator) {\n            separator = null;\n        }\n\n        if (separator && index !== regex.length - 1) {\n            modifier = regex.substr(index + 1, regex.length - 1);\n        }\n\n        if (separator) {\n            pattern = regex.substr(1, index - 1);\n        } else {\n            pattern = regex;\n        }\n\n        try {\n            rule = new RegExp(pattern, modifier);\n        } catch (error) {\n            _regexDebug();\n            return false;\n        }\n\n        return rule;\n\n        function _regexDebug() {\n            window.Debug.log({\n                'function': '_buildRegexFromString()',\n                'arguments': '{pattern: {' + (pattern || '') + '}, modifier: {' + (modifier || '') + '}',\n                'message': 'WARNING - Invalid regex given: ' + regex\n            });\n            window.Debug.print();\n        }\n\n    }\n    window.Debug = {\n\n        table: {},\n        log: function(debugObject) {\n\n            if (!debugObject.message || typeof debugObject.message !== \"string\") {\n                return false;\n            }\n\n            this.table[debugObject.message] = $.extend(\n                Object.preventExtensions({\n                    'node': '',\n                    'function': '',\n                    'arguments': ''\n                }), debugObject\n            );\n\n        },\n        print: function() {\n\n            if ($.isEmptyObject(this.table)) {\n                return false;\n            }\n\n            if (console.group !== undefined || console.table !== undefined) {\n\n                console.groupCollapsed('--- jQuery Form Validation Debug ---');\n\n                if (console.table) {\n                    console.table(this.table);\n                } else {\n                    $.each(this.table, function(index, data) {\n                        console.log(data['Name'] + ': ' + data['Execution Time'] + 'ms');\n                    });\n                }\n\n                console.groupEnd();\n\n            } else {\n                console.log('Debug is not available on your current browser, try the most recent version of Chrome or Firefox.');\n            }\n\n            this.table = {};\n\n        }\n\n    };\n\n    String.prototype.capitalize = function() {\n        return this.charAt(0).toUpperCase() + this.slice(1);\n    };\n\n    if (!Array.prototype.indexOf) {\n        Array.prototype.indexOf = function(elt) {\n            var len = this.length >>> 0;\n\n            var from = Number(arguments[1]) || 0;\n            from = (from < 0) ? Math.ceil(from) : Math.floor(from);\n            if (from < 0)\n                from += len;\n\n            for (; from < len; from++) {\n                if (from in this &&\n                    this[from] === elt)\n                    return from;\n            }\n            return -1;\n        };\n    }\n    if (!JSON && !JSON.stringify) {\n        JSON.stringify = function(obj) {\n            var t = typeof(obj);\n            if (t !== \"object\" || obj === null) {\n                if (t === \"string\") {\n                    obj = '\"' + obj + '\"';\n                }\n                return String(obj);\n            } else {\n                var n, v, json = [],\n                    arr = (obj && obj.constructor === Array);\n                for (n in obj) {\n                    if (true) {\n                        v = obj[n];\n                        t = typeof(v);\n                        if (t === \"string\") {\n                            v = '\"' + v + '\"';\n                        } else if (t === \"object\" && v !== null) {\n                            v = JSON.stringify(v);\n                        }\n                        json.push((arr ? \"\" : '\"' + n + '\": ') + String(v));\n                    }\n                }\n                return (arr ? \"[\" : \"{\") + String(json) + (arr ? \"]\" : \"}\");\n            }\n        };\n    }\n\n}(window, document, __webpack_provided_window_dot_jQuery));\n\n}.call(window));\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"./node_modules/jquery/dist/jquery.js\")))\n\n/***/ }),\n\n/***/ \"./node_modules/cropper/dist/cropper.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\n/*!\n * Cropper v3.0.0\n * https://github.com/fengyuanchen/cropper\n *\n * Copyright (c) 2017 Fengyuan Chen\n * Released under the MIT license\n *\n * Date: 2017-09-03T13:13:53.439Z\n */\n\n(function (global, factory) {\n\t true ? factory(__webpack_require__(\"./node_modules/jquery/dist/jquery.js\")) :\n\ttypeof define === 'function' && define.amd ? define(['jquery'], factory) :\n\t(factory(global.jQuery));\n}(this, (function ($) { 'use strict';\n\n$ = $ && $.hasOwnProperty('default') ? $['default'] : $;\n\nvar DEFAULTS = {\n  // Define the view mode of the cropper\n  viewMode: 0, // 0, 1, 2, 3\n\n  // Define the dragging mode of the cropper\n  dragMode: 'crop', // 'crop', 'move' or 'none'\n\n  // Define the aspect ratio of the crop box\n  aspectRatio: NaN,\n\n  // An object with the previous cropping result data\n  data: null,\n\n  // A selector for adding extra containers to preview\n  preview: '',\n\n  // Re-render the cropper when resize the window\n  responsive: true,\n\n  // Restore the cropped area after resize the window\n  restore: true,\n\n  // Check if the current image is a cross-origin image\n  checkCrossOrigin: true,\n\n  // Check the current image's Exif Orientation information\n  checkOrientation: true,\n\n  // Show the black modal\n  modal: true,\n\n  // Show the dashed lines for guiding\n  guides: true,\n\n  // Show the center indicator for guiding\n  center: true,\n\n  // Show the white modal to highlight the crop box\n  highlight: true,\n\n  // Show the grid background\n  background: true,\n\n  // Enable to crop the image automatically when initialize\n  autoCrop: true,\n\n  // Define the percentage of automatic cropping area when initializes\n  autoCropArea: 0.8,\n\n  // Enable to move the image\n  movable: true,\n\n  // Enable to rotate the image\n  rotatable: true,\n\n  // Enable to scale the image\n  scalable: true,\n\n  // Enable to zoom the image\n  zoomable: true,\n\n  // Enable to zoom the image by dragging touch\n  zoomOnTouch: true,\n\n  // Enable to zoom the image by wheeling mouse\n  zoomOnWheel: true,\n\n  // Define zoom ratio when zoom the image by wheeling mouse\n  wheelZoomRatio: 0.1,\n\n  // Enable to move the crop box\n  cropBoxMovable: true,\n\n  // Enable to resize the crop box\n  cropBoxResizable: true,\n\n  // Toggle drag mode between \"crop\" and \"move\" when click twice on the cropper\n  toggleDragModeOnDblclick: true,\n\n  // Size limitation\n  minCanvasWidth: 0,\n  minCanvasHeight: 0,\n  minCropBoxWidth: 0,\n  minCropBoxHeight: 0,\n  minContainerWidth: 200,\n  minContainerHeight: 100,\n\n  // Shortcuts of events\n  ready: null,\n  cropstart: null,\n  cropmove: null,\n  cropend: null,\n  crop: null,\n  zoom: null\n};\n\nvar TEMPLATE = '<div class=\"cropper-container\">' + '<div class=\"cropper-wrap-box\">' + '<div class=\"cropper-canvas\"></div>' + '</div>' + '<div class=\"cropper-drag-box\"></div>' + '<div class=\"cropper-crop-box\">' + '<span class=\"cropper-view-box\"></span>' + '<span class=\"cropper-dashed dashed-h\"></span>' + '<span class=\"cropper-dashed dashed-v\"></span>' + '<span class=\"cropper-center\"></span>' + '<span class=\"cropper-face\"></span>' + '<span class=\"cropper-line line-e\" data-action=\"e\"></span>' + '<span class=\"cropper-line line-n\" data-action=\"n\"></span>' + '<span class=\"cropper-line line-w\" data-action=\"w\"></span>' + '<span class=\"cropper-line line-s\" data-action=\"s\"></span>' + '<span class=\"cropper-point point-e\" data-action=\"e\"></span>' + '<span class=\"cropper-point point-n\" data-action=\"n\"></span>' + '<span class=\"cropper-point point-w\" data-action=\"w\"></span>' + '<span class=\"cropper-point point-s\" data-action=\"s\"></span>' + '<span class=\"cropper-point point-ne\" data-action=\"ne\"></span>' + '<span class=\"cropper-point point-nw\" data-action=\"nw\"></span>' + '<span class=\"cropper-point point-sw\" data-action=\"sw\"></span>' + '<span class=\"cropper-point point-se\" data-action=\"se\"></span>' + '</div>' + '</div>';\n\nvar REGEXP_DATA_URL_HEAD = /^data:.*,/;\nvar REGEXP_USERAGENT = /(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i;\nvar navigator = typeof window !== 'undefined' ? window.navigator : null;\nvar IS_SAFARI_OR_UIWEBVIEW = navigator && REGEXP_USERAGENT.test(navigator.userAgent);\nvar fromCharCode = String.fromCharCode;\n\nfunction isNumber(n) {\n  return typeof n === 'number' && !isNaN(n);\n}\n\nfunction isUndefined(n) {\n  return typeof n === 'undefined';\n}\n\nfunction toArray(obj, offset) {\n  var args = [];\n\n  // This is necessary for IE8\n  if (isNumber(offset)) {\n    args.push(offset);\n  }\n\n  return args.slice.apply(obj, args);\n}\n\n// Custom proxy to avoid jQuery's guid\nfunction proxy(fn, context) {\n  for (var _len = arguments.length, args = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n    args[_key - 2] = arguments[_key];\n  }\n\n  return function () {\n    for (var _len2 = arguments.length, args2 = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args2[_key2] = arguments[_key2];\n    }\n\n    return fn.apply(context, args.concat(toArray(args2)));\n  };\n}\n\nfunction objectKeys(obj) {\n  var keys = [];\n\n  $.each(obj, function (key) {\n    keys.push(key);\n  });\n\n  return keys;\n}\n\nfunction isCrossOriginURL(url) {\n  var parts = url.match(/^(https?:)\\/\\/([^:/?#]+):?(\\d*)/i);\n\n  return parts && (parts[1] !== location.protocol || parts[2] !== location.hostname || parts[3] !== location.port);\n}\n\nfunction addTimestamp(url) {\n  var timestamp = 'timestamp=' + new Date().getTime();\n\n  return url + (url.indexOf('?') === -1 ? '?' : '&') + timestamp;\n}\n\nfunction getImageSize(image, callback) {\n  // Modern browsers (ignore Safari, #120 & #509)\n  if (image.naturalWidth && !IS_SAFARI_OR_UIWEBVIEW) {\n    callback(image.naturalWidth, image.naturalHeight);\n    return;\n  }\n\n  // IE8: Don't use `new Image()` here (#319)\n  var newImage = document.createElement('img');\n\n  newImage.onload = function load() {\n    callback(this.width, this.height);\n  };\n\n  newImage.src = image.src;\n}\n\nfunction getTransform(options) {\n  var transforms = [];\n  var translateX = options.translateX;\n  var translateY = options.translateY;\n  var rotate = options.rotate;\n  var scaleX = options.scaleX;\n  var scaleY = options.scaleY;\n\n  if (isNumber(translateX) && translateX !== 0) {\n    transforms.push('translateX(' + translateX + 'px)');\n  }\n\n  if (isNumber(translateY) && translateY !== 0) {\n    transforms.push('translateY(' + translateY + 'px)');\n  }\n\n  // Rotate should come first before scale to match orientation transform\n  if (isNumber(rotate) && rotate !== 0) {\n    transforms.push('rotate(' + rotate + 'deg)');\n  }\n\n  if (isNumber(scaleX) && scaleX !== 1) {\n    transforms.push('scaleX(' + scaleX + ')');\n  }\n\n  if (isNumber(scaleY) && scaleY !== 1) {\n    transforms.push('scaleY(' + scaleY + ')');\n  }\n\n  return transforms.length ? transforms.join(' ') : 'none';\n}\n\nfunction getRotatedSizes(data, isReversed) {\n  var deg = Math.abs(data.degree) % 180;\n  var arc = (deg > 90 ? 180 - deg : deg) * Math.PI / 180;\n  var sinArc = Math.sin(arc);\n  var cosArc = Math.cos(arc);\n  var width = data.width;\n  var height = data.height;\n  var aspectRatio = data.aspectRatio;\n  var newWidth = void 0;\n  var newHeight = void 0;\n\n  if (!isReversed) {\n    newWidth = width * cosArc + height * sinArc;\n    newHeight = width * sinArc + height * cosArc;\n  } else {\n    newWidth = width / (cosArc + sinArc / aspectRatio);\n    newHeight = newWidth / aspectRatio;\n  }\n\n  return {\n    width: newWidth,\n    height: newHeight\n  };\n}\n\nfunction getSourceCanvas(image, data, options) {\n  var canvas = $('<canvas>')[0];\n  var context = canvas.getContext('2d');\n  var dstX = 0;\n  var dstY = 0;\n  var dstWidth = data.naturalWidth;\n  var dstHeight = data.naturalHeight;\n  var rotate = data.rotate;\n  var scaleX = data.scaleX;\n  var scaleY = data.scaleY;\n  var scalable = isNumber(scaleX) && isNumber(scaleY) && (scaleX !== 1 || scaleY !== 1);\n  var rotatable = isNumber(rotate) && rotate !== 0;\n  var advanced = rotatable || scalable;\n  var canvasWidth = dstWidth * Math.abs(scaleX || 1);\n  var canvasHeight = dstHeight * Math.abs(scaleY || 1);\n  var translateX = void 0;\n  var translateY = void 0;\n  var rotated = void 0;\n\n  if (scalable) {\n    translateX = canvasWidth / 2;\n    translateY = canvasHeight / 2;\n  }\n\n  if (rotatable) {\n    rotated = getRotatedSizes({\n      width: canvasWidth,\n      height: canvasHeight,\n      degree: rotate\n    });\n\n    canvasWidth = rotated.width;\n    canvasHeight = rotated.height;\n    translateX = canvasWidth / 2;\n    translateY = canvasHeight / 2;\n  }\n\n  canvas.width = canvasWidth;\n  canvas.height = canvasHeight;\n\n  if (options.fillColor) {\n    context.fillStyle = options.fillColor;\n    context.fillRect(0, 0, canvasWidth, canvasHeight);\n  }\n\n  if (advanced) {\n    dstX = -dstWidth / 2;\n    dstY = -dstHeight / 2;\n\n    context.save();\n    context.translate(translateX, translateY);\n  }\n\n  // Rotate should come first before scale as in the \"getTransform\" function\n  if (rotatable) {\n    context.rotate(rotate * Math.PI / 180);\n  }\n\n  if (scalable) {\n    context.scale(scaleX, scaleY);\n  }\n\n  context.imageSmoothingEnabled = !!options.imageSmoothingEnabled;\n\n  if (options.imageSmoothingQuality) {\n    context.imageSmoothingQuality = options.imageSmoothingQuality;\n  }\n\n  context.drawImage(image, Math.floor(dstX), Math.floor(dstY), Math.floor(dstWidth), Math.floor(dstHeight));\n\n  if (advanced) {\n    context.restore();\n  }\n\n  return canvas;\n}\n\nfunction getStringFromCharCode(dataView, start, length) {\n  var str = '';\n  var i = void 0;\n\n  for (i = start, length += start; i < length; i += 1) {\n    str += fromCharCode(dataView.getUint8(i));\n  }\n\n  return str;\n}\n\nfunction getOrientation(arrayBuffer) {\n  var dataView = new DataView(arrayBuffer);\n  var length = dataView.byteLength;\n  var orientation = void 0;\n  var exifIDCode = void 0;\n  var tiffOffset = void 0;\n  var firstIFDOffset = void 0;\n  var littleEndian = void 0;\n  var endianness = void 0;\n  var app1Start = void 0;\n  var ifdStart = void 0;\n  var offset = void 0;\n  var i = void 0;\n\n  // Only handle JPEG image (start by 0xFFD8)\n  if (dataView.getUint8(0) === 0xFF && dataView.getUint8(1) === 0xD8) {\n    offset = 2;\n\n    while (offset < length) {\n      if (dataView.getUint8(offset) === 0xFF && dataView.getUint8(offset + 1) === 0xE1) {\n        app1Start = offset;\n        break;\n      }\n\n      offset += 1;\n    }\n  }\n\n  if (app1Start) {\n    exifIDCode = app1Start + 4;\n    tiffOffset = app1Start + 10;\n\n    if (getStringFromCharCode(dataView, exifIDCode, 4) === 'Exif') {\n      endianness = dataView.getUint16(tiffOffset);\n      littleEndian = endianness === 0x4949;\n\n      if (littleEndian || endianness === 0x4D4D /* bigEndian */) {\n          if (dataView.getUint16(tiffOffset + 2, littleEndian) === 0x002A) {\n            firstIFDOffset = dataView.getUint32(tiffOffset + 4, littleEndian);\n\n            if (firstIFDOffset >= 0x00000008) {\n              ifdStart = tiffOffset + firstIFDOffset;\n            }\n          }\n        }\n    }\n  }\n\n  if (ifdStart) {\n    length = dataView.getUint16(ifdStart, littleEndian);\n\n    for (i = 0; i < length; i += 1) {\n      offset = ifdStart + i * 12 + 2;\n\n      if (dataView.getUint16(offset, littleEndian) === 0x0112 /* Orientation */) {\n          // 8 is the offset of the current tag's value\n          offset += 8;\n\n          // Get the original orientation value\n          orientation = dataView.getUint16(offset, littleEndian);\n\n          // Override the orientation with its default value for Safari (#120)\n          if (IS_SAFARI_OR_UIWEBVIEW) {\n            dataView.setUint16(offset, 1, littleEndian);\n          }\n\n          break;\n        }\n    }\n  }\n\n  return orientation;\n}\n\nfunction dataURLToArrayBuffer(dataURL) {\n  var base64 = dataURL.replace(REGEXP_DATA_URL_HEAD, '');\n  var binary = atob(base64);\n  var length = binary.length;\n  var arrayBuffer = new ArrayBuffer(length);\n  var dataView = new Uint8Array(arrayBuffer);\n  var i = void 0;\n\n  for (i = 0; i < length; i += 1) {\n    dataView[i] = binary.charCodeAt(i);\n  }\n\n  return arrayBuffer;\n}\n\n// Only available for JPEG image\nfunction arrayBufferToDataURL(arrayBuffer) {\n  var dataView = new Uint8Array(arrayBuffer);\n  var length = dataView.length;\n  var base64 = '';\n  var i = void 0;\n\n  for (i = 0; i < length; i += 1) {\n    base64 += fromCharCode(dataView[i]);\n  }\n\n  return 'data:image/jpeg;base64,' + btoa(base64);\n}\n\nvar render = {\n  render: function render() {\n    var self = this;\n\n    self.initContainer();\n    self.initCanvas();\n    self.initCropBox();\n\n    self.renderCanvas();\n\n    if (self.cropped) {\n      self.renderCropBox();\n    }\n  },\n  initContainer: function initContainer() {\n    var self = this;\n    var options = self.options;\n    var $this = self.$element;\n    var $container = self.$container;\n    var $cropper = self.$cropper;\n    var hidden = 'cropper-hidden';\n\n    $cropper.addClass(hidden);\n    $this.removeClass(hidden);\n\n    $cropper.css(self.container = {\n      width: Math.max($container.width(), Number(options.minContainerWidth) || 200),\n      height: Math.max($container.height(), Number(options.minContainerHeight) || 100)\n    });\n\n    $this.addClass(hidden);\n    $cropper.removeClass(hidden);\n  },\n\n\n  // Canvas (image wrapper)\n  initCanvas: function initCanvas() {\n    var self = this;\n    var viewMode = self.options.viewMode;\n    var container = self.container;\n    var containerWidth = container.width;\n    var containerHeight = container.height;\n    var image = self.image;\n    var imageNaturalWidth = image.naturalWidth;\n    var imageNaturalHeight = image.naturalHeight;\n    var is90Degree = Math.abs(image.rotate) % 180 === 90;\n    var naturalWidth = is90Degree ? imageNaturalHeight : imageNaturalWidth;\n    var naturalHeight = is90Degree ? imageNaturalWidth : imageNaturalHeight;\n    var aspectRatio = naturalWidth / naturalHeight;\n    var canvasWidth = containerWidth;\n    var canvasHeight = containerHeight;\n\n    if (containerHeight * aspectRatio > containerWidth) {\n      if (viewMode === 3) {\n        canvasWidth = containerHeight * aspectRatio;\n      } else {\n        canvasHeight = containerWidth / aspectRatio;\n      }\n    } else if (viewMode === 3) {\n      canvasHeight = containerWidth / aspectRatio;\n    } else {\n      canvasWidth = containerHeight * aspectRatio;\n    }\n\n    var canvas = {\n      naturalWidth: naturalWidth,\n      naturalHeight: naturalHeight,\n      aspectRatio: aspectRatio,\n      width: canvasWidth,\n      height: canvasHeight\n    };\n\n    canvas.left = (containerWidth - canvasWidth) / 2;\n    canvas.top = (containerHeight - canvasHeight) / 2;\n    canvas.oldLeft = canvas.left;\n    canvas.oldTop = canvas.top;\n\n    self.canvas = canvas;\n    self.limited = viewMode === 1 || viewMode === 2;\n    self.limitCanvas(true, true);\n    self.initialImage = $.extend({}, image);\n    self.initialCanvas = $.extend({}, canvas);\n  },\n  limitCanvas: function limitCanvas(isSizeLimited, isPositionLimited) {\n    var self = this;\n    var options = self.options;\n    var viewMode = options.viewMode;\n    var container = self.container;\n    var containerWidth = container.width;\n    var containerHeight = container.height;\n    var canvas = self.canvas;\n    var aspectRatio = canvas.aspectRatio;\n    var cropBox = self.cropBox;\n    var cropped = self.cropped && cropBox;\n\n    if (isSizeLimited) {\n      var minCanvasWidth = Number(options.minCanvasWidth) || 0;\n      var minCanvasHeight = Number(options.minCanvasHeight) || 0;\n\n      if (viewMode) {\n        if (viewMode > 1) {\n          minCanvasWidth = Math.max(minCanvasWidth, containerWidth);\n          minCanvasHeight = Math.max(minCanvasHeight, containerHeight);\n\n          if (viewMode === 3) {\n            if (minCanvasHeight * aspectRatio > minCanvasWidth) {\n              minCanvasWidth = minCanvasHeight * aspectRatio;\n            } else {\n              minCanvasHeight = minCanvasWidth / aspectRatio;\n            }\n          }\n        } else if (minCanvasWidth) {\n          minCanvasWidth = Math.max(minCanvasWidth, cropped ? cropBox.width : 0);\n        } else if (minCanvasHeight) {\n          minCanvasHeight = Math.max(minCanvasHeight, cropped ? cropBox.height : 0);\n        } else if (cropped) {\n          minCanvasWidth = cropBox.width;\n          minCanvasHeight = cropBox.height;\n\n          if (minCanvasHeight * aspectRatio > minCanvasWidth) {\n            minCanvasWidth = minCanvasHeight * aspectRatio;\n          } else {\n            minCanvasHeight = minCanvasWidth / aspectRatio;\n          }\n        }\n      }\n\n      if (minCanvasWidth && minCanvasHeight) {\n        if (minCanvasHeight * aspectRatio > minCanvasWidth) {\n          minCanvasHeight = minCanvasWidth / aspectRatio;\n        } else {\n          minCanvasWidth = minCanvasHeight * aspectRatio;\n        }\n      } else if (minCanvasWidth) {\n        minCanvasHeight = minCanvasWidth / aspectRatio;\n      } else if (minCanvasHeight) {\n        minCanvasWidth = minCanvasHeight * aspectRatio;\n      }\n\n      canvas.minWidth = minCanvasWidth;\n      canvas.minHeight = minCanvasHeight;\n      canvas.maxWidth = Infinity;\n      canvas.maxHeight = Infinity;\n    }\n\n    if (isPositionLimited) {\n      if (viewMode) {\n        var newCanvasLeft = containerWidth - canvas.width;\n        var newCanvasTop = containerHeight - canvas.height;\n\n        canvas.minLeft = Math.min(0, newCanvasLeft);\n        canvas.minTop = Math.min(0, newCanvasTop);\n        canvas.maxLeft = Math.max(0, newCanvasLeft);\n        canvas.maxTop = Math.max(0, newCanvasTop);\n\n        if (cropped && self.limited) {\n          canvas.minLeft = Math.min(cropBox.left, cropBox.left + cropBox.width - canvas.width);\n          canvas.minTop = Math.min(cropBox.top, cropBox.top + cropBox.height - canvas.height);\n          canvas.maxLeft = cropBox.left;\n          canvas.maxTop = cropBox.top;\n\n          if (viewMode === 2) {\n            if (canvas.width >= containerWidth) {\n              canvas.minLeft = Math.min(0, newCanvasLeft);\n              canvas.maxLeft = Math.max(0, newCanvasLeft);\n            }\n\n            if (canvas.height >= containerHeight) {\n              canvas.minTop = Math.min(0, newCanvasTop);\n              canvas.maxTop = Math.max(0, newCanvasTop);\n            }\n          }\n        }\n      } else {\n        canvas.minLeft = -canvas.width;\n        canvas.minTop = -canvas.height;\n        canvas.maxLeft = containerWidth;\n        canvas.maxTop = containerHeight;\n      }\n    }\n  },\n  renderCanvas: function renderCanvas(isChanged) {\n    var self = this;\n    var canvas = self.canvas;\n    var image = self.image;\n    var rotate = image.rotate;\n    var naturalWidth = image.naturalWidth;\n    var naturalHeight = image.naturalHeight;\n\n    if (self.rotated) {\n      self.rotated = false;\n\n      // Computes rotated sizes with image sizes\n      var rotated = getRotatedSizes({\n        width: image.width,\n        height: image.height,\n        degree: rotate\n      });\n      var aspectRatio = rotated.width / rotated.height;\n      var isSquareImage = image.aspectRatio === 1;\n\n      if (isSquareImage || aspectRatio !== canvas.aspectRatio) {\n        canvas.left -= (rotated.width - canvas.width) / 2;\n        canvas.top -= (rotated.height - canvas.height) / 2;\n        canvas.width = rotated.width;\n        canvas.height = rotated.height;\n        canvas.aspectRatio = aspectRatio;\n        canvas.naturalWidth = naturalWidth;\n        canvas.naturalHeight = naturalHeight;\n\n        // Computes rotated sizes with natural image sizes\n        if (isSquareImage && rotate % 90 || rotate % 180) {\n          var rotated2 = getRotatedSizes({\n            width: naturalWidth,\n            height: naturalHeight,\n            degree: rotate\n          });\n\n          canvas.naturalWidth = rotated2.width;\n          canvas.naturalHeight = rotated2.height;\n        }\n\n        self.limitCanvas(true, false);\n      }\n    }\n\n    if (canvas.width > canvas.maxWidth || canvas.width < canvas.minWidth) {\n      canvas.left = canvas.oldLeft;\n    }\n\n    if (canvas.height > canvas.maxHeight || canvas.height < canvas.minHeight) {\n      canvas.top = canvas.oldTop;\n    }\n\n    canvas.width = Math.min(Math.max(canvas.width, canvas.minWidth), canvas.maxWidth);\n    canvas.height = Math.min(Math.max(canvas.height, canvas.minHeight), canvas.maxHeight);\n\n    self.limitCanvas(false, true);\n\n    canvas.left = Math.min(Math.max(canvas.left, canvas.minLeft), canvas.maxLeft);\n    canvas.top = Math.min(Math.max(canvas.top, canvas.minTop), canvas.maxTop);\n    canvas.oldLeft = canvas.left;\n    canvas.oldTop = canvas.top;\n\n    self.$canvas.css({\n      width: canvas.width,\n      height: canvas.height,\n      transform: getTransform({\n        translateX: canvas.left,\n        translateY: canvas.top\n      })\n    });\n\n    self.renderImage();\n\n    if (self.cropped && self.limited) {\n      self.limitCropBox(true, true);\n    }\n\n    if (isChanged) {\n      self.output();\n    }\n  },\n  renderImage: function renderImage(isChanged) {\n    var self = this;\n    var canvas = self.canvas;\n    var image = self.image;\n    var reversed = void 0;\n\n    if (image.rotate) {\n      reversed = getRotatedSizes({\n        width: canvas.width,\n        height: canvas.height,\n        degree: image.rotate,\n        aspectRatio: image.aspectRatio\n      }, true);\n    }\n\n    $.extend(image, reversed ? {\n      width: reversed.width,\n      height: reversed.height,\n      left: (canvas.width - reversed.width) / 2,\n      top: (canvas.height - reversed.height) / 2\n    } : {\n      width: canvas.width,\n      height: canvas.height,\n      left: 0,\n      top: 0\n    });\n\n    self.$clone.css({\n      width: image.width,\n      height: image.height,\n      transform: getTransform($.extend({\n        translateX: image.left,\n        translateY: image.top\n      }, image))\n    });\n\n    if (isChanged) {\n      self.output();\n    }\n  },\n  initCropBox: function initCropBox() {\n    var self = this;\n    var options = self.options;\n    var canvas = self.canvas;\n    var aspectRatio = options.aspectRatio;\n    var autoCropArea = Number(options.autoCropArea) || 0.8;\n    var cropBox = {\n      width: canvas.width,\n      height: canvas.height\n    };\n\n    if (aspectRatio) {\n      if (canvas.height * aspectRatio > canvas.width) {\n        cropBox.height = cropBox.width / aspectRatio;\n      } else {\n        cropBox.width = cropBox.height * aspectRatio;\n      }\n    }\n\n    self.cropBox = cropBox;\n    self.limitCropBox(true, true);\n\n    // Initialize auto crop area\n    cropBox.width = Math.min(Math.max(cropBox.width, cropBox.minWidth), cropBox.maxWidth);\n    cropBox.height = Math.min(Math.max(cropBox.height, cropBox.minHeight), cropBox.maxHeight);\n\n    // The width of auto crop area must large than \"minWidth\", and the height too. (#164)\n    cropBox.width = Math.max(cropBox.minWidth, cropBox.width * autoCropArea);\n    cropBox.height = Math.max(cropBox.minHeight, cropBox.height * autoCropArea);\n    cropBox.left = canvas.left + (canvas.width - cropBox.width) / 2;\n    cropBox.top = canvas.top + (canvas.height - cropBox.height) / 2;\n    cropBox.oldLeft = cropBox.left;\n    cropBox.oldTop = cropBox.top;\n\n    self.initialCropBox = $.extend({}, cropBox);\n  },\n  limitCropBox: function limitCropBox(isSizeLimited, isPositionLimited) {\n    var self = this;\n    var options = self.options;\n    var aspectRatio = options.aspectRatio;\n    var container = self.container;\n    var containerWidth = container.width;\n    var containerHeight = container.height;\n    var canvas = self.canvas;\n    var cropBox = self.cropBox;\n    var limited = self.limited;\n\n    if (isSizeLimited) {\n      var minCropBoxWidth = Number(options.minCropBoxWidth) || 0;\n      var minCropBoxHeight = Number(options.minCropBoxHeight) || 0;\n      var maxCropBoxWidth = Math.min(containerWidth, limited ? canvas.width : containerWidth);\n      var maxCropBoxHeight = Math.min(containerHeight, limited ? canvas.height : containerHeight);\n\n      // The min/maxCropBoxWidth/Height must be less than containerWidth/Height\n      minCropBoxWidth = Math.min(minCropBoxWidth, containerWidth);\n      minCropBoxHeight = Math.min(minCropBoxHeight, containerHeight);\n\n      if (aspectRatio) {\n        if (minCropBoxWidth && minCropBoxHeight) {\n          if (minCropBoxHeight * aspectRatio > minCropBoxWidth) {\n            minCropBoxHeight = minCropBoxWidth / aspectRatio;\n          } else {\n            minCropBoxWidth = minCropBoxHeight * aspectRatio;\n          }\n        } else if (minCropBoxWidth) {\n          minCropBoxHeight = minCropBoxWidth / aspectRatio;\n        } else if (minCropBoxHeight) {\n          minCropBoxWidth = minCropBoxHeight * aspectRatio;\n        }\n\n        if (maxCropBoxHeight * aspectRatio > maxCropBoxWidth) {\n          maxCropBoxHeight = maxCropBoxWidth / aspectRatio;\n        } else {\n          maxCropBoxWidth = maxCropBoxHeight * aspectRatio;\n        }\n      }\n\n      // The minWidth/Height must be less than maxWidth/Height\n      cropBox.minWidth = Math.min(minCropBoxWidth, maxCropBoxWidth);\n      cropBox.minHeight = Math.min(minCropBoxHeight, maxCropBoxHeight);\n      cropBox.maxWidth = maxCropBoxWidth;\n      cropBox.maxHeight = maxCropBoxHeight;\n    }\n\n    if (isPositionLimited) {\n      if (limited) {\n        cropBox.minLeft = Math.max(0, canvas.left);\n        cropBox.minTop = Math.max(0, canvas.top);\n        cropBox.maxLeft = Math.min(containerWidth, canvas.left + canvas.width) - cropBox.width;\n        cropBox.maxTop = Math.min(containerHeight, canvas.top + canvas.height) - cropBox.height;\n      } else {\n        cropBox.minLeft = 0;\n        cropBox.minTop = 0;\n        cropBox.maxLeft = containerWidth - cropBox.width;\n        cropBox.maxTop = containerHeight - cropBox.height;\n      }\n    }\n  },\n  renderCropBox: function renderCropBox() {\n    var self = this;\n    var options = self.options;\n    var container = self.container;\n    var containerWidth = container.width;\n    var containerHeight = container.height;\n    var cropBox = self.cropBox;\n\n    if (cropBox.width > cropBox.maxWidth || cropBox.width < cropBox.minWidth) {\n      cropBox.left = cropBox.oldLeft;\n    }\n\n    if (cropBox.height > cropBox.maxHeight || cropBox.height < cropBox.minHeight) {\n      cropBox.top = cropBox.oldTop;\n    }\n\n    cropBox.width = Math.min(Math.max(cropBox.width, cropBox.minWidth), cropBox.maxWidth);\n    cropBox.height = Math.min(Math.max(cropBox.height, cropBox.minHeight), cropBox.maxHeight);\n\n    self.limitCropBox(false, true);\n\n    cropBox.left = Math.min(Math.max(cropBox.left, cropBox.minLeft), cropBox.maxLeft);\n    cropBox.top = Math.min(Math.max(cropBox.top, cropBox.minTop), cropBox.maxTop);\n    cropBox.oldLeft = cropBox.left;\n    cropBox.oldTop = cropBox.top;\n\n    if (options.movable && options.cropBoxMovable) {\n      // Turn to move the canvas when the crop box is equal to the container\n      self.$face.data('action', cropBox.width === containerWidth && cropBox.height === containerHeight ? 'move' : 'all');\n    }\n\n    self.$cropBox.css({\n      width: cropBox.width,\n      height: cropBox.height,\n      transform: getTransform({\n        translateX: cropBox.left,\n        translateY: cropBox.top\n      })\n    });\n\n    if (self.cropped && self.limited) {\n      self.limitCanvas(true, true);\n    }\n\n    if (!self.disabled) {\n      self.output();\n    }\n  },\n  output: function output() {\n    var self = this;\n\n    self.preview();\n\n    if (self.completed) {\n      self.trigger('crop', self.getData());\n    }\n  }\n};\n\nvar DATA_PREVIEW = 'preview';\n\nvar preview = {\n  initPreview: function initPreview() {\n    var self = this;\n    var crossOrigin = self.crossOrigin;\n    var url = crossOrigin ? self.crossOriginUrl : self.url;\n    var image = document.createElement('img');\n\n    if (crossOrigin) {\n      image.crossOrigin = crossOrigin;\n    }\n\n    image.src = url;\n\n    var $clone2 = $(image);\n\n    self.$preview = $(self.options.preview);\n    self.$clone2 = $clone2;\n    self.$viewBox.html($clone2);\n    self.$preview.each(function (i, element) {\n      var $this = $(element);\n      var img = document.createElement('img');\n\n      // Save the original size for recover\n      $this.data(DATA_PREVIEW, {\n        width: $this.width(),\n        height: $this.height(),\n        html: $this.html()\n      });\n\n      if (crossOrigin) {\n        img.crossOrigin = crossOrigin;\n      }\n\n      img.src = url;\n\n      /**\n       * Override img element styles\n       * Add `display:block` to avoid margin top issue\n       * Add `height:auto` to override `height` attribute on IE8\n       * (Occur only when margin-top <= -height)\n       */\n      img.style.cssText = 'display:block;' + 'width:100%;' + 'height:auto;' + 'min-width:0!important;' + 'min-height:0!important;' + 'max-width:none!important;' + 'max-height:none!important;' + 'image-orientation:0deg!important;\"';\n\n      $this.html(img);\n    });\n  },\n  resetPreview: function resetPreview() {\n    this.$preview.each(function (i, element) {\n      var $this = $(element);\n      var data = $this.data(DATA_PREVIEW);\n\n      $this.css({\n        width: data.width,\n        height: data.height\n      }).html(data.html).removeData(DATA_PREVIEW);\n    });\n  },\n  preview: function preview() {\n    var self = this;\n    var image = self.image;\n    var canvas = self.canvas;\n    var cropBox = self.cropBox;\n    var cropBoxWidth = cropBox.width;\n    var cropBoxHeight = cropBox.height;\n    var width = image.width;\n    var height = image.height;\n    var left = cropBox.left - canvas.left - image.left;\n    var top = cropBox.top - canvas.top - image.top;\n\n    if (!self.cropped || self.disabled) {\n      return;\n    }\n\n    self.$clone2.css({\n      width: width,\n      height: height,\n      transform: getTransform($.extend({\n        translateX: -left,\n        translateY: -top\n      }, image))\n    });\n\n    self.$preview.each(function (i, element) {\n      var $this = $(element);\n      var data = $this.data(DATA_PREVIEW);\n      var originalWidth = data.width;\n      var originalHeight = data.height;\n      var newWidth = originalWidth;\n      var newHeight = originalHeight;\n      var ratio = 1;\n\n      if (cropBoxWidth) {\n        ratio = originalWidth / cropBoxWidth;\n        newHeight = cropBoxHeight * ratio;\n      }\n\n      if (cropBoxHeight && newHeight > originalHeight) {\n        ratio = originalHeight / cropBoxHeight;\n        newWidth = cropBoxWidth * ratio;\n        newHeight = originalHeight;\n      }\n\n      $this.css({\n        width: newWidth,\n        height: newHeight\n      }).find('img').css({\n        width: width * ratio,\n        height: height * ratio,\n        transform: getTransform($.extend({\n          translateX: -left * ratio,\n          translateY: -top * ratio\n        }, image))\n      });\n    });\n  }\n};\n\n// Globals\nvar PointerEvent = typeof window !== 'undefined' ? window.PointerEvent : null;\n\n// Events\nvar EVENT_POINTER_DOWN = PointerEvent ? 'pointerdown' : 'touchstart mousedown';\nvar EVENT_POINTER_MOVE = PointerEvent ? 'pointermove' : 'touchmove mousemove';\nvar EVENT_POINTER_UP = PointerEvent ? ' pointerup pointercancel' : 'touchend touchcancel mouseup';\nvar EVENT_WHEEL = 'wheel mousewheel DOMMouseScroll';\nvar EVENT_DBLCLICK = 'dblclick';\nvar EVENT_RESIZE = 'resize';\nvar EVENT_CROP_START = 'cropstart';\nvar EVENT_CROP_MOVE = 'cropmove';\nvar EVENT_CROP_END = 'cropend';\nvar EVENT_CROP = 'crop';\nvar EVENT_ZOOM = 'zoom';\n\nvar events = {\n  bind: function bind() {\n    var self = this;\n    var options = self.options;\n    var $this = self.$element;\n    var $cropper = self.$cropper;\n\n    if ($.isFunction(options.cropstart)) {\n      $this.on(EVENT_CROP_START, options.cropstart);\n    }\n\n    if ($.isFunction(options.cropmove)) {\n      $this.on(EVENT_CROP_MOVE, options.cropmove);\n    }\n\n    if ($.isFunction(options.cropend)) {\n      $this.on(EVENT_CROP_END, options.cropend);\n    }\n\n    if ($.isFunction(options.crop)) {\n      $this.on(EVENT_CROP, options.crop);\n    }\n\n    if ($.isFunction(options.zoom)) {\n      $this.on(EVENT_ZOOM, options.zoom);\n    }\n\n    $cropper.on(EVENT_POINTER_DOWN, proxy(self.cropStart, this));\n\n    if (options.zoomable && options.zoomOnWheel) {\n      $cropper.on(EVENT_WHEEL, proxy(self.wheel, this));\n    }\n\n    if (options.toggleDragModeOnDblclick) {\n      $cropper.on(EVENT_DBLCLICK, proxy(self.dblclick, this));\n    }\n\n    $(document).on(EVENT_POINTER_MOVE, self.onCropMove = proxy(self.cropMove, this)).on(EVENT_POINTER_UP, self.onCropEnd = proxy(self.cropEnd, this));\n\n    if (options.responsive) {\n      $(window).on(EVENT_RESIZE, self.onResize = proxy(self.resize, this));\n    }\n  },\n  unbind: function unbind() {\n    var self = this;\n    var options = self.options;\n    var $this = self.$element;\n    var $cropper = self.$cropper;\n\n    if ($.isFunction(options.cropstart)) {\n      $this.off(EVENT_CROP_START, options.cropstart);\n    }\n\n    if ($.isFunction(options.cropmove)) {\n      $this.off(EVENT_CROP_MOVE, options.cropmove);\n    }\n\n    if ($.isFunction(options.cropend)) {\n      $this.off(EVENT_CROP_END, options.cropend);\n    }\n\n    if ($.isFunction(options.crop)) {\n      $this.off(EVENT_CROP, options.crop);\n    }\n\n    if ($.isFunction(options.zoom)) {\n      $this.off(EVENT_ZOOM, options.zoom);\n    }\n\n    $cropper.off(EVENT_POINTER_DOWN, self.cropStart);\n\n    if (options.zoomable && options.zoomOnWheel) {\n      $cropper.off(EVENT_WHEEL, self.wheel);\n    }\n\n    if (options.toggleDragModeOnDblclick) {\n      $cropper.off(EVENT_DBLCLICK, self.dblclick);\n    }\n\n    $(document).off(EVENT_POINTER_MOVE, self.onCropMove).off(EVENT_POINTER_UP, self.onCropEnd);\n\n    if (options.responsive) {\n      $(window).off(EVENT_RESIZE, self.onResize);\n    }\n  }\n};\n\nvar REGEXP_ACTIONS = /^(e|w|s|n|se|sw|ne|nw|all|crop|move|zoom)$/;\n\nfunction getPointer(_ref, endOnly) {\n  var pageX = _ref.pageX,\n      pageY = _ref.pageY;\n\n  var end = {\n    endX: pageX,\n    endY: pageY\n  };\n\n  if (endOnly) {\n    return end;\n  }\n\n  return $.extend({\n    startX: pageX,\n    startY: pageY\n  }, end);\n}\n\nvar handlers = {\n  resize: function resize() {\n    var self = this;\n    var options = self.options;\n    var $container = self.$container;\n    var container = self.container;\n    var minContainerWidth = Number(options.minContainerWidth) || 200;\n    var minContainerHeight = Number(options.minContainerHeight) || 100;\n\n    if (self.disabled || container.width === minContainerWidth || container.height === minContainerHeight) {\n      return;\n    }\n\n    var ratio = $container.width() / container.width;\n\n    // Resize when width changed or height changed\n    if (ratio !== 1 || $container.height() !== container.height) {\n      var canvasData = void 0;\n      var cropBoxData = void 0;\n\n      if (options.restore) {\n        canvasData = self.getCanvasData();\n        cropBoxData = self.getCropBoxData();\n      }\n\n      self.render();\n\n      if (options.restore) {\n        self.setCanvasData($.each(canvasData, function (i, n) {\n          canvasData[i] = n * ratio;\n        }));\n        self.setCropBoxData($.each(cropBoxData, function (i, n) {\n          cropBoxData[i] = n * ratio;\n        }));\n      }\n    }\n  },\n  dblclick: function dblclick() {\n    var self = this;\n\n    if (self.disabled || self.options.dragMode === 'none') {\n      return;\n    }\n\n    self.setDragMode(self.$dragBox.hasClass('cropper-crop') ? 'move' : 'crop');\n  },\n  wheel: function wheel(event) {\n    var self = this;\n    var e = event.originalEvent || event;\n    var ratio = Number(self.options.wheelZoomRatio) || 0.1;\n\n    if (self.disabled) {\n      return;\n    }\n\n    event.preventDefault();\n\n    // Limit wheel speed to prevent zoom too fast\n    if (self.wheeling) {\n      return;\n    }\n\n    self.wheeling = true;\n\n    setTimeout(function () {\n      self.wheeling = false;\n    }, 50);\n\n    var delta = 1;\n\n    if (e.deltaY) {\n      delta = e.deltaY > 0 ? 1 : -1;\n    } else if (e.wheelDelta) {\n      delta = -e.wheelDelta / 120;\n    } else if (e.detail) {\n      delta = e.detail > 0 ? 1 : -1;\n    }\n\n    self.zoom(-delta * ratio, event);\n  },\n  cropStart: function cropStart(e) {\n    var self = this;\n\n    if (self.disabled) {\n      return;\n    }\n\n    var options = self.options;\n    var pointers = self.pointers;\n    var originalEvent = e.originalEvent;\n    var action = void 0;\n\n    if (originalEvent && originalEvent.changedTouches) {\n      // Handle touch event\n      $.each(originalEvent.changedTouches, function (i, touch) {\n        pointers[touch.identifier] = getPointer(touch);\n      });\n    } else {\n      // Handle mouse event and pointer event\n      pointers[originalEvent && originalEvent.pointerId || 0] = getPointer(originalEvent || e);\n    }\n\n    if (objectKeys(pointers).length > 1 && options.zoomable && options.zoomOnTouch) {\n      action = 'zoom';\n    } else {\n      action = $(e.target).data('action');\n    }\n\n    if (!REGEXP_ACTIONS.test(action)) {\n      return;\n    }\n\n    if (self.trigger('cropstart', {\n      originalEvent: originalEvent,\n      action: action\n    }).isDefaultPrevented()) {\n      return;\n    }\n\n    e.preventDefault();\n\n    self.action = action;\n    self.cropping = false;\n\n    if (action === 'crop') {\n      self.cropping = true;\n      self.$dragBox.addClass('cropper-modal');\n    }\n  },\n  cropMove: function cropMove(e) {\n    var self = this;\n    var action = self.action;\n\n    if (self.disabled || !action) {\n      return;\n    }\n\n    var pointers = self.pointers;\n    var originalEvent = e.originalEvent;\n\n    e.preventDefault();\n\n    if (self.trigger('cropmove', {\n      originalEvent: originalEvent,\n      action: action\n    }).isDefaultPrevented()) {\n      return;\n    }\n\n    if (originalEvent && originalEvent.changedTouches) {\n      $.each(originalEvent.changedTouches, function (i, touch) {\n        $.extend(pointers[touch.identifier], getPointer(touch, true));\n      });\n    } else {\n      $.extend(pointers[originalEvent && originalEvent.pointerId || 0], getPointer(originalEvent || e, true));\n    }\n\n    self.change(e);\n  },\n  cropEnd: function cropEnd(e) {\n    var self = this;\n\n    if (self.disabled) {\n      return;\n    }\n\n    var action = self.action;\n    var pointers = self.pointers;\n    var originalEvent = e.originalEvent;\n\n    if (originalEvent && originalEvent.changedTouches) {\n      $.each(originalEvent.changedTouches, function (i, touch) {\n        delete pointers[touch.identifier];\n      });\n    } else {\n      delete pointers[originalEvent && originalEvent.pointerId || 0];\n    }\n\n    if (!action) {\n      return;\n    }\n\n    e.preventDefault();\n\n    if (!objectKeys(pointers).length) {\n      self.action = '';\n    }\n\n    if (self.cropping) {\n      self.cropping = false;\n      self.$dragBox.toggleClass('cropper-modal', self.cropped && self.options.modal);\n    }\n\n    self.trigger('cropend', {\n      originalEvent: originalEvent,\n      action: action\n    });\n  }\n};\n\n// Actions\nvar ACTION_EAST = 'e';\nvar ACTION_WEST = 'w';\nvar ACTION_SOUTH = 's';\nvar ACTION_NORTH = 'n';\nvar ACTION_SOUTH_EAST = 'se';\nvar ACTION_SOUTH_WEST = 'sw';\nvar ACTION_NORTH_EAST = 'ne';\nvar ACTION_NORTH_WEST = 'nw';\n\nfunction getMaxZoomRatio(pointers) {\n  var pointers2 = $.extend({}, pointers);\n  var ratios = [];\n\n  $.each(pointers, function (pointerId, pointer) {\n    delete pointers2[pointerId];\n\n    $.each(pointers2, function (pointerId2, pointer2) {\n      var x1 = Math.abs(pointer.startX - pointer2.startX);\n      var y1 = Math.abs(pointer.startY - pointer2.startY);\n      var x2 = Math.abs(pointer.endX - pointer2.endX);\n      var y2 = Math.abs(pointer.endY - pointer2.endY);\n      var z1 = Math.sqrt(x1 * x1 + y1 * y1);\n      var z2 = Math.sqrt(x2 * x2 + y2 * y2);\n      var ratio = (z2 - z1) / z1;\n\n      ratios.push(ratio);\n    });\n  });\n\n  ratios.sort(function (a, b) {\n    return Math.abs(a) < Math.abs(b);\n  });\n\n  return ratios[0];\n}\n\nvar change = {\n  change: function change(e) {\n    var self = this;\n    var options = self.options;\n    var pointers = self.pointers;\n    var pointer = pointers[objectKeys(pointers)[0]];\n    var container = self.container;\n    var canvas = self.canvas;\n    var cropBox = self.cropBox;\n    var action = self.action;\n    var aspectRatio = options.aspectRatio;\n    var width = cropBox.width;\n    var height = cropBox.height;\n    var left = cropBox.left;\n    var top = cropBox.top;\n    var right = left + width;\n    var bottom = top + height;\n    var minLeft = 0;\n    var minTop = 0;\n    var maxWidth = container.width;\n    var maxHeight = container.height;\n    var renderable = true;\n    var offset = void 0;\n\n    // Locking aspect ratio in \"free mode\" by holding shift key (#259)\n    if (!aspectRatio && e.shiftKey) {\n      aspectRatio = width && height ? width / height : 1;\n    }\n\n    if (self.limited) {\n      minLeft = cropBox.minLeft;\n      minTop = cropBox.minTop;\n      maxWidth = minLeft + Math.min(container.width, canvas.width, canvas.left + canvas.width);\n      maxHeight = minTop + Math.min(container.height, canvas.height, canvas.top + canvas.height);\n    }\n\n    var range = {\n      x: pointer.endX - pointer.startX,\n      y: pointer.endY - pointer.startY\n    };\n\n    switch (action) {\n      // Move crop box\n      case 'all':\n        left += range.x;\n        top += range.y;\n        break;\n\n      // Resize crop box\n      case ACTION_EAST:\n        if (range.x >= 0 && (right >= maxWidth || aspectRatio && (top <= minTop || bottom >= maxHeight))) {\n          renderable = false;\n          break;\n        }\n\n        if (right + range.x > maxWidth) {\n          range.x = maxWidth - right;\n        }\n\n        width += range.x;\n\n        if (aspectRatio) {\n          height = width / aspectRatio;\n          top -= range.x / aspectRatio / 2;\n        }\n\n        if (width < 0) {\n          action = ACTION_WEST;\n          width = 0;\n        }\n\n        break;\n\n      case ACTION_NORTH:\n        if (range.y <= 0 && (top <= minTop || aspectRatio && (left <= minLeft || right >= maxWidth))) {\n          renderable = false;\n          break;\n        }\n\n        if (top + range.y < minTop) {\n          range.y = minTop - top;\n        }\n\n        height -= range.y;\n        top += range.y;\n\n        if (aspectRatio) {\n          width = height * aspectRatio;\n          left += range.y * aspectRatio / 2;\n        }\n\n        if (height < 0) {\n          action = ACTION_SOUTH;\n          height = 0;\n        }\n\n        break;\n\n      case ACTION_WEST:\n        if (range.x <= 0 && (left <= minLeft || aspectRatio && (top <= minTop || bottom >= maxHeight))) {\n          renderable = false;\n          break;\n        }\n\n        if (left + range.x < minLeft) {\n          range.x = minLeft - left;\n        }\n\n        width -= range.x;\n        left += range.x;\n\n        if (aspectRatio) {\n          height = width / aspectRatio;\n          top += range.x / aspectRatio / 2;\n        }\n\n        if (width < 0) {\n          action = ACTION_EAST;\n          width = 0;\n        }\n\n        break;\n\n      case ACTION_SOUTH:\n        if (range.y >= 0 && (bottom >= maxHeight || aspectRatio && (left <= minLeft || right >= maxWidth))) {\n          renderable = false;\n          break;\n        }\n\n        if (bottom + range.y > maxHeight) {\n          range.y = maxHeight - bottom;\n        }\n\n        height += range.y;\n\n        if (aspectRatio) {\n          width = height * aspectRatio;\n          left -= range.y * aspectRatio / 2;\n        }\n\n        if (height < 0) {\n          action = ACTION_NORTH;\n          height = 0;\n        }\n\n        break;\n\n      case ACTION_NORTH_EAST:\n        if (aspectRatio) {\n          if (range.y <= 0 && (top <= minTop || right >= maxWidth)) {\n            renderable = false;\n            break;\n          }\n\n          height -= range.y;\n          top += range.y;\n          width = height * aspectRatio;\n        } else {\n          if (range.x >= 0) {\n            if (right < maxWidth) {\n              width += range.x;\n            } else if (range.y <= 0 && top <= minTop) {\n              renderable = false;\n            }\n          } else {\n            width += range.x;\n          }\n\n          if (range.y <= 0) {\n            if (top > minTop) {\n              height -= range.y;\n              top += range.y;\n            }\n          } else {\n            height -= range.y;\n            top += range.y;\n          }\n        }\n\n        if (width < 0 && height < 0) {\n          action = ACTION_SOUTH_WEST;\n          height = 0;\n          width = 0;\n        } else if (width < 0) {\n          action = ACTION_NORTH_WEST;\n          width = 0;\n        } else if (height < 0) {\n          action = ACTION_SOUTH_EAST;\n          height = 0;\n        }\n\n        break;\n\n      case ACTION_NORTH_WEST:\n        if (aspectRatio) {\n          if (range.y <= 0 && (top <= minTop || left <= minLeft)) {\n            renderable = false;\n            break;\n          }\n\n          height -= range.y;\n          top += range.y;\n          width = height * aspectRatio;\n          left += range.y * aspectRatio;\n        } else {\n          if (range.x <= 0) {\n            if (left > minLeft) {\n              width -= range.x;\n              left += range.x;\n            } else if (range.y <= 0 && top <= minTop) {\n              renderable = false;\n            }\n          } else {\n            width -= range.x;\n            left += range.x;\n          }\n\n          if (range.y <= 0) {\n            if (top > minTop) {\n              height -= range.y;\n              top += range.y;\n            }\n          } else {\n            height -= range.y;\n            top += range.y;\n          }\n        }\n\n        if (width < 0 && height < 0) {\n          action = ACTION_SOUTH_EAST;\n          height = 0;\n          width = 0;\n        } else if (width < 0) {\n          action = ACTION_NORTH_EAST;\n          width = 0;\n        } else if (height < 0) {\n          action = ACTION_SOUTH_WEST;\n          height = 0;\n        }\n\n        break;\n\n      case ACTION_SOUTH_WEST:\n        if (aspectRatio) {\n          if (range.x <= 0 && (left <= minLeft || bottom >= maxHeight)) {\n            renderable = false;\n            break;\n          }\n\n          width -= range.x;\n          left += range.x;\n          height = width / aspectRatio;\n        } else {\n          if (range.x <= 0) {\n            if (left > minLeft) {\n              width -= range.x;\n              left += range.x;\n            } else if (range.y >= 0 && bottom >= maxHeight) {\n              renderable = false;\n            }\n          } else {\n            width -= range.x;\n            left += range.x;\n          }\n\n          if (range.y >= 0) {\n            if (bottom < maxHeight) {\n              height += range.y;\n            }\n          } else {\n            height += range.y;\n          }\n        }\n\n        if (width < 0 && height < 0) {\n          action = ACTION_NORTH_EAST;\n          height = 0;\n          width = 0;\n        } else if (width < 0) {\n          action = ACTION_SOUTH_EAST;\n          width = 0;\n        } else if (height < 0) {\n          action = ACTION_NORTH_WEST;\n          height = 0;\n        }\n\n        break;\n\n      case ACTION_SOUTH_EAST:\n        if (aspectRatio) {\n          if (range.x >= 0 && (right >= maxWidth || bottom >= maxHeight)) {\n            renderable = false;\n            break;\n          }\n\n          width += range.x;\n          height = width / aspectRatio;\n        } else {\n          if (range.x >= 0) {\n            if (right < maxWidth) {\n              width += range.x;\n            } else if (range.y >= 0 && bottom >= maxHeight) {\n              renderable = false;\n            }\n          } else {\n            width += range.x;\n          }\n\n          if (range.y >= 0) {\n            if (bottom < maxHeight) {\n              height += range.y;\n            }\n          } else {\n            height += range.y;\n          }\n        }\n\n        if (width < 0 && height < 0) {\n          action = ACTION_NORTH_WEST;\n          height = 0;\n          width = 0;\n        } else if (width < 0) {\n          action = ACTION_SOUTH_WEST;\n          width = 0;\n        } else if (height < 0) {\n          action = ACTION_NORTH_EAST;\n          height = 0;\n        }\n\n        break;\n\n      // Move canvas\n      case 'move':\n        self.move(range.x, range.y);\n        renderable = false;\n        break;\n\n      // Zoom canvas\n      case 'zoom':\n        self.zoom(getMaxZoomRatio(pointers), e.originalEvent);\n        renderable = false;\n        break;\n\n      // Create crop box\n      case 'crop':\n        if (!range.x || !range.y) {\n          renderable = false;\n          break;\n        }\n\n        offset = self.$cropper.offset();\n        left = pointer.startX - offset.left;\n        top = pointer.startY - offset.top;\n        width = cropBox.minWidth;\n        height = cropBox.minHeight;\n\n        if (range.x > 0) {\n          action = range.y > 0 ? ACTION_SOUTH_EAST : ACTION_NORTH_EAST;\n        } else if (range.x < 0) {\n          left -= width;\n          action = range.y > 0 ? ACTION_SOUTH_WEST : ACTION_NORTH_WEST;\n        }\n\n        if (range.y < 0) {\n          top -= height;\n        }\n\n        // Show the crop box if is hidden\n        if (!self.cropped) {\n          self.$cropBox.removeClass('cropper-hidden');\n          self.cropped = true;\n\n          if (self.limited) {\n            self.limitCropBox(true, true);\n          }\n        }\n\n        break;\n\n      default:\n    }\n\n    if (renderable) {\n      cropBox.width = width;\n      cropBox.height = height;\n      cropBox.left = left;\n      cropBox.top = top;\n      self.action = action;\n      self.renderCropBox();\n    }\n\n    // Override\n    $.each(pointers, function (i, p) {\n      p.startX = p.endX;\n      p.startY = p.endY;\n    });\n  }\n};\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction getPointersCenter(pointers) {\n  var pageX = 0;\n  var pageY = 0;\n  var count = 0;\n\n  $.each(pointers, function (i, _ref) {\n    var startX = _ref.startX,\n        startY = _ref.startY;\n\n    pageX += startX;\n    pageY += startY;\n    count += 1;\n  });\n\n  pageX /= count;\n  pageY /= count;\n\n  return {\n    pageX: pageX,\n    pageY: pageY\n  };\n}\n\nvar methods = {\n  // Show the crop box manually\n  crop: function crop() {\n    var self = this;\n\n    if (!self.ready || self.disabled) {\n      return;\n    }\n\n    if (!self.cropped) {\n      self.cropped = true;\n      self.limitCropBox(true, true);\n\n      if (self.options.modal) {\n        self.$dragBox.addClass('cropper-modal');\n      }\n\n      self.$cropBox.removeClass('cropper-hidden');\n    }\n\n    self.setCropBoxData(self.initialCropBox);\n  },\n\n\n  // Reset the image and crop box to their initial states\n  reset: function reset() {\n    var self = this;\n\n    if (!self.ready || self.disabled) {\n      return;\n    }\n\n    self.image = $.extend({}, self.initialImage);\n    self.canvas = $.extend({}, self.initialCanvas);\n    self.cropBox = $.extend({}, self.initialCropBox);\n\n    self.renderCanvas();\n\n    if (self.cropped) {\n      self.renderCropBox();\n    }\n  },\n\n\n  // Clear the crop box\n  clear: function clear() {\n    var self = this;\n\n    if (!self.cropped || self.disabled) {\n      return;\n    }\n\n    $.extend(self.cropBox, {\n      left: 0,\n      top: 0,\n      width: 0,\n      height: 0\n    });\n\n    self.cropped = false;\n    self.renderCropBox();\n\n    self.limitCanvas(true, true);\n\n    // Render canvas after crop box rendered\n    self.renderCanvas();\n\n    self.$dragBox.removeClass('cropper-modal');\n    self.$cropBox.addClass('cropper-hidden');\n  },\n\n\n  /**\n   * Replace the image's src and rebuild the cropper\n   *\n   * @param {String} url\n   * @param {Boolean} onlyColorChanged (optional)\n   */\n  replace: function replace(url, onlyColorChanged) {\n    var self = this;\n\n    if (!self.disabled && url) {\n      if (self.isImg) {\n        self.$element.attr('src', url);\n      }\n\n      if (onlyColorChanged) {\n        self.url = url;\n        self.$clone.attr('src', url);\n\n        if (self.ready) {\n          self.$preview.find('img').add(self.$clone2).attr('src', url);\n        }\n      } else {\n        if (self.isImg) {\n          self.replaced = true;\n        }\n\n        // Clear previous data\n        self.options.data = null;\n        self.load(url);\n      }\n    }\n  },\n\n\n  // Enable (unfreeze) the cropper\n  enable: function enable() {\n    var self = this;\n\n    if (self.ready) {\n      self.disabled = false;\n      self.$cropper.removeClass('cropper-disabled');\n    }\n  },\n\n\n  // Disable (freeze) the cropper\n  disable: function disable() {\n    var self = this;\n\n    if (self.ready) {\n      self.disabled = true;\n      self.$cropper.addClass('cropper-disabled');\n    }\n  },\n\n\n  // Destroy the cropper and remove the instance from the image\n  destroy: function destroy() {\n    var self = this;\n    var $this = self.$element;\n\n    if (self.loaded) {\n      if (self.isImg && self.replaced) {\n        $this.attr('src', self.originalUrl);\n      }\n\n      self.unbuild();\n      $this.removeClass('cropper-hidden');\n    } else if (self.isImg) {\n      $this.off('load', self.start);\n    } else if (self.$clone) {\n      self.$clone.remove();\n    }\n\n    $this.removeData('cropper');\n  },\n\n\n  /**\n   * Move the canvas with relative offsets\n   *\n   * @param {Number} offsetX\n   * @param {Number} offsetY (optional)\n   */\n  move: function move(offsetX, offsetY) {\n    var self = this;\n    var canvas = self.canvas;\n\n    self.moveTo(isUndefined(offsetX) ? offsetX : canvas.left + Number(offsetX), isUndefined(offsetY) ? offsetY : canvas.top + Number(offsetY));\n  },\n\n\n  /**\n   * Move the canvas to an absolute point\n   *\n   * @param {Number} x\n   * @param {Number} y (optional)\n   */\n  moveTo: function moveTo(x, y) {\n    var self = this;\n    var canvas = self.canvas;\n    var changed = false;\n\n    // If \"y\" is not present, its default value is \"x\"\n    if (isUndefined(y)) {\n      y = x;\n    }\n\n    x = Number(x);\n    y = Number(y);\n\n    if (self.ready && !self.disabled && self.options.movable) {\n      if (isNumber(x)) {\n        canvas.left = x;\n        changed = true;\n      }\n\n      if (isNumber(y)) {\n        canvas.top = y;\n        changed = true;\n      }\n\n      if (changed) {\n        self.renderCanvas(true);\n      }\n    }\n  },\n\n\n  /**\n   * Zoom the canvas with a relative ratio\n   *\n   * @param {Number} ratio\n   * @param {jQuery Event} _event (private)\n   */\n  zoom: function zoom(ratio, _event) {\n    var self = this;\n    var canvas = self.canvas;\n\n    ratio = Number(ratio);\n\n    if (ratio < 0) {\n      ratio = 1 / (1 - ratio);\n    } else {\n      ratio = 1 + ratio;\n    }\n\n    self.zoomTo(canvas.width * ratio / canvas.naturalWidth, _event);\n  },\n\n\n  /**\n   * Zoom the canvas to an absolute ratio\n   *\n   * @param {Number} ratio\n   * @param {jQuery Event} _event (private)\n   */\n  zoomTo: function zoomTo(ratio, _event) {\n    var self = this;\n    var options = self.options;\n    var pointers = self.pointers;\n    var canvas = self.canvas;\n    var width = canvas.width;\n    var height = canvas.height;\n    var naturalWidth = canvas.naturalWidth;\n    var naturalHeight = canvas.naturalHeight;\n\n    ratio = Number(ratio);\n\n    if (ratio >= 0 && self.ready && !self.disabled && options.zoomable) {\n      var newWidth = naturalWidth * ratio;\n      var newHeight = naturalHeight * ratio;\n      var originalEvent = void 0;\n\n      if (_event) {\n        originalEvent = _event.originalEvent;\n      }\n\n      if (self.trigger('zoom', {\n        originalEvent: originalEvent,\n        oldRatio: width / naturalWidth,\n        ratio: newWidth / naturalWidth\n      }).isDefaultPrevented()) {\n        return;\n      }\n\n      if (originalEvent) {\n        var offset = self.$cropper.offset();\n        var center = pointers && objectKeys(pointers).length ? getPointersCenter(pointers) : {\n          pageX: _event.pageX || originalEvent.pageX || 0,\n          pageY: _event.pageY || originalEvent.pageY || 0\n        };\n\n        // Zoom from the triggering point of the event\n        canvas.left -= (newWidth - width) * ((center.pageX - offset.left - canvas.left) / width);\n        canvas.top -= (newHeight - height) * ((center.pageY - offset.top - canvas.top) / height);\n      } else {\n        // Zoom from the center of the canvas\n        canvas.left -= (newWidth - width) / 2;\n        canvas.top -= (newHeight - height) / 2;\n      }\n\n      canvas.width = newWidth;\n      canvas.height = newHeight;\n      self.renderCanvas(true);\n    }\n  },\n\n\n  /**\n   * Rotate the canvas with a relative degree\n   *\n   * @param {Number} degree\n   */\n  rotate: function rotate(degree) {\n    var self = this;\n\n    self.rotateTo((self.image.rotate || 0) + Number(degree));\n  },\n\n\n  /**\n   * Rotate the canvas to an absolute degree\n   * https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function#rotate()\n   *\n   * @param {Number} degree\n   */\n  rotateTo: function rotateTo(degree) {\n    var self = this;\n\n    degree = Number(degree);\n\n    if (isNumber(degree) && self.ready && !self.disabled && self.options.rotatable) {\n      self.image.rotate = degree % 360;\n      self.rotated = true;\n      self.renderCanvas(true);\n    }\n  },\n\n\n  /**\n   * Scale the image\n   * https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function#scale()\n   *\n   * @param {Number} scaleX\n   * @param {Number} scaleY (optional)\n   */\n  scale: function scale(scaleX, scaleY) {\n    var self = this;\n    var image = self.image;\n    var changed = false;\n\n    // If \"scaleY\" is not present, its default value is \"scaleX\"\n    if (isUndefined(scaleY)) {\n      scaleY = scaleX;\n    }\n\n    scaleX = Number(scaleX);\n    scaleY = Number(scaleY);\n\n    if (self.ready && !self.disabled && self.options.scalable) {\n      if (isNumber(scaleX)) {\n        image.scaleX = scaleX;\n        changed = true;\n      }\n\n      if (isNumber(scaleY)) {\n        image.scaleY = scaleY;\n        changed = true;\n      }\n\n      if (changed) {\n        self.renderImage(true);\n      }\n    }\n  },\n\n\n  /**\n   * Scale the abscissa of the image\n   *\n   * @param {Number} scaleX\n   */\n  scaleX: function scaleX(_scaleX) {\n    var self = this;\n    var scaleY = self.image.scaleY;\n\n    self.scale(_scaleX, isNumber(scaleY) ? scaleY : 1);\n  },\n\n\n  /**\n   * Scale the ordinate of the image\n   *\n   * @param {Number} scaleY\n   */\n  scaleY: function scaleY(_scaleY) {\n    var self = this;\n    var scaleX = self.image.scaleX;\n\n    self.scale(isNumber(scaleX) ? scaleX : 1, _scaleY);\n  },\n\n\n  /**\n   * Get the cropped area position and size data (base on the original image)\n   *\n   * @param {Boolean} isRounded (optional)\n   * @return {Object} data\n   */\n  getData: function getData(isRounded) {\n    var self = this;\n    var options = self.options;\n    var image = self.image;\n    var canvas = self.canvas;\n    var cropBox = self.cropBox;\n    var ratio = void 0;\n    var data = void 0;\n\n    if (self.ready && self.cropped) {\n      data = {\n        x: cropBox.left - canvas.left,\n        y: cropBox.top - canvas.top,\n        width: cropBox.width,\n        height: cropBox.height\n      };\n\n      ratio = image.width / image.naturalWidth;\n\n      $.each(data, function (i, n) {\n        n /= ratio;\n        data[i] = isRounded ? Math.round(n) : n;\n      });\n    } else {\n      data = {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0\n      };\n    }\n\n    if (options.rotatable) {\n      data.rotate = image.rotate || 0;\n    }\n\n    if (options.scalable) {\n      data.scaleX = image.scaleX || 1;\n      data.scaleY = image.scaleY || 1;\n    }\n\n    return data;\n  },\n\n\n  /**\n   * Set the cropped area position and size with new data\n   *\n   * @param {Object} data\n   */\n  setData: function setData(data) {\n    var self = this;\n    var options = self.options;\n    var image = self.image;\n    var canvas = self.canvas;\n    var cropBoxData = {};\n    var rotated = void 0;\n    var isScaled = void 0;\n    var ratio = void 0;\n\n    if ($.isFunction(data)) {\n      data = data.call(self.element);\n    }\n\n    if (self.ready && !self.disabled && $.isPlainObject(data)) {\n      if (options.rotatable) {\n        if (isNumber(data.rotate) && data.rotate !== image.rotate) {\n          image.rotate = data.rotate;\n          rotated = true;\n          self.rotated = rotated;\n        }\n      }\n\n      if (options.scalable) {\n        if (isNumber(data.scaleX) && data.scaleX !== image.scaleX) {\n          image.scaleX = data.scaleX;\n          isScaled = true;\n        }\n\n        if (isNumber(data.scaleY) && data.scaleY !== image.scaleY) {\n          image.scaleY = data.scaleY;\n          isScaled = true;\n        }\n      }\n\n      if (rotated) {\n        self.renderCanvas();\n      } else if (isScaled) {\n        self.renderImage();\n      }\n\n      ratio = image.width / image.naturalWidth;\n\n      if (isNumber(data.x)) {\n        cropBoxData.left = data.x * ratio + canvas.left;\n      }\n\n      if (isNumber(data.y)) {\n        cropBoxData.top = data.y * ratio + canvas.top;\n      }\n\n      if (isNumber(data.width)) {\n        cropBoxData.width = data.width * ratio;\n      }\n\n      if (isNumber(data.height)) {\n        cropBoxData.height = data.height * ratio;\n      }\n\n      self.setCropBoxData(cropBoxData);\n    }\n  },\n\n\n  /**\n   * Get the container size data\n   *\n   * @return {Object} data\n   */\n  getContainerData: function getContainerData() {\n    return this.ready ? this.container : {};\n  },\n\n\n  /**\n   * Get the image position and size data\n   *\n   * @return {Object} data\n   */\n  getImageData: function getImageData() {\n    return this.loaded ? this.image : {};\n  },\n\n\n  /**\n   * Get the canvas position and size data\n   *\n   * @return {Object} data\n   */\n  getCanvasData: function getCanvasData() {\n    var self = this;\n    var canvas = self.canvas;\n    var data = {};\n\n    if (self.ready) {\n      $.each(['left', 'top', 'width', 'height', 'naturalWidth', 'naturalHeight'], function (i, n) {\n        data[n] = canvas[n];\n      });\n    }\n\n    return data;\n  },\n\n\n  /**\n   * Set the canvas position and size with new data\n   *\n   * @param {Object} data\n   */\n  setCanvasData: function setCanvasData(data) {\n    var self = this;\n    var canvas = self.canvas;\n    var aspectRatio = canvas.aspectRatio;\n\n    if ($.isFunction(data)) {\n      data = data.call(self.$element);\n    }\n\n    if (self.ready && !self.disabled && $.isPlainObject(data)) {\n      if (isNumber(data.left)) {\n        canvas.left = data.left;\n      }\n\n      if (isNumber(data.top)) {\n        canvas.top = data.top;\n      }\n\n      if (isNumber(data.width)) {\n        canvas.width = data.width;\n        canvas.height = data.width / aspectRatio;\n      } else if (isNumber(data.height)) {\n        canvas.height = data.height;\n        canvas.width = data.height * aspectRatio;\n      }\n\n      self.renderCanvas(true);\n    }\n  },\n\n\n  /**\n   * Get the crop box position and size data\n   *\n   * @return {Object} data\n   */\n  getCropBoxData: function getCropBoxData() {\n    var self = this;\n    var cropBox = self.cropBox;\n\n    return self.ready && self.cropped ? {\n      left: cropBox.left,\n      top: cropBox.top,\n      width: cropBox.width,\n      height: cropBox.height\n    } : {};\n  },\n\n\n  /**\n   * Set the crop box position and size with new data\n   *\n   * @param {Object} data\n   */\n  setCropBoxData: function setCropBoxData(data) {\n    var self = this;\n    var cropBox = self.cropBox;\n    var aspectRatio = self.options.aspectRatio;\n    var widthChanged = void 0;\n    var heightChanged = void 0;\n\n    if ($.isFunction(data)) {\n      data = data.call(self.$element);\n    }\n\n    if (self.ready && self.cropped && !self.disabled && $.isPlainObject(data)) {\n      if (isNumber(data.left)) {\n        cropBox.left = data.left;\n      }\n\n      if (isNumber(data.top)) {\n        cropBox.top = data.top;\n      }\n\n      if (isNumber(data.width) && data.width !== cropBox.width) {\n        widthChanged = true;\n        cropBox.width = data.width;\n      }\n\n      if (isNumber(data.height) && data.height !== cropBox.height) {\n        heightChanged = true;\n        cropBox.height = data.height;\n      }\n\n      if (aspectRatio) {\n        if (widthChanged) {\n          cropBox.height = cropBox.width / aspectRatio;\n        } else if (heightChanged) {\n          cropBox.width = cropBox.height * aspectRatio;\n        }\n      }\n\n      self.renderCropBox();\n    }\n  },\n\n\n  /**\n   * Get a canvas drawn the cropped image\n   *\n   * @param {Object} options (optional)\n   * @return {HTMLCanvasElement} canvas\n   */\n  getCroppedCanvas: function getCroppedCanvas(options) {\n    var self = this;\n\n    if (!self.ready || !window.HTMLCanvasElement) {\n      return null;\n    }\n\n    if (!$.isPlainObject(options)) {\n      options = {};\n    }\n\n    if (!self.cropped) {\n      return getSourceCanvas(self.$clone[0], self.image, options);\n    }\n\n    var data = self.getData();\n    var originalWidth = data.width;\n    var originalHeight = data.height;\n    var aspectRatio = originalWidth / originalHeight;\n    var scaledWidth = void 0;\n    var scaledHeight = void 0;\n    var scaledRatio = void 0;\n\n    if ($.isPlainObject(options)) {\n      scaledWidth = options.width;\n      scaledHeight = options.height;\n\n      if (scaledWidth) {\n        scaledHeight = scaledWidth / aspectRatio;\n        scaledRatio = scaledWidth / originalWidth;\n      } else if (scaledHeight) {\n        scaledWidth = scaledHeight * aspectRatio;\n        scaledRatio = scaledHeight / originalHeight;\n      }\n    }\n\n    // The canvas element will use `Math.Math.floor` on a float number, so Math.floor first\n    var canvasWidth = Math.floor(scaledWidth || originalWidth);\n    var canvasHeight = Math.floor(scaledHeight || originalHeight);\n\n    var canvas = $('<canvas>')[0];\n    var context = canvas.getContext('2d');\n\n    canvas.width = canvasWidth;\n    canvas.height = canvasHeight;\n\n    if (options.fillColor) {\n      context.fillStyle = options.fillColor;\n      context.fillRect(0, 0, canvasWidth, canvasHeight);\n    }\n\n    // https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D.drawImage\n    var parameters = function () {\n      var source = getSourceCanvas(self.$clone[0], self.image, options);\n      var sourceWidth = source.width;\n      var sourceHeight = source.height;\n      var canvasData = self.canvas;\n      var params = [source];\n\n      // Source canvas\n      var srcX = data.x + canvasData.naturalWidth * (Math.abs(data.scaleX || 1) - 1) / 2;\n      var srcY = data.y + canvasData.naturalHeight * (Math.abs(data.scaleY || 1) - 1) / 2;\n      var srcWidth = void 0;\n      var srcHeight = void 0;\n\n      // Destination canvas\n      var dstX = void 0;\n      var dstY = void 0;\n      var dstWidth = void 0;\n      var dstHeight = void 0;\n\n      if (srcX <= -originalWidth || srcX > sourceWidth) {\n        srcX = 0;\n        srcWidth = 0;\n        dstX = 0;\n        dstWidth = 0;\n      } else if (srcX <= 0) {\n        dstX = -srcX;\n        srcX = 0;\n        dstWidth = Math.min(sourceWidth, originalWidth + srcX);\n        srcWidth = dstWidth;\n      } else if (srcX <= sourceWidth) {\n        dstX = 0;\n        dstWidth = Math.min(originalWidth, sourceWidth - srcX);\n        srcWidth = dstWidth;\n      }\n\n      if (srcWidth <= 0 || srcY <= -originalHeight || srcY > sourceHeight) {\n        srcY = 0;\n        srcHeight = 0;\n        dstY = 0;\n        dstHeight = 0;\n      } else if (srcY <= 0) {\n        dstY = -srcY;\n        srcY = 0;\n        dstHeight = Math.min(sourceHeight, originalHeight + srcY);\n        srcHeight = dstHeight;\n      } else if (srcY <= sourceHeight) {\n        dstY = 0;\n        dstHeight = Math.min(originalHeight, sourceHeight - srcY);\n        srcHeight = dstHeight;\n      }\n\n      // All the numerical parameters should be integer for `drawImage` (#476)\n      params.push(Math.floor(srcX), Math.floor(srcY), Math.floor(srcWidth), Math.floor(srcHeight));\n\n      // Scale destination sizes\n      if (scaledRatio) {\n        dstX *= scaledRatio;\n        dstY *= scaledRatio;\n        dstWidth *= scaledRatio;\n        dstHeight *= scaledRatio;\n      }\n\n      // Avoid \"IndexSizeError\" in IE and Firefox\n      if (dstWidth > 0 && dstHeight > 0) {\n        params.push(Math.floor(dstX), Math.floor(dstY), Math.floor(dstWidth), Math.floor(dstHeight));\n      }\n\n      return params;\n    }();\n\n    context.imageSmoothingEnabled = !!options.imageSmoothingEnabled;\n\n    if (options.imageSmoothingQuality) {\n      context.imageSmoothingQuality = options.imageSmoothingQuality;\n    }\n\n    context.drawImage.apply(context, _toConsumableArray(parameters));\n\n    return canvas;\n  },\n\n\n  /**\n   * Change the aspect ratio of the crop box\n   *\n   * @param {Number} aspectRatio\n   */\n  setAspectRatio: function setAspectRatio(aspectRatio) {\n    var self = this;\n    var options = self.options;\n\n    if (!self.disabled && !isUndefined(aspectRatio)) {\n      // 0 -> NaN\n      options.aspectRatio = Math.max(0, aspectRatio) || NaN;\n\n      if (self.ready) {\n        self.initCropBox();\n\n        if (self.cropped) {\n          self.renderCropBox();\n        }\n      }\n    }\n  },\n\n\n  /**\n   * Change the drag mode\n   *\n   * @param {String} mode (optional)\n   */\n  setDragMode: function setDragMode(mode) {\n    var self = this;\n    var options = self.options;\n    var croppable = void 0;\n    var movable = void 0;\n\n    if (self.loaded && !self.disabled) {\n      croppable = mode === 'crop';\n      movable = options.movable && mode === 'move';\n      mode = croppable || movable ? mode : 'none';\n\n      self.$dragBox.data('action', mode).toggleClass('cropper-crop', croppable).toggleClass('cropper-move', movable);\n\n      if (!options.cropBoxMovable) {\n        // Sync drag mode to crop box when it is not movable(#300)\n        self.$face.data('action', mode).toggleClass('cropper-crop', croppable).toggleClass('cropper-move', movable);\n      }\n    }\n  }\n};\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar CLASS_HIDDEN = 'cropper-hidden';\nvar REGEXP_DATA_URL = /^data:/;\nvar REGEXP_DATA_URL_JPEG = /^data:image\\/jpeg;base64,/;\n\nvar Cropper = function () {\n  function Cropper(element, options) {\n    _classCallCheck(this, Cropper);\n\n    var self = this;\n\n    self.$element = $(element);\n    self.options = $.extend({}, DEFAULTS, $.isPlainObject(options) && options);\n    self.loaded = false;\n    self.ready = false;\n    self.completed = false;\n    self.rotated = false;\n    self.cropped = false;\n    self.disabled = false;\n    self.replaced = false;\n    self.limited = false;\n    self.wheeling = false;\n    self.isImg = false;\n    self.originalUrl = '';\n    self.canvas = null;\n    self.cropBox = null;\n    self.pointers = {};\n    self.init();\n  }\n\n  _createClass(Cropper, [{\n    key: 'init',\n    value: function init() {\n      var self = this;\n      var $this = self.$element;\n      var url = void 0;\n\n      if ($this.is('img')) {\n        self.isImg = true;\n\n        // Should use `$.fn.attr` here. e.g.: \"img/picture.jpg\"\n        url = $this.attr('src');\n        self.originalUrl = url;\n\n        // Stop when it's a blank image\n        if (!url) {\n          return;\n        }\n\n        // Should use `$.fn.prop` here. e.g.: \"http://example.com/img/picture.jpg\"\n        url = $this.prop('src');\n      } else if ($this.is('canvas') && window.HTMLCanvasElement) {\n        url = $this[0].toDataURL();\n      }\n\n      self.load(url);\n    }\n\n    // A shortcut for triggering custom events\n\n  }, {\n    key: 'trigger',\n    value: function trigger(type, data) {\n      var e = $.Event(type, data);\n\n      this.$element.trigger(e);\n\n      return e;\n    }\n  }, {\n    key: 'load',\n    value: function load(url) {\n      var self = this;\n      var options = self.options;\n      var $this = self.$element;\n\n      if (!url) {\n        return;\n      }\n\n      self.url = url;\n      self.image = {};\n\n      if (!options.checkOrientation || !window.ArrayBuffer) {\n        self.clone();\n        return;\n      }\n\n      // XMLHttpRequest disallows to open a Data URL in some browsers like IE11 and Safari\n      if (REGEXP_DATA_URL.test(url)) {\n        if (REGEXP_DATA_URL_JPEG.test(url)) {\n          self.read(dataURLToArrayBuffer(url));\n        } else {\n          self.clone();\n        }\n        return;\n      }\n\n      var xhr = new XMLHttpRequest();\n\n      xhr.onerror = $.proxy(function () {\n        self.clone();\n      }, this);\n\n      xhr.onload = function load() {\n        self.read(this.response);\n      };\n\n      if (options.checkCrossOrigin && isCrossOriginURL(url) && $this.prop('crossOrigin')) {\n        url = addTimestamp(url);\n      }\n\n      xhr.open('get', url);\n      xhr.responseType = 'arraybuffer';\n      xhr.withCredentials = $this.prop('crossOrigin') === 'use-credentials';\n      xhr.send();\n    }\n  }, {\n    key: 'read',\n    value: function read(arrayBuffer) {\n      var self = this;\n      var options = self.options;\n      var orientation = getOrientation(arrayBuffer);\n      var image = self.image;\n      var rotate = 0;\n      var scaleX = 1;\n      var scaleY = 1;\n\n      if (orientation > 1) {\n        self.url = arrayBufferToDataURL(arrayBuffer);\n\n        switch (orientation) {\n          // flip horizontal\n          case 2:\n            scaleX = -1;\n            break;\n\n          // rotate left 180\n          case 3:\n            rotate = -180;\n            break;\n\n          // flip vertical\n          case 4:\n            scaleY = -1;\n            break;\n\n          // flip vertical + rotate right 90\n          case 5:\n            rotate = 90;\n            scaleY = -1;\n            break;\n\n          // rotate right 90\n          case 6:\n            rotate = 90;\n            break;\n\n          // flip horizontal + rotate right 90\n          case 7:\n            rotate = 90;\n            scaleX = -1;\n            break;\n\n          // rotate left 90\n          case 8:\n            rotate = -90;\n            break;\n\n          default:\n        }\n      }\n\n      if (options.rotatable) {\n        image.rotate = rotate;\n      }\n\n      if (options.scalable) {\n        image.scaleX = scaleX;\n        image.scaleY = scaleY;\n      }\n\n      self.clone();\n    }\n  }, {\n    key: 'clone',\n    value: function clone() {\n      var self = this;\n      var options = self.options;\n      var $this = self.$element;\n      var url = self.url;\n      var crossOrigin = '';\n      var crossOriginUrl = void 0;\n\n      if (options.checkCrossOrigin && isCrossOriginURL(url)) {\n        crossOrigin = $this.prop('crossOrigin');\n\n        if (crossOrigin) {\n          crossOriginUrl = url;\n        } else {\n          crossOrigin = 'anonymous';\n\n          // Bust cache (#148) when there is not a \"crossOrigin\" property\n          crossOriginUrl = addTimestamp(url);\n        }\n      }\n\n      self.crossOrigin = crossOrigin;\n      self.crossOriginUrl = crossOriginUrl;\n\n      var image = document.createElement('img');\n\n      if (crossOrigin) {\n        image.crossOrigin = crossOrigin;\n      }\n\n      image.src = crossOriginUrl || url;\n\n      var $clone = $(image);\n\n      self.$clone = $clone;\n\n      if (self.isImg) {\n        if ($this[0].complete) {\n          self.start();\n        } else {\n          $this.one('load', $.proxy(self.start, this));\n        }\n      } else {\n        $clone.one('load', $.proxy(self.start, this)).one('error', $.proxy(self.stop, this)).addClass('cropper-hide').insertAfter($this);\n      }\n    }\n  }, {\n    key: 'start',\n    value: function start() {\n      var self = this;\n      var $clone = self.$clone;\n      var $image = self.$element;\n\n      if (!self.isImg) {\n        $clone.off('error', self.stop);\n        $image = $clone;\n      }\n\n      getImageSize($image[0], function (naturalWidth, naturalHeight) {\n        $.extend(self.image, {\n          naturalWidth: naturalWidth,\n          naturalHeight: naturalHeight,\n          aspectRatio: naturalWidth / naturalHeight\n        });\n\n        self.loaded = true;\n        self.build();\n      });\n    }\n  }, {\n    key: 'stop',\n    value: function stop() {\n      var self = this;\n\n      self.$clone.remove();\n      self.$clone = null;\n    }\n  }, {\n    key: 'build',\n    value: function build() {\n      var self = this;\n      var options = self.options;\n      var $this = self.$element;\n      var $clone = self.$clone;\n\n      if (!self.loaded) {\n        return;\n      }\n\n      // Unbuild first when replace\n      if (self.ready) {\n        self.unbuild();\n      }\n\n      var $cropper = $(TEMPLATE);\n      var $cropBox = $cropper.find('.cropper-crop-box');\n      var $face = $cropBox.find('.cropper-face');\n\n      // Create cropper elements\n      self.$container = $this.parent();\n      self.$cropper = $cropper;\n      self.$canvas = $cropper.find('.cropper-canvas').append($clone);\n      self.$dragBox = $cropper.find('.cropper-drag-box');\n      self.$cropBox = $cropBox;\n      self.$viewBox = $cropper.find('.cropper-view-box');\n      self.$face = $face;\n\n      // Hide the original image\n      $this.addClass(CLASS_HIDDEN).after($cropper);\n\n      // Show the clone image if is hidden\n      if (!self.isImg) {\n        $clone.removeClass('cropper-hide');\n      }\n\n      self.initPreview();\n      self.bind();\n\n      options.aspectRatio = Math.max(0, options.aspectRatio) || NaN;\n      options.viewMode = Math.max(0, Math.min(3, Math.round(options.viewMode))) || 0;\n\n      self.cropped = options.autoCrop;\n\n      if (options.autoCrop) {\n        if (options.modal) {\n          self.$dragBox.addClass('cropper-modal');\n        }\n      } else {\n        $cropBox.addClass(CLASS_HIDDEN);\n      }\n\n      if (!options.guides) {\n        $cropBox.find('.cropper-dashed').addClass(CLASS_HIDDEN);\n      }\n\n      if (!options.center) {\n        $cropBox.find('.cropper-center').addClass(CLASS_HIDDEN);\n      }\n\n      if (options.cropBoxMovable) {\n        $face.addClass('cropper-move').data('action', 'all');\n      }\n\n      if (!options.highlight) {\n        $face.addClass('cropper-invisible');\n      }\n\n      if (options.background) {\n        $cropper.addClass('cropper-bg');\n      }\n\n      if (!options.cropBoxResizable) {\n        $cropBox.find('.cropper-line, .cropper-point').addClass(CLASS_HIDDEN);\n      }\n\n      self.setDragMode(options.dragMode);\n      self.render();\n      self.ready = true;\n      self.setData(options.data);\n\n      // Trigger the ready event asynchronously to keep `data('cropper')` is defined\n      self.completing = setTimeout(function () {\n        if ($.isFunction(options.ready)) {\n          $this.one('ready', options.ready);\n        }\n\n        self.trigger('ready');\n        self.trigger('crop', self.getData());\n        self.completed = true;\n      }, 0);\n    }\n  }, {\n    key: 'unbuild',\n    value: function unbuild() {\n      var self = this;\n\n      if (!self.ready) {\n        return;\n      }\n\n      if (!self.completed) {\n        clearTimeout(self.completing);\n      }\n\n      self.ready = false;\n      self.completed = false;\n      self.initialImage = null;\n\n      // Clear `initialCanvas` is necessary when replace\n      self.initialCanvas = null;\n      self.initialCropBox = null;\n      self.container = null;\n      self.canvas = null;\n\n      // Clear `cropBox` is necessary when replace\n      self.cropBox = null;\n      self.unbind();\n\n      self.resetPreview();\n      self.$preview = null;\n\n      self.$viewBox = null;\n      self.$cropBox = null;\n      self.$dragBox = null;\n      self.$canvas = null;\n      self.$container = null;\n\n      self.$cropper.remove();\n      self.$cropper = null;\n    }\n  }], [{\n    key: 'setDefaults',\n    value: function setDefaults(options) {\n      $.extend(DEFAULTS, $.isPlainObject(options) && options);\n    }\n  }]);\n\n  return Cropper;\n}();\n\n$.extend(Cropper.prototype, render);\n$.extend(Cropper.prototype, preview);\n$.extend(Cropper.prototype, events);\n$.extend(Cropper.prototype, handlers);\n$.extend(Cropper.prototype, change);\n$.extend(Cropper.prototype, methods);\n\nvar NAMESPACE = 'cropper';\nvar OtherCropper = $.fn.cropper;\n\n$.fn.cropper = function jQueryCropper(option) {\n  for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n\n  var result = void 0;\n\n  this.each(function (i, element) {\n    var $this = $(element);\n    var data = $this.data(NAMESPACE);\n\n    if (!data) {\n      if (/destroy/.test(option)) {\n        return;\n      }\n\n      var options = $.extend({}, $this.data(), $.isPlainObject(option) && option);\n      $this.data(NAMESPACE, data = new Cropper(element, options));\n    }\n\n    if (typeof option === 'string') {\n      var fn = data[option];\n\n      if ($.isFunction(fn)) {\n        result = fn.apply(data, args);\n      }\n    }\n  });\n\n  return typeof result !== 'undefined' ? result : this;\n};\n\n$.fn.cropper.Constructor = Cropper;\n$.fn.cropper.setDefaults = Cropper.setDefaults;\n\n// No conflict\n$.fn.cropper.noConflict = function noConflict() {\n  $.fn.cropper = OtherCropper;\n  return this;\n};\n\n})));\n\n\n/***/ })\n\n},[\"./build/_js/_custom/main.js\"]);\n\n\n// WEBPACK FOOTER //\n// main.71e2ccf1e543e2526f25.js","'use strict';\n\n/* Depends on jQuery as $ */\n\nvar changeLanguage = function(language, callback) {\n\n    var posting = $.post('/language', {\n        language: language\n    }, \"json\");\n\n    posting.done(function(data) {\n        if (typeof callback == 'function') {\n            callback();\n        }\n        location.reload();\n    }).fail(function() {\n        //\n    }).always(function(e) {\n        //\n    });\n}\n\nmodule.exports = changeLanguage;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/_js/_custom/_changeLanguage.js\n// module id = ./build/_js/_custom/_changeLanguage.js\n// module chunks = main","var $ = require(\"jquery\");\n\nvar nav_mobile = function() {\n\tif($('.m-navbar .nav-main')) {\n\t\tvar docWidth = $(window).width(),\n\t\t\tuserTimer,\n\t\t\tmobileMenuState = 'closed',\n\t\t\tddOpen = false,\n\t\t\t$mw = $('.m-wrap'),\n\t\t\t$wrapper = $('.wrapper'),\n\t\t\t$mainHeader = $('.main-header'),\n\t\t\t$userPro = $('.user-profile'),\n\t\t\t$userMenu = $('.user-menu'),\n\t\t\t$mainMenu = $('.icon-menu'),\n\t\t\t$mmAlt = $('.icon-menu, .iicon-menu'),\n\t\t\t$intMenu = $('.nav-main'),\n\t\t\t$langIcon = $('.active-language'),\n\t\t\t$langMenu = $('.m-language'),\n\t\t\t$dropDown = $('.m-dropdown'),\n\t\t\t$mnav = $('.m-nav');\n\t\t\t$activeLang = $('.m-language .active img').attr('src');\n\n\t\t$(window).on('resize', function() {\n\t\t\tdocWidth = $(window).width();\n\t\t\tif(docWidth <= 1024) {\n\t\t\t\t$userMenu.show();\n\t\t\t} else {\n\t\t\t\t$userMenu.hide();\n\t\t\t}\n\t\t});\n\n\t\t$langIcon.attr('src', $activeLang);\n\n\t\t$userPro.on('click', function() {\n\t\t\tif(docWidth <= 1024) {\n\t\t\t\t\n\t\t\t\tif(mobileMenuState === 'closed') {\n\t\t\t\t\t$wrapper.animate({\n\t\t\t\t\t\t'right': '50%'\n\t\t\t\t\t}, 250);\n\t\t\t\t\t$userMenu.animate({\n\t\t\t\t\t\t'right': '0%'\n\t\t\t\t\t}, 250);\n\t\t\t\t\t$userPro.addClass('active');\n\t\t\t\t\tmobileMenuState = 'user';\n\t\t\t\t} else if(mobileMenuState === 'user') {\n\t\t\t\t\t$wrapper.animate({\n\t\t\t\t\t\t'right': '0%'\n\t\t\t\t\t}, 250);\n\t\t\t\t\t$userMenu.animate({\n\t\t\t\t\t\t'right': '-50%'\n\t\t\t\t\t}, 250);\n\t\t\t\t\t$userPro.removeClass('active');\n\t\t\t\t\tmobileMenuState = 'closed';\n\t\t\t\t}\n\n\t\t\t\t\n\t\t\t}\n\t\t});\n\n\t\t$mmAlt.on('click', function() {\n\t\t\tif(docWidth <= 1024) {\n\t\t\t\tif(mobileMenuState === 'closed') {\n\t\t\t\t\t$wrapper.animate({\n\t\t\t\t\t\t'right': '-50%'\n\t\t\t\t\t}, 250);\n\t\t\t\t\t$intMenu.animate({\n\t\t\t\t\t\t'left': '0%'\n\t\t\t\t\t}, 250);\n\t\t\t\t\t$mmAlt.addClass('active');\n\t\t\t\t\t$mw.addClass('h-lock');\n\t\t\t\t\tmobileMenuState = 'main';\n\t\t\t\t} else if(mobileMenuState === 'main') {\n\t\t\t\t\t$wrapper.animate({\n\t\t\t\t\t\t'right': '0%'\n\t\t\t\t\t}, 250);\n\t\t\t\t\t$intMenu.animate({\n\t\t\t\t\t\t'left': '-50%'\n\t\t\t\t\t}, 250, function() {\n\t\t\t\t\t\t$mmAlt.removeClass('active');\n\t\t\t\t\t\t$mw.removeClass('h-lock');\n\t\t\t\t\t});\n\t\t\t\t\tmobileMenuState = 'closed';\n\t\t\t\t}\t\n\t\t\t}\n\t\t});\n\n\t\t$dropDown.on('click', function() {\n\t\t\t// Clear old Dropdowns\n\t\t\tif($mnav.find($('.dropdown-menu')).hasClass('active')) {\n\t\t\t\t// So that you can close it if you click it.\n\t\t\t\tif(!$(this).find($('.dropdown-menu'))) {\n\t\t\t\t\t$mnav.find($('.dropdown-menu')).removeClass('active');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(docWidth <= 1024) {\n\t\t\t\tif($(this).parent().parent().attr('class') !== 'm-nav nav-main') {\n\t\t\t\t\tif($(this).find($('.dropdown-menu')).is(':hidden')) {\n\t\t\t\t\t\t$(this).find($('.dropdown-menu')).addClass('active');\n\t\t\t\t\t\t$(this).addClass('open');\n\t\t\t\t\t\tddOpen = true;\n\t\t\t\t\t} else if($(this).find($('.dropdown-menu')).is(':visible')) {\n\t\t\t\t\t\t$(this).find($('.dropdown-menu')).removeClass('active');\n\t\t\t\t\t\t$(this).removeClass('open');\n\t\t\t\t\t\t$(this).blur();\n\t\t\t\t\t\tddOpen = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t$(document).on('click touchstart', function(e) {\n\t\t\tif(docWidth <= 1024) {\n\t\t\t\tif(ddOpen === true) {\n\t\t\t\t\tif(!$(e.target).closest('.m-dropdown').length) {\n\t\t\t\t\t\t$dropDown.find($('.dropdown-menu')).removeClass('active');\n\t\t\t\t\t\t$dropDown.removeClass('open');\n\t\t\t\t\t\tddOpen = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n};\n\nmodule.exports = nav_mobile;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/_js/_custom/_nav_mobile.js\n// module id = ./build/_js/_custom/_nav_mobile.js\n// module chunks = main","var $ = require('jquery');\n\nvar searchbox = function() {\n\n\tvar algoliasearch = require('algoliasearch');\n\tvar autocomplete = require('autocomplete.js');\n\tvar trimHTML = require('./_trimHTML.js');\n\tvar client = algoliasearch(\"61EU8IS2O1\", \"fdcec7b6178f9a9c128ae03d9b7f5f40\");\n\tvar members = client.initIndex(algoliaIndexMembers);\n\tvar projects = client.initIndex(algoliaIndexProjects);\n\n\t// Returns the relevant Algolia source function given an index\n\tfunction hitsSource(index) {\n\t\treturn autocomplete.sources.hits(index, { hitsPerPage: 3 });\n\t}\n\n\t//initialize autocomplete on search input (ID selector must match)\n\tautocomplete('#aa-search-input', \n\t\t{\n\t\t\thint: false,\n\t\t\t// debug: true,\n\t\t\tkeyboardShortcuts: ['/']\n\t\t}, \n\t\t[\n\t\t\t{\n\t\t\t  // Custom source function: returns up to three hits from Algolia,\n\t\t\t  // plus a fourth row linking to the Advanced Search page\n\t\t\t  source: function(query, callback) {\n\t\t\t\t  var memberHitsSource = hitsSource(members);\n\t\t\t\t  memberHitsSource(query, function(suggestions) {\n\t\t\t\t    var dummySuggestion = {\n\t\t\t\t\t\tdummy: true,\n\t\t\t\t\t\turi: '/expertise?' + $.param({searchtext: '\"' + query + '\"'}),\n\t\t\t\t\t\tquery: query\n\t\t\t\t\t};\n\t\t\t\t    if (suggestions.length === 0) {\n\t\t\t\t\t\tdummySuggestion.noResults = true;\n\t\t\t\t\t\tdummySuggestion.uri = '/expertise';\n\t\t\t\t\t}\n\t\t\t\t    // Add the dummy suggestion to the bottom\n\t\t\t\t\tsuggestions.push(dummySuggestion);\n\t\t\t\t    callback(suggestions, query);\n\t\t\t\t  });\n\t\t\t\t},\n\t\t\t  //value to be displayed in input control after user's suggestion selection\n\t\t\t  displayKey: function(suggestion) {\n\t\t\t  \tif (suggestion.dummy) {\n\t\t\t  \t\tif (suggestion.noResults) {\n\t\t\t  \t\t\treturn lang['NoResultsFound'] + ' ' + lang['AdvancedSearch'];\n\t\t\t  \t\t}\n\t\t\t  \t\treturn lang['FindMoreExperts'].replace('%s', \"'\" + suggestion.query + \"'\");\n\t\t\t  \t}\n\n\t\t\t  \treturn suggestion.firstname + ' ' + suggestion.lastname;\n\t\t\t  },\n\t\t\t  //hash of templates used when rendering dataset\n\t\t\t  templates: {\n\t\t\t    header: '<div class=\"aa-suggestions-category\">' + lang['Experts'] + '</div>',\n\t\t\t    //'suggestion' templating function used to render a single suggestion\n\t\t\t    suggestion: function(suggestion, query) {\n\t\t\t      if (suggestion.dummy) {\n\t\t\t      \tif (suggestion.noResults) {\n\t\t\t      \t\treturn '<div>' + lang['NoResultsFound'] + ' <a href=\"/expertise\">' + lang['AdvancedSearch'] + '</a></div>';\n\t\t\t      \t}\n\t\t\t      \treturn lang['FindMoreExperts'].replace('%s', \"'\" + query + \"'\");\n\t\t\t      }\n\n\t\t\t      var maxChars = 35;\n\t\t\t      var organizationDisplayHTML = suggestion._highlightResult.organization.value;\n\t\t\t      if (suggestion.organization.length > maxChars) {\n\t\t\t      \torganizationDisplayHTML = trimHTML(organizationDisplayHTML, maxChars);\n\t\t\t      }\n\t\t\t      return '<img src=\"' + suggestion.image + '\"><span>' +\n\t\t\t        suggestion._highlightResult.firstname.value + ' ' +\n\t\t\t        suggestion._highlightResult.lastname.value + '</span> <span>' +\n\t\t\t        organizationDisplayHTML + '</span>';\n\t\t\t    },\n\t\t\t    empty: '<div class=\"aa-suggestion aa-suggestion-empty\">' + lang['NoResultsFound'] + '&nbsp;<a href=\"/expertise/\">' + lang['AdvancedSearch'] + '</a></div>'\n\t\t\t  }\n\t\t\t},\n\t\t\t{\n\t\t\t  source: function(query, callback) {\n\t\t\t\t  var projectHitsSource = hitsSource(projects);\n\t\t\t\t  projectHitsSource(query, function(suggestions) {\n\t\t\t\t    // Add the dummy suggestion to the bottom\n\t\t\t\t\tvar dummySuggestion = {\n\t\t\t\t\t\tprojectname: lang['FindMoreProjects'].replace('%s', \"'\" + query + \"'\"),\n\t\t\t\t\t\tdummy: true,\n\t\t\t\t\t\turi: '/projects?' + $.param({searchtext: '\"' + query + '\"'}),\n\t\t\t\t\t\tquery: query\n\t\t\t\t\t};\n\t\t\t\t\tif (suggestions.length === 0) {\n\t\t\t\t\t\tdummySuggestion.projectname = lang['NoResultsFound'] + ' ' + lang['AdvancedSearch'];\n\t\t\t\t\t\tdummySuggestion.noResults = true;\n\t\t\t\t\t\tdummySuggestion.uri = '/projects';\n\t\t\t\t\t}\n\t\t\t\t\tsuggestions.push(dummySuggestion);\n\t\t\t\t    callback(suggestions, query);\n\t\t\t\t  });\n\t\t\t\t},\n\t\t\t  //value to be displayed in input control after user's suggestion selection\n\t\t\t  displayKey: 'projectname',\n\t\t\t  //hash of templates used when rendering dataset\n\t\t\t  templates: {\n\t\t\t    header: '<div class=\"aa-suggestions-category\">' + lang['Projects'] + '</div>',\n\t\t\t    //'suggestion' templating function used to render a single suggestion\n\t\t\t    suggestion: function(suggestion, query) {\n\t\t\t      if (suggestion.dummy) {\n\t\t\t      \tif (suggestion.noResults) {\n\t\t\t      \t\treturn '<div>' + lang['NoResultsFound'] + ' <a href=\"/projects\">' + lang['AdvancedSearch'] + '</a></div>';\n\t\t\t      \t}\n\n\t\t\t      \treturn lang['FindMoreProjects'].replace('%s', \"'\" + query + \"'\");\n\t\t\t      }\n\n\t\t\t      if (typeof suggestion._highlightResult.country != 'undefined') {\n\t\t\t      \tvar country = suggestion._highlightResult.country.value;\n\t\t\t      } else {\n\t\t\t      \tvar country = '';\n\t\t\t      }\n\t\t\t      return '<img src=\"' + suggestion.image + '\"><span>' +\n\t\t\t        suggestion._highlightResult.projectname.value + '</span><span>' +\n\t\t\t        country + '</span>';\n\t\t\t    },\n\t\t\t    empty: '<div class=\"aa-suggestion aa-suggestion-empty\">' + lang['NoResultsFound'] + '&nbsp;<a href=\"/projects/\">' + lang['AdvancedSearch'] + '</a></div>',\n\t\t\t    footer: '<div class=\"aa-suggestions-footer\">Powered by <img src=\"/images/Algolia_logo_bg-white.svg\" width=\"48\" height=\"17\"></div>'\n\t\t\t  }\n\t\t\t}\n\t\t])\n\t\t.on('autocomplete:selected', function(event, suggestion, dataset) {\n\t\t\tif (! suggestion.dummy) {\n\t\t\t\tsegmentAnalytics({\n\t                \"event\": {\n\t                    \"name\": \"Dropdown Search Result Followed\",\n\t                    \"properties\": {\n\t                        \"Category\"    : suggestion.uid ? 'Expert' : 'Project',\n\t                        \"Target Id\"   : parseInt(suggestion.objectID),\n\t                        \"Target Name\" : suggestion.uid ? suggestion.firstname + ' ' + suggestion.lastname : suggestion.projectname\n\t                    }\n\t                }\n\t            });\n            }\n\t\t\twindow.location.href = suggestion.uri;\n\t\t});\n};\n\nmodule.exports = searchbox;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/_js/_custom/_searchbox.js\n// module id = ./build/_js/_custom/_searchbox.js\n// module chunks = main","var $ = require('jquery');\nvar mailcheck = require('mailcheck');\nvar select2 = require('select2');\nrequire('../_lib/jquery.validation');\n\nmodule.exports = function() {\n  var $email = $('#email');\n  var $spellingHint = $(\"#spelling-hint\");\n  var $companyHint =$(\"#company-hint\");\n\n  var companyHint = \"We recommend using your professional email address.\";\n\n  $email.focus(function() {\n    $spellingHint.empty();\n    $companyHint.empty();\n  });\n\n  $email.on('change',function() {\n      $(this).mailcheck({\n          suggested: function(element, suggestion) {\n              var hint = \"Also, did you mean <b><i><a href='#' class='suggestion'>\" +\n                  \"<span class='address'>\" + suggestion.address + \"</span>\"\n                  + \"@<span class='domain'>\" + suggestion.domain + \n                  \"</i></b></a></span>?\";\n                \n              $spellingHint.hide().html(hint).fadeIn(500);\n              $companyHint.hide().html(companyHint).fadeIn(500);\n          },\n          empty: function (element) {\n              var companyDomain = $email.val().substr($email.val().indexOf(\"@\") + 1);\n              if (mailcheck.defaultDomains.indexOf(companyDomain) >= 0 || mailcheck.defaultSecondLevelDomains.indexOf(companyDomain.substr(companyDomain.indexOf(\".\"))) >= 0) {\n                  console.log(\"found a personal email address, spelled correctly\");\n                  $companyHint.hide().html(companyHint).fadeIn(500);\n              }\n              else $companyHint.empty();\n\n          }\n      });\n  });\n\n  $spellingHint.on('click', '.suggestion', function() {\n      // On click, fill in the field with the suggestion and remove the hint\n      $email.val($(\".suggestion\").text());\n      $spellingHint.fadeOut(300, function() {\n          $(this).empty();\n      });\n      $(\"#discipline\").focus();\n      $email.change();\n      return false;\n  });\n\n  /**\n   * Matching algorithm for Select2. Used for sector/subsector input box on user signup form.\n   * Taken from https://stackoverflow.com/questions/21992727/display-result-matching-optgroup-using-select2\n   * \n   * @param  {[type]} params [description]\n   * @param  {[type]} data   [description]\n   * @return {[type]}        [description]\n   */\n  function modelMatcher (params, data) {\n    data.parentText = data.parentText || \"\";\n\n    // Always return the object if there is nothing to compare\n    if ($.trim(params.term) === '') {\n      return data;\n    }\n\n    // Do a recursive check for options with children\n    if (data.children && data.children.length > 0) {\n      // Clone the data object if there are children\n      // This is required as we modify the object to remove any non-matches\n      var match = $.extend(true, {}, data);\n\n      // Check each child of the option\n      for (var c = data.children.length - 1; c >= 0; c--) {\n        var child = data.children[c];\n        child.parentText += data.parentText + \" \" + data.text;\n\n        var matches = modelMatcher(params, child);\n\n        // If there wasn't a match, remove the object in the array\n        if (matches == null) {\n          match.children.splice(c, 1);\n        }\n      }\n\n      // If any children matched, return the new object\n      if (match.children.length > 0) {\n        return match;\n      }\n\n      // If there were no matching children, check just the plain object\n      return modelMatcher(params, match);\n    }\n\n    // If the typed-in term matches the text of this term, or the text from any\n    // parent term, then it's a match.\n    var original = (data.parentText + ' ' + data.text).toUpperCase();\n    var term = params.term.toUpperCase();\n\n\n    // Check if the text contains the term\n    if (original.indexOf(term) > -1) {\n      return data;\n    }\n\n    // If it doesn't contain the term, don't return anything\n    return null;\n  }\n\n  $(document).ready(function() {\n      $('#project_sector_sub_select2').select2({\n          maximumSelectionLength: 6,\n          placeholder: '- Type to Search -',\n          matcher: modelMatcher,\n          templateSelection: template\n      });\n      $('#public_status').select2({\n          minimumResultsForSearch: Infinity\n      });\n      $('#discipline').select2();\n      $('#country').select2();\n  });\n\n  // Function to return label values for subsector dropdown box. Adds name of sector in front of subsector\n  function template(data, container) {\n    return data.id.replace(':',' ');\n  }\n\n\n  var errorLabelsFromServer = $('div.errormsg label').filter(function () { // Filter removes any label elements that do not have any text inside them\n      return !!$(this).text();\n      });\n  var errorObjects = []; // Will hold the errors that must be removed from the DOM, and re-added via jQuery Validation\n  errorLabelsFromServer.each(function(index) {\n    var inputName = $(this).parent().prevAll(\"input, select\").attr('name');\n    var errorObject = {};\n    errorObject[inputName] = $(this).text();\n    errorObjects.push(errorObject);\n    $(this).empty();\n  });\n\n  var formToValidate = $('form.form');\n  var validationSettings = {\n        submit: {\n            settings: {\n                errorListClass: 'errormsg'\n            },\n            callback: {\n                // add optional callback here e.g. for error handling\n            }\n        },\n        dynamic: {\n            settings: {\n                trigger: \"focusout\"\n            }\n        }\n    };\n  formToValidate.validate(validationSettings);\n\n  for (var key in errorObjects) {\n    formToValidate.addError(errorObjects[key]);\n  }\n\n  validationSettings.submit.settings.scrollToError = true;\n  formToValidate.validate(validationSettings);\n\n  // jQuery validation doesn't automatically pick up on interaction with Select2. This code listens for the event generated by Select2 when it is opened and manually calls jQuery Validation's remove method\n  $('select').on(\"select2:open\", function (e) { \n      var nameToRemove = $(this).attr('name');\n      formToValidate.removeError(nameToRemove);\n    });\n\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/_js/_custom/_signup_edit.js\n// module id = ./build/_js/_custom/_signup_edit.js\n// module chunks = main","var $ = require('jquery');\nvar filedrop = require('../_lib/filedrop');\n// Don't log FileDrop events to console\nfiledrop.logging = false;\n\nvar tipsy = require('../_lib/jquery.tipsy');\nvar cropper = require('cropper'); // https://github.com/fengyuanchen/cropper\n\nmodule.exports = function() {\n\n    $(function () {\n        'use strict'; \n\n        var uploadUrl = '/signup/photo/upload',\n            removeUrl = '/signup/photo/remove',\n            fileName = '',\n            $imgCrop = $('.crop-wrap > img'),\n            $cropZone = $('.crop-zone'),\n            zone = null,\n            savingImage = false;\n\n        function hasDraggable() {\n            return 'draggable' in document.createElement('span');\n        }\n\n        function fixHeight() {\n            setTimeout(function () {\n                var rotateHeight = $('.cropper-container').height() + 60;\n                $('.crop-here').css({ 'height': rotateHeight});\n            }, 500);\n        }\n\n        function displayError(msg) {\n            $('.error-head').html(msg);\n        }\n\n        function saveCroppedImageResponse(resp) {\n\n            if (resp.status === 'error') {\n                displayError(resp.error);\n            }\n            if (resp.status === 'success') {\n                window.location = '/signup/confirm';\n            }\n        }\n\n        function loadCropper(imageUrl) {\n            $('#zone').removeClass('fd-zone');\n            $('#zone').removeClass('filedrop');\n            $('.fd-file, .drop-meta').hide();\n            $('.crop-controls, .crop-confirm').show();\n            $imgCrop.attr('src', imageUrl).cropper({\n                zoomable: false,\n                modal: true,\n                aspectRatio: 1 / 1,\n                //done: function (data) {}\n            });\n            setTimeout(function () {\n                var aniHeight = $('.cropper-container').height();\n                $('.crop-wrap').css({ 'height': aniHeight});\n            }, 1000);\n        }\n\n        function triggerBasicCropper() {\n            var $cropper = $('#cropper_image'),\n                $crop_wrap = $('.crop-wrap');\n\n            if ($cropper.length) {\n                $crop_wrap.css({ 'opacity': 0 });\n                fileName = $('#cropper_image').attr('src').replace('/images/signup/', '');\n                $().hide();\n                $('.drop-meta').hide();\n                setTimeout(function () {\n                    $('.fd-file').hide();\n                    $crop_wrap.animate({ 'opacity': 1 }, 500);\n                }, 500);\n\n                loadCropper($cropper.attr('src'));\n            }\n        }\n\n        function doBasicUpload() {  \n            $('#basicUpload').show();\n            triggerBasicCropper();\n        }\n\n        function removeImage() {\n            $.post(removeUrl, {})\n                .done(function () {\n                    window.location.reload();\n                })\n                .fail(function () {\n                    displayError('ohh no!');\n                });\n        }\n\n        function saveImage(data, name) {\n\n            if (!savingImage) {\n                savingImage = true;\n                var postData = {\n                    'fd-file': name,\n                    'raw-file': data\n                };\n                $.post(uploadUrl, $.param(postData, true))\n                    .done(function (resp) {\n                        saveCroppedImageResponse(resp);\n                        savingImage = false;\n\n                    })\n                    .fail(function () {\n                        $cropZone.removeClass('disabled');\n                        displayError('There was an error saving the image.');\n                        savingImage = false;\n                    });\n            }\n        }\n\n        function loadFileDrop() {  \n            $('#zone').show();\n\n            // We can deal with iframe uploads using this URL:\n            var options = {\n                iframe: false\n            }; //{url: '/signup/photo/upload', callbackParam: 'fd-callback'}}\n            \n            // 'zone' is an ID but you can also give a DOM node:\n            zone = new filedrop.FileDrop('zone', options);\n            zone.event('send', function (files) {\n\n                files.each(function (file) {\n\n                    displayError('');\n\n                    var fs = Number(file.size / 1024),\n                        fileSize = Number(((fs / 1024) * 100) / 100),\n                        fileName1 = file.name,\n                        fileType = fileName1.replace(/^.*\\./, '').toLowerCase();\n\n                    if (fileType !== 'png' && fileType !== 'jpg' && fileType !== 'gif') {\n                        displayError('Error: File must be a \\'jpg\\', \\'png\\', or \\'gif\\'');\n                    } else if (fileSize > 5) {\n                        displayError('Error: Upload file must be less than 5 MB');\n                    } else {\n                        $('.fd-file').hide();\n                        $('.progress').fadeIn('fast');\n                        file.event('progress', function (current, total) {\n                            var width = current / total * 100 + '%';\n                            filedrop.byID('bar_zone').style.width = width;\n                        });\n                        file.event('done', function (xhr) {\n                            $('.progress').fadeOut('fast', function () {\n                                var resp = jQuery.parseJSON(xhr.responseText);\n                                if (typeof resp.status !== 'undefined' && resp.status === 'success') {\n\n                                    // trigger cropper\n                                    loadCropper(resp.original);\n                                    return;\n                                }\n                                if (typeof resp.status !== 'undefined' && resp.status === 'error') {\n                                    displayError('Error: ' + resp.error);\n                                     $('.fd-file').show();\n                                    return;\n                                }\n\n                                // general error message\n                                displayError('Error: File could not be uploaded');\n                                $('.fd-file').show();\n                            });\n\n                        });\n                        file.sendTo(uploadUrl);\n                    }\n                    file.event('error', function () {\n                        // need better error\n                        //alert('Error uploading ' + this.name + ': ' + xhr.status + ', ' + xhr.statusText);\n                        displayError('Error uploading ' + this.name);\n                        $('.fd-file').show();\n                    });\n\n                });\n            });\n        }\n\n        $cropZone.on('click', '[data-method]', function () {\n\n            var $this = $(this),\n                data = $this.data(),\n                id = $this.attr('id');\n\n            if ($cropZone.hasClass('disabled')) {\n                return false;\n            }\n\n            if (data.method) {\n                $imgCrop.cropper(data.method, data.option);\n                if (data.method === 'rotate') {\n                    fixHeight();\n                }\n\n            }\n\n            if (id === 'saveImage') {\n                var _top = $('.cropper-container').height() / 2;\n                $('.progress').fadeIn('fast').prepend('Saving image please wait.').css({'top':_top}).children().css({'width':'100%'});\n                $cropZone.addClass('disabled');\n                saveImage($imgCrop.cropper('getCroppedCanvas').toDataURL(), fileName);\n            }\n\n            if (id === 'removeImage') {\n                $cropZone.addClass('disabled');\n                removeImage();\n            }\n        });\n\n\n        // function resetUpload() {\n        //     $('.crop-here').css({ 'opacity': 0 });\n        //     $('input.uploaded').off();\n        //     $('input.start-over').off();\n        //     setTimeout(function () {\n        //         $('.crop-here').css({ 'width': '0%', 'height': '0'});\n        //         $('input.input-file').val('Choose Photo');\n        //         $('input.start-over').removeClass('start-over');\n        //         $('input[name=\"next\"]').removeClass('uploaded');\n        //         $('#zone').removeClass('inactive');\n        //     }, 500);\n        // }\n\n\n\n        // Tooltips\n        $('#rotateLeft').tipsy({gravity: 's'});\n        $('#rotateRight').tipsy({gravity: 's'});\n\n        // IE9\n        if ($('html').hasClass('ie9')) {\n            $('#basicUpload input[type=\"file\"]').on('change', function () {\n                $('#upload_photo').fadeIn();\n            });\n        }\n\n        triggerBasicCropper();\n\n        if (hasDraggable()) {\n            loadFileDrop();\n        } else {\n            doBasicUpload();\n        }\n\n    });\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/_js/_custom/_signup_pickphoto.js\n// module id = ./build/_js/_custom/_signup_pickphoto.js\n// module chunks = main","'use strict';\n\nvar trimHTML = function(inputHTML, maxChars) {\n\tvar regex = /<\\/?em>/;\n\tvar splitCompany = inputHTML.split(regex);\n\tvar characterCount = 0;\n\tvar insideEm = false;\n\tvar trimmedHTML = '';\n\n\tif (splitCompany[0] === '') {\n\t    insideEm = true;\n\t}\n\n\tsplitCompany.forEach(function(element, index, array) {\n\t  if (element.length === 0) {\n\t  \treturn;\n\t  }\n\t  if (characterCount < maxChars) {\n\t  \tif (insideEm) {\n\t    \ttrimmedHTML += '<em>';\n\t    }\n\t    trimmedHTML += element.substring(0, (maxChars - characterCount));\n\t    if (insideEm) {\n\t    \ttrimmedHTML += '</em>';\n\t    }\n\t    insideEm = !insideEm;\n\t    characterCount += element.length;\n\t    if (characterCount > maxChars) {\n\t    \ttrimmedHTML += '';\n\t    }\n\t  }\n\t});\n\n\treturn trimmedHTML;\n};\n\nmodule.exports = trimHTML;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/_js/_custom/_trimHTML.js\n// module id = ./build/_js/_custom/_trimHTML.js\n// module chunks = main","var $ = require('jquery');\n\nmodule.exports = function(){\n\n\t// Don't try running magnificPopup if there are no videos on the page\n\tvar videos = $('.play').length > 0;\n\n\tif (videos) {\n\t\t$('.play').magnificPopup({\n\t\t\ttype: 'iframe',\n\t\t\tiframe: {\n\t\t\t\tpatterns: {\n\t\t\t\t    youtube: {\n\t\t\t\t      index: 'youtube.com/', // String that detects type of video (in this case YouTube). Simply via url.indexOf(index).\n\n\t\t\t\t      id: 'v=', // String that splits URL in a two parts, second part should be %id%\n\t\t\t\t      // Or null - full URL will be returned\n\t\t\t\t      // Or a function that should return %id%, for example:\n\t\t\t\t      // id: function(url) { return 'parsed id'; }\n\n\t\t\t\t      src: '//www.youtube.com/embed/%id%?autoplay=1&rel=0&showinfo=0' // URL that will be set as a source for iframe.\n\t\t\t\t    }\n\t\t\t\t},\n\t\t\t\tsrcAction: 'iframe_src'\n\t\t\t}\n\t\t});\n\t}\n\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/_js/_custom/_video_lightbox.js\n// module id = ./build/_js/_custom/_video_lightbox.js\n// module chunks = main","var $ = require('jquery');\n\n$(function() {\n\t\n\trequire('./_nav_mobile.js')();\n\n\trequire('./_searchbox.js')();\n\n\tvar magnific = require('magnific-popup');\n\n\trequire('./_video_lightbox.js')();\n\n\t// Specifically for the signup edit page\n\tvar onSignupEdit = $(\"form[name='signup_edit']\").length > 0;\n\tif (onSignupEdit) {\n\t\trequire('./_signup_edit.js')();\n\t}\n\n\t// Specifically for the signup pickphoto page\n\tvar onSignupPickphoto = $('#zone.signup-info').length > 0;\n\tif (onSignupPickphoto) {\n\t\trequire('./_signup_pickphoto.js')();\n\t}\n\n});\n\nglobal.changeLanguage = require('./_changeLanguage.js');\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/_js/_custom/main.js\n// module id = ./build/_js/_custom/main.js\n// module chunks = main","/*!\n  FileDrop Revamped - HTML5 & legacy file upload\n  in public domain  | http://filedropjs.org\n  by Proger_XP      | http://proger.me\n\n  Supports IE 6+, FF 3.6+, Chrome 7+, Safari 5+, Opera 11+.\n  Fork & report problems at https://github.com/ProgerXP/FileDrop\n*/\n\n;(function (root, init) {\n  if (typeof define == 'function' && define.amd) {\n    define(['exports'], function (exports) { init(root, exports) })\n  } else if (typeof exports !== 'undefined') {\n    init(root, exports)\n  } else {\n    init(root, root.fd = root.fd || {})\n  }\n})(this, function (root, global) {\n  /***\n    Global Utility Functions\n   ***/\n\n  // Produces random ID (non necessary unique to anything) with given prefix\n  // or 'fd' if it's not passed.\n  //\n  //? randomID()        //=> 'fd_9854'\n  //? randomID('foo')   //=> 'foo_1582'\n  global.randomID = function (prefix) {\n    return (prefix || 'fd') + '_' + (Math.random() * 10000).toFixed()\n  }\n\n  // Generates random DOM node ID that's unique to this document with given prefix\n  // or 'fd' if it's not passed.\n  //\n  //? randomID()        //=> 'fd_9854'\n  //? randomID('foo')   //=> 'foo_1582'\n  global.uniqueID = function (prefix) {\n    do { var id = global.randomID(prefix) } while (global.byID(id))\n    return id\n  }\n\n  // Retrieves DOM element by its ID attribute or returns id itself if it's\n  // an element.\n  //\n  //? byID('foo')       //=> <p id=\"foo\">\n  //? byID('abracadabra!')  //=> null\n  //? byID({foo: 1})    //=> null\n  //? byID(null)        //=> null\n  //\n  //? byID(document.createElement('p'))\n  //    //=> <p>\n  global.byID = function (id) {\n    return global.isTag(id) ? id : document.getElementById(id)\n  }\n\n  // Checks if given object is a proper DOM node. If tag is passed also\n  // checks if that DOM node is of the same tag (case-insensitive).\n  // Returns true or false.\n  //\n  //? isTag('foo')        //=> false\n  //? isTag({foo: 1})     //=> false\n  //? isTag(null)         //=> false\n  //? isTag(window)       //=> false\n  //? isTag(document.body)          //=> true\n  //? isTag(document.body, 'BoDy')  //=> true\n  //? isTag(document.body, 'head')  //=> false\n  //\n  //? var el = byID('foo')    //=> <p id=\"foo\">\n  //  isTag(el, 'p')    //=> true\n  //  isTag(el, 'P')    //=> true\n  //  isTag(el, 'div')  //=> false\n  //  isTag(el, 'DiV')  //=> false\n  //\n  //? isTag(document.createElement('p'))\n  //    //=> true\n  //\n  //? isTag(document.createElement('p'), 'div')\n  //    //=> false\n  global.isTag = function (element, tag) {\n    return typeof element == 'object' && element && element.nodeType == 1 &&\n           ( !tag || element.tagName.toUpperCase() == tag.toUpperCase() )\n  }\n\n  // Creates new XMLHttpRequest object. Falls back for ActiveX for IE 6.\n  // Throws an exception if couldn't succeed (this shouldn't happen these days).\n  //\n  //? newXHR()    //=> XMLHttpRequest\n  global.newXHR = function () {\n    try {\n      return new XMLHttpRequest\n    } catch (e) {\n      // IE 6.\n      var activex = ['MSXML2.XMLHTTP.6.0', 'MSXML2.XMLHTTP.5.0',\n                     'MSXML2.XMLHTTP.4.0', 'MSXML2.XMLHTTP.3.0',\n                     'MSXML2.XMLHTTP', 'Microsoft.XMLHTTP']\n\n      for (var i = 0; i < activex.length; i++) {\n        try {\n          return new ActiveXObject(activex[i])\n        } catch (e) {}\n      }\n    }\n\n    throw 'Cannot create XMLHttpRequest.'\n  }\n\n  // Checks if given value is a native Array object. Note that jQuery and\n  // other pseudo-arrays are reported as false.\n  //\n  //? isArray([])       //=> true\n  //? isArray([])       //=> true\n  //? isArray(new Array)    //=> true\n  //? isArray({})       //=> false\n  //? isArray('foo')    //=> false\n  //? isArray(null)     //=> false\n  //? isArray($('a'))   //=> false\n  //? isArray(arguments)    //=> false\n  //? isArray($('a').toArray())   //=> true\n  global.isArray = function (value) {\n    return Object.prototype.toString.call(value) === '[object Array]'\n  }\n\n  // Converts passed value into an array. If value is already an array its\n  // copy is returned (so changing value later doesn't affect the returned\n  // clone).\n  //\n  // skipFirst, if given, omits specified number of elements from the start.\n  // Useful for turning arguments into arrays.\n  //\n  //? toArray([])           //=> [] (copy)\n  //? toArray(['foo'])      //=> ['foo'] (copy)\n  //? toArray(['foo'], 1)   //=> []\n  //? toArray(['foo'], 999)   //=> []\n  //? toArray('foo')        //=> ['foo']\n  //? toArray('foo', 1)     //=> []\n  //? toArray('foo', 999)   //=> []\n  //? toArray({foo: 1})     //=> [{foo: 1}]\n  //? toArray({foo: 1}, 1)  //=> []\n  //? toArray(null)         //=> []\n  //? toArray(new Array('foo', 'bar'))      => ['foo', 'bar'] (copy)\n  //? toArray(new Array('foo', 'bar'), 1)   => ['bar']\n  //? toArray(new Array('foo', 'bar'), 2)   => []\n  //\n  //? function showMessage(func, line1, line2, ...) {\n  //    window[func](toArray(arguments, 1).join('\\n'))\n  //  }\n  //\n  //  showMessage('confirm', 'It\\'s first line.', 'Second line.')\n  //    //=> confirm('It\\'s first line.\\nSecond line.')\n  //\n  //  showMessage('alert', 'First', 'Second')\n  //    //=> alert('First\\nSecond')\n  global.toArray = function (value, skipFirst) {\n    if (value === null || typeof value == 'undefined') {\n      return []\n    } else if (!global.isArray(value) && (typeof value != 'object' || !('callee' in value))) {\n      // Made sure it's not 'arguments'.\n      value = [value]\n    }\n\n    return Array.prototype.slice.call(value, skipFirst || 0)\n  }\n\n  // Adds an event listener to a DOM element. Works for old IE as well\n  // as modern W3C-compliant browsers. type is short event name (without\n  // 'on' prefix). Does nothing if any parameter is invalid.\n  // Returns the DOM element itself or whatever was given as this argument.\n  //\n  //? addEvent(byID('p'), 'mousemove', function () { alert('Whoosh!') })\n  //? addEvent(window, 'load', function () { alert('Done loading.') })\n  //\n  //? addEvent(null, 'blur', function () { })   // nothing.\n  //? addEvent(window, null, function () { })   // nothing.\n  //? addEvent(window, 'blur', null)            // nothing.\n  //\n  //? addEvent(window, 'nonstandard', function () { })\n  //      // works.\n  global.addEvent = function (element, type, callback) {\n    if (element && type && callback) {\n      if (element.attachEvent) {\n        element['e' + type + callback] = callback\n        element[type + callback] = function() {\n          element['e' + type + callback](window.event)\n        }\n        element.attachEvent('on' + type, element[type + callback])\n      } else {\n        element.addEventListener(type, callback, false)\n      }\n    }\n\n    return element\n  }\n\n  // Stops propagation and default browser action of an event.\n  // Works for old IE and modern W3C-compliant browsers.\n  //\n  //? byID('p').onmousemove = function (e) { stopEvent(e) }\n  global.stopEvent = function (event) {\n    event.cancelBubble = true\n    event.returnValue = false\n    event.stopPropagation && event.stopPropagation()\n    event.preventDefault && event.preventDefault()\n    return event\n  }\n\n  // Adds or removes HTML class of a DOM element. Keeps old classes.\n  // element can be either ID string or a DOM node.\n  // Returns the element (even if ID was passed) or null if passed value\n  // is neither a string nor a DOM node or if there's no element with\n  // this ID.\n  //\n  //? setClass(byID('p'), 'foo')      //=> <p class=\"... foo\">\n  //? setClass(byID('p'), 'foo', true)  // equivalent to above\n  //? setClass(byID('p'), 'foo', false)   //=> <p class=\"...\"> (no 'foo')\n  //? setClass('anID', 'foo')         //=> <a id=\"anID\" class=\"... foo\">\n  //? setClass('anID', 'foo', false)  //=> <a> without 'foo' class\n  //?\n  global.setClass = function (element, className, append) {\n    if ((element = global.byID(element)) && className != null) {\n      if (typeof append != 'undefined' && !append) {\n        element.className = element.className.replace(global.classRegExp(className), ' ')\n      } else if (!global.hasClass(element, className)) {\n        element.className += ' ' + className\n      }\n    }\n\n    return element\n  }\n\n  // Determines if given element has class attribute containing the className\n  // word. Accepts DOM element or ID string. Returns true or false.\n  // Examples below refer to <p class=\"cls1 cls2\" id=\"anID\">\n  //\n  //? hasClass(byID('anID'), 'cls1')  //=> true\n  //? hasClass('anID', 'cls1')        // equivalent to above\n  //? hasClass('anID', 'cls')         //=> false\n  //? hasClass('anID', 'foo')         //=> false\n  //? hasClass('abra!', 'cls1')       //=> false (no such element)\n  //? hasClass('anID', '')            //=> false (empty class)\n  //? hasClass('anID', null)          //=> false\n  //? hasClass('anID', {foo: 1})      //=> false (not a string)\n  //? hasClass(null, 'foo')           //=> false\n  //? hasClass({foo: 1}, 'foo')       //=> false (not a DOM node)\n  //? hasClass(window, foo)           //=> false\n  global.hasClass = function (element, className) {\n    return global.classRegExp(className).test( (global.byID(element) || {}).className )\n  }\n\n  // Returns a regular expression suitable for testing of HTML class-like\n  // strings to find out if it contains a given word or not (it's not as\n  // simple as a substring match: 'some class' contains words 'some' and\n  // 'class' but not 'som' and 'cl' or 'ame' and 'ass').\n  //\n  // Shouldn't be used for testing multiple words (space-separated) - will\n  // only match if they are in the same position in testing string which\n  // doesn't have to be true: classRegExp('some class') would match\n  // 'this is some class' but won't match 'some of the class'.\n  //\n  // Returns a never matching regexp for bad parameter like object or an\n  // empty string.\n  //\n  //? classRegExp('foo')        //=> RegExp /(^|\\s+)foo(\\s+|$)/ig\n  //? classRegExp('x').test('x y z')  //=> true\n  //? classRegExp('foo bar')    // works but not advised\n  //? classRegExp({foo: 1})     //=> RegExp /$o_O/\n  //? classRegExp(null)         // the same as above\n  //? classRegExp(window)       // the same as above\n  //? classRegExp(null).test('foo')  //=> false (always)\n  global.classRegExp = function (className) {\n    if (className == '' || typeof className == 'object') {\n      return /$o_O/  // never matches.\n    } else {\n      return new RegExp('(^|\\\\s+)' + className + '(\\\\s+|$)', 'gi')\n    }\n  }\n\n  // Copies properties from object base to object child. If overwrite\n  // is passed and true then base's properties will replace those\n  // in child even if child has its own properties of that name.\n  // Note that it doesn't clone child, it's edited in-place.\n  // Also note that defined properties that are 'undefined' on child are\n  // replaced by base's even if overwrite is false (see examples).\n  //\n  // Returns the modified child (first argument).\n  //\n  //? extend({common: 1, child: false}, {common: 'foo', base: true})\n  //    //=> {common: 1, child: false, base: true}\n  //\n  //? extend({common: 1, child: false}, {common: 'foo', base: true}, true)\n  //    //=> {common: 'foo', child: false, base: true}\n  //\n  //? extend({x: undefined}, {x: 1})    //=> {x: 1}\n  //? extend({x: null}, {x: 1})         //=> {x: null}\n  //\n  //? var child = {y: 1}\n  //  extend(child, {x: 1}) === child   //=> true (same object)\n  //  console.dir(child)    //=> {y: 1, x: 1}\n  global.extend = function (child, base, overwrite) {\n    child = child || {}\n    base = base || {}\n\n    for (var prop in base) {\n      if (overwrite || typeof child[prop] == 'undefined') {\n        child[prop] = base[prop]\n      }\n    }\n\n    return child\n  }\n\n  /***\n    Event Manipulation Functions\n   ***/\n\n  // Calls every handler of the passed callback list with given arguments\n  // and in context of obj or 'this' if it's omitted.\n  //\n  // list can be undefined, a single function or an array (non-function members\n  // are skipped). Throws exception if list is something else.\n  // args is converted to array with toArray() so it can be a single value,\n  // an arguments object or something else - see that function for info.\n  //\n  // Returns result of the last called function. If any function returns\n  // a non-null and non-undefined value all following handlers are skipped.\n  //\n  //? callAll(function (a) { return a + 'foo' }, 'arg1')\n  //    //=> 'arg1foo'\n  //? callAll([ function () { } ], ['arg1'])\n  //    // equivalent to above\n  //\n  //? var list = [function (a) { return a[0] == 'a' ? a + 'foo' : null },\n  //              function (a) { alert(a) }]\n  //  callAll(list, 'arg1')   //=> 'arg1foo' (first handler)\n  //  callAll(list, 'foo')    //=> alert('foo') (second handler)\n  //\n  //? callAll(function () { alert(this.x) }, [], {x: 'foo'})\n  //    //=> alert('foo')\n  //\n  //? callAll(function () { alert(this.x) }).call({x: 'foo'})\n  //    // equivalent to above\n  //\n  //? window.onload = function () {\n  //    callAll([...], arguments, window)\n  //      // equivalent to callAll([...], toArray(arguments), window)\n  //  }\n  global.callAll = function (list, args, obj) {\n    var res\n    args = global.toArray(args)\n    typeof list == 'function' && (list = [list])\n\n    if (global.isArray(list)) {\n      for (var i = 0; i < list.length; i++) {\n        if (typeof list[i] == 'function') {\n          res = list[i].apply(obj || this, args)\n          if (res != null) { break }\n        }\n      }\n    } else if (list) {\n      throw 'FileDrop event list must be either an Array, Function, undefined or' +\n            ' null but ' + (typeof list) + ' was given.'\n    }\n\n    return res\n  }\n\n  // Calls event handlers attached on given FileDrop object to passed\n  // event name with arguments. Hands off most work to callAll().\n  // obj is an object with the 'events' property (object with keys = event\n  // names and values = arrays of functions).\n  //\n  // Before calling handlers of obj looks if global configuration has\n  // a preview handler specified - if it does then calls that handler\n  // and if it returns non-null and non-undefined value doesn't call\n  // obj's handlers but returns that value immediately. After the global\n  // preview function it checks for object-wise preview - its 'any' event\n  // handlers which are treated likewise.\n  // Preview functions are called with event name pushed in front of\n  // the other event args.\n  //\n  //? var obj = {events: { foo: [function (a) { alert(a); return true }] }}\n  //  callAllOfObject(obj, 'foo', 'arg1')   //=> true after alert('arg1')\n  //\n  //? window.fd.onObjectCall = function (e) { alert(e + ': tee hee'); return false }\n  //  var obj = ...   // as above\n  //  callAllOfObject(obj, 'foo', 'arg1')   //=> false after alert('foo: tee hee')\n  //\n  //? var obj = {events: { any: [function (e) { return false }] }}\n  //  callAllOfObject(obj, 'anyevent')\n  //    // because of the object-wise preview handler that returns false\n  //    // any event we call will return false bypassing its actual handlers.\n  global.callAllOfObject = function (obj, event, args) {\n    if (global.logging && global.hasConsole) {\n      var handlers = obj.events[event] ? obj.events[event].length || 0 : 0\n      console.info('FileDrop ' + event + ' event (' + handlers + ') args:')\n      console.dir([args])\n    }\n\n    var preview = [global.onObjectCall].concat(obj.events.any)\n    var res = global.callAll(preview, [event].concat(global.toArray(args)), obj)\n    return res != null ? res : global.callAll(obj.events[event], args, obj)\n  }\n\n  // Appends event listeners to given object with 'events' property according\n  // to passed parameters. See DropHandle.event() for details.\n  // 'this' must be set to the object which events are updated.\n  global.appendEventsToObject = function (events, funcs) {\n    if (global.addEventsToObject(this, false, arguments)) {\n      return this\n    }\n\n    switch (arguments.length) {\n    case 0:\n      return global.extend({}, this.events)\n\n    case 1:\n      if (events === null) {\n        this.events = {}\n        return this\n      } else if (global.isArray(events)) {\n        var res = {}\n\n        for (var i = 0; i < events.length; i++) {\n          res[events[i]] = global.toArray(this.events[events[i]])\n        }\n\n        return res\n      } else if (typeof events == 'function') {\n        return global.funcNS(events)\n      } else if (typeof events == 'string') {\n        return global.toArray(this.events[events])\n      }\n\n    case 2:\n      events = global.toArray(events)\n\n      if (funcs === null) {\n        for (var i = 0; i < events.length; i++) {\n          var ns = global.splitNS(events[i])\n\n          if (!ns[0]) {\n            for (var event in this.events) {\n              arguments.callee.call(this, [event + ':' + ns[1]], null)\n            }\n          } else if (!ns[1]) {\n            this.events[ns[0]] = []\n          } else if (this.events[ns[0]]) {\n            for (var fi = this.events[ns[0]].length - 1; fi >= 0; fi--) {\n              if (global.funcNS( this.events[ns[0]][fi] ) == ns[1]) {\n                this.events[ns[0]].splice(fi, 1)\n              }\n            }\n          }\n        }\n\n        return this\n      }\n    }\n\n    throw 'Bad parameters for FileDrop event().'\n  }\n\n  // Prepends event listeners to given object with 'events' property according\n  // to passed parameters. See DropHandle.event() for details.\n  // 'this' must be set to the object which events are updated.\n  global.previewToObject = function (events, funcs) {\n    if (global.addEventsToObject(this, true, arguments)) {\n      return this\n    } else {\n      throw 'Bad parameters for FileDrop preview().'\n    }\n  }\n\n  // Adds event listeners to given object with 'events' property according\n  // to passed parameters. See DropHandle.event() for details.\n  // Returns nothing if couldn't handle given parameter combination.\n  global.addEventsToObject = function (obj, prepend, args) {\n    var events = args[0]\n    var funcs = args[1]\n\n    switch (args.length) {\n    case 1:\n      if (events && typeof events == 'object' && !global.isArray(events)) {\n        for (var event in events) {\n          arguments.callee(obj, prepend, [event, events[event]])\n        }\n\n        return true\n      }\n\n    case 2:\n      if (typeof funcs == 'function' || global.isArray(funcs)) {\n        events = global.toArray(events)\n        funcs = global.toArray(funcs)\n        var pusher = prepend ? 'unshift' : 'push'\n\n        for (var i = 0; i < events.length; i++) {\n          var ns = global.splitNS(events[i])\n          for (var fi = 0; fi < funcs.length; fi++) {\n            global.funcNS(funcs[fi], ns[1])\n          }\n\n          obj.events[ns[0]] = obj.events[ns[0]] || []\n          obj.events[ns[0]][pusher].apply(obj.events[ns[0]], funcs)\n        }\n\n        return true\n      }\n    }\n  }\n\n  // Adds namespace identifier to a Function object. Used when labeling event\n  // listeners in DropHandle.event(). If given just one parameter reads\n  // attached namespace, if present.\n  //\n  //? funcNS(function () { }, 'foo')\n  //? funcNS(function () { })   //=> 'foo'\n  global.funcNS = function (func, ns) {\n    if (typeof func != 'function') {\n      return func\n    } else if (arguments.length == 1) {\n      return (func[global.nsProp] || '').toString()\n    } else {\n      func[global.nsProp] = (ns || '').toString()\n      return func\n    }\n  }\n\n  // Extracts namespace identifier from the string. Uses jQuery notation:\n  // 'event:namespace'. Both parts can be empty. If colon is omitted returns\n  // '' instead of namespace.\n  // Returns array with two items - event name (or other prefix) and namespace.\n  //\n  //? splitNS('')       //=> ['', '']\n  //? splitNS(null)     // identical to above\n  //? splitNS(':')      // identical to above\n  //? splitNS('x:')     //=> ['x', '']\n  //? splitNS(':y')     //=> ['', 'y']\n  //? splitNS('x:y')    //=> ['x', 'y']\n  //? splitNS('x:y:z')  //=> ['x', 'y:z']\n  global.splitNS = function (str) {\n    return (str || '').match(/^([^:]*):?(.*)$/).slice(1)\n  }\n\n  /***\n    Global Configuration\n   ***/\n\n  global.extend(global, {\n    // If set all event calls will be logged to console if one is present.\n    logging: true,\n\n    // Indicates if console.log and console.dir are available for usage.\n    hasConsole: 'console' in window && console.log && console.dir,\n\n    // If set must be a function that's called on every event being fired.\n    // See how it works in callAllOfObject().\n    onObjectCall: null,\n\n    // All DropHandle objects that were instantinated on this page.\n    // Note that these are not FileDrop instances as not all DropHandles\n    // might be part of FileDrops. Use DropHandle.filedrop property.\n    all: [],\n\n    // Tests for IE versions, must be true for 6-7/9 and below and\n    // false for any other version/browser.\n    // IE 6 on XP SP 3 gives JScript version 5.7 while IE 8 - 5.8.\n    // IE 9 on Win7 gives 9.\n    isIE6: /*@cc_on/*@if(@_jscript_version<=5.7)true@else@*/false/*@end@*/,\n    isIE9: /*@cc_on/*@if(@_jscript_version<=9)true@else@*/false/*@end@*/,\n\n    // Test for Google Chrome. This isn't used to determine available\n    // File API but only to work around certain event glitches.\n    isChrome: (navigator.vendor || '').indexOf('Google') != -1,\n\n    // Name of Function object property where event namespace is stored.\n    // See funcNS(), splitNS(), DropHandle.event().\n    nsProp: '_fdns'\n  })\n\n  /***\n    Basic Drop Handle Class\n   ***\n\n    Has some file upload functionality (mostly legacy <iframe>) but is mainly\n    used to handle all drag & drop operations in a cross-browser way.\n    You can use it as a basis for your own component.\n    Main FileDrop class extends it and listens for produced drop events.\n   ***/\n\n  // Parameters:\n  // * zone - ID or DOM element which accepts drag & drop. This is often a\n  //          <fieldset>. If such element doesn't exist an exception is thrown\n  //          when trying to create the class. DropHandle will add some children\n  //          to this element to facilitate external drop events. Once created this\n  //          element is accessible as (new DropHandle(...)).el property.\n  //\n  // * opt -  object, key/value pairs of options. See the code for the list of\n  //          keys and their purpose. Can be omitted or empty to use defaults.\n  //          Current option values are accessible as the opt property.\n  //\n  //? new fd.DropHandle('anID')\n  //? new fd.DropHandle(document.body, {zoneClass: 'with-filedrop'})\n  global.DropHandle = function (zone, opt) {\n    // Persistent 'this' instance reference.\n    var self = this\n\n    self.el = zone = global.byID(zone)\n    if (!zone) { throw 'Cannot locate DOM node given to new FileDrop class.' }\n\n    /***\n      DropHandle Options\n     ***\n\n      Changing these on runtime after the class was created doesn't affect\n      anything so make sure to pass desired values to the constructor.\n     ***/\n\n    self.opt = {\n      // The zone element gets this HTML class appended immediately after\n      // the DropHandle object is created.\n      zoneClass: 'fd-zone',\n\n      // DropHandle creates a hidden form and <input type=\"file\">. The input\n      // is completely transparent so the contents underneath is visible\n      // but at the same time a dropped object lands on the input triggering\n      // its DOM events. This option specifies the class name assigned\n      // to this input.\n      inputClass: 'fd-file',\n\n      // Options for fallback upload via <iframe> for browsers lacking\n      // native drag & drop support - IE and others.\n      iframe: {\n        // URL to send uploaded file to. It's a regular form upload with\n        // enctype=\"multipart/form-data\" so if you're using PHP it's handled\n        // with $_FILES as usual. The URL can have query string. It will have\n        // the 'fd-callback' parameter appended containing the name of\n        // function your server script must call when generating JavaScript\n        // output - if it does the upload succeeds, otherwise it \"fails\".\n        // Calling external function is the only reliable way to know that\n        // we've uploaded the file right. Plus you can pass any data to\n        // that function as its parameters.\n        // For the practical server-side example see included upload.php.\n        //\n        // If unset <iframe> upload is disabled so only drag & drop-aware\n        // browsers (Firefox and Crhome-based) will handle this drop zone.\n        url: '',\n\n        // Name of GET input variable containing the name of the global window\n        // callback function to be called by the server in the generated\n        // page after uploading a file via <iframe>.\n        callbackParam: 'fd-callback',\n\n        // Name of POST file input variable (<input type=\"file\" name=\"$nameParam\">).\n        // Maps to $_FILE[] in PHP.\n        fileParam: 'fd-file'\n      },\n\n      // Contains DOM nodes of fallback upload via <iframe>. If null necessary\n      // elements for <iframe> upload will be created automatically.\n      //\n      // If this is false (boolean) then DropHandle creates no input at all.\n      // This is useful if you need pure drag & drop upload that works in\n      // Firefox and Chrome-based browsers, no <iframe> uploads for IE 9-,\n      // Opera, Safari and others. This creates \"perfect\" drop zone that\n      // doesn't prevent user interaction with underlying components so the\n      // zone can be extended onto large document area or the entire window.\n      input: null,\n\n      // After construction opt.input's structure is as follows: {\n        // If unset DropHandle will first recursively look for <input type=\"file\">\n        // among the children of the zone element and having opt.inputClass among\n        // its HTML classes. If found no new element will be created. This makes it\n        // safe to create multiple DropHandle objects for the same zone handle (not\n        // tested though).\n        //\n        // If unset but no suitable node would be found (see above) then DropHandle\n        // creates the input automatically along with the form which is usually\n        // exactly what you need.\n        //file: null,\n\n        // This value is set to match the parent form of <input type=\"file\">.\n        // Changing it isn't recommended.\n        //form: null\n      //},\n\n      // If using <input type=\"file\"> (legacy <iframe> upload, see input option)\n      // some browsers including IE 6-10 and Opera will keep last selected file\n      // in the input after upload which will prevent the user from uploading\n      // the same file twice in a row (this doesn't apply to drag & drop uploads).\n      // When enabled, this option will let FileDrop recreate the file input\n      // thus resetting file selection. This is safe in most cases but if your\n      // project does some extra customization on opt.input.file this might erase\n      // them and attached events unless you are doing that in inputSetup event.\n      // When disabled, input will be cleared in Firefox/Chrome thus preventing\n      // user from reuploading the same file one after another in other browsers.\n      recreateInput: true,\n\n      // Chrome, unlike Firefox, dispatches drag events for the entire document\n      // rather than the input element. For Chrome this option is always true.\n      // If you want the same behaviout in Firefox then you can manually set\n      // it to true to let all of your drop zones receive drag events as soon\n      // as they enter the browser's window but not those zones' boundaries.\n      // Note that drop events (when user releases the mouse button) are always\n      // dispatched to drop zone under the mouse pointer, if there's any.\n      // This only makes drag (hover) events fire for all zones regardless of\n      // the pointer position.\n      fullDocDragDetect: false,\n\n      // Initial state of the multiple selection in browser's Open File dialog\n      // appearing when clickin on the drop zone (<input type=\"file\">).\n      // After this object was created toggle this setting with this.multiple().\n      multiple: false,\n\n      // Cursor displayed when a user drags an object over this drop zone.\n      // Working values depend on the browser. 'copy' and 'none' work for\n      // Firefox and Chrome; the latter also supports 'move', 'link'.\n      // Setting to 'none' will cause \"No Drop\" cursor and will cause drop\n      // operation to be ignored on this drop zone (on-drop event not fired).\n      // This option can be set on runtime.\n      dropEffect: 'copy'\n    }\n\n    // Keeping track of all DropHandle instances.\n    global.all.push(self)\n    // If this DropHandle was created by a FileDrop instance this property\n    // will point to that instance.\n    self.filedrop = null\n\n    var iframe = self.opt.iframe\n    global.extend(self.opt, opt, true)\n    // In case user options contained {iframe} without full set of properties.\n    global.extend(self.opt.iframe, iframe)\n\n    // Chrome dispatches drop events document-wise rather than zone-wise.\n    // If unset we won't receive any reaction on individual elements.\n    global.isChrome && (self.opt.fullDocDragDetect = true)\n\n    /***\n      DropHandle Events\n     ***\n\n      Attach new listeners with (new DropHandle).event('dragEnter', function ...).\n      As a low-level alternative you can change/move items around this array\n      directly but it's not future-proof.\n\n      Note that all callbacks are executed with 'this' pointing to this\n      object so it's easy to know which DropHandle has caused that particular\n      event. For example:\n\n        var dh = new DropHandle('myzone')\n        dh.event('dragEnter', function () {\n          alert('Entering the ' + this.el.id + ' drop zone!')\n        })\n     ***/\n\n    self.events = {\n      // Object-wise event preview handlers. They get executed on any event\n      // of this object (like dragEnter) and if any of them returns a non-null\n      // and non-undefined value actual event handlers are not called and\n      // that value is returned. These callbacks receive the same arguments\n      // as the target event plus that event's name in front.\n      // See callAllOfObject() for more details.\n      any: [],\n\n      // Occurs when a user drags something across this zone element (Firefox)\n      // or across the entire browser window (Chrome or if opt.fullDocDragDetect\n      // is set).\n      //\n      // function (eventObject)\n      dragEnter: [],\n\n      // Occurs when user drags the object away from the zone element (Firefox)\n      // or outside of the window (Chrome or opt.fullDocDragDetect).\n      //\n      // function (eventObject)\n      dragLeave: [],\n\n      // Occurs periodically after dragEnter while user is still dragging an\n      // object inside the drop zone. If not using DropHandle be aware that\n      // Chrome requires a listener attached to ondragover or it will discard\n      // the drop operation. DropHandle takes care of this for you.\n      //\n      // function (eventObject)\n      dragOver: [],\n\n      // The following 2 events are somewhat superficient and not really useful\n      // or working but they're still listened to in case you need to hook them.\n      //\n      // function (eventObject)\n      dragEnd: [],\n      dragExit: [],\n\n      // Occurs when a file has been dropped on the zone element or when a file\n      // was selected in/dropped onto fallback <form> to trigger <iframe> upload.\n      // The former occurs in Firefox and Chrome-based browsers that support\n      // drag & drop natively. The latter occurs in Opera and others that only\n      // work with regular form file uploads.\n      //\n      // function (eventObject)\n      //    - is passed native browser-dependent event object.\n      upload: [],\n\n      // Occurs when another DropHandle object on the page initiates upload\n      // event. Can be used to reset some visual state of all drop zones but\n      // the one that's actually got the file landed.\n      //\n      // function (DropHandle)\n      //    - is passed another DropHandle object that has initiated the\n      //      upload event.\n      uploadElsewhere: [],\n\n      // Occurs after <input type=\"file\"> used to accept file drops was created\n      // or found (see the description of the 'input' option). Here it's used to\n      // assign it some HTML classes. You can do similar setup.\n      // Is also fired after recreating file input on upload if opt.recreateInput\n      // is set - in this case is passed old <input type=\"file\"> (that was cloned).\n      //\n      // function ({ file: DOM_Input, form: DOM_Form }, oldFileInput)\n      //    - is passed an object with the same keys as 'input' option -\n      //      the DOM element of the <input type=\"file\"> and its parent\n      //      <form> DOM element.\n      inputSetup: [],\n\n      // Occurs when a fallback <iframe> element was created. Can be used for\n      // setup actions similar to inputSetup.\n      //\n      // function (DOM_Iframe)\n      //    - is passed the DOM element of the new <iframe>.\n      iframeSetup: [],\n\n      // Occurs when a file was successfully uploaded to the server, i.e.\n      // when the form was submitted and the server has returned the output\n      // that calls 'fd-callback' function to indicate successful (or unsuccessful)\n      // upload to the client page. See the 'iframe' option and included upload.php\n      // for samples and explanations.\n      //\n      // function (response)\n      //    - is passed the same data as given by the server-generated JavaScript\n      //      to the global 'fd-callback'. Note that it's the first argument to\n      //      that function, all others are ignored.\n      //      This object will mimic some of XMLHttpRequest properties so you\n      //      can use single handler for both XHR and <iframe> uploads - see\n      //      sendViaIFrame() for details.\n      iframeDone: []\n    }\n\n    // Old FireDrop compatibility. Now deprecated.\n    self.on = self.events\n    self.zone = self.el\n\n    /***\n      DropHandle Methods\n     ***/\n\n    // Prepares target DOM element for drag & drop and <iframe> uploads by\n    // adding more child nodes and listening to appropriate events.\n    // Usually you don't need to call this function since it's automatically\n    // called for the zone element (given to the constructor).\n    //\n    //? hook(byID('myzone'))\n    self.hook = function (zoneNode) {\n      // If <input type=\"file\"> support was turned off then we're not aiming\n      // for the support of uploads without File API, i.e. via <iframe> for\n      // all but Firefox and Chrome. If such we're not creating the form and\n      // other supportive elements.\n      if (self.opt.input != false) {\n        self.opt.input = self.opt.input || self.prepareInput(zoneNode)\n        self.opt.input && global.callAllOfObject(self, 'inputSetup', self.opt.input)\n      }\n\n      self.hookDragOn(zoneNode)\n      self.hookDropOn(zoneNode)\n    }\n\n    // Attaches listeners for drag events - when an object is moved in or out\n    // the scope of the zone element (or document for Chrome). This provides\n    // common layer for various browser-specific ways to utilize drag* events.\n    // Once a suitable event occurs DropHandle's own event callbacks are invoked.\n    self.hookDragOn = function (zoneNode) {\n      // With dragenter we detect when user moves object over our zone or\n      // document window to display some feedback.\n      //\n      // With dragleave we do the opposite and restore previous component state\n      // when an object is being moved away or drag & drop is cancelled.\n\n      if (self.opt.fullDocDragDetect) {\n        self.delegate(document.body, 'dragEnter')\n\n        global.addEvent(document, 'dragleave', function (e) {\n          // Chrome (at least in earlier versions) fires dragleave randomly,\n          // this is used to normalize it to just one real occurrence.\n          if ((e.clientX == 0 && e.clientY == 0) || global.isTag(e.relatedTarget, 'html')) {\n            global.stopEvent(e)\n            global.callAllOfObject(self, 'dragLeave', e)\n          }\n        })\n      } else {\n        self.delegate(zoneNode, 'dragEnter')\n        self.delegate(zoneNode, 'dragLeave')\n      }\n\n      self.delegate(zoneNode, 'dragOver')\n      self.delegate(zoneNode, 'dragEnd')    // doesn't work anywhere; unused by FileDrop.\n      self.delegate(zoneNode, 'dragExit')   // works in Firefox; unused by FileDrop.\n    }\n\n    // Attaches listeners to drop events. Just like hookDragOn provides\n    // common browser-independent ground by normalizing occurred events\n    // and calling DropHandle's own event handlers.\n    self.hookDropOn = function (zoneNode) {\n      // IE 6-9 fire 'drop' event if you drop a file onto a file input. However,\n      // if the form is submitted after this event IE will send empty POST body\n      // instead of the actual file data. So handling of this event is disabled here\n      // although technically it could've worked since IE 6 if not for that bug (?).\n      //\n      // Firefox and Chrome-based browsers are the only ones supporting this\n      // event which we use to read dropped file data in the FileDrop class.\n      global.isIE9 || self.delegate(zoneNode, 'drop', 'upload')\n    }\n\n    // Listens for DOM events and initiates corresponding DropHandle's events.\n    // Third argument can specify DropHandle's event name if it differs from\n    // the DOM event. Propagation of caught events is stopped.\n    //\n    //? delegate(byID('myzone'), 'dragleave')\n    //? delegate(byID('myzone'), 'drop', 'upload')\n    self.delegate = function (zoneNode, domEvent, selfEvent) {\n      global.addEvent(zoneNode, domEvent.toLowerCase(), function (e) {\n        global.stopEvent(e)\n        global.callAllOfObject(self, selfEvent || domEvent, e)\n      })\n    }\n\n    // Finds or creates <input type=\"file\"> used to facilitate non-drag & drop\n    // uploads for browsers othat than Firefox and Chrome-based.\n    // Returns that input's DOM element and its parent <form> or, if none,\n    // throws an exception since there's no meaning in having <input type=\"file\">\n    // and no <form> as both are only reuqired for fallback <iframe> upload.\n    // This result is assigned to 'input' option.\n    self.prepareInput = function (parent) {\n      var file = self.findInputRecursive(parent) || self.createInputAt(parent)\n\n      if (file) {\n        var form = file.parentNode\n        while (form && !global.isTag(form, 'form')) {\n          form = form.parentNode\n        }\n\n        if (!form) { throw 'FileDrop file input has no parent form element.' }\n\n        // See if the located form has proper target and if that target\n        // (supposedly <iframe>) really exists - we don't want to reload\n        // the entire document on file upload since it defeats the purpose\n        // of AJAX and is probably an error condition.\n        var target = form ? form.getAttribute('target') : ''\n\n        if (target && global.isTag(global.byID(target), 'iframe')) {\n          // Once here it means the setup is good to go. Return with success.\n          return {file: file, form: form}\n        }\n      }\n\n      // Similarly to opt.input == false this means there's input/form found\n      // so turn off <iframe> upload or create our own elements.\n      return false\n    }\n\n    // Searches for <input type=\"file\"> containing HTML class opt.inputClass\n    // among the children of parent. Is used to autodetect pre-created input\n    // of a drop zone. parent must be a DOM element.\n    // Returns DOM element or null.\n    //\n    //? // <form id=\"myzone\"><input type=\"file\" class=\"fd-input\"></form>\n    //  findInputRecursive(byID('myzone'))\n    //    //=> <input type=\"file\" class=\"fd-input\">\n    //\n    //? findInputRecursive(byID('foo'))   //=> null\n    self.findInputRecursive = function (parent) {\n      for (var i = 0; i < parent.childNodes.length; i++) {\n        var node = parent.childNodes[i]\n\n        if (global.isTag(node, 'input') && node.getAttribute('type') == 'file' &&\n            global.hasClass(node, self.opt.inputClass)) {\n          return node\n        } else if (node = arguments.callee(node)) {\n          return node\n        }\n      }\n    }\n\n    // Creates elements necessary for <iframe> upload to work - the input,\n    // form and iframe itself. A random unique ID is generated and assigned to\n    // the iframe, plus new form's target attribute. Once <input type=\"file\">\n    // gets clicked (and file chosen in the appeared dialog) or once it gets\n    // a file dropped onto (supported by some browsers) its onchange event\n    // occurs which we're intercepting in hookDropOn(). With that we trigger\n    // <form> submission which sends data to our hidden <iframe>. Just like\n    // old times.\n    //\n    // Returns the DOM element of (new) <input type=\"file\">.\n    self.createInputAt = function (parent) {\n      do { var id = global.randomID() } while (global.byID(id))\n\n      var cont = document.createElement('div')\n      // <iframe> code and several other things around are courtesy of\n      // QQ File Uploader (https://github.com/valums/file-uploader).\n      cont.innerHTML = '<iframe src=\"javascript:false\" name=\"' + id + '\"></iframe>' +\n                       '<form method=\"post\" enctype=\"multipart/form-data\">' +\n                         '<input type=\"hidden\" name=\"' + self.opt.iframe.callbackParam + '\" />' +\n                         '<input type=\"file\" name=\"' + self.opt.iframe.fileParam + '\" />' +\n                       '</form>'\n\n      // <iframe>.\n      cont.firstChild.setAttribute('id', id)\n      cont.firstChild.style.display = 'none'\n      // <form>.\n      cont.lastChild.setAttribute('target', id)\n\n      var nextChild = parent.firstChild\n      // Opera doesn't recognize <legend> and doesn't put it on top of the fieldset\n      // unless it's the first child. For this we skip over <legend> which can\n      // happen if parent is a <fieldset>.\n      while (nextChild && (!global.isTag(nextChild) || global.isTag(nextChild, 'legend'))) {\n        nextChild = nextChild.nextSibling\n      }\n\n      // Now put our controls as first child so they overlap the contents and\n      // <input type=\"file\"> can be clicked or dropped onto to fire the events.\n      if (nextChild) {\n        // Firefox 10 requires that immediate parent has position: relative for\n        // overflow: hidden to work on the input this in turn requires that the\n        // parent is the first child, otherwise top: 0 of the file input won't work.\n        parent.insertBefore(cont, nextChild)\n      } else {\n        // parent has no children or it's just <legend> - append controls to the end.\n        parent.appendChild(cont)\n      }\n\n      // The file input.\n      return cont.lastChild.lastChild\n    }\n\n    // Can be used to abort <iframe> upload. Isn't guaranteed to work since\n    // it's unreliable and highly browser-dependent (especially IE) but at\n    // least it might work. Does nothing if this DropHandle doesn't use\n    // <iframe> upload (see the input option).\n    self.abortIFrame = function () {\n      if (self.opt.input.form) {\n        var iframe = global.byID(self.opt.input.form.getAttribute('target'))\n        iframe && iframe.setAttribute('src', 'javascript:false')\n      }\n    }\n\n    // Sends the data via <iframe> as a fallback for proper File API AJAX upload.\n    // If url is omitted iframe.url option is used. See its description for more\n    // info. Does nothing if this DropHandle doesn't use <iframe> upload (see\n    // the input option). FileDrop class calls this automatically if an upload\n    // was triggered by an unsupported browser (neither Firefox nor Chrome-based).\n    //\n    // Unlike FileAPI events that let you decide what to do with the file - read,\n    // upload or descrad it - <iframe> upload is an imitation that simply submits\n    // the form as logn as <input type=\"file\"> was changed according to onchange\n    // event. There's no way to make sure it was populated or retrieve any info\n    // about the file - this can only be done by the server which may return\n    // something useful in response. For this reason DropHandle automatically\n    // facilitates the upload and offers only one 'iframeDone' event when all\n    // went fine.\n    //\n    // Returns true if upload was sent (but no guarantees about its success,\n    // use 'iframeDone' event for this purpose).\n    //\n    //? sendViaIFrame('http://my.host/upload.php?var=foo&var2=123')\n    //? sendViaIFrame()   // uses opt.iframe.url\n    self.sendViaIFrame = function (url) {\n      url = url || self.opt.iframe.url\n      var form = (self.opt.input || {}).form\n\n      if (url && form) {\n        do { var callback = global.randomID() } while (callback in window)\n\n        // This function is meant for calling by the code generated by the\n        // server-side script to which we've sent the file via the <form>.\n        // callback is that function's globally unique name (window-wise).\n        window[callback] = function (resp) {\n          // If server didn't pass a JS object let's mimic XMLHttpRequest\n          // and put that response data there.\n          if (typeof resp != 'object') {\n            resp = {\n              response: resp,\n              responseXML: '',\n              responseText: (resp || '').toString(),\n              readyState: 4,\n              status: 200,\n              statusText: 'OK',\n              // A bunch of XMLHttpRequest/jqXHR stub methods.\n              getAllResponseHeaders: function () { return '' },\n              getResponseHeader: function () { return '' },\n              setRequestHeader: function () { return this },\n              statusCode: function () { return this },\n              abort: function () { return this }\n            }\n          }\n\n          // These are extra properties given to event handlers so they\n          // can differentiate between AJAX upload and <iframe> fallback.\n          // Note that if properties with these names are already present\n          // in response they won't be overwritten.\n          global.extend(resp, {\n            // Just an indicator that it's an upload via <iframe>.\n            iframe: true,\n            // This URL contains full URL to which the data was sent (usually\n            // opt.iframe.url) that might include 'fd-callback' parameter.\n            url: url\n          })\n\n          global.callAllOfObject(self, 'iframeDone', resp)\n        }\n\n        // Setting the hidden input with the callback name to our newly generated name.\n        var cbInput = form.firstChild\n        while (cbInput && (!global.isTag(cbInput, 'input') ||\n               cbInput.name != self.opt.iframe.callbackParam)) {\n          cbInput = cbInput.nextSibling\n        }\n\n        if (cbInput) {\n          cbInput.value = callback\n        } else {\n          // This shouldn't happen with standard usage but if the hidden field\n          // is missing let's append callback name to the URL itself.\n          url = url.replace(/[?&]+$/, '') +\n                (url.indexOf('?') == -1 ? '?' : '&') +\n                self.opt.iframe.callbackParam + '=' + callback\n        }\n\n        form.setAttribute('action', url)\n        global.callAllOfObject(self, 'iframeSetup', form)\n        form.submit()\n        setTimeout(self.resetForm, 300)\n\n        return true\n      }\n    }\n\n    // Clears value of the file input so that the same file (with the same\n    // local path) can be uploaded again without reloading the page.\n    // Thanks to @rafaelmaiolla for the tips.\n    self.resetForm = function () {\n      var input = self.opt.input && self.opt.input.file\n      if (input) {\n        // Works in Firefox/Chrome only. Funny fact is that cloneNode() there\n        // will clone file selection too. IE doesn't support value = '' but\n        // node cloning erases it.\n        input.value = ''\n\n        if (self.opt.recreateInput) {\n          var clone = self.opt.input.file = input.cloneNode(true)\n          input.parentNode.replaceChild(clone, input)\n          global.callAllOfObject(self, 'inputSetup', [self.opt.input, input])\n        }\n      }\n    }\n\n    // Toggles selection of multiple files in the browser's open file dialog\n    // that appears when you click on <input type=\"file\">. Does nothing if\n    // this DropHandle doesn't use <iframe> upload (see the input option).\n    //\n    // If an argument is given it's used to set the new state. If no arguments\n    // are passed then current state is read.\n    //\n    // When doing initial setup on object construction you can pass {multiple: true}\n    // as an option instead of calling this method right after.\n    //\n    //? multiple(true)    //=> true; multiple file selection is possible\n    //? multiple(false)   //=> false; only one file can be selected\n    //? multiple()        //=> true if multiple selection is enabled or false otherwise\n    //? multiple(undefined)   // equivalent to above\n    self.multiple = function (enable) {\n      if (self.opt.input && typeof enable != 'undefined') {\n        enable ? self.opt.input.file.setAttribute('multiple', 'multiple')\n               : self.opt.input.file.removeAttribute('multiple')\n      }\n\n      return self.opt.input && !!self.opt.input.file.getAttribute('multiple')\n    }\n\n    // Function to manipulate events that correspond to DropHandle's events - not\n    // DOM node events. If you need to listen to them instead then use this:\n    //   addEvent(yourDropHandle.el, 'mousemove', function ...)\n    // Or any other standard way, e.g. with jQuery:\n    //   $(yourDropHandle.el).mousemove(function () { ... })\n    //\n    // Without parameters returns copy of {event: [func, func, ...], ...}\n    // event map - all handlers attached to this zone.\n    //\n    // When given a single non-array parameter returns array of handlers\n    // of that particular event:\n    //   event('iframeDone')     //=> [function () { ... }, func, ...]\n    //\n    // When givne a single array parameter acts similarly to parameterless\n    // form - returns event map of those particular events:\n    //   event(['inputSetup', 'iframeDone'])\n    //     //=> { inputSetup: [function () { ... }], iframeDone: [func, ...] }\n    //\n    // When givne one object parameter - an event map - all its handlers\n    // are added (values can be either functions or arrays, namespaces are\n    // not supported by this call form):\n    //   event({ inputSetup: [func, func, ...], iframeDone: func })\n    //     //=> this (DropHandle)\n    //\n    // When given two parameters and the second is null removes all handlers\n    // of event(s) listen in the first parameter (array or string):\n    //   event('inputSetup', null)    //=> this (DropHandle) - and below\n    //   event(['inputSetup', 'iframeDone'], null)\n    //\n    // When given two parameters and the second is either a function or array\n    // adds listeners to listed event(s):\n    //   event('inputSetup', function () { alert('New listener') })\n    //     //=> this (DropHandle) - here and below\n    //   event(['inputSetup', 'iframeDone'], function () { ... })\n    //   event('inputSetup', [func_1, func_2, ...])\n    //   event(['inputSetup', 'iframeDone'], [func_1, func_2, ...])\n    //\n    // Since two parameter-long calls return 'this' you can easily chain\n    // multiple calls to the object methods like in jQuery.\n    //\n    // New listeners are pushed at the end of event chain (see callAll()).\n    // Use preview() to add handlers in front of others.\n    //\n    // Event names can contain namespaces in form 'event:namespace' - this\n    // string identifier (not necessary unique) is assigned to every function\n    // handler and can be used later to remove that handler or a bunch of others\n    // with the same ID. Empty namespace ('event:') is the same as just 'event'.\n    // Registering new handler with the same NS in the same event doesn't remove\n    // the former (NS can duplicate). On unlisten, empty event name with non-empty\n    // namespace looks over all events.\n    //\n    //   event('event:myns', [func_1, func_2])\n    //     // adds 2 handlers, both under 'myns' namespace.\n    //   event('event', func_3)\n    //     // adds third function under empty namespace.\n    //   event('event:myns', null)    // removes 2 functions added first.\n    //   event(':myns', null)   // removes all 'myns' functions from all events.\n    //   event('event')   //=> {event: func_3}\n    //\n    // Any other parameter combination will result in exception.\n    //\n    // You can preview any event (execute your own handlers before any occurring\n    // event's handlers are executed) with 'any' event name (see callAllOfObject()):\n    //\n    //   event('any', function () { return false })\n    //     // suppresses all events.\n    //   event('any:myns', function () { return false })\n    //     // the same but lets you later remove this namespaced handler.\n    //   event('any:myns', null)    // removes the handler set above.\n    //\n    // There are also more special call forms. With one null parameter all\n    // handlers on this zone are removed - can be used to transfer all handlers\n    // from one DropHandle to another or save/restore their state:\n    //   var old = event()    //=> {event: [func], ...}\n    //   event(null)\n    //   event(old)\n    //\n    // With one function parameter this function's namespace is returned\n    // or empty strign if there's none:\n    //   event(function () { })     //=> ''\n    //\n    //? event('inputSetup', function (input) {\n    //    alert('Setting up file input of ' + input.form.target)\n    //  })\n    //\n    //? event('iframeDone', [handler_1, handler_2, ...])\n    //? event(['inputSetup', 'iframeDone'], function () { alert(this.el.id) })\n    //? event('any:namespace', ...)\n    self.event = function (events, funcs) {\n      return global.appendEventsToObject.apply(self, arguments)\n    }\n\n    // A simplified companion of event() that adds listeners not after\n    // existing but in front of them. Useful for intercepting and overriding\n    // calls of certain events. Supports namespaces.\n    //\n    // Has several call forms which are identical to event():\n    // 1. One parameter - object (event map)\n    // 2. Two parameters - array/array, array/func, string/array, string/func\n    //\n    // Any other parameter combination will result in exception.\n    //\n    //? preview('iframeDone', function () { alert('Abort!'); return false })\n    //? preview(['inputSetup:myns'], [func, func])\n    //? preview('any:myns', function () { alert('Stop that!'); return false })\n    self.preview = function (events, funcs) {\n      return global.previewToObject.apply(self, arguments)\n    }\n\n    /***\n      Standard DropHandle Event Callbacks\n     ***\n\n      These are used to support default behaviour like assignment of HTML\n      classes to zone and input nodes.\n     ***/\n\n    self.onInputSetup = function (input, oldInput) {\n      if (oldInput) {\n        // IE clones elements \"by reference\" so when one's attributes or\n        // events are changed the other also reflects the change.\n        // Taken from jQuery which borrowed that from MooTools.\n        input.file.clearAttributes && input.file.clearAttributes()\n        input.file.mergeAttributes && input.file.mergeAttributes(oldInput)\n      } else {\n        self.multiple(self.opt.multiple)\n      }\n\n      global.setClass(input.file, self.opt.inputClass)\n\n      // We listen for <input type=\"file\">'s onchange event - when it occurs\n      // we trigger submission of the hidden form which navigates hidden\n      // <iframe> to upload the file to the server script and read its response.\n      // This can be used in drag & drop-aware browsers (Firefox and Chrome-based)\n      // to create a \"Browse for file\" button as an alternative to drag & drop.\n      // For more details see the 'iframe' option.\n      self.delegate(input.file, 'change', 'upload')\n\n      var parent = input.file.parentNode\n      if (parent && parent.style.display.match(/^(static)?$/)) {\n        // We need to anchor <input>'s position relative to its parent node.\n        parent.style.position = 'relative'\n      }\n\n      if (global.isTag(zone, 'fieldset')) {\n        // Firefox 13 or so has started to ignore overflow: hidden on fieldsets.\n        // We need to wrap it in a <div> that by itself will hide any overflow.\n        var div = document.createElement('div')\n        div.style.position = 'relative'\n        div.style.overflow = 'hidden'\n        zone.parentNode.insertBefore(div, zone)\n        div.appendChild(zone)\n      }\n    }\n\n    self.onDragOver = function (e) {\n      global.stopEvent(e)\n      e.dataTransfer && (e.dataTransfer.dropEffect = self.opt.dropEffect)\n    }\n\n    self.onUpload = function () {\n      for (var i = 0; i < global.all.length; i++) {\n        if (global.all[i] !== self && global.all[i].events) {\n          global.callAllOfObject(global.all[i], 'uploadElsewhere', self)\n        }\n      }\n    }\n\n    self.event({\n      inputSetup: self.onInputSetup,\n      dragOver: self.onDragOver,\n      upload: self.onUpload\n    })\n\n    // Initialization.\n    global.setClass(zone, self.opt.zoneClass)\n    self.hook(zone)\n  }\n\n  /***\n    Main FileDrop Class\n   ***\n\n    Based on DropHandle to abstract from browser-specific drag & drop\n    and fallback <iframe> upload quirks, this class adds actual upload\n    functionality. It listens for drop events and <iframe> submission\n    triggering dedicated events with normalized parameters. Underlying\n    DropHandle class can be accessed via this.handle property. It shares\n    options and events with FileDrop object so changing one affects another.\n\n    DropHandle properties and methods are available on this object as well.\n\n    This object is defined in window.fd and aliased as window.FileDrop.\n   ***/\n\n  // Parameters - identical to DropHandle, see its note for details.\n  //? new FileDrop('anID')\n  //? new FileDrop(document.body, {zoneClass: 'with-filedrop'})\n  global.FileDrop = function (zone, opt) {\n    // Persistent 'this' instance reference.\n    var self = this\n\n    zone = global.byID(zone)\n\n    // Underlying DropHandle instance providing browser-independent\n    // handlers for drag & drop and <iframe> upload facility.\n    // Constructor will throw an exception if zone is invalid/undefined.\n    self.handle = new global.DropHandle(zone, opt)\n    self.handle.filedrop = self\n\n    /***\n      FileDrop Options\n     ***\n\n      Changing these on runtime after the class was created doesn't affect\n      anything so make sure to pass desired values to the constructor.\n\n      Extends DropHandle options so check that class for more options and info.\n     ***/\n\n    global.extend(self.handle.opt, {\n      // HTML class name for the zone DOM node that is set when an object\n      // is being dragged over that zone (Firefox) or over entire document\n      // (Chrome-powered browsers). It's removed once the object was dragged\n      // away or drag & drop was cancelled.\n      dragOverClass: 'over'\n    })\n\n    global.extend(self.handle.opt.iframe, {\n      // opt.iframe.force - if set FileDrop will always upload files by using\n      // fallback <iframe> method. This only makes sense in debugging and\n      // for some browsers (Opera before migrating to Chrome engine).\n      force: false\n    })\n\n    /***\n      FileDrop Events\n     ***\n\n      Attach new listeners with (new FileDrop).event('send', function ...).\n      Extends DropHandle options so check that class for more events and info.\n\n      This only applies to FileDrop zone overall - it doesn't define events\n      for individual File objects being generated by this zone. This means\n      that to determine upload state or progress you need to attach listeners\n      to each produced File object - either inside FileDrop's 'send' event\n      before sending a file to the server or inside its 'fileSetup' event\n      which is fired right after the creation of File object.\n\n      Note that all callbacks are executed with 'this' pointing to this\n      object so it's easy to know which FileDrop has caused that particular\n      event. For example:\n\n        var dh = new FileDrop('myzone')\n        dh.event('send', function (files) {\n          alert('Sending files via ' + this.el.id)\n\n          for (var i = 0; i < files.length; i++) {\n            files[i].sendTo('http://my.host/upload.php')\n          }\n        })\n     ***/\n\n    global.extend(self.handle.events, {\n      // Occurs when a file is ready to be sent via drag & drop. Doesn't\n      // occur for <iframe> uploads since the only thing you can do about them\n      // is submit the file to the server (no file info is available).\n      // If for some reason you still need to know when a file was *potentially*\n      // placed into <input type=\"file\"> for such fallback uploads listen or\n      // preview the 'upload' event (inherited from DropHandle).\n      //\n      // function (fd.FileList)\n      //    - is passed list of files that were dropped onto this zone - see\n      //      the description of this object for more details.\n      send: [],\n\n      // Occurs when a new fd.File object was created. You can use this to\n      // attach your own events if you don't want to do this on every 'send'\n      // occurrence.\n      //\n      // function (fd.File)\n      //    - is passed instance of the newly created File object.\n      fileSetup: []\n    })\n\n    // Handles upload that happens when a user drops a file onto the zone\n    // (Firefox, Chrome-based) or its <input type=\"file\" (Opera, others).\n    self.onUpload = function (e) {\n      var files = !self.opt.iframe.force && self.eventFiles(e, true)\n\n      // This was likely triggered by onchange event of <input type=\"file\">\n      // which means the browser doesn't support drag & drop or the user\n      // has picked file by clicking on the drop zone, bringing up Open File\n      // dialog and selecting a file there.\n      // If that's the case we don't have any file info available so just\n      // submit the form to the server and see what it responds with (only\n      // if <iframe> upload was enabled by filling out opt.iframe.url).\n      if (!files) {\n        if (!self.handle.sendViaIFrame() && global.hasConsole) {\n          // Must set opt.iframe.url if <iframe> fallback needs to work.\n          console.warn('FileDrop fallback upload triggered but iframe options' +\n                       ' were not configured - doing nothing.')\n        }\n      } else if (files.length > 0) {\n        // Dropped one or more files and we have FileAPI available (Firefox,\n        // Chrome-based) so fire off the usual on-drop event.\n        global.callAllOfObject(self, 'send', [files])\n      }\n    }\n\n    // Retrieves fd.File objects from an on-drop event. Returns a fd.FileList\n    // array-like object (not W3C FileList).\n    // If orFalse is unset always returns a FileList even if event was invalid,\n    // otherwise returns false in such occurrences instead of empty FileList.\n    self.eventFiles = function (e, orFalse) {\n      var result = new global.FileList(e)\n\n      // IE 8 supplies dataTransfer but it's of its own format (getData(), etc.)\n      // and not standardized. Has no file objects.\n      if (e.dataTransfer && (e.dataTransfer.length || e.dataTransfer.files)) {\n        var list = e.dataTransfer\n      } else {\n        // IE 10 provides dataTransfer on drag & drop but when selecting with\n        // Open File dialog of <input type=\"file\"> it only has e.srcElement.files.\n        // Thanks to @rafaelmaiolla for this correction.\n        var list = (e.target && e.target.files) || (e.srcElement && e.srcElement.files)\n      }\n\n      if (list) {\n        var entries = list.items || []\n        list.files && (list = list.files)   // Firefox 3.6.\n        var names = {}\n\n        for (var i = 0; i < list.length; i++) {\n          var file = new global.File(list[i])\n\n          // Safari Windows adds first file several times so skip them.\n          // ...while iOS Safari adds files under the same name - image.jpg (#30).\n          if (!names[file.name] || file.name == 'image.jpg') {\n            names[file.name] = true\n            file.setNativeEntry(entries[i])\n            global.callAllOfObject(self, 'fileSetup', file)\n\n            // Directories have zero size but in Chrome they are useful\n            // since you can access underlying DIrectoryEntry and read files.\n            if (file.size > 0 || file.nativeEntry) {\n              result.push(file)\n            }\n          }\n        }\n      } else if (orFalse) {\n        result = false\n      }\n\n      return result\n    }\n\n    // Linking both classes together. Objects become references so changing,\n    // for example, handle.events affects this.events. Functions of DropHandle\n    // become available on this FileDrop instance which is fine since they\n    // operate on 'self' bound to DropHandle object rather than 'this' of FileDrop.\n    global.extend(self, self.handle)\n\n    /***\n      Standard FileDrop Event Callbacks\n     ***\n\n      These are used to support default behaviour like actual upload process\n      after dropping a file or updating zone HTML classes on drag over/out.\n     ***/\n\n    function dragClassChanger(isHovered) {\n      return function () {\n        global.setClass(zone, self.opt.dragOverClass, isHovered)\n      }\n    }\n\n    self.event({\n      upload:           self.onUpload,\n      send:             self.resetForm,\n      // Add/remove on-drag HTML classes to/from the zone element.\n      dragEnter:        dragClassChanger(true),\n      dragLeave:        dragClassChanger(false),\n      uploadElsewhere:  dragClassChanger(false)\n    })\n\n    self.preview({\n      // Placing handler to reset on-drop state of the zone for better\n      // visual feedback - the user immediately recognizes that the file is no\n      // more dragged even if actual upload handler takes some time to execute.\n      upload:           dragClassChanger(false)\n    })\n  }\n\n  /***\n    FileList Class\n   ***\n\n    It's sort of W3C class (that has no special methods defined in the spec)\n    with a bunch of File-oriented methods that this object is meant to contain.\n    It's an array-like object with length, splice and other methods.\n   ***/\n\n  global.FileList = function (event) {\n    // Persistent 'this' instance reference.\n    var self = this\n\n    // If set can be 'copy', 'move' or other action. Doesn't reliably work\n    // cross-browser and cross-platform. See MDN for more info:\n    // https://developer.mozilla.org/en-US/docs/Web/API/DataTransfer\n    self.dropEffect = (event && event.dropEffect) || ''\n    self.length = 0\n\n    // No need to hold the reference to this variable.\n    event = null\n\n    self.push = function (file) {\n      self[self.length++] = file\n      return self\n    }\n\n    // Returns undefind if this list is empty.\n    self.pop = function () {\n      if (self.length > 0) {\n        var file = self.last()\n        delete self[--self.length]\n        return file\n      }\n    }\n\n    self.first = function () {\n      return self[0]\n    }\n\n    self.last = function () {\n      return self[self.length - 1]\n    }\n\n    self.remove = function (i) {\n      for (; i < self.length - 1; i++) {\n        self[i] = self[i + 1]\n      }\n\n      se.f.pop()\n      return self\n    }\n\n    self.clear = function () {\n      for (var i = 0; i < self.length; i++) {\n        delete self[i]\n      }\n\n      self.length = 0\n      return self\n    }\n\n    // Reverses order of files in this list (changes self).\n    self.reverse = function () {\n      for (var i = 0; i < Math.floor(self.length / 2); i++) {\n        self[i] = self[self.length - i - 1]\n      }\n      return self\n    }\n\n    // Creates copy of this list and adds items from FileList or array\n    // to the end of the returned copy.\n    self.concat = function (list) {\n      var copy = new global.FileList\n      for (var i = 0; i < self.length; i++) {\n        copy[i] = self[i]\n      }\n\n      for (var i = 0; list && i < list.length; i++) {\n        copy[self.length + i + 1] = list[i]\n      }\n\n      copy.length = self.length + (list || []).length\n      return self\n    }\n\n    // Sorts this list by calling comparator in context cx (or 'this' FileList).\n    // func = function (File a, File b, aIndex, bIndex) - if returns < 0 second\n    // file (b) must go before first (a). Very similar to Array.sort().\n    //\n    //? sort(function (a, b) { return a.name > b.name ? +1 : -1 })\n    self.sort = function (func, cx) {\n      for (var i = 0; i < self.length; i++) {\n        for (var j = 0; j < self.length; j++) {\n          if (func.call(cx || this, self[i], self[j], i, j) < 0) {\n            var temp = self[i]\n            self[i] = self[j]\n            self[j] = temp\n          }\n        }\n      }\n\n      return self\n    }\n\n    // Sorts this list by calling func on each File alone and using that value\n    // (hash) to compare itsems between themselves. Like Underscore's sortBy().\n    // func = function (File, index) - returns something comparable, e.g. string,\n    // number or Date.\n    //\n    //? sortBy(function (file) { return file.modDate })\n    //? sortBy(function () { return Math.random() })\n    self.sortBy = function (func, cx) {\n      var list = []\n\n      for (var i = 0; i < self.length; i++) {\n        list.push([ i, func.call(cx || this, self[i], i) ])\n      }\n\n      list.sort(function (a, b) {\n        return a[1] > b[1] ? +1 : (a[1] < b[1] ? -1 : 0)\n      })\n\n      for (var i = 0; i < list.length; i++) {\n        self[i] = list[i][0]\n      }\n\n      return self\n    }\n\n    // Calls func in context cx for every File in the list and if it returns\n    // a non-null value returns the File object on which func was invoked.\n    // If this list is empty or if func didn't return anything for any file\n    // returns undfined.\n    //\n    //? find(function (f) { return f.name[0] == 'a' })\n    //    // returns first File which local name starts with 'a', if any.\n    self.find = function (func, cx) {\n      for (var i = 0; i < self.length; i++) {\n        var res = func.call(cx || this, self[i], i)\n        if (res != null) { return self[i] }\n      }\n    }\n\n    // The same as find() but ignores returned value of the callback invoking\n    // it for every File in the list.\n    //\n    //? each(function (f) { alert(f.name) })\n    self.each = function (func, cx) {\n      self.find(function () { func.apply(this, arguments) }, cx)\n      return self\n    }\n\n    // Calls method on every contained object with given arguments. Returns self.\n    //\n    //? invoke('fileMethod', 'arg1', 2, 3.33)\n    self.invoke = function (method, arg_1) {\n      var args = global.toArray(arguments, 1)\n      return this.each(function (file) { file[method].apply(file, args) })\n    }\n\n    // Aborts all uploads of files contained in this list. Does nothing if\n    // upload isn't active. Doesn't abort <iframe> uploads - for this call\n    // abortIFrame() on the corresponding DropHandle object.\n    //\n    //? abort()\n    self.abort = function () {\n      return this.invoke('abort')\n    }\n\n    // Runs through over all items in this list calling func in context cx (or\n    // this) and storing returned values. Returns File object for which func\n    // generated the largest value (or first such File for multiple same values).\n    // Returns undefined if this list is empty.\n    //\n    //? findCompare(function (f) { return f.size })\n    //    // returns largest file.\n    self.findCompare = function (func, cx) {\n      var file, value = null, res\n\n      self.each(function (f) {\n        if (value == null || value < (res = func.call(cx, file))) {\n          file = f\n        }\n      }, cx)\n\n      return file\n    }\n\n    // Returns new list that only contains items for which func called in context\n    // cx (or this) has returned a truthy value.\n    self.filter = function (func, cx) {\n      var list = new global.FileList\n\n      self.each(function (f) {\n        func.apply(this, arguments) && list.push(f)\n      }, cx)\n\n      return list\n    }\n\n    // Finds File with biggest size or undefined for empty list.\n    self.largest = function () {\n      return self.findCompare(function (f) { return f.size })\n    }\n\n    // Finds File with smallest size or undefined for empty list.\n    self.smallest = function () {\n      return self.findCompare(function (f) { return -f.size })\n    }\n\n    // Finds File that was changed the longest time before or undefined for empty list.\n    self.oldest = function () {\n      return self.findCompare(function (f) { return -f.modDate.getTime() })\n    }\n\n    // Finds File that was most recently changed or undefined for empty list.\n    self.newest = function () {\n      return self.findCompare(function (f) { return f.modDate })\n    }\n\n    // Returns new list of all files which MIME type matches. MIME shouldn't contain\n    // RegExp symbols except for '/'. To match MIME group like 'image/*' don't\n    // include trailing '/*' - just 'image'.\n    //\n    //? ofType('image').first()   //=> File or undefined if none\n    self.ofType = function (mime) {\n      mime += mime.indexOf('/') == -1 ? '/' : '$'\n      mime = new RegExp('^' + mime, 'i')\n      return self.filter(function (f) { return mime.test(f.type) })\n    }\n\n    // Returns new list with File items with image/* MIME type.\n    self.images = function () {\n      return self.ofType('image')\n    }\n\n    // If name is string returns File with name exactly matching that string\n    // If name is RegExp returns new list containing File items which 'name'\n    // match given RegExp.\n    //\n    //? named('myfile.txt')     //=> File or undefined\n    //? named(/^start_\\..+$/i)  //=> FileList (copy)\n    self.named = function (name) {\n      if (typeof name == 'string') {\n        return self.find(function (f) { return f.name == name })\n      } else {\n        return self.filter(function (f) { return name.test(f.name) })\n      }\n    }\n  }\n\n  // Making FileList array-like.\n  global.FileList.prototype.length = 0\n  global.FileList.prototype.splice = Array.prototype.splice\n\n  /***\n    Browser-Independent File Class\n   ***\n\n    It's passed on FileDrop 'send' event as members fd.FileList and provides\n    cross-browser access to file information and ability to upload it to the server.\n    Wraps around native browser's File object.\n   ***/\n\n  // Parameters:\n  // * file - native browser File object that was retrieved from the on-drop\n  //          event object. Can be accessed via this.nativeFile property.\n  global.File = function (file) {\n    // Persistent 'this' instance reference.\n    var self = this\n\n    // Native browser's File object as it was given in the on-drop event.\n    // Is null for directory entries if on lists produced by listEntries().\n    self.nativeFile = file\n\n    // In Chrome 21+ will be set to native Entry (FileEntry, DirectoryEntry, etc.)\n    // instance. See W3C spec: http://www.w3.org/TR/file-system-api/#the-entry-interface\n    self.nativeEntry = null\n\n    // Local file name.\n    self.name = file.fileName || file.name || ''\n\n    // Local file size (bytes).\n    self.size = file.fileSize || file.size || 0\n\n    // Local file MIME type.\n    self.type = self.mime = file.fileType || file.type || ''\n\n    // Last modification of the local time. Standard Date object.\n    self.modDate = file.lastModifiedDate || new Date\n\n    // XMLHttpRequest object that was used to upload the file to the server.\n    // Only filled after sendTo() was called.\n    self.xhr = null\n\n    /***\n      File Options\n     ***\n\n      Values here specify default values for sendTo() options - like HTTP\n      method used to submit the data. They can be overriden by passing an\n      object to sendTo() - e.g. sendTo('upload.php', {method: 'PUT'}).\n     ***/\n\n    self.opt = {\n      // If enabled this object will add several X-... headers to provide\n      // information about the original file to the server (e.g. name and size).\n      extraHeaders: true,\n\n      // The value of X-Requested-With header sent with XMLHttpRequest used\n      // to upload the dropped file(s). If false then this header is not set\n      // (but you can use xhrSetup/xhrSend events to set it). If true - it's\n      // set to one of 'FileDrop-XHR-...'. A string sets it to that string -\n      // e.g. 'XMLHttpRequest' would simulate regular $.ajax() request.\n      xRequestedWith: true,\n\n      // HTTP method used to submit the upload data. Useful for contacting\n      // WebDAV services which might accept PUT or DELETE. Given in sendTo()\n      // to XMLHttpRequest.open().\n      method: 'POST'\n    }\n\n    /***\n      File Events\n     ***\n\n      These are different from FileDrop events and are individual to each File.\n      See FileDrop events for more info on how to attach listeners here.\n     ***/\n\n    self.events = {\n      // Object-wise event preview handlers. See DropHandle's 'any' description.\n      any: [],\n\n      // Occurs after an XMLHttpRequest object was prepared to submit the file\n      // to the server. All FileDrop-specific headers and other customization\n      // (Content-Type, etc.) was already done. You can set extra headers or add\n      // event listeners here before it's dispatched to the server.\n      //\n      // function (XMLHttpRequest, opt)\n      //    - is passed the request object and the options object that was\n      //      passed to sendTo() with missing fields populated as this.opt.\n      xhrSetup: [],\n\n      // Occurs when a file and XMLHttpRequest were prepared for upload and need\n      // to be sent. It's handled by fd.File.xhrSend() but you might want to\n      // add your logic here.\n      //\n      // function (XMLHttpRequest, data, opt)\n      //    - is passed the request object, options and raw file data that is\n      //      browser-specific (it might not be raw binary stream in some\n      //      older browsers as it is in Firefox and Chrome-based). opt is the\n      //      object passed to sendTo() with missing fields populated as this.opt.\n      xhrSend: [],\n\n      // Occurs during file upload with information on current upload progress.\n      // This happens on browser-sepcific intervals and usually on somewhat large\n      // files only.\n      //\n      // function (sentBytes, totalBytes, XMLHttpRequest, eventObject)\n      //    - is passed two integers (already uploaded bytes and total amount\n      //      of data - local file size, of which first or both might be unset\n      //      if browser can't provide this info), the request object that is\n      //      uploading this file and native browser event object that was\n      //      given to the XHR's event handler of fd.File.\n      progress: [],\n\n      // Occurs when a file has successfully finished uploading.\n      //\n      // function (XMLHttpRequest, eventObject)\n      //    - is passed the request object that was used to upload the file and\n      //      native browser event object that was given to the XHR's event handler\n      //      of fd.File.\n      done: [],\n\n      // Occurs when a file has failed during upload much like regular XHR error.\n      // Note that \"failing\" means all response code except for 200 - even 2xx like\n      // 202 Accepted (WebDAV and such) or 3xx (redirects).\n      // This isn't called when upload was aborted - if you specifically need to\n      // track this call fd.addEvent(fileObject, 'abort', function ...).\n      //\n      // function (eventObject, [XMLHttpRequest])\n      //    - using passed objects you can determine the type of error as you\n      //      would outside of FileDrop - e.g. by XMLHttpRequest.statusText.\n      //      If XHR object is not passed this marks an error that has occurred\n      //      while reading file from local file system with readAsArrayBuffer().\n      error: []\n    }\n\n    // Old FireDrop compatibility. Now deprecated.\n    self.events.sendXHR = self.events.xhrSend\n\n    /***\n      File Methods\n     ***/\n\n    // Aborts current upload, if any.\n    //\n    //? file.abort()\n    self.abort = function () {\n      self.xhr && self.xhr.abort && self.xhr.abort()\n      return self\n    }\n\n    // Submits the dropped file to the server script at given URL and with\n    // optional options (fields default to this fd.File.opt).\n    // Incapsulates browser-specific logic behind reading a local file.\n    // If an upload request has been already made on this fd.File instance will\n    // abort it (unless it's finished) and start anew.\n    //\n    //? sendTo('http://my.host/upload.php?var=foo&var2=123')\n    //? sendTo('upload.php', {method: 'PUT'})\n    self.sendTo = function (url, opt) {\n      opt = global.extend(opt, self.opt)\n      opt.url = url\n\n      if (!self.size) {\n        // Zero size also indicates that it might be a directory.\n        global.hasConsole && console.warn('Trying to send an empty FileDrop.File.')\n      } else if (window.FileReader) {\n        // Using Firefox FileAPI.\n        var reader = new FileReader\n\n        reader.onload = function (e) { self.sendDataReadyTo(opt, e) }\n        reader.onerror = function (e) { global.callAllOfObject(self, 'error', [e]) }\n\n        reader.readAsArrayBuffer(self.nativeFile)\n      } else {\n        // Using early Chrome/Safari File API.\n        self.sendDataReadyTo(opt)\n      }\n\n      return self\n    }\n\n    // Internal method that's called when file data was read and is ready for\n    // upload. For FileAPI (Firefox) gets called on readAsArrayBuffer() onload\n    // event; for Safari/early Chrome it's called immediately and gets passed\n    // the native file object itself.\n    self.sendDataReadyTo = function (opt, e) {\n      self.abort()\n\n      self.xhr = global.newXHR()\n      self.hookXHR(self.xhr)\n\n      self.xhr.open(opt.method, opt.url, true)\n      // Missing in IE.\n      self.xhr.overrideMimeType && self.xhr.overrideMimeType('application/octet-stream')\n      self.xhr.setRequestHeader('Content-Type', 'application/octet-stream')\n\n      if (opt.extraHeaders) {\n        self.xhr.setRequestHeader('X-File-Name', encodeURIComponent(self.name))\n        self.xhr.setRequestHeader('X-File-Size', self.size)\n        self.xhr.setRequestHeader('X-File-Type', self.type)\n        self.xhr.setRequestHeader('X-File-Date', self.modDate.toGMTString())\n\n        var reqWith = opt.xRequestedWith\n        if (reqWith === true) {\n          var api = window.FileReader ? 'FileAPI' : 'Webkit'\n          reqWith = 'FileDrop-XHR-' + api\n        }\n\n        reqWith && self.xhr.setRequestHeader('X-Requested-With', reqWith)\n      }\n\n      global.callAllOfObject(self, 'xhrSetup', [self.xhr, opt])\n\n      // Some browsers allow reading raw data, some don't. See if ours allows\n      // and if not then it should support just passing the native file object\n      // to XMLHttpRequest.send().\n      var data = (e && e.target && e.target.result) ? e.target.result : self.nativeFile\n      global.callAllOfObject(self, 'xhrSend', [self.xhr, data, opt])\n      return self.xhr\n    }\n\n    // Attaches internal event listeners to the XMLHttpRequest object that is\n    // used to upload the dropped file. Not all browsers trigger upload events\n    // on the XHR object itself (hence evtHost).\n    self.hookXHR = function (xhr) {\n      var evtHost = xhr.upload || xhr\n\n      xhr.onreadystatechange = function (e) {\n        if (xhr.readyState == 4) {\n          try {\n            var event = xhr.status == 200 ? 'done' : 'error'\n          } catch (e) {\n            var event = 'error'\n          }\n\n          var args = event == 'error' ? [e, xhr] : [xhr, e]\n          global.callAllOfObject(self, event, args)\n        }\n      }\n\n      evtHost.onprogress = function (e) {\n        var current = e.lengthComputable ? e.loaded : null\n        global.callAllOfObject(self, 'progress', [current, e.total || null, xhr, e])\n      }\n    }\n\n    // Browser-independent way of reading binary data. Doesn't work on all browsers.\n    // Asynchronous. If onError is omitted then onDone is called with the usual\n    // arguments (errorObject). If onError is false errors are not reported\n    // (onDone not called).\n    //\n    // Third parameter specifies the way to read the file and if omitted or 'bin'\n    // reads binary data, if 'url', 'uri' or 'src' reads Data URI (very nice for\n    // generating thumbnails), if 'array' reads it as ArrayBuffer, if 'text' reads\n    // data as UTF-8 string, if starts with 'read' is assumed to be a method name on\n    // native File object which will be called. Any other string value istreated as\n    // character encoding (e.g. 'cp1251') and data is read as text in that encoding.\n    // If 3rd parameter is an array its first element is treated as File's method\n    // name and all other parameters are parameters for that method.\n    //\n    // Note that readAsBinaryString() is deprecated, missing in IE 10 and simulated\n    // by FileDrop using readAsArrayBuffer().\n    //\n    // errorObject will fdError string property describing the type of the problem:\n    // 1. 'read'      - browser has failed to read file data.\n    // 2. 'support'   - browser doesn't support File API.\n    //\n    // onDone   = function (string|array)\n    // onError  = function (errorObject)\n    //\n    //?\n    //  readData(function (uri) { byID('myImg').src = uri },\n    //           function (e) { alert('Terrible error!') },\n    //           'uri')\n    //      // reads dropped image into a thumbnail (Data URI).\n    //\n    //? readData(function (bytes) { alert(bytes) }, false)\n    //      // shows message with raw read byte string.\n    //\n    //? readData(function (bytes) { alert(bytes) }, false, 'bin')\n    //      // identical to above.\n    //\n    //? readData(function (bytes) { alert(bytes) }, false, 'readAsBinaryString')\n    //      // identical to above.\n    //\n    //? readData(function (bytes) { alert(bytes) }, false, ['readAsBinaryString'])\n    //      // identical to above but won't automatically fall back to\n    //      // readAsArrayBuffer() failing in IE and early Chrome.\n    //\n    //? readData(function (bytes) { alert(Array.prototype.slice.call(bytes)) }, false, 'array')\n    //      // shows message with comma-separated list of byte values.\n    //\n    //? readData(function (str) { alert(str) }, false, 'cp1251')\n    //      // shows message with file read as a string in CP-1251 charset.\n    //\n    //? readData(function (str) { alert(str), false, ['readAsText', 'cp1251'])\n    //      // identical to above.\n    //\n    //? readData(function (str) { alert(str), false, 'text')\n    //      // similar to above but treats string as UTF-8 encoded (default charset).\n    //\n    //? readData(function (str) { alert(str), false, 'utf-8')\n    //      // identical to above.\n    //\n    //? readData(function (str) { alert(str), false, 'readAsText')\n    //      // identical to above.\n    self.readData = function (onDone, onError, func) {\n      return self.read({onDone: onDone, onError: onError, func: func})\n    }\n\n    // Alias to readData() that reads Data URI suitable for <img src> attribute.\n    // Unlike readData() if onError isn't passed explicitly it's set to false\n    // (errors suppressed, onDone not called instead).\n    //\n    //?\n    //  readDataURI(function (uri) {\n    //    var img = new Image\n    //    img.src = uri\n    //    document.body.appendChild(img)\n    //  })\n    self.readDataURL = function (onDone, onError) {\n      return self.readData(onDone, onError || false, 'uri')\n    }\n\n    // Alias to readDataURL().\n    self.readDataURI = self.readDataURL;\n\n    // Advanced reading function that can be used to read Blobs and make\n    // slices of this file rather than load the entire data into memory.\n    // Accepts various options, see the code for information.\n    //\n    //? read({onDone: function (str) { alert(str) }, func: 'text', start: 0, end: 5})\n    //    // reads first 4 bytes of the file, treats them as UTF-8 and shows them.\n    self.read = function (opt) {\n      function error(reason, e) {\n        typeof e == 'object' || (e.message = e)\n        e.fdError = reason\n\n        if (opt.onError !== false) {\n          (opt.onError || opt.onDone).apply(this, arguments)\n        }\n      }\n\n      global.extend(opt, {\n        // function (data) - gets passed data according to selected func (below).\n        onDone: new Function,\n\n        // function (e), false (errors are not reported), null (calls onDone).\n        onError: null,\n\n        // Target File or Blob object to read data from.\n        blob: self.nativeFile,\n\n        // Reading method alias (e.g. 'uri'), name (e.g. 'readAsText') or\n        // array like ['readAsText', 'arg-1', ...].\n        func: '',\n\n        // New Blob slice options. Negative becomes 0.\n        start: 0,\n\n        // null = this.size. Note that according to W3C byte with this offset\n        // is not included in result (so last byte read is end - 1).\n        // If negative offset is counted from the end (-1 skips last 2 bytes).\n        end: null,\n\n        // contentType assigned to new Blob (empty leaves default).\n        mime: ''\n      })\n\n      if (!window.FileReader) {\n        return error('support', e)\n      }\n\n      if (opt.start > 0 || opt.end != null && opt.end) {\n        if (opt.blob.slice) {\n          opt.end == null && (opt.end = opt.blob.size || opt.blob.fileSize)\n          opt.blob = opt.blob.slice(opt.start, opt.end, opt.mime)\n        } else if (global.hasConsole) {\n          console.warn('File Blob/slice() are unsupported - operating on entire File.')\n        }\n      }\n\n      var reader = new FileReader\n      reader.onerror = function (e) { error('read', e) }\n\n      reader.onload = function (e) {\n        if (e.target && e.target.result) {\n          if (opt.func == 'readAsBinaryString') {\n            // Function actually used was readAsArrayBuffer() - see the note below.\n            e.target.result = String.fromCharCode.apply(null, new Uint8Array(e.target.result))\n          }\n\n          opt.onDone(e.target.result)\n        } else {\n          reader.onerror(e)\n        }\n      }\n\n      var func = opt.func\n\n      if (global.isArray(func)) {\n        var name = func[0]\n        func[0] = opt.blob\n        return reader[name].apply(reader, func)\n      } else {\n        if (!func || func == 'bin') {\n          func = 'readAsBinaryString'\n        } else if (func == 'url' || func == 'uri' || func == 'src') {\n          func = 'readAsDataURL'\n        } else if (func == 'array') {\n          func = 'readAsArrayBuffer'\n        } else if (func == 'text') {\n          func = 'readAsText'   // reads as UTF-8 by default.\n        } else if (func.substr(0, 4) != 'read') {\n          return reader.readAsText(opt.blob, func)\n        }\n\n        // readAsBinaryString() has been deprecated since mid-2012 in favour\n        // of readAsArrayBuffer(). Additionally, IE 10 only supports the latter.\n        // Result that's been read will be converted to string in onload.\n        func == 'readAsBinaryString' && (func = 'readAsArrayBuffer')\n\n        return reader[func](opt.blob)\n      }\n    }\n\n    // Uses W3C draft File System API to traverse this DirectoryEntry.\n    // Currently supported in Chrome 21+. Spec: http://www.w3.org/TR/file-system-api/\n    // Thanks to @kevinkrouse for pointing me to this wonderful interface.\n    // This function is not recursive.\n    //\n    // onDone is a function callback that receives FileDrop.FileList object.\n    // Each entry there can be either a file or a directory. Files have nativeFile\n    // set (but not in case of error - if so use nativeEntry's isDirectory and\n    // isFile props to determine which one is which). On these, correct files you\n    // can use any of FileDrop methods - sendTo(), readFile(), etc. On directories\n    // (but not failed files) you can use listEntries() to traverse them further.\n    //\n    // onError is an optional function called by the browser when it runs into errors.\n    // It gets passed error object. Note that it might be called multiple times\n    // and that onDone can be still called (this might happen if FileEntry can't\n    // read particular File object when using file()).\n    //\n    //? listEntries(function (files) { files.images().invoke('sendTo', 'upload.php') })\n    //      // sends all images in the dropped directory to upload.php; errors are\n    //      // ignored but if one has occurred while retrieving File API object this\n    //      // call with fail with a JavaScript error - this is fixed by removing\n    //      // all entries with null nativeFile before doing sendTo().\n    //\n    //? listEntries(function (files) { files.each(...) },\n    //              function (e) { alert('File System API error ' + e.code) })\n    self.listEntries = function (onDone, onError) {\n      if (self.nativeEntry && self.nativeEntry.isDirectory) {\n        onError = onError || new Function\n        var reader = self.nativeEntry.createReader()\n        var files = new global.FileList\n        var enqueued = 0\n\n        function dequeue(count) {\n          enqueued -= count\n          if (enqueued == 0 && onDone) {\n            onDone(files)\n            onDone = null\n          }\n        }\n\n        reader.readEntries(function (list) {\n          for (var i = 0; i < list.length; i++) {\n            var nativeEntry = list[i]\n\n            if (nativeEntry.file) {\n              // This entry is a file (FileEntry).\n              enqueued++\n              nativeEntry.file(\n                function (nativeFile) {\n                  var file = new global.File(nativeFile)\n                  file.setNativeEntry(nativeEntry)\n                  files.push(file)\n                  dequeue(1)\n                },\n                function () {\n                  // Error getting a File object. Let's still insert it\n                  // into the resulting list but without nativeFile (which\n                  // makes sendTo(), readData(), etc. unavailable).\n                  files.push( global.File.fromEntry(nativeEntry) )\n                  dequeue(1)\n                  onError.apply(this, arguments)\n                }\n              )\n            } else {\n              // This is a DirectoryEntry. It has no File object (that comes\n              // from File API spec: http://dev.w3.org/2006/webapi/FileAPI/).\n              // Don't try calling sendTo(), readFile() and the likes on the\n              // FileDrop.File items returned in the FileList passed to onDone.\n              files.push( global.File.fromEntry(nativeEntry) )\n            }\n          }\n\n          i ? reader.readEntries(arguments.callee, onError) : dequeue(0)\n        }, onError)\n\n        return true\n      }\n    }\n\n    // Internal method to assign data from a native Entry object.\n    self.setNativeEntry = function (item) {\n      self.nativeEntry = item && item.webkitGetAsEntry && item.webkitGetAsEntry()\n    }\n\n    // Adds event listeners to this object. See DropHandle.event() for\n    // extended comment and examples.\n    self.event = function (events, funcs) {\n      return global.appendEventsToObject.apply(self, arguments)\n    }\n\n    // Adds event listeners to this object in front of existing handlers.\n    // Can be used to intercept/override certain events. See DropHandle.event()\n    // for extended comment and examples.\n    self.preview = function (events, funcs) {\n      return global.previewToObject.apply(self, arguments)\n    }\n\n    /***\n      Standard File Event Callbacks\n     ***/\n\n    // Takes care of reading binary stream from file and sending it\n    // to the remote server using prepared XMLHttpRequest.\n    // data is either an ArrayBuffer (Gecko/Chrome) or a native file object\n    // (Safari). Either way, send() handles both. This used to deal with\n    // sendAsBinary() but it's specific to Firefox 3.6 and is removed now.\n    self.onXhrSend = function (xhr, data) {\n      xhr.send(data)\n    }\n\n    self.event({\n      xhrSend:        self.onXhrSend\n    })\n  }\n\n  // Static method of File that creates an object without attaching to any\n  // File API's File object. It's only useful if you have an Entry object\n  // that lets you get at least some of the info (e.g. file name) and list\n  // contents for DirectoryEntry. See listEntries(). Using sendTo(), readData()\n  // and others on such an instance will result in errors.\n  //\n  //? fromEntry( e.dataTransfer.items[0].webkitGetAsEntry() )\n  //      //=> FileDrop.File\n  global.File.fromEntry = function (nativeEntry) {\n    var file = new global.File(nativeEntry)\n    file.setNativeEntry(nativeEntry)\n    file.nativeFile = null\n    return file\n  }\n\n  /***\n    FileDrop jQuery Interface\n   ***\n\n    After both FileDrop and jQuery (v1 or v2) scripts have loaded call fd.jQuery().\n    Don't forget to include/write your FileDrop's CSS as well.\n\n    Once done it becomes possible to access FileDrop as $('#zone').filedrop()\n    and avoid accessing its methods and bind event altogether. FileDrop will\n    trigger events as if they originated from the DOM node itself and prefix\n    each event with either 'fd' (DropHandle/FileDrop classes) or 'file'\n    (File class). Arguments remain the same except that:\n    * jQuery always passes event object as the first argument so just skip it.\n    * File events ('file' prefix) get passed File object as second argument\n      (after jQuery event).\n\n    Note that 'this' points to jQuery collection and no more to the FileDrop\n    or File instance that has initiated the event.\n\n      $('<div><p>Drop something here...</p></div>')\n        .appendTo(document.body)\n        .filedrop()\n        .on('fdsend', function (e, files) {\n          // Occurs when FileDrop's 'send' event is initiated.\n          $.each(files, function (i, file) {\n            file.sendTo('upload.php')\n          })\n        })\n        .on('filedone', function (e, file) {\n          // Occurs when a File object has done uploading.\n          alert('Done uploading ' + file.name + ' on ' + this.tagName)\n        })\n\n    When constructing FileDrop instance by jQuery in addition to regular 'el'\n    property '$el' is set to point to $(el) - zone DOM node as jQuery collection.\n\n    Also, it's still possible to attach listeners to FileDrop object with\n    fd.event('event', func) but these events are called after corresponding\n    DOM events (added with jQuery). If a DOM event handler returns a non-null\n    and non-undefined value - FileDrop's handlers won't be called.\n\n    Event preview handlers ('any' event) can only be attached directly to FileDrop:\n\n      $('#zone')\n        .fildrop()\n        .filedrop().event('any', function () { ... })\n\n    You can access underlying FileDrop object by calling filedrop() without\n    parameters (first such call creates FileDrop, later calls return the\n    instance on the first element in the collection):\n\n      $('#zone')            // select <p id=\"zone\">\n        .filedrop()         // turn it into a FileDrop zone\n        .css({color: red})  // any normal jQuery code\n        .filedrop()         // retrieve FileDrop object\n        .multiple(true)     // call its method\n\n    Alternatively you can pass a string to filedrop() to select a property\n    or call a method - in this case their value/result is returned\n\n      $('#zone')\n        .filedrop()\n        .filedrop('multiple', true)\n          // returns the new state of 'multiple' option, not jQuery object.\n\n    It's also possible to pass custom options to FileDrop constructor:\n\n      $('#zone')\n        .filedrop({\n          multiple: true,\n          iframe: {url: '/upload.php'}\n        })\n   ***/\n\n  global.jQuery = function ($) {\n    $ = $ || jQuery || window.jQuery\n    if (!$) { throw 'No window.jQuery object to integrate FileDrop into.' }\n\n    $.fn.filedrop = function (options) {\n      function delegate(prefix, firstArgs) {\n        return function (event) {\n          var args = (firstArgs || []).concat(global.toArray(arguments, 1))\n          return $node.triggerHandler((prefix + event).toLowerCase(), args)\n        }\n      }\n\n      var $node = this\n      var host = this.data('filedrop')\n\n      if (typeof options == 'string') {\n        if (!host) {\n          $.error(\"$.filedrop('comment') needs an initialized FilrDrop on this element.\")\n        } else if (typeof host[options] == 'undefined') {\n          $.error(\"There's no method or property FileDrop.\" + options + \".\")\n        } else {\n          var value = host[options]\n          if (typeof value == 'function') {\n            return value.apply(host, global.toArray(arguments, 1))\n          } else {\n            return value\n          }\n        }\n      } else if (!options || typeof options == 'object') {\n        if (!host) {\n          var zone = new FileDrop(this[0], options)\n          zone.$el = $(this)\n          this.first().data('filedrop', zone)\n\n          zone.event('any', delegate('fd'))\n\n          zone.on.fileSetup.push(function (file) {\n            file.event('any', delegate('file', [file]))\n          })\n        } else if (!options) {\n          return host\n        } else {\n          global.extend(host.opt, options, true)\n        }\n      } else {\n        $.error('Invalid $.filedrop() parameter - expected nothing (creates new zone),' +\n                ' a string (property to access) or an object (custom zone options).')\n      }\n\n      return $node\n    }\n  }\n\n  // Alias window.fd.FileDrop class to just window.FileDrop since it's most used.\n  root.FileDrop = global.FileDrop\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/_js/_lib/filedrop.js\n// module id = ./build/_js/_lib/filedrop.js\n// module chunks = main","// tipsy, facebook style tooltips for jquery\n// version 1.0.0a\n// (c) 2008-2010 jason frame [jason@onehackoranother.com]\n// released under the MIT license\n\n(function($) {\n    \n    function maybeCall(thing, ctx) {\n        return (typeof thing == 'function') ? (thing.call(ctx)) : thing;\n    };\n    \n    function isElementInDOM(ele) {\n      while (ele = ele.parentNode) {\n        if (ele == document) return true;\n      }\n      return false;\n    };\n    \n    function Tipsy(element, options) {\n        this.$element = $(element);\n        this.options = options;\n        this.enabled = true;\n        this.fixTitle();\n    };\n    \n    Tipsy.prototype = {\n        show: function() {\n            var title = this.getTitle();\n            if (title && this.enabled) {\n                var $tip = this.tip();\n                \n                $tip.find('.tipsy-inner')[this.options.html ? 'html' : 'text'](title);\n                $tip[0].className = 'tipsy'; // reset classname in case of dynamic gravity\n                $tip.remove().css({top: 0, left: 0, visibility: 'hidden', display: 'block'}).prependTo(document.body);\n                \n                var pos = $.extend({}, this.$element.offset(), {\n                    width: this.$element[0].offsetWidth,\n                    height: this.$element[0].offsetHeight\n                });\n                \n                var actualWidth = $tip[0].offsetWidth,\n                    actualHeight = $tip[0].offsetHeight,\n                    gravity = maybeCall(this.options.gravity, this.$element[0]);\n                \n                var tp;\n                switch (gravity.charAt(0)) {\n                    case 'n':\n                        tp = {top: pos.top + pos.height + this.options.offset, left: pos.left + pos.width / 2 - actualWidth / 2};\n                        break;\n                    case 's':\n                        tp = {top: pos.top - actualHeight - this.options.offset, left: pos.left + pos.width / 2 - actualWidth / 2};\n                        break;\n                    case 'e':\n                        tp = {top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left - actualWidth - this.options.offset};\n                        break;\n                    case 'w':\n                        tp = {top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left + pos.width + this.options.offset};\n                        break;\n                }\n                \n                if (gravity.length == 2) {\n                    if (gravity.charAt(1) == 'w') {\n                        tp.left = pos.left + pos.width / 2 - 15;\n                    } else {\n                        tp.left = pos.left + pos.width / 2 - actualWidth + 15;\n                    }\n                }\n                \n                $tip.css(tp).addClass('tipsy-' + gravity);\n                $tip.find('.tipsy-arrow')[0].className = 'tipsy-arrow tipsy-arrow-' + gravity.charAt(0);\n                if (this.options.className) {\n                    $tip.addClass(maybeCall(this.options.className, this.$element[0]));\n                }\n                \n                if (this.options.fade) {\n                    $tip.stop().css({opacity: 0, display: 'block', visibility: 'visible'}).animate({opacity: this.options.opacity});\n                } else {\n                    $tip.css({visibility: 'visible', opacity: this.options.opacity});\n                }\n            }\n        },\n        \n        hide: function() {\n            if (this.options.fade) {\n                this.tip().stop().fadeOut(function() { $(this).remove(); });\n            } else {\n                this.tip().remove();\n            }\n        },\n        \n        fixTitle: function() {\n            var $e = this.$element;\n            if ($e.attr('title') || typeof($e.attr('original-title')) != 'string') {\n                $e.attr('original-title', $e.attr('title') || '').removeAttr('title');\n            }\n        },\n        \n        getTitle: function() {\n            var title, $e = this.$element, o = this.options;\n            this.fixTitle();\n            var title, o = this.options;\n            if (typeof o.title == 'string') {\n                title = $e.attr(o.title == 'title' ? 'original-title' : o.title);\n            } else if (typeof o.title == 'function') {\n                title = o.title.call($e[0]);\n            }\n            title = ('' + title).replace(/(^\\s*|\\s*$)/, \"\");\n            return title || o.fallback;\n        },\n        \n        tip: function() {\n            if (!this.$tip) {\n                this.$tip = $('<div class=\"tipsy\"></div>').html('<div class=\"tipsy-arrow\"></div><div class=\"tipsy-inner\"></div>');\n                this.$tip.data('tipsy-pointee', this.$element[0]);\n            }\n            return this.$tip;\n        },\n        \n        validate: function() {\n            if (!this.$element[0].parentNode) {\n                this.hide();\n                this.$element = null;\n                this.options = null;\n            }\n        },\n        \n        enable: function() { this.enabled = true; },\n        disable: function() { this.enabled = false; },\n        toggleEnabled: function() { this.enabled = !this.enabled; }\n    };\n    \n    $.fn.tipsy = function(options) {\n        \n        if (options === true) {\n            return this.data('tipsy');\n        } else if (typeof options == 'string') {\n            var tipsy = this.data('tipsy');\n            if (tipsy) tipsy[options]();\n            return this;\n        }\n        \n        options = $.extend({}, $.fn.tipsy.defaults, options);\n        \n        function get(ele) {\n            var tipsy = $.data(ele, 'tipsy');\n            if (!tipsy) {\n                tipsy = new Tipsy(ele, $.fn.tipsy.elementOptions(ele, options));\n                $.data(ele, 'tipsy', tipsy);\n            }\n            return tipsy;\n        }\n        \n        function enter() {\n            var tipsy = get(this);\n            tipsy.hoverState = 'in';\n            if (options.delayIn == 0) {\n                tipsy.show();\n            } else {\n                tipsy.fixTitle();\n                setTimeout(function() { if (tipsy.hoverState == 'in') tipsy.show(); }, options.delayIn);\n            }\n        };\n        \n        function leave() {\n            var tipsy = get(this);\n            tipsy.hoverState = 'out';\n            if (options.delayOut == 0) {\n                tipsy.hide();\n            } else {\n                setTimeout(function() { if (tipsy.hoverState == 'out') tipsy.hide(); }, options.delayOut);\n            }\n        };\n        \n        if (!options.live) this.each(function() { get(this); });\n        \n        if (options.trigger != 'manual') {\n            var binder   = options.live ? 'live' : 'bind',\n                eventIn  = options.trigger == 'hover' ? 'mouseenter' : 'focus',\n                eventOut = options.trigger == 'hover' ? 'mouseleave' : 'blur';\n            this[binder](eventIn, enter)[binder](eventOut, leave);\n        }\n        \n        return this;\n        \n    };\n    \n    $.fn.tipsy.defaults = {\n        className: null,\n        delayIn: 0,\n        delayOut: 0,\n        fade: false,\n        fallback: '',\n        gravity: 'n',\n        html: false,\n        live: false,\n        offset: 0,\n        opacity: 0.8,\n        title: 'title',\n        trigger: 'hover'\n    };\n    \n    $.fn.tipsy.revalidate = function() {\n      $('.tipsy').each(function() {\n        var pointee = $.data(this, 'tipsy-pointee');\n        if (!pointee || !isElementInDOM(pointee)) {\n          $(this).remove();\n        }\n      });\n    };\n    \n    // Overwrite this method to provide options on a per-element basis.\n    // For example, you could store the gravity in a 'tipsy-gravity' attribute:\n    // return $.extend({}, options, {gravity: $(ele).attr('tipsy-gravity') || 'n' });\n    // (remember - do not modify 'options' in place!)\n    $.fn.tipsy.elementOptions = function(ele, options) {\n        return $.metadata ? $.extend({}, options, $(ele).metadata()) : options;\n    };\n    \n    $.fn.tipsy.autoNS = function() {\n        return $(this).offset().top > ($(document).scrollTop() + $(window).height() / 2) ? 's' : 'n';\n    };\n    \n    $.fn.tipsy.autoWE = function() {\n        return $(this).offset().left > ($(document).scrollLeft() + $(window).width() / 2) ? 'e' : 'w';\n    };\n    \n    /**\n     * yields a closure of the supplied parameters, producing a function that takes\n     * no arguments and is suitable for use as an autogravity function like so:\n     *\n     * @param margin (int) - distance from the viewable region edge that an\n     *        element should be before setting its tooltip's gravity to be away\n     *        from that edge.\n     * @param prefer (string, e.g. 'n', 'sw', 'w') - the direction to prefer\n     *        if there are no viewable region edges effecting the tooltip's\n     *        gravity. It will try to vary from this minimally, for example,\n     *        if 'sw' is preferred and an element is near the right viewable \n     *        region edge, but not the top edge, it will set the gravity for\n     *        that element's tooltip to be 'se', preserving the southern\n     *        component.\n     */\n     $.fn.tipsy.autoBounds = function(margin, prefer) {\n\t\treturn function() {\n\t\t\tvar dir = {ns: prefer[0], ew: (prefer.length > 1 ? prefer[1] : false)},\n\t\t\t    boundTop = $(document).scrollTop() + margin,\n\t\t\t    boundLeft = $(document).scrollLeft() + margin,\n\t\t\t    $this = $(this);\n\n\t\t\tif ($this.offset().top < boundTop) dir.ns = 'n';\n\t\t\tif ($this.offset().left < boundLeft) dir.ew = 'w';\n\t\t\tif ($(window).width() + $(document).scrollLeft() - $this.offset().left < margin) dir.ew = 'e';\n\t\t\tif ($(window).height() + $(document).scrollTop() - $this.offset().top < margin) dir.ns = 's';\n\n\t\t\treturn dir.ns + (dir.ew ? dir.ew : '');\n\t\t}\n\t};\n    \n})(jQuery);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/_js/_lib/jquery.tipsy.js\n// module id = ./build/_js/_lib/jquery.tipsy.js\n// module chunks = main","/*** IMPORTS FROM imports-loader ***/\n(function() {\n\n/*!\n * jQuery Form Validation\n * Copyright (C) 2015 RunningCoder.org\n * Licensed under the MIT license\n *\n * @author Tom Bertrand\n * @version 1.5.3 (2015-06-14)\n * @link http://www.runningcoder.org/jqueryvalidation/\n */\n;\n(function(window, document, $, undefined) {\n\n    window.Validation = {\n        form: [],\n        labels: {},\n        hasScrolled: false\n    };\n\n    if (typeof Object.preventExtensions !== \"function\") {\n        Object.preventExtensions = function(obj) {\n            return obj;\n        };\n    }\n    var _rules = {\n        NOTEMPTY: /\\S/,\n        INTEGER: /^\\d+$/,\n        NUMERIC: /^\\d+(?:[,\\s]\\d{3})*(?:\\.\\d+)?$/,\n        MIXED: /^[\\w\\s-]+$/,\n        NAME: /^['a-z\\s-]+$/i,\n        NOSPACE: /^(?!\\s)\\S*$/,\n        TRIM: /^[^\\s].*[^\\s]$/,\n        DATE: /^\\d{4}-\\d{2}-\\d{2}(\\s\\d{2}:\\d{2}(:\\d{2})?)?$/,\n        EMAIL: /^([^@]+?)@(([a-z0-9]-*)*[a-z0-9]+\\.)+([a-z0-9]+)$/i,\n        URL: /^(https?:\\/\\/)?((([a-z0-9]-*)*[a-z0-9]+\\.?)*([a-z0-9]+))(\\/[\\w?=\\.-]*)*$/,\n        PHONE: /^(\\()?\\d{3}(\\))?(-|\\s)?\\d{3}(-|\\s)\\d{4}$/,\n        OPTIONAL: /\\S/,\n        COMPARISON: /^\\s*([LV])\\s*([<>]=?|==|!=)\\s*([^<>=!]+?)\\s*$/\n    };\n\n    var _messages = {\n        'default': '$ contain error(s).',\n        'NOTEMPTY': '$ must not be empty.',\n        'INTEGER': '$ must be an integer.',\n        'NUMERIC': '$ must be numeric.',\n        'MIXED': '$ must be letters or numbers (no special characters).',\n        'NAME': '$ must not contain special characters.',\n        'NOSPACE': '$ must not contain spaces.',\n        'TRIM': '$ must not start or end with space character.',\n        'DATE': '$ is not a valid with format YYYY-MM-DD.',\n        'EMAIL': '$ is not valid.',\n        'URL': '$ is not valid.',\n        'PHONE': '$ is not a valid phone number.',\n        '<': '$ must be less than % characters.',\n        '<=': '$ must be less or equal to % characters.',\n        '>': '$ must be greater than % characters.',\n        '>=': '$ must be greater or equal to % characters.',\n        '==': '$ must be equal to %',\n        '!=': '$ must be different than %'\n    };\n\n    var _data = {\n        validation: 'data-validation',\n        validationMessage: 'data-validation-message',\n        regex: 'data-validation-regex',\n        regexReverse: 'data-validation-regex-reverse',\n        regexMessage: 'data-validation-regex-message',\n        group: 'data-validation-group',\n        label: 'data-validation-label',\n        errorList: 'data-error-list'\n    }\n\n    var _options = {\n        submit: {\n            settings: {\n                form: null,\n                display: \"inline\",\n                insertion: \"append\",\n                allErrors: false,\n                trigger: \"click\",\n                button: \"[type='submit']\",\n                errorClass: \"error\",\n                errorListClass: \"error-list\",\n                errorListContainer: null,\n                inputContainer: null,\n                clear: \"focusin\",\n                scrollToError: false\n            },\n            callback: {\n                onInit: null,\n                onValidate: null,\n                onError: null,\n                onBeforeSubmit: null,\n                onSubmit: null,\n                onAfterSubmit: null\n            }\n        },\n        dynamic: {\n            settings: {\n                trigger: null,\n                delay: 300\n            },\n            callback: {\n                onSuccess: null,\n                onError: null,\n                onComplete: null\n            }\n        },\n        rules: {},\n        messages: {},\n        labels: {},\n        debug: false\n    };\n\n    var _supported = {\n        submit: {\n            settings: {\n                display: [\"inline\", \"block\"],\n                insertion: [\"append\", \"prepend\"], //\"before\", \"insertBefore\", \"after\", \"insertAfter\"\n                allErrors: [true, false],\n                clear: [\"focusin\", \"keypress\", false],\n                trigger: [\n                    \"click\", \"dblclick\", \"focusout\",\n                    \"hover\", \"mousedown\", \"mouseenter\",\n                    \"mouseleave\", \"mousemove\", \"mouseout\",\n                    \"mouseover\", \"mouseup\", \"toggle\"\n                ]\n            }\n        },\n        dynamic: {\n            settings: {\n                trigger: [\"focusout\", \"keydown\", \"keypress\", \"keyup\"]\n            }\n        },\n        debug: [true, false]\n    };\n\n    var Validation = function(node, options) {\n\n        var errors = [],\n            messages = {},\n            formData = {},\n            delegateSuffix = \".vd\", // validation.delegate\n            resetSuffix = \".vr\"; // validation.resetError\n\n        window.Validation.hasScrolled = false;\n\n        function extendRules() {\n            options.rules = $.extend(\n                true, {},\n                _rules,\n                options.rules\n            );\n        }\n\n        function extendMessages() {\n            options.messages = $.extend(\n                true, {},\n                _messages,\n                options.messages\n            );\n        }\n\n        function extendOptions() {\n\n            if (!(options instanceof Object)) {\n                options = {};\n            }\n\n            var tpmOptions = Object.preventExtensions($.extend(true, {}, _options));\n\n            for (var method in options) {\n\n                if (!options.hasOwnProperty(method) || method === \"debug\") {\n                    continue;\n                }\n\n                if (~[\"labels\", \"messages\", \"rules\"].indexOf(method) && options[method] instanceof Object) {\n                    tpmOptions[method] = options[method];\n                    continue;\n                }\n\n                if (!_options[method] || !(options[method] instanceof Object)) {\n                    options.debug && window.Debug.log({\n                        'node': node,\n                        'function': 'extendOptions()',\n                        'arguments': '{' + method + ': ' + JSON.stringify(options[method]) + '}',\n                        'message': 'WARNING - ' + method + ' - invalid option'\n                    });\n\n                    continue;\n                }\n\n                for (var type in options[method]) {\n                    if (!options[method].hasOwnProperty(type)) {\n                        continue;\n                    }\n\n                    if (!_options[method][type] || !(options[method][type] instanceof Object)) {\n                        options.debug && window.Debug.log({\n                            'node': node,\n                            'function': 'extendOptions()',\n                            'arguments': '{' + type + ': ' + JSON.stringify(options[method][type]) + '}',\n                            'message': 'WARNING - ' + type + ' - invalid option'\n                        });\n\n                        continue;\n                    }\n\n                    for (var option in options[method][type]) {\n                        if (!options[method][type].hasOwnProperty(option)) {\n                            continue;\n                        }\n\n                        if (_supported[method] &&\n                            _supported[method][type] &&\n                            _supported[method][type][option] &&\n                            $.inArray(options[method][type][option], _supported[method][type][option]) === -1) {\n                            options.debug && window.Debug.log({\n                                'node': node,\n                                'function': 'extendOptions()',\n                                'arguments': '{' + option + ': ' + JSON.stringify(options[method][type][option]) + '}',\n                                'message': 'WARNING - ' + option.toString() + ': ' + JSON.stringify(options[method][type][option]) + ' - unsupported option'\n                            });\n\n                            delete options[method][type][option];\n                        }\n\n                    }\n                    if (tpmOptions[method] && tpmOptions[method][type]) {\n                        tpmOptions[method][type] = $.extend(Object.preventExtensions(tpmOptions[method][type]), options[method][type]);\n                    }\n                }\n            }\n            if (options.debug && $.inArray(options.debug, _supported.debug !== -1)) {\n                tpmOptions.debug = options.debug;\n            }\n            if (tpmOptions.dynamic.settings.trigger) {\n                if (tpmOptions.dynamic.settings.trigger === \"keypress\" && tpmOptions.submit.settings.clear === \"keypress\") {\n                    tpmOptions.dynamic.settings.trigger = \"keydown\";\n                }\n            }\n\n            options = tpmOptions;\n\n        }\n\n        function delegateDynamicValidation() {\n\n            if (!options.dynamic.settings.trigger) {\n                return false;\n            }\n            options.debug && window.Debug.log({\n                'node': node,\n                'function': 'delegateDynamicValidation()',\n                'message': 'OK - Dynamic Validation activated on ' + node.length + ' form(s)'\n            });\n\n            if (!node.find('[' + _data.validation + '],[' + _data.regex + ']')[0]) {\n                options.debug && window.Debug.log({\n                    'node': node,\n                    'function': 'delegateDynamicValidation()',\n                    'arguments': 'node.find([' + _data.validation + '],[' + _data.regex + '])',\n                    'message': 'ERROR - [' + _data.validation + '] not found'\n                });\n\n                return false;\n            }\n\n            var event = options.dynamic.settings.trigger + delegateSuffix;\n            if (options.dynamic.settings.trigger !== \"focusout\") {\n                event += \" change\" + delegateSuffix + \" paste\" + delegateSuffix;\n            }\n\n            $.each(\n                node.find('[' + _data.validation + '],[' + _data.regex + ']'),\n                function(index, input) {\n\n                    $(input).unbind(event).on(event, function(e) {\n\n                        if ($(this).is(':disabled')) {\n                            return false;\n                        }\n\n                        var input = this,\n                            keyCode = e.keyCode || null;\n\n                        _typeWatch(function() {\n\n                            if (!validateInput(input)) {\n\n                                displayOneError(input.name);\n                                _executeCallback(options.dynamic.callback.onError, [node, input, keyCode, errors[input.name]]);\n\n                            } else {\n\n                                _executeCallback(options.dynamic.callback.onSuccess, [node, input, keyCode]);\n\n                            }\n\n                            _executeCallback(options.dynamic.callback.onComplete, [node, input, keyCode]);\n\n                        }, options.dynamic.settings.delay);\n\n                    });\n                }\n            );\n        }\n\n        function delegateValidation() {\n\n            _executeCallback(options.submit.callback.onInit, [node]);\n\n            var event = options.submit.settings.trigger + '.vd';\n            options.debug && window.Debug.log({\n                'node': node,\n                'function': 'delegateValidation()',\n                'message': 'OK - Validation activated on ' + node.length + ' form(s)'\n            });\n\n            if (!node.find(options.submit.settings.button)[0]) {\n                options.debug && window.Debug.log({\n                    'node': node,\n                    'function': 'delegateValidation()',\n                    'arguments': '{button: ' + options.submit.settings.button + '}',\n                    'message': 'ERROR - node.find(\"' + options.submit.settings.button + '\") not found'\n                });\n\n                return false;\n\n            }\n\n            node.on(\"submit\", false);\n            node.find(options.submit.settings.button).off('.vd').on(event, function(e) {\n\n                e.preventDefault();\n\n                resetErrors();\n\n                _executeCallback(options.submit.callback.onValidate, [node]);\n\n                if (!validateForm()) {\n\n                    displayErrors();\n                    _executeCallback(options.submit.callback.onError, [node, errors, formData]);\n\n                } else {\n\n                    _executeCallback(options.submit.callback.onBeforeSubmit, [node]);\n\n                    (options.submit.callback.onSubmit) ? _executeCallback(options.submit.callback.onSubmit, [node, formData]): submitForm();\n\n                    _executeCallback(options.submit.callback.onAfterSubmit, [node]);\n\n                }\n                options.debug && window.Debug.print();\n\n                return false;\n\n            });\n\n        }\n\n        function validateForm() {\n\n            var isValid = true;\n\n            formData = {};\n\n\n            $.each(\n                node.find('input:not([type=\"submit\"]), select, textarea'),\n                function(index, input) {\n\n                    input = $(input);\n\n                    var value = _getInputValue(input[0]),\n                        inputName = input.attr('name');\n\n                    if (inputName) {\n                        formData[inputName] = value;\n                    }\n\n                    if (!input.attr('disabled') && (!!input.attr(_data.validation) || !!input.attr(_data.regex))) {\n                        if (!validateInput(input[0], value)) {\n                            isValid = false;\n                        }\n                    }\n                }\n            );\n\n            prepareFormData();\n\n            return isValid;\n\n        }\n\n        function prepareFormData() {\n\n            var data = {},\n                matches,\n                index;\n\n            for (var i in formData) {\n                if (!formData.hasOwnProperty(i)) continue;\n\n                index = 0;\n                matches = i.split(/\\[(.+?)]/g);\n\n                var tmpObject = {},\n                    tmpArray = [];\n\n                for (var k = matches.length - 1; k >= 0; k--) {\n                    if (matches[k] === \"\") {\n                        matches.splice(k, 1);\n                        continue;\n                    }\n\n                    if (tmpArray.length < 1) {\n                        tmpObject[matches[k]] = Number(formData[i]) || formData[i];\n                    } else {\n                        tmpObject = {};\n                        tmpObject[matches[k]] = tmpArray[tmpArray.length - 1];\n                    }\n                    tmpArray.push(tmpObject)\n\n                }\n\n                data = $.extend(true, data, tmpObject);\n\n            }\n\n            formData = data;\n\n        }\n\n        function validateInput(input, value) {\n\n            var inputName = $(input).attr('name'),\n                value = value || _getInputValue(input);\n\n            if (!inputName) {\n                options.debug && window.Debug.log({\n                    'node': node,\n                    'function': 'validateInput()',\n                    'arguments': '$(input).attr(\"name\")',\n                    'message': 'ERROR - Missing input [name]'\n                });\n\n                return false;\n            }\n\n            var matches = inputName.replace(/]$/, '').split(/]\\[|[[\\]]/g),\n                inputShortName = window.Validation.labels[inputName] ||\n                options.labels[inputName] ||\n                $(input).attr(_data.label) ||\n                matches[matches.length - 1],\n\n                validationArray = $(input).attr(_data.validation),\n                validationMessage = $(input).attr(_data.validationMessage),\n                validationRegex = $(input).attr(_data.regex),\n                validationRegexReverse = !($(input).attr(_data.regexReverse) === undefined),\n                validationRegexMessage = $(input).attr(_data.regexMessage),\n\n                validateOnce = false;\n\n            if (validationArray) {\n                validationArray = _api._splitValidation(validationArray);\n            }\n            if (validationArray instanceof Array && validationArray.length > 0) {\n                if ($.trim(value) === '' && ~validationArray.indexOf('OPTIONAL')) {\n                    return true;\n                }\n\n                $.each(validationArray, function(i, rule) {\n\n                    if (validateOnce === true) {\n                        return true;\n                    }\n\n                    try {\n\n                        validateRule(value, rule);\n\n                    } catch (error) {\n\n                        if (validationMessage || !options.submit.settings.allErrors) {\n                            validateOnce = true;\n                        }\n\n                        error[0] = validationMessage || error[0];\n\n                        registerError(inputName, error[0].replace('$', inputShortName).replace('%', error[1]));\n\n                    }\n\n                });\n\n            }\n            if (validationRegex) {\n\n                var rule = _buildRegexFromString(validationRegex);\n                if (!(rule instanceof RegExp)) {\n                    return true;\n                }\n\n                try {\n\n                    validateRule(value, rule, validationRegexReverse);\n\n                } catch (error) {\n\n                    error[0] = validationRegexMessage || error[0];\n\n                    registerError(inputName, error[0].replace('$', inputShortName));\n\n                }\n\n            }\n\n            return !errors[inputName] || errors[inputName] instanceof Array && errors[inputName].length === 0;\n\n        }\n\n        function validateRule(value, rule, reversed) {\n            if (rule instanceof RegExp) {\n                var isValid = rule.test(value);\n\n                if (reversed) {\n                    isValid = !isValid;\n                }\n\n                if (!isValid) {\n                    throw [options.messages['default'], ''];\n                }\n                return;\n            }\n\n            if (options.rules[rule]) {\n                if (!options.rules[rule].test(value)) {\n                    throw [options.messages[rule], ''];\n                }\n                return;\n            }\n            var comparison = rule.match(options.rules.COMPARISON);\n\n            if (!comparison || comparison.length !== 4) {\n                options.debug && window.Debug.log({\n                    'node': node,\n                    'function': 'validateRule()',\n                    'arguments': 'value: ' + value + ' rule: ' + rule,\n                    'message': 'WARNING - Invalid comparison'\n                });\n\n                return;\n            }\n\n            var type = comparison[1],\n                operator = comparison[2],\n                compared = comparison[3],\n                comparedValue;\n\n            switch (type) {\n                case \"L\":\n                    if (isNaN(compared)) {\n                        options.debug && window.Debug.log({\n                            'node': node,\n                            'function': 'validateRule()',\n                            'arguments': 'compare: ' + compared + ' rule: ' + rule,\n                            'message': 'WARNING - Invalid rule, \"L\" compare must be numeric'\n                        });\n\n                        return false;\n\n                    } else {\n\n                        if (!value || eval(value.length + operator + parseFloat(compared)) === false) {\n                            throw [options.messages[operator], compared];\n                        }\n\n                    }\n\n                    break;\n                case \"V\":\n                default:\n                    if (isNaN(compared)) {\n\n                        comparedValue = node.find('[name=\"' + compared + '\"]').val();\n                        if (!comparedValue) {\n                            options.debug && window.Debug.log({\n                                'node': node,\n                                'function': 'validateRule()',\n                                'arguments': 'compare: ' + compared + ' rule: ' + rule,\n                                'message': 'WARNING - Unable to find compared field [name=\"' + compared + '\"]'\n                            });\n\n                            return false;\n                        }\n\n                        if (!value || !eval('\"' + encodeURIComponent(value) + '\"' + operator + '\"' + encodeURIComponent(comparedValue) + '\"')) {\n                            throw [options.messages[operator].replace(' characters', ''), compared];\n                        }\n\n                    } else {\n                        if (!value || isNaN(value) || !eval(value + operator + parseFloat(compared))) {\n                            throw [options.messages[operator].replace(' characters', ''), compared];\n                        }\n\n                    }\n                    break;\n\n            }\n\n        }\n\n        function registerError(inputName, error) {\n\n            if (!errors[inputName]) {\n                errors[inputName] = [];\n            }\n\n            error = error.capitalize();\n\n            var hasError = false;\n            for (var i = 0; i < errors[inputName].length; i++) {\n                if (errors[inputName][i] === error) {\n                    hasError = true;\n                    break;\n                }\n            }\n\n            if (!hasError) {\n                errors[inputName].push(error);\n            }\n\n        }\n\n        function displayOneError(inputName) {\n\n            var input,\n                inputId,\n                errorContainer,\n                label,\n                html = '<div class=\"' + options.submit.settings.errorListClass + '\" ' + _data.errorList + '><ul></ul></div>',\n                group,\n                groupInput;\n\n            if (!errors.hasOwnProperty(inputName)) {\n                return false;\n            }\n\n            input = node.find('[name=\"' + inputName + '\"]');\n\n            label = null;\n\n            if (!input[0]) {\n                options.debug && window.Debug.log({\n                    'node': node,\n                    'function': 'displayOneError()',\n                    'arguments': '[name=\"' + inputName + '\"]',\n                    'message': 'ERROR - Unable to find input by name \"' + inputName + '\"'\n                });\n\n                return false;\n            }\n\n            group = input.attr(_data.group);\n\n            if (group) {\n\n                groupInput = node.find('[name=\"' + inputName + '\"]');\n                label = node.find('[id=\"' + group + '\"]');\n\n                if (label[0]) {\n                    label.addClass(options.submit.settings.errorClass);\n                    errorContainer = label;\n                }\n\n            } else {\n\n                input.addClass(options.submit.settings.errorClass);\n\n                if (options.submit.settings.inputContainer) {\n                    input.parentsUntil(node, options.submit.settings.inputContainer).addClass(options.submit.settings.errorClass);\n                }\n\n                inputId = input.attr('id');\n\n                if (inputId) {\n                    label = node.find('label[for=\"' + inputId + '\"]')[0];\n                }\n\n                if (!label) {\n                    label = input.parentsUntil(node, 'label')[0];\n                }\n\n                if (label) {\n                    label = $(label);\n                    label.addClass(options.submit.settings.errorClass);\n                }\n            }\n\n            if (options.submit.settings.display === 'inline') {\n                if (options.submit.settings.errorListContainer) {\n                    errorContainer = input.parentsUntil(node, options.submit.settings.errorListContainer);\n                } else {\n                    errorContainer = errorContainer || input.parent();\n                }\n            } else if (options.submit.settings.display === 'block') {\n                errorContainer = node;\n            }\n            if (options.submit.settings.display === 'inline' && errorContainer.find('[' + _data.errorList + ']')[0]) {\n                return false;\n            }\n\n            if (options.submit.settings.display === \"inline\" ||\n                (options.submit.settings.display === \"block\" && !errorContainer.find('[' + _data.errorList + ']')[0])\n            ) {\n                if (options.submit.settings.insertion === 'append') {\n                    errorContainer.append(html);\n                } else if (options.submit.settings.insertion === 'prepend') {\n                    errorContainer.prepend(html);\n                }\n            }\n\n            for (var i = 0; i < errors[inputName].length; i++) {\n                errorContainer.find('[' + _data.errorList + '] ul').append('<li>' + errors[inputName][i] + '</li>');\n            }\n\n            if (options.submit.settings.clear || options.dynamic.settings.trigger) {\n\n                if (group && groupInput) {\n                    input = groupInput;\n                }\n\n                var event = \"coucou\" + resetSuffix;\n                if (options.submit.settings.clear) {\n                    event += \" \" + options.submit.settings.clear + resetSuffix;\n                    if (~['radio', 'checkbox'].indexOf(input[0].type)) {\n                        event += \" change\" + resetSuffix;\n                    }\n                }\n                if (options.dynamic.settings.trigger) {\n                    event += \" \" + options.dynamic.settings.trigger + resetSuffix;\n                    if (options.dynamic.settings.trigger !== \"focusout\" && !~['radio', 'checkbox'].indexOf(input[0].type)) {\n                        event += \" change\" + resetSuffix + \" paste\" + resetSuffix;\n                    }\n                }\n\n                input.unbind(event).on(event, function(a, b, c, d, e) {\n\n                    return function() {\n                        if (e) {\n                            if ($(c).hasClass(options.submit.settings.errorClass)) {\n                                resetOneError(a, b, c, d, e);\n                            }\n                        } else if ($(b).hasClass(options.submit.settings.errorClass)) {\n                            resetOneError(a, b, c, d);\n                        }\n                    };\n\n                }(inputName, input, label, errorContainer, group));\n            }\n\n            if (options.submit.settings.scrollToError && !window.Validation.hasScrolled) {\n\n                window.Validation.hasScrolled = true;\n\n                var offset = parseFloat(options.submit.settings.scrollToError.offset) || 0,\n                    duration = parseFloat(options.submit.settings.scrollToError.duration) || 500,\n                    handle = (options.submit.settings.display === 'block') ? errorContainer : input;\n\n                $('html, body').animate({\n                    scrollTop: handle.offset().top + offset\n                }, duration);\n\n            }\n\n        }\n\n        function displayErrors() {\n\n            for (var inputName in errors) {\n                if (!errors.hasOwnProperty(inputName)) continue;\n                displayOneError(inputName);\n            }\n\n        }\n\n        function resetOneError(inputName, input, label, container, group) {\n\n            delete errors[inputName];\n\n            if (container) {\n\n                if (options.submit.settings.inputContainer) {\n                    (group ? label : input).parentsUntil(node, options.submit.settings.inputContainer).removeClass(options.submit.settings.errorClass);\n                }\n\n                label && label.removeClass(options.submit.settings.errorClass);\n\n                input.removeClass(options.submit.settings.errorClass);\n\n                if (options.submit.settings.display === 'inline') {\n                    container.find('[' + _data.errorList + ']').remove();\n                }\n\n            } else {\n\n                if (!input) {\n                    input = node.find('[name=\"' + inputName + '\"]');\n\n                    if (!input[0]) {\n                        options.debug && window.Debug.log({\n                            'node': node,\n                            'function': 'resetOneError()',\n                            'arguments': '[name=\"' + inputName + '\"]',\n                            'message': 'ERROR - Unable to find input by name \"' + inputName + '\"'\n                        });\n\n                        return false;\n                    }\n                }\n\n                input.trigger('coucou' + resetSuffix);\n            }\n\n        }\n\n        function resetErrors() {\n\n            errors = [];\n            window.Validation.hasScrolled = false;\n\n            node.find('[' + _data.errorList + ']').remove();\n            node.find('.' + options.submit.settings.errorClass).removeClass(options.submit.settings.errorClass);\n\n        }\n\n        function submitForm() {\n\n            node[0].submit()\n\n        }\n\n        function destroy() {\n\n            resetErrors();\n            node.find('[' + _data.validation + '],[' + _data.regex + ']').off(delegateSuffix + ' ' + resetSuffix);\n\n            node.find(options.submit.settings.button).off(delegateSuffix).on('click' + delegateSuffix, function() {\n                $(this).closest('form')[0].submit();\n            });\n\n            return true;\n\n        }\n\n        var _getInputValue = function(input) {\n\n            var value;\n            switch ($(input).attr('type')) {\n                case 'checkbox':\n                    value = ($(input).is(':checked')) ? 1 : '';\n                    break;\n                case 'radio':\n                    value = node.find('input[name=\"' + $(input).attr('name') + '\"]:checked').val() || '';\n                    break;\n                default:\n                    value = $(input).val();\n                    break;\n            }\n\n            return value;\n\n        };\n\n        var _typeWatch = (function() {\n            var timer = 0;\n            return function(callback, ms) {\n                clearTimeout(timer);\n                timer = setTimeout(callback, ms);\n            };\n        })();\n\n        var _executeCallback = function(callback, extraParams) {\n\n            if (!callback) {\n                return false;\n            }\n\n            var _callback;\n\n            if (typeof callback === \"function\") {\n\n                _callback = callback;\n\n            } else if (typeof callback === \"string\" || callback instanceof Array) {\n\n                _callback = window;\n\n                if (typeof callback === \"string\") {\n                    callback = [callback, []];\n                }\n\n                var _exploded = callback[0].split('.'),\n                    _params = callback[1],\n                    _isValid = true,\n                    _splitIndex = 0;\n\n                while (_splitIndex < _exploded.length) {\n\n                    if (typeof _callback !== 'undefined') {\n                        _callback = _callback[_exploded[_splitIndex++]];\n                    } else {\n                        _isValid = false;\n                        break;\n                    }\n                }\n\n                if (!_isValid || typeof _callback !== \"function\") {\n                    options.debug && window.Debug.log({\n                        'node': node,\n                        'function': '_executeCallback()',\n                        'arguments': JSON.stringify(callback),\n                        'message': 'WARNING - Invalid callback function\"'\n                    });\n\n                    return false;\n                }\n\n            }\n\n            _callback.apply(this, $.merge(_params || [], (extraParams) ? extraParams : []));\n            return true;\n\n        };\n\n        this.__construct = function() {\n\n            extendOptions();\n            extendRules();\n            extendMessages();\n\n            delegateDynamicValidation();\n            delegateValidation();\n            options.debug && window.Debug.print();\n\n        }();\n\n        return {\n\n            registerError: registerError,\n\n            displayOneError: displayOneError,\n\n            displayErrors: displayErrors,\n\n            resetOneError: resetOneError,\n\n            resetErrors: resetErrors,\n\n            destroy: destroy\n\n        };\n\n    };\n\n    $.fn.validate = $.validate = function(options) {\n\n        return _api.validate(this, options);\n\n    };\n\n    $.fn.addValidation = function(validation) {\n\n        return _api.addValidation(this, validation);\n\n    };\n\n    $.fn.removeValidation = function(validation) {\n\n        return _api.removeValidation(this, validation);\n\n    };\n\n    $.fn.addError = function(error) {\n\n        return _api.addError(this, error);\n\n    };\n\n    $.fn.removeError = function(error) {\n\n        return _api.removeError(this, error);\n\n    };\n\n    $.fn.alterValidationRules = $.alterValidationRules = function(rules) {\n\n        if (!(rules instanceof Array)) {\n            rules = [rules];\n        }\n\n        for (var i = 0; i < rules.length; i++) {\n            _api.alterValidationRules(rules[i]);\n        }\n\n    };\n\n    var _api = {\n\n        _formatValidation: function(validation) {\n\n            validation = validation.toString().replace(/\\s/g, '');\n\n            if (validation.charAt(0) === \"[\" && validation.charAt(validation.length - 1) === \"]\") {\n                validation = validation.replace(/^\\[|]$/g, '');\n            }\n\n            return validation;\n\n        },\n\n        _splitValidation: function(validation) {\n\n            var validationArray = this._formatValidation(validation).split(','),\n                oneValidation;\n\n            for (var i = 0; i < validationArray.length; i++) {\n                oneValidation = validationArray[i];\n                if (/^[a-z]+$/i.test(oneValidation)) {\n                    validationArray[i] = oneValidation.toUpperCase();\n                }\n            }\n\n            return validationArray;\n        },\n\n        _joinValidation: function(validation) {\n\n            return '[' + validation.join(', ') + ']';\n\n        },\n\n        validate: function(node, options) {\n\n            if (typeof node === \"function\") {\n\n                if (!options.submit.settings.form) {\n                    window.Debug.log({\n                        'node': node,\n                        'function': '$.validate()',\n                        'arguments': '',\n                        'message': 'Undefined property \"options.submit.settings.form - Validation dropped'\n                    });\n\n                    window.Debug.print();\n\n                    return;\n                }\n\n                node = $(options.submit.settings.form);\n\n                if (!node[0] || node[0].nodeName.toLowerCase() !== \"form\") {\n                    window.Debug.log({\n                        'function': '$.validate()',\n                        'arguments': options.submit.settings.form,\n                        'message': 'Unable to find jQuery form element - Validation dropped'\n                    });\n\n                    window.Debug.print();\n\n                    return;\n                }\n\n            } else if (typeof node[0] === 'undefined') {\n                window.Debug.log({\n                    'node': node,\n                    'function': '$.validate()',\n                    'arguments': '$(\"' + node.selector + '\").validate()',\n                    'message': 'Unable to find jQuery form element - Validation dropped'\n                });\n\n                window.Debug.print();\n\n                return;\n            }\n\n            if (options === \"destroy\") {\n\n                if (!window.Validation.form[node.selector]) {\n                    window.Debug.log({\n                        'node': node,\n                        'function': '$.validate(\"destroy\")',\n                        'arguments': '',\n                        'message': 'Unable to destroy \"' + node.selector + '\", perhaps it\\'s already destroyed?'\n                    });\n\n                    window.Debug.print();\n\n                    return;\n                }\n\n                window.Validation.form[node.selector].destroy();\n\n                return;\n\n            }\n\n            return node.each(function() {\n                window.Validation.form[node.selector] = new Validation($(this), options);\n            });\n\n        },\n\n        addValidation: function(node, validation) {\n\n            var self = this;\n\n            validation = self._splitValidation(validation);\n\n            if (!validation) {\n                return false;\n            }\n\n            return node.each(function() {\n\n                var $this = $(this),\n                    validationData = $this.attr(_data.validation),\n                    validationArray = (validationData && validationData.length) ? self._splitValidation(validationData) : [],\n                    oneValidation;\n\n                for (var i = 0; i < validation.length; i++) {\n\n                    oneValidation = self._formatValidation(validation[i]);\n\n                    if ($.inArray(oneValidation, validationArray) === -1) {\n                        validationArray.push(oneValidation);\n                    }\n                }\n\n                if (validationArray.length) {\n                    $this.attr(_data.validation, self._joinValidation(validationArray));\n                }\n\n            });\n\n        },\n\n        removeValidation: function(node, validation) {\n\n            var self = this;\n\n            validation = self._splitValidation(validation);\n            if (!validation) {\n                return false;\n            }\n\n            return node.each(function() {\n\n                var $this = $(this),\n                    validationData = $this.attr(_data.validation),\n                    validationArray = (validationData && validationData.length) ? self._splitValidation(validationData) : [],\n                    oneValidation,\n                    validationIndex;\n\n                if (!validationArray.length) {\n                    $this.removeAttr(_data.validation);\n                    return true;\n                }\n\n                for (var i = 0; i < validation.length; i++) {\n                    oneValidation = self._formatValidation(validation[i]);\n                    validationIndex = $.inArray(oneValidation, validationArray);\n                    if (validationIndex !== -1) {\n                        validationArray.splice(validationIndex, 1);\n                    }\n\n                }\n\n                if (!validationArray.length) {\n                    $this.removeAttr(_data.validation);\n                    return true;\n                }\n\n                $this.attr(_data.validation, self._joinValidation(validationArray));\n\n            });\n\n        },\n\n        addError: function(node, error) {\n\n            if (!window.Validation.form[node.selector]) {\n                window.Debug.log({\n                    'node': node,\n                    'function': '$.addError()',\n                    'arguments': 'window.Validation.form[' + node.selector + ']',\n                    'message': 'ERROR - Invalid node selector'\n                });\n\n                window.Debug.print();\n\n                return false;\n            }\n\n            if (typeof error !== \"object\" || Object.prototype.toString.call(error) !== \"[object Object]\") {\n                window.Debug.log({\n                    'node': node,\n                    'function': '$.addError()',\n                    'arguments': 'window.Validation.form[' + node.selector + ']',\n                    'message': 'ERROR - Invalid argument, must be type object'\n                });\n\n                window.Debug.print();\n\n                return false;\n            }\n\n            var input,\n                onlyOnce = true;\n            for (var inputName in error) {\n\n                if (!error.hasOwnProperty(inputName)) {\n                    continue;\n                }\n\n                if (!(error[inputName] instanceof Array)) {\n                    error[inputName] = [error[inputName]];\n                }\n\n                input = $(node.selector).find('[name=\"' + inputName + '\"]');\n                if (!input[0]) {\n                    window.Debug.log({\n                        'node': node,\n                        'function': '$.addError()',\n                        'arguments': inputName,\n                        'message': 'ERROR - Unable to find ' + '$(' + node.selector + ').find(\"[name=\"' + inputName + '\"]\")'\n                    });\n\n                    window.Debug.print();\n\n                    continue;\n                }\n\n                if (onlyOnce) {\n                    window.Validation.hasScrolled = false;\n                    onlyOnce = false;\n                }\n\n                window.Validation.form[node.selector].resetOneError(inputName, input);\n\n                for (var i = 0; i < error[inputName].length; i++) {\n\n                    if (typeof error[inputName][i] !== \"string\") {\n                        window.Debug.log({\n                            'node': node,\n                            'function': '$.addError()',\n                            'arguments': error[inputName][i],\n                            'message': 'ERROR - Invalid error object property - Accepted format: {\"inputName\": \"errorString\"} or {\"inputName\": [\"errorString\", \"errorString\"]}'\n                        });\n\n                        window.Debug.print();\n\n                        continue;\n                    }\n\n                    window.Validation.form[node.selector].registerError(inputName, error[inputName][i]);\n\n                }\n\n                window.Validation.form[node.selector].displayOneError(inputName);\n\n            }\n\n        },\n\n        removeError: function(node, inputName) {\n\n            if (!window.Validation.form[node.selector]) {\n                window.Debug.log({\n                    'node': node,\n                    'function': '$.removeError()',\n                    'arguments': 'window.Validation.form[' + node.selector + ']',\n                    'message': 'ERROR - Invalid node selector'\n                });\n\n                window.Debug.print();\n\n                return false;\n            }\n\n            if (!inputName) {\n                window.Validation.form[node.selector].resetErrors();\n                return false;\n            }\n\n            if (typeof inputName === \"object\" && Object.prototype.toString.call(inputName) !== \"[object Array]\") {\n                window.Debug.log({\n                    'node': node,\n                    'function': '$.removeError()',\n                    'arguments': inputName,\n                    'message': 'ERROR - Invalid inputName, must be type String or Array'\n                });\n\n                window.Debug.print();\n\n                return false;\n            }\n\n            if (!(inputName instanceof Array)) {\n                inputName = [inputName];\n            }\n\n            var input;\n            for (var i = 0; i < inputName.length; i++) {\n\n                input = node.find('[name=\"' + inputName[i] + '\"]');\n                if (!input[0]) {\n                    window.Debug.log({\n                        'node': node,\n                        'function': '$.removeError()',\n                        'arguments': inputName[i],\n                        'message': 'ERROR - Unable to find ' + '$(' + node.selector + ').find(\"[name=\"' + inputName[i] + '\"]\")'\n                    });\n\n                    window.Debug.print();\n\n                    continue;\n                }\n\n                window.Validation.form[node.selector].resetOneError(inputName[i], input);\n\n            }\n\n        },\n\n        alterValidationRules: function(ruleObj) {\n\n            if (!ruleObj.rule || (!ruleObj.regex && !ruleObj.message)) {\n                window.Debug.log({\n                    'function': '$.alterValidationRules()',\n                    'message': 'ERROR - Missing one or multiple parameter(s) {rule, regex, message}'\n                });\n                window.Debug.print();\n                return false;\n            }\n\n            ruleObj.rule = ruleObj.rule.toUpperCase();\n\n            if (ruleObj.regex) {\n\n                var regex = _buildRegexFromString(ruleObj.regex);\n\n                if (!(regex instanceof RegExp)) {\n                    window.Debug.log({\n                        'function': '$.alterValidationRules(rule)',\n                        'arguments': regex.toString(),\n                        'message': 'ERROR - Invalid rule'\n                    });\n                    window.Debug.print();\n                    return false;\n                }\n\n                _rules[ruleObj.rule] = regex;\n            }\n\n            if (ruleObj.message) {\n                _messages[ruleObj.rule] = ruleObj.message;\n            }\n\n            return true;\n        }\n\n    };\n\n    function _buildRegexFromString(regex) {\n\n        if (!regex || (typeof regex !== \"string\" && !(regex instanceof RegExp))) {\n            _regexDebug();\n            return false;\n        }\n\n        if (typeof regex !== 'string') {\n            regex = regex.toString();\n        }\n\n        var separator = regex.charAt(0),\n            index = regex.length - 1,\n            pattern,\n            modifier,\n            rule;\n\n        while (index > 0) {\n            if (/[gimsxeU]/.test(regex.charAt(index))) {\n                index--;\n            } else {\n                break;\n            }\n        }\n\n        if (regex.charAt(index) !== separator) {\n            separator = null;\n        }\n\n        if (separator && index !== regex.length - 1) {\n            modifier = regex.substr(index + 1, regex.length - 1);\n        }\n\n        if (separator) {\n            pattern = regex.substr(1, index - 1);\n        } else {\n            pattern = regex;\n        }\n\n        try {\n            rule = new RegExp(pattern, modifier);\n        } catch (error) {\n            _regexDebug();\n            return false;\n        }\n\n        return rule;\n\n        function _regexDebug() {\n            window.Debug.log({\n                'function': '_buildRegexFromString()',\n                'arguments': '{pattern: {' + (pattern || '') + '}, modifier: {' + (modifier || '') + '}',\n                'message': 'WARNING - Invalid regex given: ' + regex\n            });\n            window.Debug.print();\n        }\n\n    }\n    window.Debug = {\n\n        table: {},\n        log: function(debugObject) {\n\n            if (!debugObject.message || typeof debugObject.message !== \"string\") {\n                return false;\n            }\n\n            this.table[debugObject.message] = $.extend(\n                Object.preventExtensions({\n                    'node': '',\n                    'function': '',\n                    'arguments': ''\n                }), debugObject\n            );\n\n        },\n        print: function() {\n\n            if ($.isEmptyObject(this.table)) {\n                return false;\n            }\n\n            if (console.group !== undefined || console.table !== undefined) {\n\n                console.groupCollapsed('--- jQuery Form Validation Debug ---');\n\n                if (console.table) {\n                    console.table(this.table);\n                } else {\n                    $.each(this.table, function(index, data) {\n                        console.log(data['Name'] + ': ' + data['Execution Time'] + 'ms');\n                    });\n                }\n\n                console.groupEnd();\n\n            } else {\n                console.log('Debug is not available on your current browser, try the most recent version of Chrome or Firefox.');\n            }\n\n            this.table = {};\n\n        }\n\n    };\n\n    String.prototype.capitalize = function() {\n        return this.charAt(0).toUpperCase() + this.slice(1);\n    };\n\n    if (!Array.prototype.indexOf) {\n        Array.prototype.indexOf = function(elt) {\n            var len = this.length >>> 0;\n\n            var from = Number(arguments[1]) || 0;\n            from = (from < 0) ? Math.ceil(from) : Math.floor(from);\n            if (from < 0)\n                from += len;\n\n            for (; from < len; from++) {\n                if (from in this &&\n                    this[from] === elt)\n                    return from;\n            }\n            return -1;\n        };\n    }\n    if (!JSON && !JSON.stringify) {\n        JSON.stringify = function(obj) {\n            var t = typeof(obj);\n            if (t !== \"object\" || obj === null) {\n                if (t === \"string\") {\n                    obj = '\"' + obj + '\"';\n                }\n                return String(obj);\n            } else {\n                var n, v, json = [],\n                    arr = (obj && obj.constructor === Array);\n                for (n in obj) {\n                    if (true) {\n                        v = obj[n];\n                        t = typeof(v);\n                        if (t === \"string\") {\n                            v = '\"' + v + '\"';\n                        } else if (t === \"object\" && v !== null) {\n                            v = JSON.stringify(v);\n                        }\n                        json.push((arr ? \"\" : '\"' + n + '\": ') + String(v));\n                    }\n                }\n                return (arr ? \"[\" : \"{\") + String(json) + (arr ? \"]\" : \"}\");\n            }\n        };\n    }\n\n}(window, document, window.jQuery));\n\n}.call(window));\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/_js/_lib/jquery.validation.js\n// module id = ./build/_js/_lib/jquery.validation.js\n// module chunks = main","/*!\n * Cropper v3.0.0\n * https://github.com/fengyuanchen/cropper\n *\n * Copyright (c) 2017 Fengyuan Chen\n * Released under the MIT license\n *\n * Date: 2017-09-03T13:13:53.439Z\n */\n\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(require('jquery')) :\n\ttypeof define === 'function' && define.amd ? define(['jquery'], factory) :\n\t(factory(global.jQuery));\n}(this, (function ($) { 'use strict';\n\n$ = $ && $.hasOwnProperty('default') ? $['default'] : $;\n\nvar DEFAULTS = {\n  // Define the view mode of the cropper\n  viewMode: 0, // 0, 1, 2, 3\n\n  // Define the dragging mode of the cropper\n  dragMode: 'crop', // 'crop', 'move' or 'none'\n\n  // Define the aspect ratio of the crop box\n  aspectRatio: NaN,\n\n  // An object with the previous cropping result data\n  data: null,\n\n  // A selector for adding extra containers to preview\n  preview: '',\n\n  // Re-render the cropper when resize the window\n  responsive: true,\n\n  // Restore the cropped area after resize the window\n  restore: true,\n\n  // Check if the current image is a cross-origin image\n  checkCrossOrigin: true,\n\n  // Check the current image's Exif Orientation information\n  checkOrientation: true,\n\n  // Show the black modal\n  modal: true,\n\n  // Show the dashed lines for guiding\n  guides: true,\n\n  // Show the center indicator for guiding\n  center: true,\n\n  // Show the white modal to highlight the crop box\n  highlight: true,\n\n  // Show the grid background\n  background: true,\n\n  // Enable to crop the image automatically when initialize\n  autoCrop: true,\n\n  // Define the percentage of automatic cropping area when initializes\n  autoCropArea: 0.8,\n\n  // Enable to move the image\n  movable: true,\n\n  // Enable to rotate the image\n  rotatable: true,\n\n  // Enable to scale the image\n  scalable: true,\n\n  // Enable to zoom the image\n  zoomable: true,\n\n  // Enable to zoom the image by dragging touch\n  zoomOnTouch: true,\n\n  // Enable to zoom the image by wheeling mouse\n  zoomOnWheel: true,\n\n  // Define zoom ratio when zoom the image by wheeling mouse\n  wheelZoomRatio: 0.1,\n\n  // Enable to move the crop box\n  cropBoxMovable: true,\n\n  // Enable to resize the crop box\n  cropBoxResizable: true,\n\n  // Toggle drag mode between \"crop\" and \"move\" when click twice on the cropper\n  toggleDragModeOnDblclick: true,\n\n  // Size limitation\n  minCanvasWidth: 0,\n  minCanvasHeight: 0,\n  minCropBoxWidth: 0,\n  minCropBoxHeight: 0,\n  minContainerWidth: 200,\n  minContainerHeight: 100,\n\n  // Shortcuts of events\n  ready: null,\n  cropstart: null,\n  cropmove: null,\n  cropend: null,\n  crop: null,\n  zoom: null\n};\n\nvar TEMPLATE = '<div class=\"cropper-container\">' + '<div class=\"cropper-wrap-box\">' + '<div class=\"cropper-canvas\"></div>' + '</div>' + '<div class=\"cropper-drag-box\"></div>' + '<div class=\"cropper-crop-box\">' + '<span class=\"cropper-view-box\"></span>' + '<span class=\"cropper-dashed dashed-h\"></span>' + '<span class=\"cropper-dashed dashed-v\"></span>' + '<span class=\"cropper-center\"></span>' + '<span class=\"cropper-face\"></span>' + '<span class=\"cropper-line line-e\" data-action=\"e\"></span>' + '<span class=\"cropper-line line-n\" data-action=\"n\"></span>' + '<span class=\"cropper-line line-w\" data-action=\"w\"></span>' + '<span class=\"cropper-line line-s\" data-action=\"s\"></span>' + '<span class=\"cropper-point point-e\" data-action=\"e\"></span>' + '<span class=\"cropper-point point-n\" data-action=\"n\"></span>' + '<span class=\"cropper-point point-w\" data-action=\"w\"></span>' + '<span class=\"cropper-point point-s\" data-action=\"s\"></span>' + '<span class=\"cropper-point point-ne\" data-action=\"ne\"></span>' + '<span class=\"cropper-point point-nw\" data-action=\"nw\"></span>' + '<span class=\"cropper-point point-sw\" data-action=\"sw\"></span>' + '<span class=\"cropper-point point-se\" data-action=\"se\"></span>' + '</div>' + '</div>';\n\nvar REGEXP_DATA_URL_HEAD = /^data:.*,/;\nvar REGEXP_USERAGENT = /(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i;\nvar navigator = typeof window !== 'undefined' ? window.navigator : null;\nvar IS_SAFARI_OR_UIWEBVIEW = navigator && REGEXP_USERAGENT.test(navigator.userAgent);\nvar fromCharCode = String.fromCharCode;\n\nfunction isNumber(n) {\n  return typeof n === 'number' && !isNaN(n);\n}\n\nfunction isUndefined(n) {\n  return typeof n === 'undefined';\n}\n\nfunction toArray(obj, offset) {\n  var args = [];\n\n  // This is necessary for IE8\n  if (isNumber(offset)) {\n    args.push(offset);\n  }\n\n  return args.slice.apply(obj, args);\n}\n\n// Custom proxy to avoid jQuery's guid\nfunction proxy(fn, context) {\n  for (var _len = arguments.length, args = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n    args[_key - 2] = arguments[_key];\n  }\n\n  return function () {\n    for (var _len2 = arguments.length, args2 = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args2[_key2] = arguments[_key2];\n    }\n\n    return fn.apply(context, args.concat(toArray(args2)));\n  };\n}\n\nfunction objectKeys(obj) {\n  var keys = [];\n\n  $.each(obj, function (key) {\n    keys.push(key);\n  });\n\n  return keys;\n}\n\nfunction isCrossOriginURL(url) {\n  var parts = url.match(/^(https?:)\\/\\/([^:/?#]+):?(\\d*)/i);\n\n  return parts && (parts[1] !== location.protocol || parts[2] !== location.hostname || parts[3] !== location.port);\n}\n\nfunction addTimestamp(url) {\n  var timestamp = 'timestamp=' + new Date().getTime();\n\n  return url + (url.indexOf('?') === -1 ? '?' : '&') + timestamp;\n}\n\nfunction getImageSize(image, callback) {\n  // Modern browsers (ignore Safari, #120 & #509)\n  if (image.naturalWidth && !IS_SAFARI_OR_UIWEBVIEW) {\n    callback(image.naturalWidth, image.naturalHeight);\n    return;\n  }\n\n  // IE8: Don't use `new Image()` here (#319)\n  var newImage = document.createElement('img');\n\n  newImage.onload = function load() {\n    callback(this.width, this.height);\n  };\n\n  newImage.src = image.src;\n}\n\nfunction getTransform(options) {\n  var transforms = [];\n  var translateX = options.translateX;\n  var translateY = options.translateY;\n  var rotate = options.rotate;\n  var scaleX = options.scaleX;\n  var scaleY = options.scaleY;\n\n  if (isNumber(translateX) && translateX !== 0) {\n    transforms.push('translateX(' + translateX + 'px)');\n  }\n\n  if (isNumber(translateY) && translateY !== 0) {\n    transforms.push('translateY(' + translateY + 'px)');\n  }\n\n  // Rotate should come first before scale to match orientation transform\n  if (isNumber(rotate) && rotate !== 0) {\n    transforms.push('rotate(' + rotate + 'deg)');\n  }\n\n  if (isNumber(scaleX) && scaleX !== 1) {\n    transforms.push('scaleX(' + scaleX + ')');\n  }\n\n  if (isNumber(scaleY) && scaleY !== 1) {\n    transforms.push('scaleY(' + scaleY + ')');\n  }\n\n  return transforms.length ? transforms.join(' ') : 'none';\n}\n\nfunction getRotatedSizes(data, isReversed) {\n  var deg = Math.abs(data.degree) % 180;\n  var arc = (deg > 90 ? 180 - deg : deg) * Math.PI / 180;\n  var sinArc = Math.sin(arc);\n  var cosArc = Math.cos(arc);\n  var width = data.width;\n  var height = data.height;\n  var aspectRatio = data.aspectRatio;\n  var newWidth = void 0;\n  var newHeight = void 0;\n\n  if (!isReversed) {\n    newWidth = width * cosArc + height * sinArc;\n    newHeight = width * sinArc + height * cosArc;\n  } else {\n    newWidth = width / (cosArc + sinArc / aspectRatio);\n    newHeight = newWidth / aspectRatio;\n  }\n\n  return {\n    width: newWidth,\n    height: newHeight\n  };\n}\n\nfunction getSourceCanvas(image, data, options) {\n  var canvas = $('<canvas>')[0];\n  var context = canvas.getContext('2d');\n  var dstX = 0;\n  var dstY = 0;\n  var dstWidth = data.naturalWidth;\n  var dstHeight = data.naturalHeight;\n  var rotate = data.rotate;\n  var scaleX = data.scaleX;\n  var scaleY = data.scaleY;\n  var scalable = isNumber(scaleX) && isNumber(scaleY) && (scaleX !== 1 || scaleY !== 1);\n  var rotatable = isNumber(rotate) && rotate !== 0;\n  var advanced = rotatable || scalable;\n  var canvasWidth = dstWidth * Math.abs(scaleX || 1);\n  var canvasHeight = dstHeight * Math.abs(scaleY || 1);\n  var translateX = void 0;\n  var translateY = void 0;\n  var rotated = void 0;\n\n  if (scalable) {\n    translateX = canvasWidth / 2;\n    translateY = canvasHeight / 2;\n  }\n\n  if (rotatable) {\n    rotated = getRotatedSizes({\n      width: canvasWidth,\n      height: canvasHeight,\n      degree: rotate\n    });\n\n    canvasWidth = rotated.width;\n    canvasHeight = rotated.height;\n    translateX = canvasWidth / 2;\n    translateY = canvasHeight / 2;\n  }\n\n  canvas.width = canvasWidth;\n  canvas.height = canvasHeight;\n\n  if (options.fillColor) {\n    context.fillStyle = options.fillColor;\n    context.fillRect(0, 0, canvasWidth, canvasHeight);\n  }\n\n  if (advanced) {\n    dstX = -dstWidth / 2;\n    dstY = -dstHeight / 2;\n\n    context.save();\n    context.translate(translateX, translateY);\n  }\n\n  // Rotate should come first before scale as in the \"getTransform\" function\n  if (rotatable) {\n    context.rotate(rotate * Math.PI / 180);\n  }\n\n  if (scalable) {\n    context.scale(scaleX, scaleY);\n  }\n\n  context.imageSmoothingEnabled = !!options.imageSmoothingEnabled;\n\n  if (options.imageSmoothingQuality) {\n    context.imageSmoothingQuality = options.imageSmoothingQuality;\n  }\n\n  context.drawImage(image, Math.floor(dstX), Math.floor(dstY), Math.floor(dstWidth), Math.floor(dstHeight));\n\n  if (advanced) {\n    context.restore();\n  }\n\n  return canvas;\n}\n\nfunction getStringFromCharCode(dataView, start, length) {\n  var str = '';\n  var i = void 0;\n\n  for (i = start, length += start; i < length; i += 1) {\n    str += fromCharCode(dataView.getUint8(i));\n  }\n\n  return str;\n}\n\nfunction getOrientation(arrayBuffer) {\n  var dataView = new DataView(arrayBuffer);\n  var length = dataView.byteLength;\n  var orientation = void 0;\n  var exifIDCode = void 0;\n  var tiffOffset = void 0;\n  var firstIFDOffset = void 0;\n  var littleEndian = void 0;\n  var endianness = void 0;\n  var app1Start = void 0;\n  var ifdStart = void 0;\n  var offset = void 0;\n  var i = void 0;\n\n  // Only handle JPEG image (start by 0xFFD8)\n  if (dataView.getUint8(0) === 0xFF && dataView.getUint8(1) === 0xD8) {\n    offset = 2;\n\n    while (offset < length) {\n      if (dataView.getUint8(offset) === 0xFF && dataView.getUint8(offset + 1) === 0xE1) {\n        app1Start = offset;\n        break;\n      }\n\n      offset += 1;\n    }\n  }\n\n  if (app1Start) {\n    exifIDCode = app1Start + 4;\n    tiffOffset = app1Start + 10;\n\n    if (getStringFromCharCode(dataView, exifIDCode, 4) === 'Exif') {\n      endianness = dataView.getUint16(tiffOffset);\n      littleEndian = endianness === 0x4949;\n\n      if (littleEndian || endianness === 0x4D4D /* bigEndian */) {\n          if (dataView.getUint16(tiffOffset + 2, littleEndian) === 0x002A) {\n            firstIFDOffset = dataView.getUint32(tiffOffset + 4, littleEndian);\n\n            if (firstIFDOffset >= 0x00000008) {\n              ifdStart = tiffOffset + firstIFDOffset;\n            }\n          }\n        }\n    }\n  }\n\n  if (ifdStart) {\n    length = dataView.getUint16(ifdStart, littleEndian);\n\n    for (i = 0; i < length; i += 1) {\n      offset = ifdStart + i * 12 + 2;\n\n      if (dataView.getUint16(offset, littleEndian) === 0x0112 /* Orientation */) {\n          // 8 is the offset of the current tag's value\n          offset += 8;\n\n          // Get the original orientation value\n          orientation = dataView.getUint16(offset, littleEndian);\n\n          // Override the orientation with its default value for Safari (#120)\n          if (IS_SAFARI_OR_UIWEBVIEW) {\n            dataView.setUint16(offset, 1, littleEndian);\n          }\n\n          break;\n        }\n    }\n  }\n\n  return orientation;\n}\n\nfunction dataURLToArrayBuffer(dataURL) {\n  var base64 = dataURL.replace(REGEXP_DATA_URL_HEAD, '');\n  var binary = atob(base64);\n  var length = binary.length;\n  var arrayBuffer = new ArrayBuffer(length);\n  var dataView = new Uint8Array(arrayBuffer);\n  var i = void 0;\n\n  for (i = 0; i < length; i += 1) {\n    dataView[i] = binary.charCodeAt(i);\n  }\n\n  return arrayBuffer;\n}\n\n// Only available for JPEG image\nfunction arrayBufferToDataURL(arrayBuffer) {\n  var dataView = new Uint8Array(arrayBuffer);\n  var length = dataView.length;\n  var base64 = '';\n  var i = void 0;\n\n  for (i = 0; i < length; i += 1) {\n    base64 += fromCharCode(dataView[i]);\n  }\n\n  return 'data:image/jpeg;base64,' + btoa(base64);\n}\n\nvar render = {\n  render: function render() {\n    var self = this;\n\n    self.initContainer();\n    self.initCanvas();\n    self.initCropBox();\n\n    self.renderCanvas();\n\n    if (self.cropped) {\n      self.renderCropBox();\n    }\n  },\n  initContainer: function initContainer() {\n    var self = this;\n    var options = self.options;\n    var $this = self.$element;\n    var $container = self.$container;\n    var $cropper = self.$cropper;\n    var hidden = 'cropper-hidden';\n\n    $cropper.addClass(hidden);\n    $this.removeClass(hidden);\n\n    $cropper.css(self.container = {\n      width: Math.max($container.width(), Number(options.minContainerWidth) || 200),\n      height: Math.max($container.height(), Number(options.minContainerHeight) || 100)\n    });\n\n    $this.addClass(hidden);\n    $cropper.removeClass(hidden);\n  },\n\n\n  // Canvas (image wrapper)\n  initCanvas: function initCanvas() {\n    var self = this;\n    var viewMode = self.options.viewMode;\n    var container = self.container;\n    var containerWidth = container.width;\n    var containerHeight = container.height;\n    var image = self.image;\n    var imageNaturalWidth = image.naturalWidth;\n    var imageNaturalHeight = image.naturalHeight;\n    var is90Degree = Math.abs(image.rotate) % 180 === 90;\n    var naturalWidth = is90Degree ? imageNaturalHeight : imageNaturalWidth;\n    var naturalHeight = is90Degree ? imageNaturalWidth : imageNaturalHeight;\n    var aspectRatio = naturalWidth / naturalHeight;\n    var canvasWidth = containerWidth;\n    var canvasHeight = containerHeight;\n\n    if (containerHeight * aspectRatio > containerWidth) {\n      if (viewMode === 3) {\n        canvasWidth = containerHeight * aspectRatio;\n      } else {\n        canvasHeight = containerWidth / aspectRatio;\n      }\n    } else if (viewMode === 3) {\n      canvasHeight = containerWidth / aspectRatio;\n    } else {\n      canvasWidth = containerHeight * aspectRatio;\n    }\n\n    var canvas = {\n      naturalWidth: naturalWidth,\n      naturalHeight: naturalHeight,\n      aspectRatio: aspectRatio,\n      width: canvasWidth,\n      height: canvasHeight\n    };\n\n    canvas.left = (containerWidth - canvasWidth) / 2;\n    canvas.top = (containerHeight - canvasHeight) / 2;\n    canvas.oldLeft = canvas.left;\n    canvas.oldTop = canvas.top;\n\n    self.canvas = canvas;\n    self.limited = viewMode === 1 || viewMode === 2;\n    self.limitCanvas(true, true);\n    self.initialImage = $.extend({}, image);\n    self.initialCanvas = $.extend({}, canvas);\n  },\n  limitCanvas: function limitCanvas(isSizeLimited, isPositionLimited) {\n    var self = this;\n    var options = self.options;\n    var viewMode = options.viewMode;\n    var container = self.container;\n    var containerWidth = container.width;\n    var containerHeight = container.height;\n    var canvas = self.canvas;\n    var aspectRatio = canvas.aspectRatio;\n    var cropBox = self.cropBox;\n    var cropped = self.cropped && cropBox;\n\n    if (isSizeLimited) {\n      var minCanvasWidth = Number(options.minCanvasWidth) || 0;\n      var minCanvasHeight = Number(options.minCanvasHeight) || 0;\n\n      if (viewMode) {\n        if (viewMode > 1) {\n          minCanvasWidth = Math.max(minCanvasWidth, containerWidth);\n          minCanvasHeight = Math.max(minCanvasHeight, containerHeight);\n\n          if (viewMode === 3) {\n            if (minCanvasHeight * aspectRatio > minCanvasWidth) {\n              minCanvasWidth = minCanvasHeight * aspectRatio;\n            } else {\n              minCanvasHeight = minCanvasWidth / aspectRatio;\n            }\n          }\n        } else if (minCanvasWidth) {\n          minCanvasWidth = Math.max(minCanvasWidth, cropped ? cropBox.width : 0);\n        } else if (minCanvasHeight) {\n          minCanvasHeight = Math.max(minCanvasHeight, cropped ? cropBox.height : 0);\n        } else if (cropped) {\n          minCanvasWidth = cropBox.width;\n          minCanvasHeight = cropBox.height;\n\n          if (minCanvasHeight * aspectRatio > minCanvasWidth) {\n            minCanvasWidth = minCanvasHeight * aspectRatio;\n          } else {\n            minCanvasHeight = minCanvasWidth / aspectRatio;\n          }\n        }\n      }\n\n      if (minCanvasWidth && minCanvasHeight) {\n        if (minCanvasHeight * aspectRatio > minCanvasWidth) {\n          minCanvasHeight = minCanvasWidth / aspectRatio;\n        } else {\n          minCanvasWidth = minCanvasHeight * aspectRatio;\n        }\n      } else if (minCanvasWidth) {\n        minCanvasHeight = minCanvasWidth / aspectRatio;\n      } else if (minCanvasHeight) {\n        minCanvasWidth = minCanvasHeight * aspectRatio;\n      }\n\n      canvas.minWidth = minCanvasWidth;\n      canvas.minHeight = minCanvasHeight;\n      canvas.maxWidth = Infinity;\n      canvas.maxHeight = Infinity;\n    }\n\n    if (isPositionLimited) {\n      if (viewMode) {\n        var newCanvasLeft = containerWidth - canvas.width;\n        var newCanvasTop = containerHeight - canvas.height;\n\n        canvas.minLeft = Math.min(0, newCanvasLeft);\n        canvas.minTop = Math.min(0, newCanvasTop);\n        canvas.maxLeft = Math.max(0, newCanvasLeft);\n        canvas.maxTop = Math.max(0, newCanvasTop);\n\n        if (cropped && self.limited) {\n          canvas.minLeft = Math.min(cropBox.left, cropBox.left + cropBox.width - canvas.width);\n          canvas.minTop = Math.min(cropBox.top, cropBox.top + cropBox.height - canvas.height);\n          canvas.maxLeft = cropBox.left;\n          canvas.maxTop = cropBox.top;\n\n          if (viewMode === 2) {\n            if (canvas.width >= containerWidth) {\n              canvas.minLeft = Math.min(0, newCanvasLeft);\n              canvas.maxLeft = Math.max(0, newCanvasLeft);\n            }\n\n            if (canvas.height >= containerHeight) {\n              canvas.minTop = Math.min(0, newCanvasTop);\n              canvas.maxTop = Math.max(0, newCanvasTop);\n            }\n          }\n        }\n      } else {\n        canvas.minLeft = -canvas.width;\n        canvas.minTop = -canvas.height;\n        canvas.maxLeft = containerWidth;\n        canvas.maxTop = containerHeight;\n      }\n    }\n  },\n  renderCanvas: function renderCanvas(isChanged) {\n    var self = this;\n    var canvas = self.canvas;\n    var image = self.image;\n    var rotate = image.rotate;\n    var naturalWidth = image.naturalWidth;\n    var naturalHeight = image.naturalHeight;\n\n    if (self.rotated) {\n      self.rotated = false;\n\n      // Computes rotated sizes with image sizes\n      var rotated = getRotatedSizes({\n        width: image.width,\n        height: image.height,\n        degree: rotate\n      });\n      var aspectRatio = rotated.width / rotated.height;\n      var isSquareImage = image.aspectRatio === 1;\n\n      if (isSquareImage || aspectRatio !== canvas.aspectRatio) {\n        canvas.left -= (rotated.width - canvas.width) / 2;\n        canvas.top -= (rotated.height - canvas.height) / 2;\n        canvas.width = rotated.width;\n        canvas.height = rotated.height;\n        canvas.aspectRatio = aspectRatio;\n        canvas.naturalWidth = naturalWidth;\n        canvas.naturalHeight = naturalHeight;\n\n        // Computes rotated sizes with natural image sizes\n        if (isSquareImage && rotate % 90 || rotate % 180) {\n          var rotated2 = getRotatedSizes({\n            width: naturalWidth,\n            height: naturalHeight,\n            degree: rotate\n          });\n\n          canvas.naturalWidth = rotated2.width;\n          canvas.naturalHeight = rotated2.height;\n        }\n\n        self.limitCanvas(true, false);\n      }\n    }\n\n    if (canvas.width > canvas.maxWidth || canvas.width < canvas.minWidth) {\n      canvas.left = canvas.oldLeft;\n    }\n\n    if (canvas.height > canvas.maxHeight || canvas.height < canvas.minHeight) {\n      canvas.top = canvas.oldTop;\n    }\n\n    canvas.width = Math.min(Math.max(canvas.width, canvas.minWidth), canvas.maxWidth);\n    canvas.height = Math.min(Math.max(canvas.height, canvas.minHeight), canvas.maxHeight);\n\n    self.limitCanvas(false, true);\n\n    canvas.left = Math.min(Math.max(canvas.left, canvas.minLeft), canvas.maxLeft);\n    canvas.top = Math.min(Math.max(canvas.top, canvas.minTop), canvas.maxTop);\n    canvas.oldLeft = canvas.left;\n    canvas.oldTop = canvas.top;\n\n    self.$canvas.css({\n      width: canvas.width,\n      height: canvas.height,\n      transform: getTransform({\n        translateX: canvas.left,\n        translateY: canvas.top\n      })\n    });\n\n    self.renderImage();\n\n    if (self.cropped && self.limited) {\n      self.limitCropBox(true, true);\n    }\n\n    if (isChanged) {\n      self.output();\n    }\n  },\n  renderImage: function renderImage(isChanged) {\n    var self = this;\n    var canvas = self.canvas;\n    var image = self.image;\n    var reversed = void 0;\n\n    if (image.rotate) {\n      reversed = getRotatedSizes({\n        width: canvas.width,\n        height: canvas.height,\n        degree: image.rotate,\n        aspectRatio: image.aspectRatio\n      }, true);\n    }\n\n    $.extend(image, reversed ? {\n      width: reversed.width,\n      height: reversed.height,\n      left: (canvas.width - reversed.width) / 2,\n      top: (canvas.height - reversed.height) / 2\n    } : {\n      width: canvas.width,\n      height: canvas.height,\n      left: 0,\n      top: 0\n    });\n\n    self.$clone.css({\n      width: image.width,\n      height: image.height,\n      transform: getTransform($.extend({\n        translateX: image.left,\n        translateY: image.top\n      }, image))\n    });\n\n    if (isChanged) {\n      self.output();\n    }\n  },\n  initCropBox: function initCropBox() {\n    var self = this;\n    var options = self.options;\n    var canvas = self.canvas;\n    var aspectRatio = options.aspectRatio;\n    var autoCropArea = Number(options.autoCropArea) || 0.8;\n    var cropBox = {\n      width: canvas.width,\n      height: canvas.height\n    };\n\n    if (aspectRatio) {\n      if (canvas.height * aspectRatio > canvas.width) {\n        cropBox.height = cropBox.width / aspectRatio;\n      } else {\n        cropBox.width = cropBox.height * aspectRatio;\n      }\n    }\n\n    self.cropBox = cropBox;\n    self.limitCropBox(true, true);\n\n    // Initialize auto crop area\n    cropBox.width = Math.min(Math.max(cropBox.width, cropBox.minWidth), cropBox.maxWidth);\n    cropBox.height = Math.min(Math.max(cropBox.height, cropBox.minHeight), cropBox.maxHeight);\n\n    // The width of auto crop area must large than \"minWidth\", and the height too. (#164)\n    cropBox.width = Math.max(cropBox.minWidth, cropBox.width * autoCropArea);\n    cropBox.height = Math.max(cropBox.minHeight, cropBox.height * autoCropArea);\n    cropBox.left = canvas.left + (canvas.width - cropBox.width) / 2;\n    cropBox.top = canvas.top + (canvas.height - cropBox.height) / 2;\n    cropBox.oldLeft = cropBox.left;\n    cropBox.oldTop = cropBox.top;\n\n    self.initialCropBox = $.extend({}, cropBox);\n  },\n  limitCropBox: function limitCropBox(isSizeLimited, isPositionLimited) {\n    var self = this;\n    var options = self.options;\n    var aspectRatio = options.aspectRatio;\n    var container = self.container;\n    var containerWidth = container.width;\n    var containerHeight = container.height;\n    var canvas = self.canvas;\n    var cropBox = self.cropBox;\n    var limited = self.limited;\n\n    if (isSizeLimited) {\n      var minCropBoxWidth = Number(options.minCropBoxWidth) || 0;\n      var minCropBoxHeight = Number(options.minCropBoxHeight) || 0;\n      var maxCropBoxWidth = Math.min(containerWidth, limited ? canvas.width : containerWidth);\n      var maxCropBoxHeight = Math.min(containerHeight, limited ? canvas.height : containerHeight);\n\n      // The min/maxCropBoxWidth/Height must be less than containerWidth/Height\n      minCropBoxWidth = Math.min(minCropBoxWidth, containerWidth);\n      minCropBoxHeight = Math.min(minCropBoxHeight, containerHeight);\n\n      if (aspectRatio) {\n        if (minCropBoxWidth && minCropBoxHeight) {\n          if (minCropBoxHeight * aspectRatio > minCropBoxWidth) {\n            minCropBoxHeight = minCropBoxWidth / aspectRatio;\n          } else {\n            minCropBoxWidth = minCropBoxHeight * aspectRatio;\n          }\n        } else if (minCropBoxWidth) {\n          minCropBoxHeight = minCropBoxWidth / aspectRatio;\n        } else if (minCropBoxHeight) {\n          minCropBoxWidth = minCropBoxHeight * aspectRatio;\n        }\n\n        if (maxCropBoxHeight * aspectRatio > maxCropBoxWidth) {\n          maxCropBoxHeight = maxCropBoxWidth / aspectRatio;\n        } else {\n          maxCropBoxWidth = maxCropBoxHeight * aspectRatio;\n        }\n      }\n\n      // The minWidth/Height must be less than maxWidth/Height\n      cropBox.minWidth = Math.min(minCropBoxWidth, maxCropBoxWidth);\n      cropBox.minHeight = Math.min(minCropBoxHeight, maxCropBoxHeight);\n      cropBox.maxWidth = maxCropBoxWidth;\n      cropBox.maxHeight = maxCropBoxHeight;\n    }\n\n    if (isPositionLimited) {\n      if (limited) {\n        cropBox.minLeft = Math.max(0, canvas.left);\n        cropBox.minTop = Math.max(0, canvas.top);\n        cropBox.maxLeft = Math.min(containerWidth, canvas.left + canvas.width) - cropBox.width;\n        cropBox.maxTop = Math.min(containerHeight, canvas.top + canvas.height) - cropBox.height;\n      } else {\n        cropBox.minLeft = 0;\n        cropBox.minTop = 0;\n        cropBox.maxLeft = containerWidth - cropBox.width;\n        cropBox.maxTop = containerHeight - cropBox.height;\n      }\n    }\n  },\n  renderCropBox: function renderCropBox() {\n    var self = this;\n    var options = self.options;\n    var container = self.container;\n    var containerWidth = container.width;\n    var containerHeight = container.height;\n    var cropBox = self.cropBox;\n\n    if (cropBox.width > cropBox.maxWidth || cropBox.width < cropBox.minWidth) {\n      cropBox.left = cropBox.oldLeft;\n    }\n\n    if (cropBox.height > cropBox.maxHeight || cropBox.height < cropBox.minHeight) {\n      cropBox.top = cropBox.oldTop;\n    }\n\n    cropBox.width = Math.min(Math.max(cropBox.width, cropBox.minWidth), cropBox.maxWidth);\n    cropBox.height = Math.min(Math.max(cropBox.height, cropBox.minHeight), cropBox.maxHeight);\n\n    self.limitCropBox(false, true);\n\n    cropBox.left = Math.min(Math.max(cropBox.left, cropBox.minLeft), cropBox.maxLeft);\n    cropBox.top = Math.min(Math.max(cropBox.top, cropBox.minTop), cropBox.maxTop);\n    cropBox.oldLeft = cropBox.left;\n    cropBox.oldTop = cropBox.top;\n\n    if (options.movable && options.cropBoxMovable) {\n      // Turn to move the canvas when the crop box is equal to the container\n      self.$face.data('action', cropBox.width === containerWidth && cropBox.height === containerHeight ? 'move' : 'all');\n    }\n\n    self.$cropBox.css({\n      width: cropBox.width,\n      height: cropBox.height,\n      transform: getTransform({\n        translateX: cropBox.left,\n        translateY: cropBox.top\n      })\n    });\n\n    if (self.cropped && self.limited) {\n      self.limitCanvas(true, true);\n    }\n\n    if (!self.disabled) {\n      self.output();\n    }\n  },\n  output: function output() {\n    var self = this;\n\n    self.preview();\n\n    if (self.completed) {\n      self.trigger('crop', self.getData());\n    }\n  }\n};\n\nvar DATA_PREVIEW = 'preview';\n\nvar preview = {\n  initPreview: function initPreview() {\n    var self = this;\n    var crossOrigin = self.crossOrigin;\n    var url = crossOrigin ? self.crossOriginUrl : self.url;\n    var image = document.createElement('img');\n\n    if (crossOrigin) {\n      image.crossOrigin = crossOrigin;\n    }\n\n    image.src = url;\n\n    var $clone2 = $(image);\n\n    self.$preview = $(self.options.preview);\n    self.$clone2 = $clone2;\n    self.$viewBox.html($clone2);\n    self.$preview.each(function (i, element) {\n      var $this = $(element);\n      var img = document.createElement('img');\n\n      // Save the original size for recover\n      $this.data(DATA_PREVIEW, {\n        width: $this.width(),\n        height: $this.height(),\n        html: $this.html()\n      });\n\n      if (crossOrigin) {\n        img.crossOrigin = crossOrigin;\n      }\n\n      img.src = url;\n\n      /**\n       * Override img element styles\n       * Add `display:block` to avoid margin top issue\n       * Add `height:auto` to override `height` attribute on IE8\n       * (Occur only when margin-top <= -height)\n       */\n      img.style.cssText = 'display:block;' + 'width:100%;' + 'height:auto;' + 'min-width:0!important;' + 'min-height:0!important;' + 'max-width:none!important;' + 'max-height:none!important;' + 'image-orientation:0deg!important;\"';\n\n      $this.html(img);\n    });\n  },\n  resetPreview: function resetPreview() {\n    this.$preview.each(function (i, element) {\n      var $this = $(element);\n      var data = $this.data(DATA_PREVIEW);\n\n      $this.css({\n        width: data.width,\n        height: data.height\n      }).html(data.html).removeData(DATA_PREVIEW);\n    });\n  },\n  preview: function preview() {\n    var self = this;\n    var image = self.image;\n    var canvas = self.canvas;\n    var cropBox = self.cropBox;\n    var cropBoxWidth = cropBox.width;\n    var cropBoxHeight = cropBox.height;\n    var width = image.width;\n    var height = image.height;\n    var left = cropBox.left - canvas.left - image.left;\n    var top = cropBox.top - canvas.top - image.top;\n\n    if (!self.cropped || self.disabled) {\n      return;\n    }\n\n    self.$clone2.css({\n      width: width,\n      height: height,\n      transform: getTransform($.extend({\n        translateX: -left,\n        translateY: -top\n      }, image))\n    });\n\n    self.$preview.each(function (i, element) {\n      var $this = $(element);\n      var data = $this.data(DATA_PREVIEW);\n      var originalWidth = data.width;\n      var originalHeight = data.height;\n      var newWidth = originalWidth;\n      var newHeight = originalHeight;\n      var ratio = 1;\n\n      if (cropBoxWidth) {\n        ratio = originalWidth / cropBoxWidth;\n        newHeight = cropBoxHeight * ratio;\n      }\n\n      if (cropBoxHeight && newHeight > originalHeight) {\n        ratio = originalHeight / cropBoxHeight;\n        newWidth = cropBoxWidth * ratio;\n        newHeight = originalHeight;\n      }\n\n      $this.css({\n        width: newWidth,\n        height: newHeight\n      }).find('img').css({\n        width: width * ratio,\n        height: height * ratio,\n        transform: getTransform($.extend({\n          translateX: -left * ratio,\n          translateY: -top * ratio\n        }, image))\n      });\n    });\n  }\n};\n\n// Globals\nvar PointerEvent = typeof window !== 'undefined' ? window.PointerEvent : null;\n\n// Events\nvar EVENT_POINTER_DOWN = PointerEvent ? 'pointerdown' : 'touchstart mousedown';\nvar EVENT_POINTER_MOVE = PointerEvent ? 'pointermove' : 'touchmove mousemove';\nvar EVENT_POINTER_UP = PointerEvent ? ' pointerup pointercancel' : 'touchend touchcancel mouseup';\nvar EVENT_WHEEL = 'wheel mousewheel DOMMouseScroll';\nvar EVENT_DBLCLICK = 'dblclick';\nvar EVENT_RESIZE = 'resize';\nvar EVENT_CROP_START = 'cropstart';\nvar EVENT_CROP_MOVE = 'cropmove';\nvar EVENT_CROP_END = 'cropend';\nvar EVENT_CROP = 'crop';\nvar EVENT_ZOOM = 'zoom';\n\nvar events = {\n  bind: function bind() {\n    var self = this;\n    var options = self.options;\n    var $this = self.$element;\n    var $cropper = self.$cropper;\n\n    if ($.isFunction(options.cropstart)) {\n      $this.on(EVENT_CROP_START, options.cropstart);\n    }\n\n    if ($.isFunction(options.cropmove)) {\n      $this.on(EVENT_CROP_MOVE, options.cropmove);\n    }\n\n    if ($.isFunction(options.cropend)) {\n      $this.on(EVENT_CROP_END, options.cropend);\n    }\n\n    if ($.isFunction(options.crop)) {\n      $this.on(EVENT_CROP, options.crop);\n    }\n\n    if ($.isFunction(options.zoom)) {\n      $this.on(EVENT_ZOOM, options.zoom);\n    }\n\n    $cropper.on(EVENT_POINTER_DOWN, proxy(self.cropStart, this));\n\n    if (options.zoomable && options.zoomOnWheel) {\n      $cropper.on(EVENT_WHEEL, proxy(self.wheel, this));\n    }\n\n    if (options.toggleDragModeOnDblclick) {\n      $cropper.on(EVENT_DBLCLICK, proxy(self.dblclick, this));\n    }\n\n    $(document).on(EVENT_POINTER_MOVE, self.onCropMove = proxy(self.cropMove, this)).on(EVENT_POINTER_UP, self.onCropEnd = proxy(self.cropEnd, this));\n\n    if (options.responsive) {\n      $(window).on(EVENT_RESIZE, self.onResize = proxy(self.resize, this));\n    }\n  },\n  unbind: function unbind() {\n    var self = this;\n    var options = self.options;\n    var $this = self.$element;\n    var $cropper = self.$cropper;\n\n    if ($.isFunction(options.cropstart)) {\n      $this.off(EVENT_CROP_START, options.cropstart);\n    }\n\n    if ($.isFunction(options.cropmove)) {\n      $this.off(EVENT_CROP_MOVE, options.cropmove);\n    }\n\n    if ($.isFunction(options.cropend)) {\n      $this.off(EVENT_CROP_END, options.cropend);\n    }\n\n    if ($.isFunction(options.crop)) {\n      $this.off(EVENT_CROP, options.crop);\n    }\n\n    if ($.isFunction(options.zoom)) {\n      $this.off(EVENT_ZOOM, options.zoom);\n    }\n\n    $cropper.off(EVENT_POINTER_DOWN, self.cropStart);\n\n    if (options.zoomable && options.zoomOnWheel) {\n      $cropper.off(EVENT_WHEEL, self.wheel);\n    }\n\n    if (options.toggleDragModeOnDblclick) {\n      $cropper.off(EVENT_DBLCLICK, self.dblclick);\n    }\n\n    $(document).off(EVENT_POINTER_MOVE, self.onCropMove).off(EVENT_POINTER_UP, self.onCropEnd);\n\n    if (options.responsive) {\n      $(window).off(EVENT_RESIZE, self.onResize);\n    }\n  }\n};\n\nvar REGEXP_ACTIONS = /^(e|w|s|n|se|sw|ne|nw|all|crop|move|zoom)$/;\n\nfunction getPointer(_ref, endOnly) {\n  var pageX = _ref.pageX,\n      pageY = _ref.pageY;\n\n  var end = {\n    endX: pageX,\n    endY: pageY\n  };\n\n  if (endOnly) {\n    return end;\n  }\n\n  return $.extend({\n    startX: pageX,\n    startY: pageY\n  }, end);\n}\n\nvar handlers = {\n  resize: function resize() {\n    var self = this;\n    var options = self.options;\n    var $container = self.$container;\n    var container = self.container;\n    var minContainerWidth = Number(options.minContainerWidth) || 200;\n    var minContainerHeight = Number(options.minContainerHeight) || 100;\n\n    if (self.disabled || container.width === minContainerWidth || container.height === minContainerHeight) {\n      return;\n    }\n\n    var ratio = $container.width() / container.width;\n\n    // Resize when width changed or height changed\n    if (ratio !== 1 || $container.height() !== container.height) {\n      var canvasData = void 0;\n      var cropBoxData = void 0;\n\n      if (options.restore) {\n        canvasData = self.getCanvasData();\n        cropBoxData = self.getCropBoxData();\n      }\n\n      self.render();\n\n      if (options.restore) {\n        self.setCanvasData($.each(canvasData, function (i, n) {\n          canvasData[i] = n * ratio;\n        }));\n        self.setCropBoxData($.each(cropBoxData, function (i, n) {\n          cropBoxData[i] = n * ratio;\n        }));\n      }\n    }\n  },\n  dblclick: function dblclick() {\n    var self = this;\n\n    if (self.disabled || self.options.dragMode === 'none') {\n      return;\n    }\n\n    self.setDragMode(self.$dragBox.hasClass('cropper-crop') ? 'move' : 'crop');\n  },\n  wheel: function wheel(event) {\n    var self = this;\n    var e = event.originalEvent || event;\n    var ratio = Number(self.options.wheelZoomRatio) || 0.1;\n\n    if (self.disabled) {\n      return;\n    }\n\n    event.preventDefault();\n\n    // Limit wheel speed to prevent zoom too fast\n    if (self.wheeling) {\n      return;\n    }\n\n    self.wheeling = true;\n\n    setTimeout(function () {\n      self.wheeling = false;\n    }, 50);\n\n    var delta = 1;\n\n    if (e.deltaY) {\n      delta = e.deltaY > 0 ? 1 : -1;\n    } else if (e.wheelDelta) {\n      delta = -e.wheelDelta / 120;\n    } else if (e.detail) {\n      delta = e.detail > 0 ? 1 : -1;\n    }\n\n    self.zoom(-delta * ratio, event);\n  },\n  cropStart: function cropStart(e) {\n    var self = this;\n\n    if (self.disabled) {\n      return;\n    }\n\n    var options = self.options;\n    var pointers = self.pointers;\n    var originalEvent = e.originalEvent;\n    var action = void 0;\n\n    if (originalEvent && originalEvent.changedTouches) {\n      // Handle touch event\n      $.each(originalEvent.changedTouches, function (i, touch) {\n        pointers[touch.identifier] = getPointer(touch);\n      });\n    } else {\n      // Handle mouse event and pointer event\n      pointers[originalEvent && originalEvent.pointerId || 0] = getPointer(originalEvent || e);\n    }\n\n    if (objectKeys(pointers).length > 1 && options.zoomable && options.zoomOnTouch) {\n      action = 'zoom';\n    } else {\n      action = $(e.target).data('action');\n    }\n\n    if (!REGEXP_ACTIONS.test(action)) {\n      return;\n    }\n\n    if (self.trigger('cropstart', {\n      originalEvent: originalEvent,\n      action: action\n    }).isDefaultPrevented()) {\n      return;\n    }\n\n    e.preventDefault();\n\n    self.action = action;\n    self.cropping = false;\n\n    if (action === 'crop') {\n      self.cropping = true;\n      self.$dragBox.addClass('cropper-modal');\n    }\n  },\n  cropMove: function cropMove(e) {\n    var self = this;\n    var action = self.action;\n\n    if (self.disabled || !action) {\n      return;\n    }\n\n    var pointers = self.pointers;\n    var originalEvent = e.originalEvent;\n\n    e.preventDefault();\n\n    if (self.trigger('cropmove', {\n      originalEvent: originalEvent,\n      action: action\n    }).isDefaultPrevented()) {\n      return;\n    }\n\n    if (originalEvent && originalEvent.changedTouches) {\n      $.each(originalEvent.changedTouches, function (i, touch) {\n        $.extend(pointers[touch.identifier], getPointer(touch, true));\n      });\n    } else {\n      $.extend(pointers[originalEvent && originalEvent.pointerId || 0], getPointer(originalEvent || e, true));\n    }\n\n    self.change(e);\n  },\n  cropEnd: function cropEnd(e) {\n    var self = this;\n\n    if (self.disabled) {\n      return;\n    }\n\n    var action = self.action;\n    var pointers = self.pointers;\n    var originalEvent = e.originalEvent;\n\n    if (originalEvent && originalEvent.changedTouches) {\n      $.each(originalEvent.changedTouches, function (i, touch) {\n        delete pointers[touch.identifier];\n      });\n    } else {\n      delete pointers[originalEvent && originalEvent.pointerId || 0];\n    }\n\n    if (!action) {\n      return;\n    }\n\n    e.preventDefault();\n\n    if (!objectKeys(pointers).length) {\n      self.action = '';\n    }\n\n    if (self.cropping) {\n      self.cropping = false;\n      self.$dragBox.toggleClass('cropper-modal', self.cropped && self.options.modal);\n    }\n\n    self.trigger('cropend', {\n      originalEvent: originalEvent,\n      action: action\n    });\n  }\n};\n\n// Actions\nvar ACTION_EAST = 'e';\nvar ACTION_WEST = 'w';\nvar ACTION_SOUTH = 's';\nvar ACTION_NORTH = 'n';\nvar ACTION_SOUTH_EAST = 'se';\nvar ACTION_SOUTH_WEST = 'sw';\nvar ACTION_NORTH_EAST = 'ne';\nvar ACTION_NORTH_WEST = 'nw';\n\nfunction getMaxZoomRatio(pointers) {\n  var pointers2 = $.extend({}, pointers);\n  var ratios = [];\n\n  $.each(pointers, function (pointerId, pointer) {\n    delete pointers2[pointerId];\n\n    $.each(pointers2, function (pointerId2, pointer2) {\n      var x1 = Math.abs(pointer.startX - pointer2.startX);\n      var y1 = Math.abs(pointer.startY - pointer2.startY);\n      var x2 = Math.abs(pointer.endX - pointer2.endX);\n      var y2 = Math.abs(pointer.endY - pointer2.endY);\n      var z1 = Math.sqrt(x1 * x1 + y1 * y1);\n      var z2 = Math.sqrt(x2 * x2 + y2 * y2);\n      var ratio = (z2 - z1) / z1;\n\n      ratios.push(ratio);\n    });\n  });\n\n  ratios.sort(function (a, b) {\n    return Math.abs(a) < Math.abs(b);\n  });\n\n  return ratios[0];\n}\n\nvar change = {\n  change: function change(e) {\n    var self = this;\n    var options = self.options;\n    var pointers = self.pointers;\n    var pointer = pointers[objectKeys(pointers)[0]];\n    var container = self.container;\n    var canvas = self.canvas;\n    var cropBox = self.cropBox;\n    var action = self.action;\n    var aspectRatio = options.aspectRatio;\n    var width = cropBox.width;\n    var height = cropBox.height;\n    var left = cropBox.left;\n    var top = cropBox.top;\n    var right = left + width;\n    var bottom = top + height;\n    var minLeft = 0;\n    var minTop = 0;\n    var maxWidth = container.width;\n    var maxHeight = container.height;\n    var renderable = true;\n    var offset = void 0;\n\n    // Locking aspect ratio in \"free mode\" by holding shift key (#259)\n    if (!aspectRatio && e.shiftKey) {\n      aspectRatio = width && height ? width / height : 1;\n    }\n\n    if (self.limited) {\n      minLeft = cropBox.minLeft;\n      minTop = cropBox.minTop;\n      maxWidth = minLeft + Math.min(container.width, canvas.width, canvas.left + canvas.width);\n      maxHeight = minTop + Math.min(container.height, canvas.height, canvas.top + canvas.height);\n    }\n\n    var range = {\n      x: pointer.endX - pointer.startX,\n      y: pointer.endY - pointer.startY\n    };\n\n    switch (action) {\n      // Move crop box\n      case 'all':\n        left += range.x;\n        top += range.y;\n        break;\n\n      // Resize crop box\n      case ACTION_EAST:\n        if (range.x >= 0 && (right >= maxWidth || aspectRatio && (top <= minTop || bottom >= maxHeight))) {\n          renderable = false;\n          break;\n        }\n\n        if (right + range.x > maxWidth) {\n          range.x = maxWidth - right;\n        }\n\n        width += range.x;\n\n        if (aspectRatio) {\n          height = width / aspectRatio;\n          top -= range.x / aspectRatio / 2;\n        }\n\n        if (width < 0) {\n          action = ACTION_WEST;\n          width = 0;\n        }\n\n        break;\n\n      case ACTION_NORTH:\n        if (range.y <= 0 && (top <= minTop || aspectRatio && (left <= minLeft || right >= maxWidth))) {\n          renderable = false;\n          break;\n        }\n\n        if (top + range.y < minTop) {\n          range.y = minTop - top;\n        }\n\n        height -= range.y;\n        top += range.y;\n\n        if (aspectRatio) {\n          width = height * aspectRatio;\n          left += range.y * aspectRatio / 2;\n        }\n\n        if (height < 0) {\n          action = ACTION_SOUTH;\n          height = 0;\n        }\n\n        break;\n\n      case ACTION_WEST:\n        if (range.x <= 0 && (left <= minLeft || aspectRatio && (top <= minTop || bottom >= maxHeight))) {\n          renderable = false;\n          break;\n        }\n\n        if (left + range.x < minLeft) {\n          range.x = minLeft - left;\n        }\n\n        width -= range.x;\n        left += range.x;\n\n        if (aspectRatio) {\n          height = width / aspectRatio;\n          top += range.x / aspectRatio / 2;\n        }\n\n        if (width < 0) {\n          action = ACTION_EAST;\n          width = 0;\n        }\n\n        break;\n\n      case ACTION_SOUTH:\n        if (range.y >= 0 && (bottom >= maxHeight || aspectRatio && (left <= minLeft || right >= maxWidth))) {\n          renderable = false;\n          break;\n        }\n\n        if (bottom + range.y > maxHeight) {\n          range.y = maxHeight - bottom;\n        }\n\n        height += range.y;\n\n        if (aspectRatio) {\n          width = height * aspectRatio;\n          left -= range.y * aspectRatio / 2;\n        }\n\n        if (height < 0) {\n          action = ACTION_NORTH;\n          height = 0;\n        }\n\n        break;\n\n      case ACTION_NORTH_EAST:\n        if (aspectRatio) {\n          if (range.y <= 0 && (top <= minTop || right >= maxWidth)) {\n            renderable = false;\n            break;\n          }\n\n          height -= range.y;\n          top += range.y;\n          width = height * aspectRatio;\n        } else {\n          if (range.x >= 0) {\n            if (right < maxWidth) {\n              width += range.x;\n            } else if (range.y <= 0 && top <= minTop) {\n              renderable = false;\n            }\n          } else {\n            width += range.x;\n          }\n\n          if (range.y <= 0) {\n            if (top > minTop) {\n              height -= range.y;\n              top += range.y;\n            }\n          } else {\n            height -= range.y;\n            top += range.y;\n          }\n        }\n\n        if (width < 0 && height < 0) {\n          action = ACTION_SOUTH_WEST;\n          height = 0;\n          width = 0;\n        } else if (width < 0) {\n          action = ACTION_NORTH_WEST;\n          width = 0;\n        } else if (height < 0) {\n          action = ACTION_SOUTH_EAST;\n          height = 0;\n        }\n\n        break;\n\n      case ACTION_NORTH_WEST:\n        if (aspectRatio) {\n          if (range.y <= 0 && (top <= minTop || left <= minLeft)) {\n            renderable = false;\n            break;\n          }\n\n          height -= range.y;\n          top += range.y;\n          width = height * aspectRatio;\n          left += range.y * aspectRatio;\n        } else {\n          if (range.x <= 0) {\n            if (left > minLeft) {\n              width -= range.x;\n              left += range.x;\n            } else if (range.y <= 0 && top <= minTop) {\n              renderable = false;\n            }\n          } else {\n            width -= range.x;\n            left += range.x;\n          }\n\n          if (range.y <= 0) {\n            if (top > minTop) {\n              height -= range.y;\n              top += range.y;\n            }\n          } else {\n            height -= range.y;\n            top += range.y;\n          }\n        }\n\n        if (width < 0 && height < 0) {\n          action = ACTION_SOUTH_EAST;\n          height = 0;\n          width = 0;\n        } else if (width < 0) {\n          action = ACTION_NORTH_EAST;\n          width = 0;\n        } else if (height < 0) {\n          action = ACTION_SOUTH_WEST;\n          height = 0;\n        }\n\n        break;\n\n      case ACTION_SOUTH_WEST:\n        if (aspectRatio) {\n          if (range.x <= 0 && (left <= minLeft || bottom >= maxHeight)) {\n            renderable = false;\n            break;\n          }\n\n          width -= range.x;\n          left += range.x;\n          height = width / aspectRatio;\n        } else {\n          if (range.x <= 0) {\n            if (left > minLeft) {\n              width -= range.x;\n              left += range.x;\n            } else if (range.y >= 0 && bottom >= maxHeight) {\n              renderable = false;\n            }\n          } else {\n            width -= range.x;\n            left += range.x;\n          }\n\n          if (range.y >= 0) {\n            if (bottom < maxHeight) {\n              height += range.y;\n            }\n          } else {\n            height += range.y;\n          }\n        }\n\n        if (width < 0 && height < 0) {\n          action = ACTION_NORTH_EAST;\n          height = 0;\n          width = 0;\n        } else if (width < 0) {\n          action = ACTION_SOUTH_EAST;\n          width = 0;\n        } else if (height < 0) {\n          action = ACTION_NORTH_WEST;\n          height = 0;\n        }\n\n        break;\n\n      case ACTION_SOUTH_EAST:\n        if (aspectRatio) {\n          if (range.x >= 0 && (right >= maxWidth || bottom >= maxHeight)) {\n            renderable = false;\n            break;\n          }\n\n          width += range.x;\n          height = width / aspectRatio;\n        } else {\n          if (range.x >= 0) {\n            if (right < maxWidth) {\n              width += range.x;\n            } else if (range.y >= 0 && bottom >= maxHeight) {\n              renderable = false;\n            }\n          } else {\n            width += range.x;\n          }\n\n          if (range.y >= 0) {\n            if (bottom < maxHeight) {\n              height += range.y;\n            }\n          } else {\n            height += range.y;\n          }\n        }\n\n        if (width < 0 && height < 0) {\n          action = ACTION_NORTH_WEST;\n          height = 0;\n          width = 0;\n        } else if (width < 0) {\n          action = ACTION_SOUTH_WEST;\n          width = 0;\n        } else if (height < 0) {\n          action = ACTION_NORTH_EAST;\n          height = 0;\n        }\n\n        break;\n\n      // Move canvas\n      case 'move':\n        self.move(range.x, range.y);\n        renderable = false;\n        break;\n\n      // Zoom canvas\n      case 'zoom':\n        self.zoom(getMaxZoomRatio(pointers), e.originalEvent);\n        renderable = false;\n        break;\n\n      // Create crop box\n      case 'crop':\n        if (!range.x || !range.y) {\n          renderable = false;\n          break;\n        }\n\n        offset = self.$cropper.offset();\n        left = pointer.startX - offset.left;\n        top = pointer.startY - offset.top;\n        width = cropBox.minWidth;\n        height = cropBox.minHeight;\n\n        if (range.x > 0) {\n          action = range.y > 0 ? ACTION_SOUTH_EAST : ACTION_NORTH_EAST;\n        } else if (range.x < 0) {\n          left -= width;\n          action = range.y > 0 ? ACTION_SOUTH_WEST : ACTION_NORTH_WEST;\n        }\n\n        if (range.y < 0) {\n          top -= height;\n        }\n\n        // Show the crop box if is hidden\n        if (!self.cropped) {\n          self.$cropBox.removeClass('cropper-hidden');\n          self.cropped = true;\n\n          if (self.limited) {\n            self.limitCropBox(true, true);\n          }\n        }\n\n        break;\n\n      default:\n    }\n\n    if (renderable) {\n      cropBox.width = width;\n      cropBox.height = height;\n      cropBox.left = left;\n      cropBox.top = top;\n      self.action = action;\n      self.renderCropBox();\n    }\n\n    // Override\n    $.each(pointers, function (i, p) {\n      p.startX = p.endX;\n      p.startY = p.endY;\n    });\n  }\n};\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction getPointersCenter(pointers) {\n  var pageX = 0;\n  var pageY = 0;\n  var count = 0;\n\n  $.each(pointers, function (i, _ref) {\n    var startX = _ref.startX,\n        startY = _ref.startY;\n\n    pageX += startX;\n    pageY += startY;\n    count += 1;\n  });\n\n  pageX /= count;\n  pageY /= count;\n\n  return {\n    pageX: pageX,\n    pageY: pageY\n  };\n}\n\nvar methods = {\n  // Show the crop box manually\n  crop: function crop() {\n    var self = this;\n\n    if (!self.ready || self.disabled) {\n      return;\n    }\n\n    if (!self.cropped) {\n      self.cropped = true;\n      self.limitCropBox(true, true);\n\n      if (self.options.modal) {\n        self.$dragBox.addClass('cropper-modal');\n      }\n\n      self.$cropBox.removeClass('cropper-hidden');\n    }\n\n    self.setCropBoxData(self.initialCropBox);\n  },\n\n\n  // Reset the image and crop box to their initial states\n  reset: function reset() {\n    var self = this;\n\n    if (!self.ready || self.disabled) {\n      return;\n    }\n\n    self.image = $.extend({}, self.initialImage);\n    self.canvas = $.extend({}, self.initialCanvas);\n    self.cropBox = $.extend({}, self.initialCropBox);\n\n    self.renderCanvas();\n\n    if (self.cropped) {\n      self.renderCropBox();\n    }\n  },\n\n\n  // Clear the crop box\n  clear: function clear() {\n    var self = this;\n\n    if (!self.cropped || self.disabled) {\n      return;\n    }\n\n    $.extend(self.cropBox, {\n      left: 0,\n      top: 0,\n      width: 0,\n      height: 0\n    });\n\n    self.cropped = false;\n    self.renderCropBox();\n\n    self.limitCanvas(true, true);\n\n    // Render canvas after crop box rendered\n    self.renderCanvas();\n\n    self.$dragBox.removeClass('cropper-modal');\n    self.$cropBox.addClass('cropper-hidden');\n  },\n\n\n  /**\n   * Replace the image's src and rebuild the cropper\n   *\n   * @param {String} url\n   * @param {Boolean} onlyColorChanged (optional)\n   */\n  replace: function replace(url, onlyColorChanged) {\n    var self = this;\n\n    if (!self.disabled && url) {\n      if (self.isImg) {\n        self.$element.attr('src', url);\n      }\n\n      if (onlyColorChanged) {\n        self.url = url;\n        self.$clone.attr('src', url);\n\n        if (self.ready) {\n          self.$preview.find('img').add(self.$clone2).attr('src', url);\n        }\n      } else {\n        if (self.isImg) {\n          self.replaced = true;\n        }\n\n        // Clear previous data\n        self.options.data = null;\n        self.load(url);\n      }\n    }\n  },\n\n\n  // Enable (unfreeze) the cropper\n  enable: function enable() {\n    var self = this;\n\n    if (self.ready) {\n      self.disabled = false;\n      self.$cropper.removeClass('cropper-disabled');\n    }\n  },\n\n\n  // Disable (freeze) the cropper\n  disable: function disable() {\n    var self = this;\n\n    if (self.ready) {\n      self.disabled = true;\n      self.$cropper.addClass('cropper-disabled');\n    }\n  },\n\n\n  // Destroy the cropper and remove the instance from the image\n  destroy: function destroy() {\n    var self = this;\n    var $this = self.$element;\n\n    if (self.loaded) {\n      if (self.isImg && self.replaced) {\n        $this.attr('src', self.originalUrl);\n      }\n\n      self.unbuild();\n      $this.removeClass('cropper-hidden');\n    } else if (self.isImg) {\n      $this.off('load', self.start);\n    } else if (self.$clone) {\n      self.$clone.remove();\n    }\n\n    $this.removeData('cropper');\n  },\n\n\n  /**\n   * Move the canvas with relative offsets\n   *\n   * @param {Number} offsetX\n   * @param {Number} offsetY (optional)\n   */\n  move: function move(offsetX, offsetY) {\n    var self = this;\n    var canvas = self.canvas;\n\n    self.moveTo(isUndefined(offsetX) ? offsetX : canvas.left + Number(offsetX), isUndefined(offsetY) ? offsetY : canvas.top + Number(offsetY));\n  },\n\n\n  /**\n   * Move the canvas to an absolute point\n   *\n   * @param {Number} x\n   * @param {Number} y (optional)\n   */\n  moveTo: function moveTo(x, y) {\n    var self = this;\n    var canvas = self.canvas;\n    var changed = false;\n\n    // If \"y\" is not present, its default value is \"x\"\n    if (isUndefined(y)) {\n      y = x;\n    }\n\n    x = Number(x);\n    y = Number(y);\n\n    if (self.ready && !self.disabled && self.options.movable) {\n      if (isNumber(x)) {\n        canvas.left = x;\n        changed = true;\n      }\n\n      if (isNumber(y)) {\n        canvas.top = y;\n        changed = true;\n      }\n\n      if (changed) {\n        self.renderCanvas(true);\n      }\n    }\n  },\n\n\n  /**\n   * Zoom the canvas with a relative ratio\n   *\n   * @param {Number} ratio\n   * @param {jQuery Event} _event (private)\n   */\n  zoom: function zoom(ratio, _event) {\n    var self = this;\n    var canvas = self.canvas;\n\n    ratio = Number(ratio);\n\n    if (ratio < 0) {\n      ratio = 1 / (1 - ratio);\n    } else {\n      ratio = 1 + ratio;\n    }\n\n    self.zoomTo(canvas.width * ratio / canvas.naturalWidth, _event);\n  },\n\n\n  /**\n   * Zoom the canvas to an absolute ratio\n   *\n   * @param {Number} ratio\n   * @param {jQuery Event} _event (private)\n   */\n  zoomTo: function zoomTo(ratio, _event) {\n    var self = this;\n    var options = self.options;\n    var pointers = self.pointers;\n    var canvas = self.canvas;\n    var width = canvas.width;\n    var height = canvas.height;\n    var naturalWidth = canvas.naturalWidth;\n    var naturalHeight = canvas.naturalHeight;\n\n    ratio = Number(ratio);\n\n    if (ratio >= 0 && self.ready && !self.disabled && options.zoomable) {\n      var newWidth = naturalWidth * ratio;\n      var newHeight = naturalHeight * ratio;\n      var originalEvent = void 0;\n\n      if (_event) {\n        originalEvent = _event.originalEvent;\n      }\n\n      if (self.trigger('zoom', {\n        originalEvent: originalEvent,\n        oldRatio: width / naturalWidth,\n        ratio: newWidth / naturalWidth\n      }).isDefaultPrevented()) {\n        return;\n      }\n\n      if (originalEvent) {\n        var offset = self.$cropper.offset();\n        var center = pointers && objectKeys(pointers).length ? getPointersCenter(pointers) : {\n          pageX: _event.pageX || originalEvent.pageX || 0,\n          pageY: _event.pageY || originalEvent.pageY || 0\n        };\n\n        // Zoom from the triggering point of the event\n        canvas.left -= (newWidth - width) * ((center.pageX - offset.left - canvas.left) / width);\n        canvas.top -= (newHeight - height) * ((center.pageY - offset.top - canvas.top) / height);\n      } else {\n        // Zoom from the center of the canvas\n        canvas.left -= (newWidth - width) / 2;\n        canvas.top -= (newHeight - height) / 2;\n      }\n\n      canvas.width = newWidth;\n      canvas.height = newHeight;\n      self.renderCanvas(true);\n    }\n  },\n\n\n  /**\n   * Rotate the canvas with a relative degree\n   *\n   * @param {Number} degree\n   */\n  rotate: function rotate(degree) {\n    var self = this;\n\n    self.rotateTo((self.image.rotate || 0) + Number(degree));\n  },\n\n\n  /**\n   * Rotate the canvas to an absolute degree\n   * https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function#rotate()\n   *\n   * @param {Number} degree\n   */\n  rotateTo: function rotateTo(degree) {\n    var self = this;\n\n    degree = Number(degree);\n\n    if (isNumber(degree) && self.ready && !self.disabled && self.options.rotatable) {\n      self.image.rotate = degree % 360;\n      self.rotated = true;\n      self.renderCanvas(true);\n    }\n  },\n\n\n  /**\n   * Scale the image\n   * https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function#scale()\n   *\n   * @param {Number} scaleX\n   * @param {Number} scaleY (optional)\n   */\n  scale: function scale(scaleX, scaleY) {\n    var self = this;\n    var image = self.image;\n    var changed = false;\n\n    // If \"scaleY\" is not present, its default value is \"scaleX\"\n    if (isUndefined(scaleY)) {\n      scaleY = scaleX;\n    }\n\n    scaleX = Number(scaleX);\n    scaleY = Number(scaleY);\n\n    if (self.ready && !self.disabled && self.options.scalable) {\n      if (isNumber(scaleX)) {\n        image.scaleX = scaleX;\n        changed = true;\n      }\n\n      if (isNumber(scaleY)) {\n        image.scaleY = scaleY;\n        changed = true;\n      }\n\n      if (changed) {\n        self.renderImage(true);\n      }\n    }\n  },\n\n\n  /**\n   * Scale the abscissa of the image\n   *\n   * @param {Number} scaleX\n   */\n  scaleX: function scaleX(_scaleX) {\n    var self = this;\n    var scaleY = self.image.scaleY;\n\n    self.scale(_scaleX, isNumber(scaleY) ? scaleY : 1);\n  },\n\n\n  /**\n   * Scale the ordinate of the image\n   *\n   * @param {Number} scaleY\n   */\n  scaleY: function scaleY(_scaleY) {\n    var self = this;\n    var scaleX = self.image.scaleX;\n\n    self.scale(isNumber(scaleX) ? scaleX : 1, _scaleY);\n  },\n\n\n  /**\n   * Get the cropped area position and size data (base on the original image)\n   *\n   * @param {Boolean} isRounded (optional)\n   * @return {Object} data\n   */\n  getData: function getData(isRounded) {\n    var self = this;\n    var options = self.options;\n    var image = self.image;\n    var canvas = self.canvas;\n    var cropBox = self.cropBox;\n    var ratio = void 0;\n    var data = void 0;\n\n    if (self.ready && self.cropped) {\n      data = {\n        x: cropBox.left - canvas.left,\n        y: cropBox.top - canvas.top,\n        width: cropBox.width,\n        height: cropBox.height\n      };\n\n      ratio = image.width / image.naturalWidth;\n\n      $.each(data, function (i, n) {\n        n /= ratio;\n        data[i] = isRounded ? Math.round(n) : n;\n      });\n    } else {\n      data = {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0\n      };\n    }\n\n    if (options.rotatable) {\n      data.rotate = image.rotate || 0;\n    }\n\n    if (options.scalable) {\n      data.scaleX = image.scaleX || 1;\n      data.scaleY = image.scaleY || 1;\n    }\n\n    return data;\n  },\n\n\n  /**\n   * Set the cropped area position and size with new data\n   *\n   * @param {Object} data\n   */\n  setData: function setData(data) {\n    var self = this;\n    var options = self.options;\n    var image = self.image;\n    var canvas = self.canvas;\n    var cropBoxData = {};\n    var rotated = void 0;\n    var isScaled = void 0;\n    var ratio = void 0;\n\n    if ($.isFunction(data)) {\n      data = data.call(self.element);\n    }\n\n    if (self.ready && !self.disabled && $.isPlainObject(data)) {\n      if (options.rotatable) {\n        if (isNumber(data.rotate) && data.rotate !== image.rotate) {\n          image.rotate = data.rotate;\n          rotated = true;\n          self.rotated = rotated;\n        }\n      }\n\n      if (options.scalable) {\n        if (isNumber(data.scaleX) && data.scaleX !== image.scaleX) {\n          image.scaleX = data.scaleX;\n          isScaled = true;\n        }\n\n        if (isNumber(data.scaleY) && data.scaleY !== image.scaleY) {\n          image.scaleY = data.scaleY;\n          isScaled = true;\n        }\n      }\n\n      if (rotated) {\n        self.renderCanvas();\n      } else if (isScaled) {\n        self.renderImage();\n      }\n\n      ratio = image.width / image.naturalWidth;\n\n      if (isNumber(data.x)) {\n        cropBoxData.left = data.x * ratio + canvas.left;\n      }\n\n      if (isNumber(data.y)) {\n        cropBoxData.top = data.y * ratio + canvas.top;\n      }\n\n      if (isNumber(data.width)) {\n        cropBoxData.width = data.width * ratio;\n      }\n\n      if (isNumber(data.height)) {\n        cropBoxData.height = data.height * ratio;\n      }\n\n      self.setCropBoxData(cropBoxData);\n    }\n  },\n\n\n  /**\n   * Get the container size data\n   *\n   * @return {Object} data\n   */\n  getContainerData: function getContainerData() {\n    return this.ready ? this.container : {};\n  },\n\n\n  /**\n   * Get the image position and size data\n   *\n   * @return {Object} data\n   */\n  getImageData: function getImageData() {\n    return this.loaded ? this.image : {};\n  },\n\n\n  /**\n   * Get the canvas position and size data\n   *\n   * @return {Object} data\n   */\n  getCanvasData: function getCanvasData() {\n    var self = this;\n    var canvas = self.canvas;\n    var data = {};\n\n    if (self.ready) {\n      $.each(['left', 'top', 'width', 'height', 'naturalWidth', 'naturalHeight'], function (i, n) {\n        data[n] = canvas[n];\n      });\n    }\n\n    return data;\n  },\n\n\n  /**\n   * Set the canvas position and size with new data\n   *\n   * @param {Object} data\n   */\n  setCanvasData: function setCanvasData(data) {\n    var self = this;\n    var canvas = self.canvas;\n    var aspectRatio = canvas.aspectRatio;\n\n    if ($.isFunction(data)) {\n      data = data.call(self.$element);\n    }\n\n    if (self.ready && !self.disabled && $.isPlainObject(data)) {\n      if (isNumber(data.left)) {\n        canvas.left = data.left;\n      }\n\n      if (isNumber(data.top)) {\n        canvas.top = data.top;\n      }\n\n      if (isNumber(data.width)) {\n        canvas.width = data.width;\n        canvas.height = data.width / aspectRatio;\n      } else if (isNumber(data.height)) {\n        canvas.height = data.height;\n        canvas.width = data.height * aspectRatio;\n      }\n\n      self.renderCanvas(true);\n    }\n  },\n\n\n  /**\n   * Get the crop box position and size data\n   *\n   * @return {Object} data\n   */\n  getCropBoxData: function getCropBoxData() {\n    var self = this;\n    var cropBox = self.cropBox;\n\n    return self.ready && self.cropped ? {\n      left: cropBox.left,\n      top: cropBox.top,\n      width: cropBox.width,\n      height: cropBox.height\n    } : {};\n  },\n\n\n  /**\n   * Set the crop box position and size with new data\n   *\n   * @param {Object} data\n   */\n  setCropBoxData: function setCropBoxData(data) {\n    var self = this;\n    var cropBox = self.cropBox;\n    var aspectRatio = self.options.aspectRatio;\n    var widthChanged = void 0;\n    var heightChanged = void 0;\n\n    if ($.isFunction(data)) {\n      data = data.call(self.$element);\n    }\n\n    if (self.ready && self.cropped && !self.disabled && $.isPlainObject(data)) {\n      if (isNumber(data.left)) {\n        cropBox.left = data.left;\n      }\n\n      if (isNumber(data.top)) {\n        cropBox.top = data.top;\n      }\n\n      if (isNumber(data.width) && data.width !== cropBox.width) {\n        widthChanged = true;\n        cropBox.width = data.width;\n      }\n\n      if (isNumber(data.height) && data.height !== cropBox.height) {\n        heightChanged = true;\n        cropBox.height = data.height;\n      }\n\n      if (aspectRatio) {\n        if (widthChanged) {\n          cropBox.height = cropBox.width / aspectRatio;\n        } else if (heightChanged) {\n          cropBox.width = cropBox.height * aspectRatio;\n        }\n      }\n\n      self.renderCropBox();\n    }\n  },\n\n\n  /**\n   * Get a canvas drawn the cropped image\n   *\n   * @param {Object} options (optional)\n   * @return {HTMLCanvasElement} canvas\n   */\n  getCroppedCanvas: function getCroppedCanvas(options) {\n    var self = this;\n\n    if (!self.ready || !window.HTMLCanvasElement) {\n      return null;\n    }\n\n    if (!$.isPlainObject(options)) {\n      options = {};\n    }\n\n    if (!self.cropped) {\n      return getSourceCanvas(self.$clone[0], self.image, options);\n    }\n\n    var data = self.getData();\n    var originalWidth = data.width;\n    var originalHeight = data.height;\n    var aspectRatio = originalWidth / originalHeight;\n    var scaledWidth = void 0;\n    var scaledHeight = void 0;\n    var scaledRatio = void 0;\n\n    if ($.isPlainObject(options)) {\n      scaledWidth = options.width;\n      scaledHeight = options.height;\n\n      if (scaledWidth) {\n        scaledHeight = scaledWidth / aspectRatio;\n        scaledRatio = scaledWidth / originalWidth;\n      } else if (scaledHeight) {\n        scaledWidth = scaledHeight * aspectRatio;\n        scaledRatio = scaledHeight / originalHeight;\n      }\n    }\n\n    // The canvas element will use `Math.Math.floor` on a float number, so Math.floor first\n    var canvasWidth = Math.floor(scaledWidth || originalWidth);\n    var canvasHeight = Math.floor(scaledHeight || originalHeight);\n\n    var canvas = $('<canvas>')[0];\n    var context = canvas.getContext('2d');\n\n    canvas.width = canvasWidth;\n    canvas.height = canvasHeight;\n\n    if (options.fillColor) {\n      context.fillStyle = options.fillColor;\n      context.fillRect(0, 0, canvasWidth, canvasHeight);\n    }\n\n    // https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D.drawImage\n    var parameters = function () {\n      var source = getSourceCanvas(self.$clone[0], self.image, options);\n      var sourceWidth = source.width;\n      var sourceHeight = source.height;\n      var canvasData = self.canvas;\n      var params = [source];\n\n      // Source canvas\n      var srcX = data.x + canvasData.naturalWidth * (Math.abs(data.scaleX || 1) - 1) / 2;\n      var srcY = data.y + canvasData.naturalHeight * (Math.abs(data.scaleY || 1) - 1) / 2;\n      var srcWidth = void 0;\n      var srcHeight = void 0;\n\n      // Destination canvas\n      var dstX = void 0;\n      var dstY = void 0;\n      var dstWidth = void 0;\n      var dstHeight = void 0;\n\n      if (srcX <= -originalWidth || srcX > sourceWidth) {\n        srcX = 0;\n        srcWidth = 0;\n        dstX = 0;\n        dstWidth = 0;\n      } else if (srcX <= 0) {\n        dstX = -srcX;\n        srcX = 0;\n        dstWidth = Math.min(sourceWidth, originalWidth + srcX);\n        srcWidth = dstWidth;\n      } else if (srcX <= sourceWidth) {\n        dstX = 0;\n        dstWidth = Math.min(originalWidth, sourceWidth - srcX);\n        srcWidth = dstWidth;\n      }\n\n      if (srcWidth <= 0 || srcY <= -originalHeight || srcY > sourceHeight) {\n        srcY = 0;\n        srcHeight = 0;\n        dstY = 0;\n        dstHeight = 0;\n      } else if (srcY <= 0) {\n        dstY = -srcY;\n        srcY = 0;\n        dstHeight = Math.min(sourceHeight, originalHeight + srcY);\n        srcHeight = dstHeight;\n      } else if (srcY <= sourceHeight) {\n        dstY = 0;\n        dstHeight = Math.min(originalHeight, sourceHeight - srcY);\n        srcHeight = dstHeight;\n      }\n\n      // All the numerical parameters should be integer for `drawImage` (#476)\n      params.push(Math.floor(srcX), Math.floor(srcY), Math.floor(srcWidth), Math.floor(srcHeight));\n\n      // Scale destination sizes\n      if (scaledRatio) {\n        dstX *= scaledRatio;\n        dstY *= scaledRatio;\n        dstWidth *= scaledRatio;\n        dstHeight *= scaledRatio;\n      }\n\n      // Avoid \"IndexSizeError\" in IE and Firefox\n      if (dstWidth > 0 && dstHeight > 0) {\n        params.push(Math.floor(dstX), Math.floor(dstY), Math.floor(dstWidth), Math.floor(dstHeight));\n      }\n\n      return params;\n    }();\n\n    context.imageSmoothingEnabled = !!options.imageSmoothingEnabled;\n\n    if (options.imageSmoothingQuality) {\n      context.imageSmoothingQuality = options.imageSmoothingQuality;\n    }\n\n    context.drawImage.apply(context, _toConsumableArray(parameters));\n\n    return canvas;\n  },\n\n\n  /**\n   * Change the aspect ratio of the crop box\n   *\n   * @param {Number} aspectRatio\n   */\n  setAspectRatio: function setAspectRatio(aspectRatio) {\n    var self = this;\n    var options = self.options;\n\n    if (!self.disabled && !isUndefined(aspectRatio)) {\n      // 0 -> NaN\n      options.aspectRatio = Math.max(0, aspectRatio) || NaN;\n\n      if (self.ready) {\n        self.initCropBox();\n\n        if (self.cropped) {\n          self.renderCropBox();\n        }\n      }\n    }\n  },\n\n\n  /**\n   * Change the drag mode\n   *\n   * @param {String} mode (optional)\n   */\n  setDragMode: function setDragMode(mode) {\n    var self = this;\n    var options = self.options;\n    var croppable = void 0;\n    var movable = void 0;\n\n    if (self.loaded && !self.disabled) {\n      croppable = mode === 'crop';\n      movable = options.movable && mode === 'move';\n      mode = croppable || movable ? mode : 'none';\n\n      self.$dragBox.data('action', mode).toggleClass('cropper-crop', croppable).toggleClass('cropper-move', movable);\n\n      if (!options.cropBoxMovable) {\n        // Sync drag mode to crop box when it is not movable(#300)\n        self.$face.data('action', mode).toggleClass('cropper-crop', croppable).toggleClass('cropper-move', movable);\n      }\n    }\n  }\n};\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar CLASS_HIDDEN = 'cropper-hidden';\nvar REGEXP_DATA_URL = /^data:/;\nvar REGEXP_DATA_URL_JPEG = /^data:image\\/jpeg;base64,/;\n\nvar Cropper = function () {\n  function Cropper(element, options) {\n    _classCallCheck(this, Cropper);\n\n    var self = this;\n\n    self.$element = $(element);\n    self.options = $.extend({}, DEFAULTS, $.isPlainObject(options) && options);\n    self.loaded = false;\n    self.ready = false;\n    self.completed = false;\n    self.rotated = false;\n    self.cropped = false;\n    self.disabled = false;\n    self.replaced = false;\n    self.limited = false;\n    self.wheeling = false;\n    self.isImg = false;\n    self.originalUrl = '';\n    self.canvas = null;\n    self.cropBox = null;\n    self.pointers = {};\n    self.init();\n  }\n\n  _createClass(Cropper, [{\n    key: 'init',\n    value: function init() {\n      var self = this;\n      var $this = self.$element;\n      var url = void 0;\n\n      if ($this.is('img')) {\n        self.isImg = true;\n\n        // Should use `$.fn.attr` here. e.g.: \"img/picture.jpg\"\n        url = $this.attr('src');\n        self.originalUrl = url;\n\n        // Stop when it's a blank image\n        if (!url) {\n          return;\n        }\n\n        // Should use `$.fn.prop` here. e.g.: \"http://example.com/img/picture.jpg\"\n        url = $this.prop('src');\n      } else if ($this.is('canvas') && window.HTMLCanvasElement) {\n        url = $this[0].toDataURL();\n      }\n\n      self.load(url);\n    }\n\n    // A shortcut for triggering custom events\n\n  }, {\n    key: 'trigger',\n    value: function trigger(type, data) {\n      var e = $.Event(type, data);\n\n      this.$element.trigger(e);\n\n      return e;\n    }\n  }, {\n    key: 'load',\n    value: function load(url) {\n      var self = this;\n      var options = self.options;\n      var $this = self.$element;\n\n      if (!url) {\n        return;\n      }\n\n      self.url = url;\n      self.image = {};\n\n      if (!options.checkOrientation || !window.ArrayBuffer) {\n        self.clone();\n        return;\n      }\n\n      // XMLHttpRequest disallows to open a Data URL in some browsers like IE11 and Safari\n      if (REGEXP_DATA_URL.test(url)) {\n        if (REGEXP_DATA_URL_JPEG.test(url)) {\n          self.read(dataURLToArrayBuffer(url));\n        } else {\n          self.clone();\n        }\n        return;\n      }\n\n      var xhr = new XMLHttpRequest();\n\n      xhr.onerror = $.proxy(function () {\n        self.clone();\n      }, this);\n\n      xhr.onload = function load() {\n        self.read(this.response);\n      };\n\n      if (options.checkCrossOrigin && isCrossOriginURL(url) && $this.prop('crossOrigin')) {\n        url = addTimestamp(url);\n      }\n\n      xhr.open('get', url);\n      xhr.responseType = 'arraybuffer';\n      xhr.withCredentials = $this.prop('crossOrigin') === 'use-credentials';\n      xhr.send();\n    }\n  }, {\n    key: 'read',\n    value: function read(arrayBuffer) {\n      var self = this;\n      var options = self.options;\n      var orientation = getOrientation(arrayBuffer);\n      var image = self.image;\n      var rotate = 0;\n      var scaleX = 1;\n      var scaleY = 1;\n\n      if (orientation > 1) {\n        self.url = arrayBufferToDataURL(arrayBuffer);\n\n        switch (orientation) {\n          // flip horizontal\n          case 2:\n            scaleX = -1;\n            break;\n\n          // rotate left 180\n          case 3:\n            rotate = -180;\n            break;\n\n          // flip vertical\n          case 4:\n            scaleY = -1;\n            break;\n\n          // flip vertical + rotate right 90\n          case 5:\n            rotate = 90;\n            scaleY = -1;\n            break;\n\n          // rotate right 90\n          case 6:\n            rotate = 90;\n            break;\n\n          // flip horizontal + rotate right 90\n          case 7:\n            rotate = 90;\n            scaleX = -1;\n            break;\n\n          // rotate left 90\n          case 8:\n            rotate = -90;\n            break;\n\n          default:\n        }\n      }\n\n      if (options.rotatable) {\n        image.rotate = rotate;\n      }\n\n      if (options.scalable) {\n        image.scaleX = scaleX;\n        image.scaleY = scaleY;\n      }\n\n      self.clone();\n    }\n  }, {\n    key: 'clone',\n    value: function clone() {\n      var self = this;\n      var options = self.options;\n      var $this = self.$element;\n      var url = self.url;\n      var crossOrigin = '';\n      var crossOriginUrl = void 0;\n\n      if (options.checkCrossOrigin && isCrossOriginURL(url)) {\n        crossOrigin = $this.prop('crossOrigin');\n\n        if (crossOrigin) {\n          crossOriginUrl = url;\n        } else {\n          crossOrigin = 'anonymous';\n\n          // Bust cache (#148) when there is not a \"crossOrigin\" property\n          crossOriginUrl = addTimestamp(url);\n        }\n      }\n\n      self.crossOrigin = crossOrigin;\n      self.crossOriginUrl = crossOriginUrl;\n\n      var image = document.createElement('img');\n\n      if (crossOrigin) {\n        image.crossOrigin = crossOrigin;\n      }\n\n      image.src = crossOriginUrl || url;\n\n      var $clone = $(image);\n\n      self.$clone = $clone;\n\n      if (self.isImg) {\n        if ($this[0].complete) {\n          self.start();\n        } else {\n          $this.one('load', $.proxy(self.start, this));\n        }\n      } else {\n        $clone.one('load', $.proxy(self.start, this)).one('error', $.proxy(self.stop, this)).addClass('cropper-hide').insertAfter($this);\n      }\n    }\n  }, {\n    key: 'start',\n    value: function start() {\n      var self = this;\n      var $clone = self.$clone;\n      var $image = self.$element;\n\n      if (!self.isImg) {\n        $clone.off('error', self.stop);\n        $image = $clone;\n      }\n\n      getImageSize($image[0], function (naturalWidth, naturalHeight) {\n        $.extend(self.image, {\n          naturalWidth: naturalWidth,\n          naturalHeight: naturalHeight,\n          aspectRatio: naturalWidth / naturalHeight\n        });\n\n        self.loaded = true;\n        self.build();\n      });\n    }\n  }, {\n    key: 'stop',\n    value: function stop() {\n      var self = this;\n\n      self.$clone.remove();\n      self.$clone = null;\n    }\n  }, {\n    key: 'build',\n    value: function build() {\n      var self = this;\n      var options = self.options;\n      var $this = self.$element;\n      var $clone = self.$clone;\n\n      if (!self.loaded) {\n        return;\n      }\n\n      // Unbuild first when replace\n      if (self.ready) {\n        self.unbuild();\n      }\n\n      var $cropper = $(TEMPLATE);\n      var $cropBox = $cropper.find('.cropper-crop-box');\n      var $face = $cropBox.find('.cropper-face');\n\n      // Create cropper elements\n      self.$container = $this.parent();\n      self.$cropper = $cropper;\n      self.$canvas = $cropper.find('.cropper-canvas').append($clone);\n      self.$dragBox = $cropper.find('.cropper-drag-box');\n      self.$cropBox = $cropBox;\n      self.$viewBox = $cropper.find('.cropper-view-box');\n      self.$face = $face;\n\n      // Hide the original image\n      $this.addClass(CLASS_HIDDEN).after($cropper);\n\n      // Show the clone image if is hidden\n      if (!self.isImg) {\n        $clone.removeClass('cropper-hide');\n      }\n\n      self.initPreview();\n      self.bind();\n\n      options.aspectRatio = Math.max(0, options.aspectRatio) || NaN;\n      options.viewMode = Math.max(0, Math.min(3, Math.round(options.viewMode))) || 0;\n\n      self.cropped = options.autoCrop;\n\n      if (options.autoCrop) {\n        if (options.modal) {\n          self.$dragBox.addClass('cropper-modal');\n        }\n      } else {\n        $cropBox.addClass(CLASS_HIDDEN);\n      }\n\n      if (!options.guides) {\n        $cropBox.find('.cropper-dashed').addClass(CLASS_HIDDEN);\n      }\n\n      if (!options.center) {\n        $cropBox.find('.cropper-center').addClass(CLASS_HIDDEN);\n      }\n\n      if (options.cropBoxMovable) {\n        $face.addClass('cropper-move').data('action', 'all');\n      }\n\n      if (!options.highlight) {\n        $face.addClass('cropper-invisible');\n      }\n\n      if (options.background) {\n        $cropper.addClass('cropper-bg');\n      }\n\n      if (!options.cropBoxResizable) {\n        $cropBox.find('.cropper-line, .cropper-point').addClass(CLASS_HIDDEN);\n      }\n\n      self.setDragMode(options.dragMode);\n      self.render();\n      self.ready = true;\n      self.setData(options.data);\n\n      // Trigger the ready event asynchronously to keep `data('cropper')` is defined\n      self.completing = setTimeout(function () {\n        if ($.isFunction(options.ready)) {\n          $this.one('ready', options.ready);\n        }\n\n        self.trigger('ready');\n        self.trigger('crop', self.getData());\n        self.completed = true;\n      }, 0);\n    }\n  }, {\n    key: 'unbuild',\n    value: function unbuild() {\n      var self = this;\n\n      if (!self.ready) {\n        return;\n      }\n\n      if (!self.completed) {\n        clearTimeout(self.completing);\n      }\n\n      self.ready = false;\n      self.completed = false;\n      self.initialImage = null;\n\n      // Clear `initialCanvas` is necessary when replace\n      self.initialCanvas = null;\n      self.initialCropBox = null;\n      self.container = null;\n      self.canvas = null;\n\n      // Clear `cropBox` is necessary when replace\n      self.cropBox = null;\n      self.unbind();\n\n      self.resetPreview();\n      self.$preview = null;\n\n      self.$viewBox = null;\n      self.$cropBox = null;\n      self.$dragBox = null;\n      self.$canvas = null;\n      self.$container = null;\n\n      self.$cropper.remove();\n      self.$cropper = null;\n    }\n  }], [{\n    key: 'setDefaults',\n    value: function setDefaults(options) {\n      $.extend(DEFAULTS, $.isPlainObject(options) && options);\n    }\n  }]);\n\n  return Cropper;\n}();\n\n$.extend(Cropper.prototype, render);\n$.extend(Cropper.prototype, preview);\n$.extend(Cropper.prototype, events);\n$.extend(Cropper.prototype, handlers);\n$.extend(Cropper.prototype, change);\n$.extend(Cropper.prototype, methods);\n\nvar NAMESPACE = 'cropper';\nvar OtherCropper = $.fn.cropper;\n\n$.fn.cropper = function jQueryCropper(option) {\n  for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n\n  var result = void 0;\n\n  this.each(function (i, element) {\n    var $this = $(element);\n    var data = $this.data(NAMESPACE);\n\n    if (!data) {\n      if (/destroy/.test(option)) {\n        return;\n      }\n\n      var options = $.extend({}, $this.data(), $.isPlainObject(option) && option);\n      $this.data(NAMESPACE, data = new Cropper(element, options));\n    }\n\n    if (typeof option === 'string') {\n      var fn = data[option];\n\n      if ($.isFunction(fn)) {\n        result = fn.apply(data, args);\n      }\n    }\n  });\n\n  return typeof result !== 'undefined' ? result : this;\n};\n\n$.fn.cropper.Constructor = Cropper;\n$.fn.cropper.setDefaults = Cropper.setDefaults;\n\n// No conflict\n$.fn.cropper.noConflict = function noConflict() {\n  $.fn.cropper = OtherCropper;\n  return this;\n};\n\n})));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/cropper/dist/cropper.js\n// module id = ./node_modules/cropper/dist/cropper.js\n// module chunks = main"],"sourceRoot":""}