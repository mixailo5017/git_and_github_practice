{"version":3,"sources":["node_modules/browser-pack/_prelude.js","build/_js/_custom/_changeLanguage.js","build/_js/_custom/script.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"script.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\n\nvar changeLanguage = function(language, callback) {\n\n    var posting = $.post('/language', {\n        language: language\n    }, \"json\");\n\n    posting.done(function(data) {\n        if (typeof callback == 'function') {\n            callback();\n        }\n        location.reload();\n    }).fail(function() {\n        //\n    }).always(function(e) {\n        //\n    });\n}\n\nmodule.exports = changeLanguage;","var hosturl = location.protocol + '//' + location.hostname;\nvar GVIP = GVIP || {};\nGVIP.App = GVIP.App || {};\nGVIP.App.Analytics = GVIP.App.Analytics || {};\nGVIP.App.Analytics.context = GVIP.App.Analytics.context || {};\n\n$(window).load(function() {\n    var $meter = $('#meter'),\n        percent = parseInt($meter.data('value')) / parseInt($meter.data('max')) * 100;\n    $meter.find('.progress').css('width', percent + \"%\");\n});\n\n$(function() {\n\n    // Instantiate the accordion on My GViP\n    $('#myvip .column_1').accordion({\n        header: \"h2\",\n        autoHeight: false,\n        collapsible: true,\n        icons: {\n            \"header\": \"accordion-icon-closed\", \n            \"headerSelected\": \"accordion-icon-open\" \n        }\n    });\n\n    //project description toggle\n    $('.project-description').on('click', '.show', function() {\n        $(this).siblings('.text-cut').hide();\n        $(this).hide();\n        $('.project-description .overflow-text').slideToggle();\n    });\n    $('.project-description').on('click', '.hide', function() {\n        $('.project-description .show, .project-description .text-cut').show();\n        $('.project-description .overflow-text').slideToggle();\n        $(\"html, body\").animate({\n            scrollTop: 0\n        }, \"slow\");\n    });\n\n    var $meter = $(\"#meter\");\n    //progress bar dismiss\n    $meter.find(\"button\").click(function() {\n        dismissPCI();\n        $meter.animate({\n            height: 0,\n            opacity: 0\n        }, \"fast\", function() {\n            $(this).slideUp();\n        });\n    });\n\n    /*\n        if($('html').hasClass(\"lt-ie9\") === true){\n           // Append upgrade banner to body\n        }\n    */\n    $('textarea.tinymce').tinymce({\n        // Location of TinyMCE script\n        script_url: '/js/tiny_mce/tiny_mce.js',\n\n        // General options\n        theme: \"advanced\",\n        width: $('textarea.tinymce').data('width') || \"900\",\n        plugins: \"autolink,lists,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,advlist\",\n        // Allow iframe tag\n        extended_valid_elements: \"iframe[class|src|alt|title|width|height|align|name|frameborder|allowfullscreen]\",\n        // Theme options\n        theme_advanced_buttons1: \"bold,italic,underline,,bullist,numlist,outdent,indent,justifyleft,justifycenter,justifyright,|,link,unlink,anchor,image,media,|,formatselect,|,code\",\n        theme_advanced_toolbar_location: \"top\",\n        theme_advanced_toolbar_align: \"left\",\n        theme_advanced_statusbar_location: \"bottom\",\n        theme_advanced_resizing: false,\n\n        formats: {\n            alignleft: {\n                selector: 'p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img',\n                classes: 'left'\n            },\n            aligncenter: {\n                selector: 'p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img',\n                classes: 'center'\n            },\n            alignright: {\n                selector: 'p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img',\n                classes: 'right'\n            },\n            alignfull: {\n                selector: 'p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img',\n                classes: 'full'\n            },\n            bold: {\n                inline: 'span',\n                'classes': 'bold'\n            },\n            italic: {\n                inline: 'span',\n                'classes': 'italic'\n            },\n            underline: {\n                inline: 'span',\n                'classes': 'underline',\n                exact: true\n            },\n            strikethrough: {\n                inline: 'del'\n            },\n            customformat: {\n                inline: 'span',\n                styles: {\n                    color: '#00ff00',\n                    fontSize: '20px'\n                },\n                attributes: {\n                    title: 'My custom format'\n                }\n            }\n        },\n\n        // Example content CSS (should be your site CSS)\n        content_css: \"/css/content.css\",\n\n        // Drop lists for link/image/media/template dialogs\n        template_external_list_url: \"lists/template_list.js\",\n        external_link_list_url: \"lists/link_list.js\",\n        external_image_list_url: \"lists/image_list.js\",\n        media_external_list_url: \"lists/media_list.js\"\n\n    });\n\n\n    // Prevent clicking on View button when the Case Study has Draft status\n    $('.edit_case_studies .edit_portlet .edit_buttons a.edit_button.last').on('click', function(e) {\n        var status = $(this).parent().parent().next('.add_case_study').find('.status input[type=radio][value=1]').attr('checked');\n        if (status === undefined) {\n            alert('A Case Study in Draft status can not be presented in public profile view.');\n            e.preventDefault();\n        }\n    });\n\n    // File uploads\n    $('.file_upload input[type=\"file\"]').each(function() {\n        $(this).customFileInput();\n    });\n\n    // Sector Subsector filters on listviews\n\n    function loadSubsectors($subsectors, sector) {\n        $subsectors.html(\"\");\n        $subsectors.append(\"<option value=\\\"\\\">\" + subsectors[\"first\"] + \"</option>\");\n        $.each(subsectors[sector], function(index, value) {\n            $subsectors.append(\"<option value=\\\"\" + value + \"\\\">\" + value + \"</option>\")\n        });\n    }\n\n    $('form[name=search_form] select[name=sector]').change(function() {\n        var $this = $(this),\n            $subsectors = $('form[name=search_form] select[name=subsector]');\n\n        loadSubsectors($subsectors, $this.val());\n    });\n\n    //Auto resize textarea for posting an update (comment)\n    function autoresize() {\n        var txt = $(\".post-comment\"),\n            content = null;\n\n        txt.addClass('txtstuff');\n\n        txt.on('keyup', function() {\n            content = $(this).val();\n            content = content.replace(/\\n/g, '');\n\n            var hiddenDiv = $(this).parent().parent().parent().find('.hiddendiv');\n            hiddenDiv.text(content + '');\n\n            $(this).css('height', hiddenDiv.outerHeight());\n        });\n    }\n    autoresize();\n\n    function postUpdate($form, callback) {\n        if ($form == undefined || $form.length == 0) {\n            return false;\n        }\n\n        var url = $form.attr(\"action\"),\n            $content = $form.find(\"textarea.post-comment\"),\n            $errors = $form.find(\".errormsg\"),\n            content = $content.val(),\n            postData = new Object;\n\n        // Clear the errors\n        $errors.html(\"\");\n\n        if (!isUpdateContentValid(content)) {\n            return false;\n        }\n        postData.author = $form.find(\"input[name=author]\").val();\n        postData.type = $form.find(\"input[name=type]\").val();\n        postData.content = cleanUpdateContent(content);\n\n        if ($form.find(\"input[name=reply_to]\")) {\n            postData.reply_to = $form.find(\"input[name=reply_to]\").val();\n        }\n\n        var posting = $.post(url, postData, \"json\");\n\n        posting.done(function(data) {\n            if (data.status == \"success\") {\n                $content.val('');\n                $content.keyup();\n                $form.removeClass('data-submitting-in-progress');\n                // Analitics\n                if (data.analytics) {\n                    segmentAnalytics(data.analytics);\n                }\n            }\n        }).fail(function() {\n            $errors.html(\"<label>Error occurred while trying to post an update.</label>\")\n                //            alert(\"Error while trying to post an update\");\n        }).always(function(e) {\n            if (typeof callback == 'function') {\n                callback();\n            }\n        });\n    }\n\n    function loadUpdateReplies($update) {\n        if ($update == undefined || $update.length == 0) {\n            return;\n        }\n\n        var $container = $update.find(\".additional-comments ul.updates\"),\n            update_id = $update.attr(\"data-id\"),\n            url = $update.attr(\"data-replies-url\") + \"/\" + update_id;\n\n        var getting = $.get(url, null, \"json\");\n\n        getting.done(function(data) {\n            if (data.status == \"success\") {\n                if (data.updates) {\n                    $container.html(data.updates);\n                }\n                // Show the number of replies\n                if (data.update_count) {\n                    $update.find(\".content .number-of-comments span\").html(data.update_count);\n                }\n                $update.find(\".comment\").append(\"<div class='hiddendiv common'>\");\n                autoresize();\n            }\n        }).fail(function() {\n            alert(\"Error while trying to get updates.\");\n        });\n\n    }\n\n    function loadUpdates($form, reload) {\n        if ($form == undefined || $form.length == 0) {\n            return false;\n        }\n        // Set default of reload to false\n        reload = typeof reload !== 'undefined' ? reload : false;\n\n        var url = $form.attr(\"action\"),\n            $container = $form.parents().find(\"ul.feed.updates\"),\n            $last = $container.children(\"li:last-child\"),\n            $loadMore = $form.find(\"input[type=submit].view-more\"),\n            lastId = 0,\n            html = \"\";\n\n        if (!reload && $last != undefined) {\n            lastId = $last.attr('data-id') == undefined ? 0 : $last.attr('data-id');\n        }\n\n        var getting = $.get(url + \"/\" + lastId, null, \"json\");\n\n        getting.done(function(data) {\n            if (data.status == \"success\") {\n                if (data.updates) {\n                    if (reload) {\n                        $container.html(data.updates); // Replace the content\n                    } else {\n                        $container.append(data.updates); // Append to the end\n                    }\n                }\n                checkPostUpdateState($container.find(\"form[name=post_update]\"));\n                if (data.more_count && data.more_count > 0) {\n                    $loadMore.show();\n                } else {\n                    $loadMore.hide();\n                }\n            }\n        }).fail(function() {\n            alert(\"Error while trying to get updates.\");\n        });\n    }\n\n    $(\".comment:first\").append(\"<div class='hiddendiv common'>\");\n\n    $(\".comments\").on(\"click\", \"li .number-of-comments a\", function(e) {\n        e.preventDefault();\n\n        var $update = $(this).parents(\"li\").first(),\n            $container = $update.find(\".additional-comments\");\n\n        // Do AJAX request only if there are no replies currently and replies block is invisible\n        if ($container.find(\".updates\").children(\"li\").length == 0 &&\n            $container.css(\"display\") == 'none') {\n            loadUpdateReplies($update);\n        }\n\n        $container.slideToggle();\n        return false;\n    });\n\n    $(\"#myvip form[name=updates_view_more]\").submit(function(e) {\n        e.preventDefault();\n        loadUpdates($(this));\n        return false;\n    });\n    // Load initial portion of MyVip updates on the page load\n    loadUpdates($(\"#myvip form[name=updates_view_more]\"));\n\n    $(\"#projects form[name=updates_view_more]\").submit(function(e) {\n        e.preventDefault();\n        loadUpdates($(this));\n        return false;\n    });\n    loadUpdates($(\"#projects form[name=updates_view_more]\"));\n\n    function cleanUpdateContent(content) {\n        if (content === undefined) {\n            return '';\n        }\n        // Remove all vertival space and trim leading and trailing spaces\n        // IE dosent support String.trim() therefore we use $.trim()\n        return $.trim(content.replace(/\\v+/g, ''));\n    }\n\n    function isUpdateContentValid(content) {\n        content = cleanUpdateContent(content);\n        var min = 6,\n            max = 1024;\n\n        if (content.length < min || content.length > max) {\n            return false;\n        }\n\n        return true;\n    }\n\n    function checkPostUpdateState($form) {\n\n        var $content = $form.find(\"textarea.post-comment\"),\n            $submit = $form.find(\"input[type=submit]\");\n\n\n        if (isUpdateContentValid($content.val()) && $form.hasClass('data-submitting-in-progress') === false) {\n            $submit.removeAttr(\"disabled\");\n\n        } else {\n            $submit.attr(\"disabled\", \"disabled\");\n        }\n    }\n\n    checkPostUpdateState($(\"form[name=post_update]\"));\n\n    $(\".comments\").on(\"keydown\", \"form[name=post_update] textarea.post-comment\", function(e) {\n        if (e.keyCode == 13) {\n            e.preventDefault();\n            if (e.metaKey || e.ctrlKey) {\n                var $this = $(this);\n                //$this.closest(\"form[name=post_update]\").submit();\n                $this.closest(\"form[name=post_update]\").find('input[type=\"submit\"]').trigger('click');\n                $this.find(\"input[type=submit]\").attr(\"disabled\", \"disabled\");\n            }\n            return false;\n        } else {\n            $(this).closest('form').removeClass(\"data-submitting-in-progress\");\n        }\n    });\n\n    $(\".comments\").on(\"keyup\", \"form[name=post_update] textarea.post-comment\", function(e) {\n        checkPostUpdateState($(this).closest(\"form[name=post_update]\"));\n    });\n\n    $(\".comments\").on(\"change\", \"form[name=post_update] textarea.post-comment\", function(e) {\n        checkPostUpdateState($(this).closest(\"form[name=post_update]\"));\n    });\n\n    $(\".comments\").on(\"submit\", \"form[name=post_update]\", function(e) {\n        e.preventDefault();\n\n        var $form = $(this);\n\n        // Prevent double submissions\n\n        if ($form.hasClass(\"data-submitting-in-progress\") === true) {\n            return false;\n        }\n\n        $form.addClass(\"data-submitting-in-progress\");\n        $form.find(\"input[type=submit]\").attr('disabled', 'disabled');\n        postUpdate($form, function() {\n            // Disable Post button\n            checkPostUpdateState($form);\n            // Reload updates/replies\n            if ($form.find(\"input[name=reply_to]\").length > 0) {\n                var $container = $form.closest(\".additional-comments\").closest(\"li\");\n                loadUpdateReplies($container, true);\n                autoresize();\n            } else {\n                loadUpdates($form.parents().find(\"form[name=updates_view_more]\"), true);\n            }\n        });\n\n        return false;\n    });\n\n    // Follow/Unfollow\n    function followUnfollow($form) {\n        if ($form == undefined || $form.length == 0) {\n            return false;\n        }\n\n        var $action = $form.find(\"input[type=hidden][name=action]\"),\n            action = $action.val(),\n            context = $form.find(\"input[type=hidden][name=context]\").val(),\n            $submit = $form.find(\"a[name=submit] .follow-text\"),\n            url = hosturl + \"/\" + context + \"/\" + action;\n\n        var postData = new Object();\n        postData.id = $form.find(\"input[type=hidden][name=id]\").val();\n        postData.return_follows = $form.find(\"input[type=hidden][name=return_follows]\").val();\n\n        var posting = $.post(url, postData, \"json\");\n\n        posting.done(function(data) {\n            if (data.status == \"success\") {\n                $submit.text((action == \"follow\") ? lang[\"following\"] : lang[\"follow\"]);\n\n                var unfollowText = (action == \"follow\") ? lang[\"unfollow\"] : \"\";\n                $submit.parent().attr(\"data-unfollow\", unfollowText);\n\n                if ($submit.parent().attr(\"data-unfollow\") != \"\") {\n                    $submit.parent().addClass('unfollow').addClass('just_changed').mouseleave(function() {\n                        $('.just_changed').removeClass('just_changed');\n                    });\n                } else {\n                    $submit.parent().removeClass('unfollow');\n                }\n\n                $action.val((action == \"follow\") ? \"unfollow\" : \"follow\");\n\n                // Analitics\n                if (data.analytics) {\n                    segmentAnalytics(data.analytics);\n                }\n            }\n        }).fail(function() {\n            alert(\"Error while trying to (un)follow.\")\n        });\n    }\n\n    // Follow/Unfollow button implemented as an anchor. Therefore we need to trigger the submit event for the form\n    $(\"form[name=follow_form] a[name=submit]\").click(function(e) {\n        e.preventDefault();\n        $(this).parents(\"form[name=follow_form]\").submit();\n        return false;\n    });\n\n    $(\"form[name=follow_form]\").submit(function(e) {\n        e.preventDefault();\n        followUnfollow($(this));\n        return false;\n    });\n\n    // Submit the form if sort order has been changed for a list view (Projects, Expertise, Lightning...)\n    $(\"select[name=sort_options]\").change(function(e) {\n        var $form = $('form[name=search_form]'),\n            value = $(this).val();\n        if ($form.length > 0) {\n            $form.find('input[type=hidden][name=sort]').val(value);\n            $form.submit();\n        }\n    })\n\n    // Submit the form if limit (items per page) option has been changed for a list view (Projects, Expertise, Lightning...)\n    $(\"select[name=limit_options]\").change(function(e) {\n        var $form = $('form[name=search_form]'),\n            value = $(this).val();\n        if ($form.length > 0) {\n            $form.find('input[type=hidden][name=limit]').val(value);\n            $form.submit();\n        }\n    })\n\n    /* scroll to */\n    var scroll_to = $('div.scroll_to');\n    if (scroll_to.length) {\n        scroll_to.find('a').click(function() {\n            var where = $(this).attr('href');\n            scrollIt($(where));\n            return false;\n        });\n    }\n    /* end scroll to */\n\n    /* Edit Seats & search filter */\n    var $seat_portlets = $('.seat_portlets'),\n        $search_filter = $('.search_filter');\n\n    if ($seat_portlets.length) {\n\n        var $inviteButton = $('.invite').find('.button'),\n            $cancelButton = $('.invite_form').find('a.cancel');\n\n        $inviteButton.click(function() {\n            $(this).closest('.invite').hide().next('.invite_form').show();\n            return false;\n        });\n\n        $cancelButton.click(function() {\n            $(this).closest('.invite_form').hide().prev('.invite').show();\n            return false;\n        });\n    }\n\n    if ($search_filter.length) {\n        var $sfd = $('.search_filter_drop'),\n            $sfh = $('input.search-filter-hidden'),\n            $current = $('span.current', $search_filter);\n\n        $sfd.find('a').click(function() {\n            var data_filter = $(this).attr('data-filter-value'),\n                text = $(this).text();\n\n            $current.text(text);\n            $sfh.attr('value', data_filter);\n            return false;\n        });\n    }\n    /* end Edit Seats */\n\n    var $tooltip = $(\".tooltip\");\n    if ($tooltip.length > 0) {\n        $tooltip.poshytip({\n            className: \"tip-yellowsimple\",\n            showTimeout: 1,\n            alignTo: \"target\",\n            alignX: \"center\",\n            offsetY: 5,\n            allowTipHover: false\n        });\n    }\n\n    // no entries message on project search\n    if (!$('.project_entries .project_listing').size()) {\n        $('.project_entries').html('<p>' + lang['SearchNoProject'] + '</p>')\n    }\n\n\n    // USER search form\n    $('#projects_search_form, #user_search_form').submit(function() {\n        $('select', this).each(function() {\n            if ($(this).val() == '') {\n                $(this).attr('disabled', 'disabled');\n            }\n        });\n    })\n\n    $(\".accordion\").accordion({\n        autoHeight: false,\n        navigation: true,\n        change: show_stage_status,\n        create: show_stage_status\n    });\n\n    function show_stage_status() {\n        $('#stage_accordion .ui-accordion-content.ui-accordion-content-active').css('overflow', 'visible');\n    }\n\n\n    // only allow one open Project Stage\n    $('.stage_status_select').change(function() {\n\n        if ($('option:selected', this).val() == 'Open') {\n\n            $('#stage_accordion h3.ui-accordion-header a span').remove();\n\n            $(this).parents('div.ui-accordion-content').prev('h3').find('a').append('<span>open</span>');\n\n            $('.stage_status_select').val('Closed');\n            $(this).val('Open');\n        }\n\n    }).each(function() {\n        if ($('option:selected', this).val() == 'Open') {\n\n            $('#stage_accordion h3.ui-accordion-header a span').remove();\n\n            $(this).parents('div.ui-accordion-content').prev('h3').find('a').append('<span>open</span>');\n\n            $('.stage_status_select').val('Closed');\n            $(this).val('Open');\n        }\n    });\n\n    // start inits\n    edu_listing_init();\n    ajax_form_init();\n\n\n    // Project Sub-Sector Dynamic List Population\n    var $project_sector_sub = $('#project_sector_sub option').not('.hardcode');\n    var $project_sector_sub_holder = $project_sector_sub.clone();\n\n    $project_sector_sub.remove().not('.hardcode');\n\n    $('#project_sector_main').live(\"change\", function() {\n\n        $('#project_sector_sub').removeAttr('disabled');\n        $('#project_sector_sub').focus();\n\n        var thisClass = $(this).find('option:selected').attr('class').replace('sector_main', 'project_sector_sub');\n        $('#project_sector_sub option').not('.hardcode').remove()\n        $('#project_sector_sub option:first').after($project_sector_sub_holder.filter('.' + thisClass));\n        if ($('#selected_sub_sector').length > 0) {\n            if ($('#selected_sub_sector').text() == \"Other\") {\n                $('#project_sector_sub').val(\"Other\");\n            }\n        }\n    }).trigger(\"change\");\n\n\n    // Sub-Sector \"Other\" Text Input\n    // included in profile/_general_info_form to reset\n    $('#project_sector_sub').change(function() {\n        var $other = $('#project_sector_sub_other');\n        if ($('option:selected', this).val() === 'Other') {\n            $other.parent().show().end().removeAttr('disabled').focus();\n        } else {\n            $other.parent().hide().end().val('').attr('disabled', 'disabled');\n        }\n    }).trigger('change');\n\n    // Financial Structure \"Other\" Text Input\n    $('#project_financial').change(function() {\n        var $other = $('#project_fs_other');\n        if ($('option:selected', this).val() === 'Other') {\n            $other.parent().show().end().removeAttr('disabled').focus();\n        } else {\n            $other.parent().hide().end().val('').attr('disabled', 'disabled');\n        }\n\n    }).trigger('change');\n\n    /*\n    $('.target').change(function() {\n      alert('Handler for .change() called.');\n    });\n    */\n\n    // save return value\n    $ret = $('input[name=\"return\"]');\n    ret_val = $ret.val();\n\n    //remove last arrow from header bread crumb\n    $('#header_bread_crumb li a:last').css('background', 'none');\n\n    //activate tabs\n    $('#profile_tabs').tabs({\n        fx: {\n            opacity: 'toggle',\n            duration: 100\n        },\n        select: add_tab_to_submit,\n        create: show_tabs\n    });\n\n    $('.edit_project').click(function() {\n\n        $(\"#profile_tabs\").tabs({\n            selected: 2\n        });\n\n    })\n\n\n\n    // add_tab_to_submit - append tab hash to return value. This code is run each time someone switches tab\n    function add_tab_to_submit(event, ui) {\n\n        $ret.val(ret_val + ui.tab.hash);\n\n    }\n\n    // show tabs after init\n    function show_tabs(event, ui) {\n        $('#profile_tabs, #project_tabs').fadeIn();\n        var tab = $('#profile_tabs .ui-tabs-panel, #project_tabs .ui-tabs-panel').filter(':not(\".ui-tabs-hide\")').attr('id');\n        $ret.val(ret_val + '#' + tab);\n    }\n\n    // submit for on update profile button click\n    $('.update_project, #update_project').click(function(e) {\n        formsubmit = $(\"#project_name_form\").submit();\n\n        e.preventDefault();\n    })\n\n    // project member select\n    $(\".chzn-select\").chosen({\n        no_results_text: lang['Noresultsmatched']\n    });\n\n\n\n\n    // disable the submit function on the create a new project button\n    // this will be changed in future releases\n    // changed for cancel button click to go on project list page\n    //$(\"#new_project .lmol\").click(function(e) {e.preventDefault();});\n\n    //clean up profile_actions portlet\n    $('#profile_actions a:last').css('border-bottom', 'none');\n\n    // Submit create profile form from anchor\n    $('form#profile_upload_image a#submit_upload').click(function() {\n        $('form#profile_upload_image').submit();\n    })\n\n    /* Profile Edit Submit Button */\n\n    // Submit update profile from from anchor\n    $('a#update_profile').click(function() {\n        //$('.ui-tabs-panel:visible form').submit();\n        // log($('.ui-tabs-panel:visible form'));\n    })\n\n    $('.education_edit .education_edit_cancel').on('click', function() {\n        //log( 'yay' );\n    });\n\n\n\n    /*$('a.edit').on('click',function(e){\n    \t//log( 'yay' );\n    \te.preventDefault();\n    \tvar $edit_div = $(this).parent().next('div.edit');\n    \tconsole.log($edit_div);\n    \t$edit_div.slideToggle();\n\n    \tif( $(this).hasClass('project_row_add')){\n    \t//\tlog( 'project_row_add' );\n    \t\t$edit_div.find('.project_new_row').removeAttr('disabled');\n    \t}\n\n    });*/\n\n\n    // project edit matrix dropdowns\n    /*$('a.edit').click(function(e){\n    \te.preventDefault();\n    \tvar $edit_div = $(this).parent().next('div.edit');\n    \tconsole.log($edit_div);\n    \t$edit_div.slideToggle();\n\n    \tif( $(this).hasClass('project_row_add')){\n    \t//\tlog( 'project_row_add' );\n    \t\t$edit_div.find('.project_new_row').removeAttr('disabled');\n    \t}\n    });*/\n\n    $('.matrix_dropdown a.upload_new').click(function(e) {\n        e.preventDefault();\n\n        $(this).parent().parent().next().next('div.new_version').slideToggle();\n\n    });\n\n    $('#project_form').submit(function() {\n\n        // disable unused file inputs\n        $('input[type=\"file\"]').each(function() {\n            //if( ! $(this).val() ){$(this).attr('disabled','disabled');}\n            //log( $(this) );\n        });\n\n        $('select.chzn-select').each(function() {\n            field_name = '#default_' + $(this).attr('name').replace('[]', '');\n            $more = $(field_name).val().split('|');\n            //log( $field );\n            if ($arr = $(this).val()) {\n                $(this).val($.unique($arr.concat($more)));\n            }\n        });\n        //return false;\n    })\n\n    // Matix file replace\n    $('input[type=\"file\"]').change(function() {\n        if ($(this).val()) {\n            file_input_name = $(this).attr('name');\n            hidden_input_name = file_input_name.substring(0, file_input_name.length - 1) + '_hidden';\n\n            $hidden = $('input[name=\"' + hidden_input_name + '\"]').val('');\n\n\n        }\n    })\n\n    // Matix file replace\n    $('#project_form input[type=\"file\"]').change(function() {\n        if ($(this).val()) {\n            file_input_name = $(this).attr('name');\n            hidden_input_name = file_input_name + '_hidden';\n\n            $hidden = $('input[name=\"' + hidden_input_name + '\"]').val($(this).val());\n\n\n        }\n    })\n\n\n    ajax_delete_init();\n\n    $('div.edit input[type=\"reset\"]').click(function(e) {\n        e.preventDefault();\n        $(this).parent().parent('div.edit').slideToggle();\n    })\n\n    // Form Validation\n    //$('#member_form').validate({\n    //\trules: {\n    //\t\tmember_first_name: 'required',\n    //\t\tmember_last_name: 'required',\n    //\t\temail: {required: true, email: true},\n    //\t\tmember_organization: 'required',\n    //\t\tregister_password: {required: true,minlength: 6,maxlength: 16},\n    //       password_confirm: {required: true, minlength: 4,maxlength:16, equalTo: \"#register_password\" }\n    //\t},\n    //\tmessages: {\n    //\t\tmember_first_name: lang['FirstNameReq'],\n    //\t\tmember_last_name: \"Last Name is Required.\",\n    //\t\temail: {required:lang['EmailReq'], email:lang['EmailNotValid']},\n    //\t\tmember_organization: lang['OrganizationReq'],\n    //\t\tregister_password: {required: lang['PasswordReq'],minlength: lang['Passwordatleast']},\n    //\t\tpassword_confirm: {required: lang['ConfPassReq'],minlength: lang['Passwordatleast'], equalTo: lang['EnterSamePass'] }\n    //\n    //\t},\n    //\terrorPlacement: function(error, element) {\n    //\t\terror.appendTo( element.parent().find(\".errormsg\") );\n    //\t}\n    //});\n\n\n    // Form Validation\n    $('#email_settings_form').validate({\n        rules: {\n            es_username: {\n                required: true,\n                email: true\n            },\n            register_password: {\n                required: true,\n                minlength: 6,\n                maxlength: 16\n            },\n        },\n        messages: {\n            es_username: {\n                required: lang['EmailReq'],\n                email: lang['EmailNotValid']\n            },\n            es_password: {\n                required: lang['PasswordReq'],\n                minlength: lang['Passwordatleast']\n            },\n        },\n        errorPlacement: function(error, element) {\n            error.appendTo(element.parent().find(\".errormsg\"));\n        }\n    });\n\n    // Form Validation\n    $('#password_settings_form').validate({\n        rules: {\n            ps_currentpass: {\n                required: true,\n                minlength: 6,\n                maxlength: 16\n            },\n            ps_newpassword: {\n                required: true,\n                minlength: 6,\n                maxlength: 16\n            },\n            ps_confpassword: {\n                required: true,\n                minlength: 4,\n                maxlength: 16,\n                equalTo: \"#ps_newpassword\"\n            }\n        },\n        messages: {\n            ps_currentpass: {\n                required: lang['PasswordReq'],\n                minlength: lang['Passwordatleast']\n            },\n            ps_newpassword: {\n                required: lang['PasswordReq'],\n                minlength: lang['Passwordatleast']\n            },\n            ps_confpassword: {\n                required: lang['ConfPassReq'],\n                minlength: lang['Passwordatleast'],\n                equalTo: lang['EnterSamePass']\n            }\n        },\n        errorPlacement: function(error, element) {\n            error.appendTo(element.parent().find(\".errormsg\"));\n        }\n    });\n\n\n\n    $('#header_login').validate({\n        rules: {\n            username: {\n                required: true,\n                email: true\n            },\n            password: 'required'\n        },\n        messages: {\n            username: {\n                required: lang['EmailReq'],\n                email: lang['EnterValidEmail']\n            },\n            password: lang['PasswordReq']\n        },\n        errorPlacement: function(error, element) {\n            $(\"#u0\").show();\n            $(\"#pd0u0\").hide();\n            //console.log(element.parent());\n            //error.appendTo( $(\"#pd0u0\") );\n            //alert(element.attr(\"name\"));\n            $(\".\" + element.attr(\"name\") + \"_errormsg\").html(error);\n        }\n    });\n\n    $('#new_project').validate({\n        rules: {\n            title: 'required'\n        },\n        messages: {\n            title: lang['TitleReq']\n        },\n        errorPlacement: function(error, element) {\n            error.appendTo(element.parent().find(\".errormsg\"));\n        }\n\n    });\n\n    $('#general_photo_form').validate({\n        rules: {\n            photo_filename: 'required'\n        },\n        messages: {\n            photo_filename: lang['PhotoReq']\n        },\n        errorPlacement: function(error, element) {\n            error.appendTo(element.parent().find(\".errormsg\"));\n        }\n\n    });\n\n\n    $('#general_video_form').validate({\n        rules: {\n            member_video: {\n                required: true,\n                url: true\n            }\n        },\n        messages: {\n            member_video: {\n                required: lang['VideoReq'],\n                url: lang['VideoUrlNotValid']\n            }\n        },\n        errorPlacement: function(error, element) {\n            error.appendTo(element.parent().find(\".errormsg\"));\n        }\n\n    });\n\n    $('#general_info_form').validate({\n        rules: {\n            member_first_name: {\n                required: true\n            },\n            member_last_name: {\n                required: true\n            },\n            member_title: {\n                required: true\n            },\n            member_organization: {\n                required: true\n            },\n        },\n        messages: {\n            member_first_name: {\n                required: lang['FirstNameReq']\n            },\n            member_last_name: {\n                required: lang['LastNameReq']\n            },\n            member_title: {\n                required: lang['TitleReq']\n            },\n            member_organization: {\n                required: lang['OrganizationReq']\n            },\n\n        },\n        errorPlacement: function(error, element) {\n            error.appendTo(element.parent().find(\".errormsg\"));\n        }\n\n    });\n\n\n    $('#expertise_education_form').validate({\n        rules: {\n            education_university: {\n                required: true\n            },\n            education_degree: {\n                required: true\n            },\n            education_major: {\n                required: true\n            },\n        },\n        messages: {\n            education_university: {\n                required: lang['UniversityReq']\n            },\n            education_degree: {\n                required: lang['DegreeReq']\n            },\n            education_major: {\n                required: lang['MajorReq']\n            },\n\n        },\n        errorPlacement: function(error, element) {\n            error.appendTo(element.parent().find(\".errormsg\"));\n        }\n\n    });\n\n    $('#project_name_form').validate({\n        rules: {\n            title_input: {\n                required: true\n            },\n        },\n        messages: {\n            title_input: {\n                required: '*'\n            },\n        },\n        errorPlacement: function(error, element) {\n            error.appendTo(element.parent().find(\".errormsg\"));\n        }\n    });\n\n    $('#project_form_main').validate({\n        rules: {\n            //project_overview: { required: true,maxlength: 200},\n            project_overview: {\n                required: true\n            },\n            project_keywords: {\n                required: true\n            },\n            project_country: {\n                required: true\n            },\n            project_location: {\n                required: true\n            },\n            project_sector_main: {\n                required: true\n            },\n            project_sector_sub: {\n                required: true\n            },\n            project_budget_max: {\n                digits: true,\n                min: 0\n            },\n            project_financial: {\n                required: true\n            }\n        },\n        messages: {\n            //project_overview: { required: lang['DescReq'],maxlength: lang['Desc200']},\n            project_overview: {\n                required: lang['DescReq']\n            },\n            project_keywords: {\n                required: lang['KeywordReq']\n            },\n            project_country: {\n                required: lang['CountryReq']\n            },\n            project_location: {\n                required: lang['LocationReq']\n            },\n            project_sector_main: {\n                required: lang['SectorReq']\n            },\n            project_sector_sub: {\n                required: lang['SubSectorReq']\n            },\n            //\t\t\tproject_budget_max: { required: lang['BudgetReq']},\n            project_financial: {\n                required: lang['FinancialReq']\n            }\n\n        },\n        errorPlacement: function(error, element) {\n            error.appendTo(element.parent().find(\".errormsg\"));\n        }\n    });\n\n    $(\"#executive_form\").validate({\n        rules: {\n            project_executives_name: {\n                required: true\n            },\n            project_executives_company: {\n                required: true\n            },\n            project_executives_role: {\n                required: true\n            },\n            project_executives_email: {\n                required: true,\n                email: true\n            },\n        },\n        messages: {\n            project_executives_name: {\n                required: lang['NameReq']\n            },\n            project_executives_company: {\n                required: lang['CompanyReq']\n            },\n            project_executives_role: {\n                required: lang['RoleReq']\n            },\n            project_executives_email: {\n                required: lang['EmailReq'],\n                email: lang['EmailNotValid']\n            },\n        },\n        errorPlacement: function(error, element) {\n            error.appendTo(element.parent().find(\".errormsg\"));\n        }\n\n    });\n    $(\"#map_points_form\").validate({\n        rules: {\n            project_map_points_mapname: {\n                required: true\n            }\n        },\n        messages: {\n            project_map_points_mapname: {\n                required: lang['NameReq']\n            }\n        },\n        errorPlacement: function(error, element) {\n            error.appendTo(element.parent().find(\".errormsg\"));\n        }\n\n    });\n\n    $(\"#forgot_password_form\").validate({\n        rules: {\n            email: {\n                required: true,\n                email: true\n            },\n        },\n        messages: {\n            email: {\n                required: lang['EmailReq'],\n                email: lang['EmailNotValid']\n            }\n        },\n        errorPlacement: function(error, element) {\n            error.appendTo(element.parent().find(\".errormsg\"));\n        }\n\n    });\n\n    $(\".projects .more\").click(function() {\n        $(\".hiddenproject\").toggle(\"blind\", function() {\n            $(\".projects .more\").find(\"a\").text($(this).is(':visible') ? lang['ShowLess'] : lang['ShowMore']);\n        });\n    });\n\n    $(\".frontfiles_tr\").click(function() {\n        var filelink = $(this).find('.frontfiles_link').attr('href');\n        if (filelink) {\n            window.open(filelink);\n        }\n    });\n\n    // Sub-Sector \"Other\" Text Input\n    // included in profile/_general_info_form to reset\n\n    function member_email_dialog() {\n        $(\"#model_email_div\").dialog(\"open\");\n    }\n\n    $(\"#member_send_message\").click(function() {\n        member_email_dialog();\n    });\n\n    $(\"#project_send_message\").click(function() {\n        member_email_dialog();\n    });\n\n    $(\"#model_email_div\").dialog({\n        autoOpen: false,\n        width: 400,\n        modal: true,\n        buttons: {\n            \"Send Mail\": function(data) {\n                var recipient = $(\"#hdn_to\").val(),\n                    sender = $(\"#hdn_from\").val();\n\n                if (recipient == sender) {\n                    cannot_send_message();\n                    return false;\n                }\n\n                $(\"#model_email_form\").submit();\n                $(\"#model_esubject\").val(\"\");\n                $(\"#model_emessage\").val(\"\");\n\n                $(this).dialog(\"close\");\n            },\n            Cancel: function() {\n                $(this).dialog(\"close\");\n            }\n        }\n    });\n\n    $(\"#education_degree\").live(\"change\", function() {\n        if ($('option:selected', this).val() === 'Other') {\n            $(this).parent().parent().next().show().find(\"input\").focus();\n        } else {\n            $(this).parent().parent().next().hide().find(\"input\").val('');\n        }\n\n    });\n\n    // Featured Forum hover effect\n    var $featuredForum = $(\".featured-forum\");\n    if ($featuredForum.length) {\n        $(\".forum-title a, .featured-image\", $featuredForum).hover(function() {\n            $(this).closest('.featured-forum').addClass('hovered');\n        }, function() {\n            $(this).closest('.featured-forum').removeClass('hovered');\n        });\n    }\n    // When Register to Attend link is clicked for a forum\n    // track this event with Segment Analytics\n    var $attendForum = $(\"a.button.attend\");\n    if ($attendForum.length) {\n        $attendForum.click(function(e) {\n            var $this = $(this),\n                forumId = $this.attr(\"data-id\"),\n                forumName = $this.attr(\"data-name\");\n            segmentAnalytics({\n                \"event\": {\n                    \"name\": \"Register to Attend Clicked\",\n                    \"properties\": {\n                        \"Forum Id\": forumId,\n                        \"Forum Name\": forumName\n                    }\n                }\n            });\n        });\n    }\n\n    // When a recommendation link is clicked on My GViP,\n    // track this event with Segment Analytics\n    var $recommendation = $(\"a.recommendation\");\n    if ($recommendation.length) {\n        $recommendation.click(function(e) {\n            var $this = $(this),\n                recommendationCategory = $this.data(\"recommendationCategory\"),\n                recommendationLocation = $this.data(\"recommendationLocation\"),\n                recommendationSection = $this.data(\"recommendationSection\"),\n                recommendationTargetId = $this.data(\"recommendationTargetId\"),\n                recommendationTargetName = $this.data(\"recommendationTargetName\");\n            segmentAnalytics({\n                \"event\": {\n                    \"name\": \"Recommendation Clicked\",\n                    \"properties\": {\n                        \"Category\"    : recommendationCategory,\n                        \"Location\"    : recommendationLocation,\n                        \"Section\"     : recommendationSection,\n                        \"Target Id\"   : recommendationTargetId,\n                        \"Target Name\" : recommendationTargetName\n                    }\n                }\n            });\n        });\n    }\n\n    var $ratings = $(\".rating-block\"),\n        ratingScores = [],\n        $resVote = $(\".voting #responsive-vote\"),\n        $helpVote = $(\".voting #helpful-vote\"),\n        $knowVote = $(\".voting #knowledgeable-vote\"),\n        $resResult = $(\"#responsive_rate\"),\n        $helpResult = $(\"#helpful_rate\"),\n        $knowResult = $(\"#knowledgeable_rate\"),\n        $expert = $(\"#expert_rating\"),\n        $score = $('header h2 .score'),\n        $resPoints = $(\".results #responsive .score\"),\n        $helpPoints = $(\".results #helpful .score\"),\n        $knowPoints = $(\".results #knowledgeable .score\"),\n        // Layout\n        bg_color = '#bebebe',\n        expert_color = '#3ca3dd',\n        summary_color = 'black',\n        rate_color = '#44a6e3',\n        dim = 20;\n    // Scoreboard\n    var mainScore = 0;\n    var helpScore = 0;\n    var resScore = 0;\n    var knowScore = 0;\n\n    if ($ratings.length > 0) {\n        if ($score.html() != \"\") {\n            mainScore = Number($score.html());\n            helpScore = Number($helpPoints.html());\n            resScore = Number($resPoints.html());\n            knowScore = Number($knowPoints.html());\n        }\n        $(\".rating-block form[name=rate_expert_form]\").submit(function(e) {\n\n            e.preventDefault();\n\n            var $form = $(this),\n                url = $form.attr('action'),\n                $ratingBlock = $form.parents(\".rating-block\"),\n                $errors = $ratingBlock.find(\".errormsg\");\n\n            var posting = $.post(url, $form.serialize(), \"json\");\n            posting.done(function(data) {\n\n                if (data.status == \"success\") {\n                    // Update ratings with new (recalculated) values\n                    $ratingBlock.find(\"header h2 .score\").text(data.ratings.overall.toFixed(1));\n                    $ratingBlock.find(\"header h2 .votes\").text(\"(\" + data.ratings.unique_count + \")\");\n                    $ratingBlock.find(\".rating-details .results p span\").text(data.ratings.unique_count);\n                    $ratingBlock.find(\"#helpful .score\").text(data.ratings.helpful.toFixed(1));\n                    $ratingBlock.find(\"#responsive .score\").text(data.ratings.responsive.toFixed(1));\n                    $ratingBlock.find(\"#knowledgeable .score\").text(data.ratings.knowledgeable.toFixed(1));\n\n                    mainScore = Number(data.ratings.overall);\n                    helpScore = Number(data.ratings.helpful);\n                    resScore = Number(data.ratings.responsive);\n                    knowScore = Number(data.ratings.knowledgeable);\n\n                    // Remove the voting block to prevent subsequent submission\n                    setTimeout(function() {\n                        $ratingBlock.find(\".voting form\").remove();\n                        $ratingBlock.find(\".voting .voting-thankyou\").show();\n                    }, 100);\n\n                    // Show recalculated averages\n                    rateStarz();\n\n                    // Analitics\n                    if (data.analytics) segmentAnalytics(data.analytics);\n                } else {\n                    if (data.error) $errors.text(data.error);\n                }\n            }).fail(function() {\n                $errors.html(\"Error occurred while trying to post the ratings.\")\n            }).always(function(e) {});\n\n            return false;\n        });\n\n        // jRate\n        $(\".rating-block header\").click(function() {\n            expertToggleCheck($(this).closest('.rating-block'));\n        });\n\n        function expertToggleCheck($this) {\n            if ($(\".rating-details\", $this).is(':visible')) {\n                $(\".toggle\", $this).addClass('icon-expand-more').removeClass('icon-expand-less');\n                //$(\".rating-details\", $this).slideUp(200);\n                $(\".rating-details\", $this).hide();\n                $(\".toggle-desc\", $this).text(lang[\"ShowMore\"] + \"/\" + lang[\"RateExpert\"]);\n            } else {\n\n                $(\".toggle\", $this).addClass('icon-expand-less').removeClass('icon-expand-more');\n                //$(\".rating-details\", $this).slideDown(200);\n                $(\".toggle-desc\", $this).text(lang[\"ShowLess\"]);\n                $(\".rating-details\", $this).show();\n            }\n        }\n\n        function rateStarz() {\n            // Reset\n            $expert.html(\"\");\n            $helpResult.html(\"\");\n            $resResult.html(\"\");\n            $knowResult.html(\"\");\n\n            // Star Defaults\n            $expert.jRate({\n                rating: mainScore,\n                startColor: expert_color,\n                endColor: expert_color,\n                backgroundColor: bg_color,\n                strokeColor: 'none',\n                readOnly: true,\n                width: dim,\n                height: dim,\n            });\n\n            $helpResult.jRate({\n                rating: helpScore,\n                startColor: summary_color,\n                endColor: summary_color,\n                backgroundColor: bg_color,\n                strokeColor: 'none',\n                readOnly: true,\n                width: dim,\n                height: dim,\n            });\n\n            $resResult.jRate({\n                rating: resScore,\n                startColor: summary_color,\n                endColor: summary_color,\n                backgroundColor: bg_color,\n                strokeColor: 'none',\n                readOnly: true,\n                width: dim,\n                height: dim,\n            });\n\n            $knowResult.jRate({\n                rating: knowScore,\n                startColor: summary_color,\n                endColor: summary_color,\n                backgroundColor: bg_color,\n                strokeColor: 'none',\n                readOnly: true,\n                width: dim,\n                height: dim,\n            });\n        }\n\n        function voteStarz() {\n\n            $resVote.html(\"\");\n            $helpVote.html(\"\");\n            $knowVote.html(\"\");\n\n            $helpVote.jRate({\n                startColor: rate_color,\n                endColor: rate_color,\n                backgroundColor: bg_color,\n                strokeColor: 'none',\n                precision: 0,\n                width: dim,\n                height: dim,\n                onSet: function(rating) {\n                    $('input[type=\"hidden\"][name=\"ratings[1]\"]').val(rating);\n                }\n            });\n\n            $resVote.jRate({\n\n                startColor: rate_color,\n                endColor: rate_color,\n                backgroundColor: bg_color,\n                strokeColor: 'none',\n                precision: 0,\n                width: dim,\n                height: dim,\n                onSet: function(rating) {\n                    $('input[type=\"hidden\"][name=\"ratings[2]\"]').val(rating);\n                }\n            });\n\n            $knowVote.jRate({\n\n                startColor: rate_color,\n                endColor: rate_color,\n                backgroundColor: bg_color,\n                strokeColor: 'none',\n                precision: 0,\n                width: dim,\n                height: dim,\n                onSet: function(rating) {\n                    $('input[type=\"hidden\"][name=\"ratings[3]\"]').val(rating);\n                }\n            });\n        }\n\n        rateStarz();\n        if ($('.voting').length) {\n            voteStarz();\n        }\n\n        function activateExpert() {\n            var all = false;\n            var $button = $('div.voting .btn');\n            $.each($('div.voting input[type=\"hidden\"]'), function() {\n                if ($(this).val() === \"0\") {\n                    $button.addClass('inactive');\n                    all = false;\n                    return false;\n                } else {\n                    all = true;\n                }\n            });\n            if (all === true) {\n                $button.removeClass('inactive');\n            }\n        }\n\n        $('div.voting .inactive').on('click', function(e) {\n            if ($(this).hasClass('inactive')) {\n                e.preventDefault();\n            }\n        });\n\n        $resVote.on('click', activateExpert);\n        $helpVote.on('click', activateExpert);\n        $knowVote.on('click', activateExpert);\n    }\n\n    if ($('.main-header .nav-main')) {\n        var docWidth = $(window).width(),\n            userTimer,\n            mobileMenuState = 'closed',\n            $wrapper = $('.wrapper'),\n            $mainHeader = $('.main-header'),\n            $userPro = $('.user-profile'),\n            $userMenu = $('.user-menu'),\n            $mainMenu = $('.iicon-menu'),\n            $intMenu = $('.nav-main'),\n            $langIcon = $('.active-language'),\n            $activeLang = $('.m-language .active img').attr('src');\n\n        $langIcon.attr('src', $activeLang);\n    }\n    /*\n        $(window).resize(function() {\n            rateStarz();\n        });\n    */\n});\n\nglobal.checkLength = function(o, n, min, max) {\n    if (o.val().length > max || o.val().length < min) {\n        o.addClass(\"ui-state-error\");\n        updateTips(\"Length of \" + n + \" must be between \" +\n            min + \" and \" + max + \".\");\n        return false;\n    } else {\n        return true;\n    }\n}\n\nglobal.checkRegexp = function(o, regexp, n) {\n    if (!(regexp.test(o.val()))) {\n        o.addClass(\"ui-state-error\");\n        updateTips(n);\n        return false;\n    } else {\n        return true;\n    }\n}\n\n\nglobal.ajax_delete_init = function() {\n    // delete matrix row\n    $('.matrix_dropdown a.delete').click(function(e) {\n\n        $li_row = $(this).parents('li');\n        li_row_id = $li_row.attr('id');\n        row_id = $li_row.attr('id').replace('row_id_', '');\n        link = $(this).attr('href');\n\n        $message = lang['AreYouSure'];\n\n        var buttons = {\n            \"Yes\": function() {\n                delete_maxtrix_action(link, row_id, li_row_id);\n                $(this).dialog(\"close\");\n            },\n            \"No\": function() {\n                $(this).dialog(\"close\");\n            }\n        }\n\n        create_message($message, {\n            buttons: buttons,\n            title: lang['Delete']\n        });\n\n    });\n}\n\n// DELETE MATRIX ROW FUNCTIONS\nglobal.delete_maxtrix_action = function(link, row_id, li_row_id) {\n\n    var new_link = hosturl + '/' + link.replace('#', '') + '/' + row_id;\n\n    $.ajax({\n        url: new_link,\n        type: \"GET\",\n        data: {},\n        dataType: \"json\",\n        success: function(data) {\n            if (data.remove) {\n                if (data.formname == 'expertise_sector_form') {\n                    $('#hdn_expert_sector_number').val(Number($('#hdn_expert_sector_number').val()) - 1);\n                    updatePCI();\n                }\n                $('#' + li_row_id).fadeOut();\n            }\n        }\n    });\n}\n\n// DELETE EDUCATION ENTRY FUNCTIONS\nglobal.delete_education_action = function(link, entry_id) {\n\n    var ACT = hosturl + link;\n\n    $.get(link, function(loaddata) {\n        if (loaddata.remove) {\n            $('#education_' + entry_id).fadeOut();\n        }\n\n    });\n    // Update curent user's Profile Completeness Index\n    updatePCI();\n}\n\n/*function delete_education_action(link,name) {\n\n\t\tvar entry_id = link.replace('/profile/form_load/'+name+'/delete/','');\n\t\tvar url = 'http://vip.concept.com' + link;\n\n\t\t$.get(link, function(loaddata) {\n\t\t\tif( data.remove ){$('#education_'+entry_id).fadeOut();}\n\t\t\t\tajax_form_init();\n\n\t\t});\n\n\n\t\t/*$.ajax({\n\t\t\turl: url,\n\t\t\ttype: \"GET\",\n\t\t\tdata: {entry_id : entry_id},\n\t\t\tdataType: \"html\",\n\t\t\tsuccess: function(data) {\n\t\t\t\t//log( data );\n\t\t\t\t$('#education_'+entry_id).append(data);\n\n\t\t\t\tajax_form_init();\n  \t\t\t}\n\t\t});*/\n\n/*}*/\n\n\n// EDIT EDUCATION ENTRY FUNCTIONS\nglobal.edit_education_action = function(link, entry_id) {\n    //var entry_id = link.replace('/profile/form_load/'+name+'/edit/','');\n    var url = 'http://vip.concept.com' + link;\n\n    $.get(link, function(loaddata) {\n        if ($('.education_edit')) {\n            $('.education_edit').remove();\n        }\n        $('#education_' + entry_id).append(loaddata);\n\n\n        ajax_form_init();\n\n    });\n}\n\n// Wrapper for ajax form to call on reloads\nglobal.ajax_form_init = function() {\n\n    $('form.ajax_form').unbind('submit');\n\n    // bind submit handler to form\n    $('form.ajax_form').submit(function(e) {\n\n        // prevent native submit\n        e.preventDefault();\n\n\n        if ($(this).validate().form() == true) {\n            // define spinner\n            var $spinner = $('<div/>')\n                .html($('<img class=\"spinner\" src=\"/images/site/loader.gif\" alt=\"spinner\" width=\"34\" />'))\n                .css({\n                    'display': 'inline'\n                });\n\n            // prevent multiple submits\n            var $btn = $('input[type=\"submit\"]', this);\n            var text = $btn.val();\n\n            if ($(this).attr('id') != \"comment_form\") {\n                $btn.val('Please Wait').removeClass('light_green').addClass('light_gray').attr('disabled', true).after($spinner);\n            }\n\n            // get form id and div id\n            var name = $(this).attr('id');\n            var target = '#' + name.substr(1, name.length);\n\n            $(this).ajaxSubmit({\n                dataType: \"json\",\n                beforeSubmit: function() {\n                    //$(this).validate();\n                },\n                success: function(page, status) {\n                    var message;\n                    //$return_page = $(page);\n                    //$message = $return_page.find('body#alert_message');\n                    $message = page.message;\n\n                    // Success\n                    if (page.message || name == 'education_list' || name == 'expertise_education_form') {\n                        if (page.status == \"success\") {\n                            // case study\n                            if (page.casestudyid) {\n                                var element = '#' + name + ' input[name=\"hdn_casestudyid\"]';\n                                $(element).val(page.casestudyid);\n\n                                var cancel = '#' + name + ' button[name=\"case_cancel\"]';\n                                $(cancel).remove();\n                            }\n\n                            $(\".errormsg\").html(\"\");\n\n                            message = page.message || 'Profile Updated';\n\n                            //after submitting invite form for available seat\n                            if (name == 'invite_seats_form') {\n                                //$('#invite_seats_form').closest('.invite_form').hide().prev('.invite').show();\n                                create_message(message, {\n                                    isredirect: true\n                                });\n                            } else if (page.imgpath && page.imgpath != \"\") {\n                                //create_message( message,{isredirect:true} );\n\n                                $(\".uploaded_img\").attr(\"src\", page.imgpath);\n                                $(\"#photo_filename\").val(\"\");\n                                if ($(\"#without_photo\")) {\n                                    $(\"#without_photo\").hide();\n                                }\n                                if ($(\"#with_photo\")) {\n                                    $(\"#with_photo\").show();\n                                }\n                                if (page.headerimgpath && page.headerimgpath != \"\") {\n                                    $(\"#header_userphoto\").attr(\"src\", page.headerimgpath);\n                                }\n                            } else if (page.isreload == \"yes\") {\n                                create_message(message);\n                            } else if (page.isload == \"yes\" && page.loadurl != \"\") {\n                                if (name == 'expertise_sector_form') {\n                                    $('#hdn_expert_sector_number').val(Number($('#hdn_expert_sector_number').val()) + 1);\n                                }\n                                $.get(page.loadurl, function(loaddata) {\n                                    $('#load_' + page.listdiv).html(loaddata);\n\n                                    if ($('#' + page.listdiv).parent().attr('class') == 'edit add_new') {\n                                        $('#' + page.listdiv).parent().hide();\n                                    }\n\n                                    ajax_form_init();\n                                    edu_listing_init();\n                                    ajax_delete_init();\n                                    // Is nolonger used\n                                    //if ($('.comment')) {\n                                    //$('.comment').CommentEditor();\n                                    //}\n                                });\n                            } else if (page.isredirect == 'yes') {\n                                create_message(message, {\n                                    isredirect: true\n                                });\n                            } else {\n                                create_message(message);\n                            }\n\n                            //ajax_form_init();\n                            //edu_listing_init();\n                            //$('.education_edit').remove();\n\n                            // Analytics\n                            if (page.analytics) {\n                                segmentAnalytics(page.analytics);\n                            }\n\n                        } else {\n                            //after submitting invite form for available seat\n                            if (name == 'invite_seats_form') {\n                                if (page.status == 'custom_error') {\n                                    create_message(page.message, {\n                                        isredirect: true\n                                    });\n                                } else {\n                                    //create_message( page.message );\n                                    window.location.href = hosturl + '/profile/edit_seats';\n                                }\n                            } else {\n                                $.each(page.message, function(formelement, errormsg) {\n                                    // $(\"form#\"+formelement).parent().find(\".errormsg\").html(errormsg);\n                                    $(\"#\" + name + \" #\" + formelement).next(\".errormsg\").html(errormsg);\n                                });\n                            }\n                        }\n                        // It looks like it's no longer needed\n                        if (name != \"comment_form\") {\n                            $btn.val(text)\n                                .removeClass('light_gray')\n                                .addClass('light_green')\n                                .removeAttr('disabled');\n                        }\n\n                        $('img.spinner').remove();\n\n                        /*$.get('/profile/' + name, function(data) {\n                        \t$(target).replaceWith(data);\n\n                        \tcreate_message( message );\n\n                        \tajax_form_init();\n                        \tedu_listing_init();\n\n                        });*/\n\n\n                    } else if (page.issubmit && page.issubmit != '') {\n                        $(\"#title_input_hidden\").val($(\"#title_input\").val());\n                        //$('#'+page.formname+'').submit();\n                        $('.topupdate').submit();\n                    } else {\n\n                        $return_page = $(page);\n\n                        $error = $return_page.find('#col5 .inner ul');\n\n                        $('body').append(create_message($error.html(), {\n                            close: true\n                        }));\n\n                        $btn.val(text)\n                            .removeClass('light_gray')\n                            .addClass('light_green')\n                            .removeAttr('disabled');\n\n                        $('img.spinner').remove();\n                    }\n\n                    if (page.isreset && page.isreset == 'yes') {\n                        resetForm($('#' + name));\n                    }\n\n                    // Trap all updates for member (expert) profile\n                    var currentPath = window.location.pathname;\n                    if (currentPath.substring(0, 25) == \"/profile/account_settings\") {\n                        updatePCI();\n                    }\n                }\n            })\n        }\n    });\n}\n\nglobal.segmentAnalytics = function(data) {\n    if (data.user_properties) {\n        //var userId = parseInt(data.id, 10); // Make sure id that came is of type int\n        window.analytics.identify(GVIP.App.Analytics.user_id, data.user_properties, GVIP.App.Analytics.context);\n    }\n\n    if (data.event) {\n        window.analytics.track(data.event.name, data.event.properties, GVIP.App.Analytics.context);\n    }\n}\n\nglobal.dismissPCI = function() {\n    var url = hosturl + \"/profile/dismiss_pci\",\n        postData = {\n            \"dismiss_pci\": \"dismiss_pci\"\n        },\n        posting = $.post(url, postData, \"json\");\n    //posting.done(function(data) {\n    //}).fail(function() {\n    //});\n}\n\n// Load and update current user's Profile Completeness Index\nglobal.updatePCI = function() {\n    var $pci = $(\"span.profile_edit_pci\"),\n        url = hosturl + \"/profile/pci\";\n\n    if ($pci.length == 0) return;\n\n    var getting = $.get(url, null, \"json\");\n\n    getting.done(function(data) {\n        if (data && data.pci && data.pci != \"\") {\n            $pci.text(data.pci);\n        }\n    }).fail(function() {\n        alert(\"Error while trying to get PCI.\");\n    });\n\n    // Dismiss PCI meter whenever a user makes any change in the profile\n    dismissPCI();\n}\n\n// Jquery Dialog box\nglobal.create_message = function(message, options) {\n\n    var options = options || {};\n    var close = options.close || false;\n    var isredirect = options.isredirect || false;\n    var url = $(location).attr('href');\n    //var pathname\t= url.replace(\"#\",\"\");\n    var pathname = url.split(\"#\");\n    var title = options.title || 'Message';\n    var buttons = options.buttons || {\n            Ok: function() {\n                if (isredirect) {\n                    window.location.href = pathname[0];\n                } else {\n                    $(this).dialog(\"close\");\n                }\n            }\n        }\n        /*\n        $close = $('<a/>')\n        \t.html('close')\n        \t.attr('href','javascript: $(\\'#full_page\\').remove()')\n        \t.css({'position':'absolute','top':'5px','right':'5px'});\n\n        $message_block \t= $('<div/>')\n        \t.attr('id','full_page_message')\n        \t.html( $('<p/>').html( message ) )\n        \t.css({'width':'500px','height':'300px','margin':'200px auto 0 auto', 'background':'gray','position':'relative'});\n\n        if( close ) $message_block.append($close);\n\n        $full_page \t= $('<div/>')\n        \t.attr('id','full_page')\n        \t.css({'z-index':999,'position':'fixed','top':0,'left':0,'width':'100%','height':'100%','background':'rgba(0,0,0,0.3)'})\n        \t.html( $message_block );\n\n        //return $full_page;\n        */\n\n    $dialog = $('#dialog-message')\n        .attr('title', title)\n        .html(message)\n\n    $(\"#dialog-message\").dialog({\n        modal: true,\n        buttons: buttons\n    });\n\n}\n\n//change style on click for deleting education\nglobal.edu_listing_init = function() {\n\n    //log( 'edu_listing_init' );\n\n    $('.edu_listing .delete, .edu_listing .edit').unbind('click');\n\n    $('.edu_listing .delete, .edu_listing .edit').click(function(event) {\n\n        event.preventDefault();\n\n        var target = $(this).parents('.edu_listing');\n        var btn = $(this);\n\n        if (btn.hasClass('delete')) {\n            //clicked delete or yes\n\n            if (btn.html() == 'Yes') {\n                // run ajax delete\n\n                delete_education_action(btn.attr('href'), target.attr('id').replace('education_', ''));\n\n                //window.location = '';\n                return false;\n            }\n\n            btn.html('Yes');\n            target.find('.edit').html('No');\n            target.addClass('active');\n\n        } else {\n            //clicked edit or no\n\n            if (btn.html() == \"Edit\") {\n                if (!$('.education_edit', target).size()) {\n                    edit_education_action(btn.attr('href'), target.attr('id').replace('education_', ''));\n                    $('.education_edit_cancel').click(function() {\n                        log('yay');\n                    });\n                }\n\n                //window.location = btn.attr('href');\n                return false;\n            } else if (btn.html() == \"No\") {\n                if ($('.education_edit')) {\n                    $('.education_edit').hide();\n                }\n            }\n\n            btn.html('Edit');\n            target.find('.delete').html('Delete');\n            target.removeClass('active');\n\n        }\n\n    });\n\n}\n\n\nglobal.changestage = function(el) {\n    if (el.value == \"Open\") {\n        stagearr = el.name.split(\"_\");\n        $(\"#select_stage\").val(stagearr[1]);\n    } else {\n        $(\"#select_stage\").val(\"\");\n    }\n}\n\n\nglobal.rowtoggle = function(id2) {\n\n    var $edit_div = $('#' + id2).parent().next('div.edit');\n\n    $edit_div.slideToggle();\n\n    if ($('#' + id2).hasClass('project_row_add')) {\n        //\tlog( 'project_row_add' );\n        $edit_div.find('.project_new_row').removeAttr('disabled');\n    }\n}\n\nglobal.edu_rowtoggle = function(id2) {\n\n    var $edit_div = $('#' + id2).parent().next('div.education_edit');\n\n    $edit_div.slideToggle();\n\n    if ($('#' + id2).hasClass('project_row_add')) {\n        //\tlog( 'project_row_add' );\n        $edit_div.find('.project_new_row').removeAttr('disabled');\n    }\n}\n\nglobal.tabload = function(url) {\n    $('#tabContainer').load(url);\n}\n\nglobal.sectorbind = function(secid) {\n    selectedid = $('#project_sector_main' + secid).find('option:selected').attr('class').replace('sector_main_', '');\n\n    var link = hosturl + '/profile/form_load/get_subsector_ddl/' + selectedid;\n\n    $('#dynamicSubsector_' + secid).load(link);\n}\n\n\nglobal.resetForm = function($form) {\n    $form.find('input:text, input:password, input:file, select, textarea').val('');\n    $form.find('input:radio, input:checkbox')\n        .removeAttr('checked').removeAttr('selected');\n}\n\nglobal.show_confirmation = function(confirmid) {\n    $('#' + confirmid).parent().parent().addClass('active');\n\n    $('#' + confirmid).parent().find('a.edit').hide();\n    $('#' + confirmid).parent().find('a.delete').hide();\n\n    $('.' + confirmid).show();\n}\n\nglobal.reset_confirmation = function(confirmid) {\n    $('#' + confirmid).parent().parent().parent().removeClass('active');\n    $('#' + confirmid).parent().parent().find('a.edit').show();\n    $('#' + confirmid).parent().parent().find('a.delete').show();\n\n    $('#' + confirmid).parent().hide();\n}\n\n// resend_invite_seat\nglobal.resend_invite_seat = function(link, entry_id) {\n    var ACT = hosturl + link + entry_id;\n\n    $.getJSON(ACT, function(loaddata) {\n        create_message(loaddata.message, {\n            isredirect: true\n        });\n    });\n\n}\n\n// resend_invite_seat\nglobal.remove_seat = function(link, entry_id) {\n    var ACT = hosturl + link + entry_id;\n\n    $.getJSON(ACT, function(loaddata) {\n        create_message(loaddata.message, {\n            isredirect: true\n        });\n        //window.location.href= hosturl + '/profile/edit_seats';\n    });\n}\n\n// project_executive_other\nglobal.project_executive_other = function(ddlrole) {\n    if (ddlrole.value == 'Other') {\n        $(ddlrole).parent().next('.role_other').show();\n    } else {\n        $(ddlrole).parent().next('.role_other').hide();\n    }\n}\n\n\nglobal.edit_case_studies = function(clickid) {\n    //alert(clickid);\n    $(clickid).closest('.edit_portlet').hide();\n    $(clickid).parent().parent().next('.add_case_study').show();\n\n}\n\nglobal.delete_case_studies = function(link, clickid) {\n    if (link.length > 0) {\n        var ACT = hosturl + link;\n        $.get(link, function(loaddata) {\n            if (loaddata.remove) {\n                create_message(loaddata.message, {\n                    isredirect: true\n                });\n            }\n        });\n    }\n}\n\nglobal.accept_projExpadv_req = function(link, ownerid, projid) {\n    if (link.length > 0) {\n        var ACT = hosturl + link + ownerid + '/' + projid;\n        $.get(ACT, function(loaddata) {\n            if (loaddata.status) {\n                var url = $(location).attr('href');\n                //var pathname\t= url.replace(\"#\",\"\");\n\n                $(\"#accept_prj_\" + ownerid).css(\"background-position\", \"0px -48px\");\n                $(\"#cancel_prj_\" + ownerid).css(\"background-position\", \"0px 0px\");\n                //window.location.href = url;\n            }\n        });\n    }\n}\n\nglobal.reject_projExpadv_req = function(link, ownerid, projid) {\n    if (link.length > 0) {\n        var ACT = hosturl + link + ownerid + '/' + projid;\n        $.get(ACT, function(loaddata) {\n            if (loaddata.status) {\n                var url = $(location).attr('href');\n                //var pathname\t= url.replace(\"#\",\"\");\n                $(\"#accept_prj_\" + ownerid).css(\"background-position\", \"0px 0px\");\n                $(\"#cancel_prj_\" + ownerid).css(\"background-position\", \"0px -48px\");\n                //window.location.href = url;\n            }\n        });\n    }\n}\n\n\n\n\nglobal.cancle_case_studies = function(clickid) {\n    var formid = clickid.form.id;\n    $('#' + formid).parent().prev('.edit_portlet').show();\n    $('#' + formid).parent().hide();\n    //$(clickid).prev('.edit_portlet').show();\n    //$(clickid).parent().parent().next('.add_case_study').show();\n}\n\nglobal.cannot_send_message = function() {\n    var modelmsg = lang['CantSend'];\n    create_message(modelmsg, {\n        isredirect: true\n    });\n}\n\nglobal.scrollIt = function(where) {\n    $('html,body').animate({\n            scrollTop: where.offset().top\n        },\n        500\n    );\n}\n\nglobal.changeLanguage = require('./_changeLanguage.js');\n\n// --------------------------\n//\t\tCONCIERGE FORM\n\nvar $concierge = $('#concierge'),\n    $c_action = $('#c_action'),\n    $c_form = $('#c_form'),\n    $c_confirmation = $('#c_confirmation'),\n    $close_btn = $('.close, .close_btn', $concierge),\n    $textbox = $('textarea', $c_form),\n    post_link = '/api/search/concierge_question';\n\n$close_btn.click(function() {\n    $(this).closest('.view').fadeOut();\n    return false;\n});\n\n$('.btn, .form-link', $c_action).click(function() {\n    $c_action.fadeOut();\n    $c_form.fadeIn();\n    return false;\n});\n\n$textbox.keyup(function() {\n    var $btn = $('.btn', $c_form),\n        text = $textbox.val();\n    if (text.length > 0) {\n        $btn.removeClass('light_gray').addClass('light_orange');\n    } else {\n        $btn.removeClass('light_orange').addClass('light_gray');\n    }\n});\n\n$('.btn', $c_form).click(function() {\n    var text = $textbox.val();\n    if (text == '') {\n        //$textbox.attr('placeholder','Please add your question.');\n        $textbox.addClass('error');\n    } else {\n        var req = $.ajax({\n            url: post_link,\n            type: \"GET\",\n            data: {\n                'message': text\n            },\n            dataType: \"json\"\n        });\n\n        req.done(function(data) {\n\n            if (data.status == 'success') {\n                $c_form.fadeOut();\n                $c_confirmation.fadeIn();\n            }\n            if (data.status == 'error') {\n                alert(data.message);\n            }\n        });\n\n        req.fail(function(x, y, z) {\n            alert('error');\n        });\n\n        req.always(function(x, y, z) {});\n\n    }\n    return false;\n});"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJidWlsZC9fanMvX2N1c3RvbS9fY2hhbmdlTGFuZ3VhZ2UuanMiLCJidWlsZC9fanMvX2N1c3RvbS9zY3JpcHQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3BCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgY2hhbmdlTGFuZ3VhZ2UgPSBmdW5jdGlvbihsYW5ndWFnZSwgY2FsbGJhY2spIHtcblxuICAgIHZhciBwb3N0aW5nID0gJC5wb3N0KCcvbGFuZ3VhZ2UnLCB7XG4gICAgICAgIGxhbmd1YWdlOiBsYW5ndWFnZVxuICAgIH0sIFwianNvblwiKTtcblxuICAgIHBvc3RpbmcuZG9uZShmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcbiAgICB9KS5mYWlsKGZ1bmN0aW9uKCkge1xuICAgICAgICAvL1xuICAgIH0pLmFsd2F5cyhmdW5jdGlvbihlKSB7XG4gICAgICAgIC8vXG4gICAgfSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY2hhbmdlTGFuZ3VhZ2U7IiwidmFyIGhvc3R1cmwgPSBsb2NhdGlvbi5wcm90b2NvbCArICcvLycgKyBsb2NhdGlvbi5ob3N0bmFtZTtcbnZhciBHVklQID0gR1ZJUCB8fCB7fTtcbkdWSVAuQXBwID0gR1ZJUC5BcHAgfHwge307XG5HVklQLkFwcC5BbmFseXRpY3MgPSBHVklQLkFwcC5BbmFseXRpY3MgfHwge307XG5HVklQLkFwcC5BbmFseXRpY3MuY29udGV4dCA9IEdWSVAuQXBwLkFuYWx5dGljcy5jb250ZXh0IHx8IHt9O1xuXG4kKHdpbmRvdykubG9hZChmdW5jdGlvbigpIHtcbiAgICB2YXIgJG1ldGVyID0gJCgnI21ldGVyJyksXG4gICAgICAgIHBlcmNlbnQgPSBwYXJzZUludCgkbWV0ZXIuZGF0YSgndmFsdWUnKSkgLyBwYXJzZUludCgkbWV0ZXIuZGF0YSgnbWF4JykpICogMTAwO1xuICAgICRtZXRlci5maW5kKCcucHJvZ3Jlc3MnKS5jc3MoJ3dpZHRoJywgcGVyY2VudCArIFwiJVwiKTtcbn0pO1xuXG4kKGZ1bmN0aW9uKCkge1xuXG4gICAgLy8gSW5zdGFudGlhdGUgdGhlIGFjY29yZGlvbiBvbiBNeSBHVmlQXG4gICAgJCgnI215dmlwIC5jb2x1bW5fMScpLmFjY29yZGlvbih7XG4gICAgICAgIGhlYWRlcjogXCJoMlwiLFxuICAgICAgICBhdXRvSGVpZ2h0OiBmYWxzZSxcbiAgICAgICAgY29sbGFwc2libGU6IHRydWUsXG4gICAgICAgIGljb25zOiB7XG4gICAgICAgICAgICBcImhlYWRlclwiOiBcImFjY29yZGlvbi1pY29uLWNsb3NlZFwiLCBcbiAgICAgICAgICAgIFwiaGVhZGVyU2VsZWN0ZWRcIjogXCJhY2NvcmRpb24taWNvbi1vcGVuXCIgXG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vcHJvamVjdCBkZXNjcmlwdGlvbiB0b2dnbGVcbiAgICAkKCcucHJvamVjdC1kZXNjcmlwdGlvbicpLm9uKCdjbGljaycsICcuc2hvdycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCcudGV4dC1jdXQnKS5oaWRlKCk7XG4gICAgICAgICQodGhpcykuaGlkZSgpO1xuICAgICAgICAkKCcucHJvamVjdC1kZXNjcmlwdGlvbiAub3ZlcmZsb3ctdGV4dCcpLnNsaWRlVG9nZ2xlKCk7XG4gICAgfSk7XG4gICAgJCgnLnByb2plY3QtZGVzY3JpcHRpb24nKS5vbignY2xpY2snLCAnLmhpZGUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgJCgnLnByb2plY3QtZGVzY3JpcHRpb24gLnNob3csIC5wcm9qZWN0LWRlc2NyaXB0aW9uIC50ZXh0LWN1dCcpLnNob3coKTtcbiAgICAgICAgJCgnLnByb2plY3QtZGVzY3JpcHRpb24gLm92ZXJmbG93LXRleHQnKS5zbGlkZVRvZ2dsZSgpO1xuICAgICAgICAkKFwiaHRtbCwgYm9keVwiKS5hbmltYXRlKHtcbiAgICAgICAgICAgIHNjcm9sbFRvcDogMFxuICAgICAgICB9LCBcInNsb3dcIik7XG4gICAgfSk7XG5cbiAgICB2YXIgJG1ldGVyID0gJChcIiNtZXRlclwiKTtcbiAgICAvL3Byb2dyZXNzIGJhciBkaXNtaXNzXG4gICAgJG1ldGVyLmZpbmQoXCJidXR0b25cIikuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgIGRpc21pc3NQQ0koKTtcbiAgICAgICAgJG1ldGVyLmFuaW1hdGUoe1xuICAgICAgICAgICAgaGVpZ2h0OiAwLFxuICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICB9LCBcImZhc3RcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKHRoaXMpLnNsaWRlVXAoKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvKlxuICAgICAgICBpZigkKCdodG1sJykuaGFzQ2xhc3MoXCJsdC1pZTlcIikgPT09IHRydWUpe1xuICAgICAgICAgICAvLyBBcHBlbmQgdXBncmFkZSBiYW5uZXIgdG8gYm9keVxuICAgICAgICB9XG4gICAgKi9cbiAgICAkKCd0ZXh0YXJlYS50aW55bWNlJykudGlueW1jZSh7XG4gICAgICAgIC8vIExvY2F0aW9uIG9mIFRpbnlNQ0Ugc2NyaXB0XG4gICAgICAgIHNjcmlwdF91cmw6ICcvanMvdGlueV9tY2UvdGlueV9tY2UuanMnLFxuXG4gICAgICAgIC8vIEdlbmVyYWwgb3B0aW9uc1xuICAgICAgICB0aGVtZTogXCJhZHZhbmNlZFwiLFxuICAgICAgICB3aWR0aDogJCgndGV4dGFyZWEudGlueW1jZScpLmRhdGEoJ3dpZHRoJykgfHwgXCI5MDBcIixcbiAgICAgICAgcGx1Z2luczogXCJhdXRvbGluayxsaXN0cyxwYWdlYnJlYWssc3R5bGUsbGF5ZXIsdGFibGUsc2F2ZSxhZHZocixhZHZpbWFnZSxhZHZsaW5rLGVtb3Rpb25zLGllc3BlbGwsaW5saW5lcG9wdXBzLGluc2VydGRhdGV0aW1lLHByZXZpZXcsbWVkaWEsc2VhcmNocmVwbGFjZSxwcmludCxjb250ZXh0bWVudSxwYXN0ZSxkaXJlY3Rpb25hbGl0eSxmdWxsc2NyZWVuLG5vbmVkaXRhYmxlLHZpc3VhbGNoYXJzLG5vbmJyZWFraW5nLHhodG1seHRyYXMsdGVtcGxhdGUsYWR2bGlzdFwiLFxuICAgICAgICAvLyBBbGxvdyBpZnJhbWUgdGFnXG4gICAgICAgIGV4dGVuZGVkX3ZhbGlkX2VsZW1lbnRzOiBcImlmcmFtZVtjbGFzc3xzcmN8YWx0fHRpdGxlfHdpZHRofGhlaWdodHxhbGlnbnxuYW1lfGZyYW1lYm9yZGVyfGFsbG93ZnVsbHNjcmVlbl1cIixcbiAgICAgICAgLy8gVGhlbWUgb3B0aW9uc1xuICAgICAgICB0aGVtZV9hZHZhbmNlZF9idXR0b25zMTogXCJib2xkLGl0YWxpYyx1bmRlcmxpbmUsLGJ1bGxpc3QsbnVtbGlzdCxvdXRkZW50LGluZGVudCxqdXN0aWZ5bGVmdCxqdXN0aWZ5Y2VudGVyLGp1c3RpZnlyaWdodCx8LGxpbmssdW5saW5rLGFuY2hvcixpbWFnZSxtZWRpYSx8LGZvcm1hdHNlbGVjdCx8LGNvZGVcIixcbiAgICAgICAgdGhlbWVfYWR2YW5jZWRfdG9vbGJhcl9sb2NhdGlvbjogXCJ0b3BcIixcbiAgICAgICAgdGhlbWVfYWR2YW5jZWRfdG9vbGJhcl9hbGlnbjogXCJsZWZ0XCIsXG4gICAgICAgIHRoZW1lX2FkdmFuY2VkX3N0YXR1c2Jhcl9sb2NhdGlvbjogXCJib3R0b21cIixcbiAgICAgICAgdGhlbWVfYWR2YW5jZWRfcmVzaXppbmc6IGZhbHNlLFxuXG4gICAgICAgIGZvcm1hdHM6IHtcbiAgICAgICAgICAgIGFsaWdubGVmdDoge1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAncCxoMSxoMixoMyxoNCxoNSxoNix0ZCx0aCxkaXYsdWwsb2wsbGksdGFibGUsaW1nJyxcbiAgICAgICAgICAgICAgICBjbGFzc2VzOiAnbGVmdCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhbGlnbmNlbnRlcjoge1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAncCxoMSxoMixoMyxoNCxoNSxoNix0ZCx0aCxkaXYsdWwsb2wsbGksdGFibGUsaW1nJyxcbiAgICAgICAgICAgICAgICBjbGFzc2VzOiAnY2VudGVyJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFsaWducmlnaHQ6IHtcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ3AsaDEsaDIsaDMsaDQsaDUsaDYsdGQsdGgsZGl2LHVsLG9sLGxpLHRhYmxlLGltZycsXG4gICAgICAgICAgICAgICAgY2xhc3NlczogJ3JpZ2h0J1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFsaWduZnVsbDoge1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAncCxoMSxoMixoMyxoNCxoNSxoNix0ZCx0aCxkaXYsdWwsb2wsbGksdGFibGUsaW1nJyxcbiAgICAgICAgICAgICAgICBjbGFzc2VzOiAnZnVsbCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2xkOiB7XG4gICAgICAgICAgICAgICAgaW5saW5lOiAnc3BhbicsXG4gICAgICAgICAgICAgICAgJ2NsYXNzZXMnOiAnYm9sZCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpdGFsaWM6IHtcbiAgICAgICAgICAgICAgICBpbmxpbmU6ICdzcGFuJyxcbiAgICAgICAgICAgICAgICAnY2xhc3Nlcyc6ICdpdGFsaWMnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdW5kZXJsaW5lOiB7XG4gICAgICAgICAgICAgICAgaW5saW5lOiAnc3BhbicsXG4gICAgICAgICAgICAgICAgJ2NsYXNzZXMnOiAndW5kZXJsaW5lJyxcbiAgICAgICAgICAgICAgICBleGFjdDogdHJ1ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN0cmlrZXRocm91Z2g6IHtcbiAgICAgICAgICAgICAgICBpbmxpbmU6ICdkZWwnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY3VzdG9tZm9ybWF0OiB7XG4gICAgICAgICAgICAgICAgaW5saW5lOiAnc3BhbicsXG4gICAgICAgICAgICAgICAgc3R5bGVzOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnIzAwZmYwMCcsXG4gICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiAnMjBweCdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdNeSBjdXN0b20gZm9ybWF0J1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICAvLyBFeGFtcGxlIGNvbnRlbnQgQ1NTIChzaG91bGQgYmUgeW91ciBzaXRlIENTUylcbiAgICAgICAgY29udGVudF9jc3M6IFwiL2Nzcy9jb250ZW50LmNzc1wiLFxuXG4gICAgICAgIC8vIERyb3AgbGlzdHMgZm9yIGxpbmsvaW1hZ2UvbWVkaWEvdGVtcGxhdGUgZGlhbG9nc1xuICAgICAgICB0ZW1wbGF0ZV9leHRlcm5hbF9saXN0X3VybDogXCJsaXN0cy90ZW1wbGF0ZV9saXN0LmpzXCIsXG4gICAgICAgIGV4dGVybmFsX2xpbmtfbGlzdF91cmw6IFwibGlzdHMvbGlua19saXN0LmpzXCIsXG4gICAgICAgIGV4dGVybmFsX2ltYWdlX2xpc3RfdXJsOiBcImxpc3RzL2ltYWdlX2xpc3QuanNcIixcbiAgICAgICAgbWVkaWFfZXh0ZXJuYWxfbGlzdF91cmw6IFwibGlzdHMvbWVkaWFfbGlzdC5qc1wiXG5cbiAgICB9KTtcblxuXG4gICAgLy8gUHJldmVudCBjbGlja2luZyBvbiBWaWV3IGJ1dHRvbiB3aGVuIHRoZSBDYXNlIFN0dWR5IGhhcyBEcmFmdCBzdGF0dXNcbiAgICAkKCcuZWRpdF9jYXNlX3N0dWRpZXMgLmVkaXRfcG9ydGxldCAuZWRpdF9idXR0b25zIGEuZWRpdF9idXR0b24ubGFzdCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdmFyIHN0YXR1cyA9ICQodGhpcykucGFyZW50KCkucGFyZW50KCkubmV4dCgnLmFkZF9jYXNlX3N0dWR5JykuZmluZCgnLnN0YXR1cyBpbnB1dFt0eXBlPXJhZGlvXVt2YWx1ZT0xXScpLmF0dHIoJ2NoZWNrZWQnKTtcbiAgICAgICAgaWYgKHN0YXR1cyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBhbGVydCgnQSBDYXNlIFN0dWR5IGluIERyYWZ0IHN0YXR1cyBjYW4gbm90IGJlIHByZXNlbnRlZCBpbiBwdWJsaWMgcHJvZmlsZSB2aWV3LicpO1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBGaWxlIHVwbG9hZHNcbiAgICAkKCcuZmlsZV91cGxvYWQgaW5wdXRbdHlwZT1cImZpbGVcIl0nKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAkKHRoaXMpLmN1c3RvbUZpbGVJbnB1dCgpO1xuICAgIH0pO1xuXG4gICAgLy8gU2VjdG9yIFN1YnNlY3RvciBmaWx0ZXJzIG9uIGxpc3R2aWV3c1xuXG4gICAgZnVuY3Rpb24gbG9hZFN1YnNlY3RvcnMoJHN1YnNlY3RvcnMsIHNlY3Rvcikge1xuICAgICAgICAkc3Vic2VjdG9ycy5odG1sKFwiXCIpO1xuICAgICAgICAkc3Vic2VjdG9ycy5hcHBlbmQoXCI8b3B0aW9uIHZhbHVlPVxcXCJcXFwiPlwiICsgc3Vic2VjdG9yc1tcImZpcnN0XCJdICsgXCI8L29wdGlvbj5cIik7XG4gICAgICAgICQuZWFjaChzdWJzZWN0b3JzW3NlY3Rvcl0sIGZ1bmN0aW9uKGluZGV4LCB2YWx1ZSkge1xuICAgICAgICAgICAgJHN1YnNlY3RvcnMuYXBwZW5kKFwiPG9wdGlvbiB2YWx1ZT1cXFwiXCIgKyB2YWx1ZSArIFwiXFxcIj5cIiArIHZhbHVlICsgXCI8L29wdGlvbj5cIilcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgJCgnZm9ybVtuYW1lPXNlYXJjaF9mb3JtXSBzZWxlY3RbbmFtZT1zZWN0b3JdJykuY2hhbmdlKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpLFxuICAgICAgICAgICAgJHN1YnNlY3RvcnMgPSAkKCdmb3JtW25hbWU9c2VhcmNoX2Zvcm1dIHNlbGVjdFtuYW1lPXN1YnNlY3Rvcl0nKTtcblxuICAgICAgICBsb2FkU3Vic2VjdG9ycygkc3Vic2VjdG9ycywgJHRoaXMudmFsKCkpO1xuICAgIH0pO1xuXG4gICAgLy9BdXRvIHJlc2l6ZSB0ZXh0YXJlYSBmb3IgcG9zdGluZyBhbiB1cGRhdGUgKGNvbW1lbnQpXG4gICAgZnVuY3Rpb24gYXV0b3Jlc2l6ZSgpIHtcbiAgICAgICAgdmFyIHR4dCA9ICQoXCIucG9zdC1jb21tZW50XCIpLFxuICAgICAgICAgICAgY29udGVudCA9IG51bGw7XG5cbiAgICAgICAgdHh0LmFkZENsYXNzKCd0eHRzdHVmZicpO1xuXG4gICAgICAgIHR4dC5vbigna2V5dXAnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGNvbnRlbnQgPSAkKHRoaXMpLnZhbCgpO1xuICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZSgvXFxuL2csICcnKTtcblxuICAgICAgICAgICAgdmFyIGhpZGRlbkRpdiA9ICQodGhpcykucGFyZW50KCkucGFyZW50KCkucGFyZW50KCkuZmluZCgnLmhpZGRlbmRpdicpO1xuICAgICAgICAgICAgaGlkZGVuRGl2LnRleHQoY29udGVudCArICcnKTtcblxuICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ2hlaWdodCcsIGhpZGRlbkRpdi5vdXRlckhlaWdodCgpKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGF1dG9yZXNpemUoKTtcblxuICAgIGZ1bmN0aW9uIHBvc3RVcGRhdGUoJGZvcm0sIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICgkZm9ybSA9PSB1bmRlZmluZWQgfHwgJGZvcm0ubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB1cmwgPSAkZm9ybS5hdHRyKFwiYWN0aW9uXCIpLFxuICAgICAgICAgICAgJGNvbnRlbnQgPSAkZm9ybS5maW5kKFwidGV4dGFyZWEucG9zdC1jb21tZW50XCIpLFxuICAgICAgICAgICAgJGVycm9ycyA9ICRmb3JtLmZpbmQoXCIuZXJyb3Jtc2dcIiksXG4gICAgICAgICAgICBjb250ZW50ID0gJGNvbnRlbnQudmFsKCksXG4gICAgICAgICAgICBwb3N0RGF0YSA9IG5ldyBPYmplY3Q7XG5cbiAgICAgICAgLy8gQ2xlYXIgdGhlIGVycm9yc1xuICAgICAgICAkZXJyb3JzLmh0bWwoXCJcIik7XG5cbiAgICAgICAgaWYgKCFpc1VwZGF0ZUNvbnRlbnRWYWxpZChjb250ZW50KSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHBvc3REYXRhLmF1dGhvciA9ICRmb3JtLmZpbmQoXCJpbnB1dFtuYW1lPWF1dGhvcl1cIikudmFsKCk7XG4gICAgICAgIHBvc3REYXRhLnR5cGUgPSAkZm9ybS5maW5kKFwiaW5wdXRbbmFtZT10eXBlXVwiKS52YWwoKTtcbiAgICAgICAgcG9zdERhdGEuY29udGVudCA9IGNsZWFuVXBkYXRlQ29udGVudChjb250ZW50KTtcblxuICAgICAgICBpZiAoJGZvcm0uZmluZChcImlucHV0W25hbWU9cmVwbHlfdG9dXCIpKSB7XG4gICAgICAgICAgICBwb3N0RGF0YS5yZXBseV90byA9ICRmb3JtLmZpbmQoXCJpbnB1dFtuYW1lPXJlcGx5X3RvXVwiKS52YWwoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBwb3N0aW5nID0gJC5wb3N0KHVybCwgcG9zdERhdGEsIFwianNvblwiKTtcblxuICAgICAgICBwb3N0aW5nLmRvbmUoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgaWYgKGRhdGEuc3RhdHVzID09IFwic3VjY2Vzc1wiKSB7XG4gICAgICAgICAgICAgICAgJGNvbnRlbnQudmFsKCcnKTtcbiAgICAgICAgICAgICAgICAkY29udGVudC5rZXl1cCgpO1xuICAgICAgICAgICAgICAgICRmb3JtLnJlbW92ZUNsYXNzKCdkYXRhLXN1Ym1pdHRpbmctaW4tcHJvZ3Jlc3MnKTtcbiAgICAgICAgICAgICAgICAvLyBBbmFsaXRpY3NcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5hbmFseXRpY3MpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VnbWVudEFuYWx5dGljcyhkYXRhLmFuYWx5dGljcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJGVycm9ycy5odG1sKFwiPGxhYmVsPkVycm9yIG9jY3VycmVkIHdoaWxlIHRyeWluZyB0byBwb3N0IGFuIHVwZGF0ZS48L2xhYmVsPlwiKVxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgYWxlcnQoXCJFcnJvciB3aGlsZSB0cnlpbmcgdG8gcG9zdCBhbiB1cGRhdGVcIik7XG4gICAgICAgIH0pLmFsd2F5cyhmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb2FkVXBkYXRlUmVwbGllcygkdXBkYXRlKSB7XG4gICAgICAgIGlmICgkdXBkYXRlID09IHVuZGVmaW5lZCB8fCAkdXBkYXRlLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgJGNvbnRhaW5lciA9ICR1cGRhdGUuZmluZChcIi5hZGRpdGlvbmFsLWNvbW1lbnRzIHVsLnVwZGF0ZXNcIiksXG4gICAgICAgICAgICB1cGRhdGVfaWQgPSAkdXBkYXRlLmF0dHIoXCJkYXRhLWlkXCIpLFxuICAgICAgICAgICAgdXJsID0gJHVwZGF0ZS5hdHRyKFwiZGF0YS1yZXBsaWVzLXVybFwiKSArIFwiL1wiICsgdXBkYXRlX2lkO1xuXG4gICAgICAgIHZhciBnZXR0aW5nID0gJC5nZXQodXJsLCBudWxsLCBcImpzb25cIik7XG5cbiAgICAgICAgZ2V0dGluZy5kb25lKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgIGlmIChkYXRhLnN0YXR1cyA9PSBcInN1Y2Nlc3NcIikge1xuICAgICAgICAgICAgICAgIGlmIChkYXRhLnVwZGF0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgJGNvbnRhaW5lci5odG1sKGRhdGEudXBkYXRlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFNob3cgdGhlIG51bWJlciBvZiByZXBsaWVzXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEudXBkYXRlX2NvdW50KSB7XG4gICAgICAgICAgICAgICAgICAgICR1cGRhdGUuZmluZChcIi5jb250ZW50IC5udW1iZXItb2YtY29tbWVudHMgc3BhblwiKS5odG1sKGRhdGEudXBkYXRlX2NvdW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJHVwZGF0ZS5maW5kKFwiLmNvbW1lbnRcIikuYXBwZW5kKFwiPGRpdiBjbGFzcz0naGlkZGVuZGl2IGNvbW1vbic+XCIpO1xuICAgICAgICAgICAgICAgIGF1dG9yZXNpemUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkuZmFpbChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGFsZXJ0KFwiRXJyb3Igd2hpbGUgdHJ5aW5nIHRvIGdldCB1cGRhdGVzLlwiKTtcbiAgICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb2FkVXBkYXRlcygkZm9ybSwgcmVsb2FkKSB7XG4gICAgICAgIGlmICgkZm9ybSA9PSB1bmRlZmluZWQgfHwgJGZvcm0ubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBTZXQgZGVmYXVsdCBvZiByZWxvYWQgdG8gZmFsc2VcbiAgICAgICAgcmVsb2FkID0gdHlwZW9mIHJlbG9hZCAhPT0gJ3VuZGVmaW5lZCcgPyByZWxvYWQgOiBmYWxzZTtcblxuICAgICAgICB2YXIgdXJsID0gJGZvcm0uYXR0cihcImFjdGlvblwiKSxcbiAgICAgICAgICAgICRjb250YWluZXIgPSAkZm9ybS5wYXJlbnRzKCkuZmluZChcInVsLmZlZWQudXBkYXRlc1wiKSxcbiAgICAgICAgICAgICRsYXN0ID0gJGNvbnRhaW5lci5jaGlsZHJlbihcImxpOmxhc3QtY2hpbGRcIiksXG4gICAgICAgICAgICAkbG9hZE1vcmUgPSAkZm9ybS5maW5kKFwiaW5wdXRbdHlwZT1zdWJtaXRdLnZpZXctbW9yZVwiKSxcbiAgICAgICAgICAgIGxhc3RJZCA9IDAsXG4gICAgICAgICAgICBodG1sID0gXCJcIjtcblxuICAgICAgICBpZiAoIXJlbG9hZCAmJiAkbGFzdCAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxhc3RJZCA9ICRsYXN0LmF0dHIoJ2RhdGEtaWQnKSA9PSB1bmRlZmluZWQgPyAwIDogJGxhc3QuYXR0cignZGF0YS1pZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGdldHRpbmcgPSAkLmdldCh1cmwgKyBcIi9cIiArIGxhc3RJZCwgbnVsbCwgXCJqc29uXCIpO1xuXG4gICAgICAgIGdldHRpbmcuZG9uZShmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICBpZiAoZGF0YS5zdGF0dXMgPT0gXCJzdWNjZXNzXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS51cGRhdGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZWxvYWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRjb250YWluZXIuaHRtbChkYXRhLnVwZGF0ZXMpOyAvLyBSZXBsYWNlIHRoZSBjb250ZW50XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkY29udGFpbmVyLmFwcGVuZChkYXRhLnVwZGF0ZXMpOyAvLyBBcHBlbmQgdG8gdGhlIGVuZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNoZWNrUG9zdFVwZGF0ZVN0YXRlKCRjb250YWluZXIuZmluZChcImZvcm1bbmFtZT1wb3N0X3VwZGF0ZV1cIikpO1xuICAgICAgICAgICAgICAgIGlmIChkYXRhLm1vcmVfY291bnQgJiYgZGF0YS5tb3JlX2NvdW50ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAkbG9hZE1vcmUuc2hvdygpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICRsb2FkTW9yZS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgYWxlcnQoXCJFcnJvciB3aGlsZSB0cnlpbmcgdG8gZ2V0IHVwZGF0ZXMuXCIpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAkKFwiLmNvbW1lbnQ6Zmlyc3RcIikuYXBwZW5kKFwiPGRpdiBjbGFzcz0naGlkZGVuZGl2IGNvbW1vbic+XCIpO1xuXG4gICAgJChcIi5jb21tZW50c1wiKS5vbihcImNsaWNrXCIsIFwibGkgLm51bWJlci1vZi1jb21tZW50cyBhXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIHZhciAkdXBkYXRlID0gJCh0aGlzKS5wYXJlbnRzKFwibGlcIikuZmlyc3QoKSxcbiAgICAgICAgICAgICRjb250YWluZXIgPSAkdXBkYXRlLmZpbmQoXCIuYWRkaXRpb25hbC1jb21tZW50c1wiKTtcblxuICAgICAgICAvLyBEbyBBSkFYIHJlcXVlc3Qgb25seSBpZiB0aGVyZSBhcmUgbm8gcmVwbGllcyBjdXJyZW50bHkgYW5kIHJlcGxpZXMgYmxvY2sgaXMgaW52aXNpYmxlXG4gICAgICAgIGlmICgkY29udGFpbmVyLmZpbmQoXCIudXBkYXRlc1wiKS5jaGlsZHJlbihcImxpXCIpLmxlbmd0aCA9PSAwICYmXG4gICAgICAgICAgICAkY29udGFpbmVyLmNzcyhcImRpc3BsYXlcIikgPT0gJ25vbmUnKSB7XG4gICAgICAgICAgICBsb2FkVXBkYXRlUmVwbGllcygkdXBkYXRlKTtcbiAgICAgICAgfVxuXG4gICAgICAgICRjb250YWluZXIuc2xpZGVUb2dnbGUoKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuXG4gICAgJChcIiNteXZpcCBmb3JtW25hbWU9dXBkYXRlc192aWV3X21vcmVdXCIpLnN1Ym1pdChmdW5jdGlvbihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgbG9hZFVwZGF0ZXMoJCh0aGlzKSk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcbiAgICAvLyBMb2FkIGluaXRpYWwgcG9ydGlvbiBvZiBNeVZpcCB1cGRhdGVzIG9uIHRoZSBwYWdlIGxvYWRcbiAgICBsb2FkVXBkYXRlcygkKFwiI215dmlwIGZvcm1bbmFtZT11cGRhdGVzX3ZpZXdfbW9yZV1cIikpO1xuXG4gICAgJChcIiNwcm9qZWN0cyBmb3JtW25hbWU9dXBkYXRlc192aWV3X21vcmVdXCIpLnN1Ym1pdChmdW5jdGlvbihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgbG9hZFVwZGF0ZXMoJCh0aGlzKSk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcbiAgICBsb2FkVXBkYXRlcygkKFwiI3Byb2plY3RzIGZvcm1bbmFtZT11cGRhdGVzX3ZpZXdfbW9yZV1cIikpO1xuXG4gICAgZnVuY3Rpb24gY2xlYW5VcGRhdGVDb250ZW50KGNvbnRlbnQpIHtcbiAgICAgICAgaWYgKGNvbnRlbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgICAgIC8vIFJlbW92ZSBhbGwgdmVydGl2YWwgc3BhY2UgYW5kIHRyaW0gbGVhZGluZyBhbmQgdHJhaWxpbmcgc3BhY2VzXG4gICAgICAgIC8vIElFIGRvc2VudCBzdXBwb3J0IFN0cmluZy50cmltKCkgdGhlcmVmb3JlIHdlIHVzZSAkLnRyaW0oKVxuICAgICAgICByZXR1cm4gJC50cmltKGNvbnRlbnQucmVwbGFjZSgvXFx2Ky9nLCAnJykpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzVXBkYXRlQ29udGVudFZhbGlkKGNvbnRlbnQpIHtcbiAgICAgICAgY29udGVudCA9IGNsZWFuVXBkYXRlQ29udGVudChjb250ZW50KTtcbiAgICAgICAgdmFyIG1pbiA9IDYsXG4gICAgICAgICAgICBtYXggPSAxMDI0O1xuXG4gICAgICAgIGlmIChjb250ZW50Lmxlbmd0aCA8IG1pbiB8fCBjb250ZW50Lmxlbmd0aCA+IG1heCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2hlY2tQb3N0VXBkYXRlU3RhdGUoJGZvcm0pIHtcblxuICAgICAgICB2YXIgJGNvbnRlbnQgPSAkZm9ybS5maW5kKFwidGV4dGFyZWEucG9zdC1jb21tZW50XCIpLFxuICAgICAgICAgICAgJHN1Ym1pdCA9ICRmb3JtLmZpbmQoXCJpbnB1dFt0eXBlPXN1Ym1pdF1cIik7XG5cblxuICAgICAgICBpZiAoaXNVcGRhdGVDb250ZW50VmFsaWQoJGNvbnRlbnQudmFsKCkpICYmICRmb3JtLmhhc0NsYXNzKCdkYXRhLXN1Ym1pdHRpbmctaW4tcHJvZ3Jlc3MnKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICRzdWJtaXQucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkc3VibWl0LmF0dHIoXCJkaXNhYmxlZFwiLCBcImRpc2FibGVkXCIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY2hlY2tQb3N0VXBkYXRlU3RhdGUoJChcImZvcm1bbmFtZT1wb3N0X3VwZGF0ZV1cIikpO1xuXG4gICAgJChcIi5jb21tZW50c1wiKS5vbihcImtleWRvd25cIiwgXCJmb3JtW25hbWU9cG9zdF91cGRhdGVdIHRleHRhcmVhLnBvc3QtY29tbWVudFwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmIChlLmtleUNvZGUgPT0gMTMpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGlmIChlLm1ldGFLZXkgfHwgZS5jdHJsS2V5KSB7XG4gICAgICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcbiAgICAgICAgICAgICAgICAvLyR0aGlzLmNsb3Nlc3QoXCJmb3JtW25hbWU9cG9zdF91cGRhdGVdXCIpLnN1Ym1pdCgpO1xuICAgICAgICAgICAgICAgICR0aGlzLmNsb3Nlc3QoXCJmb3JtW25hbWU9cG9zdF91cGRhdGVdXCIpLmZpbmQoJ2lucHV0W3R5cGU9XCJzdWJtaXRcIl0nKS50cmlnZ2VyKCdjbGljaycpO1xuICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoXCJpbnB1dFt0eXBlPXN1Ym1pdF1cIikuYXR0cihcImRpc2FibGVkXCIsIFwiZGlzYWJsZWRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJ2Zvcm0nKS5yZW1vdmVDbGFzcyhcImRhdGEtc3VibWl0dGluZy1pbi1wcm9ncmVzc1wiKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgJChcIi5jb21tZW50c1wiKS5vbihcImtleXVwXCIsIFwiZm9ybVtuYW1lPXBvc3RfdXBkYXRlXSB0ZXh0YXJlYS5wb3N0LWNvbW1lbnRcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICBjaGVja1Bvc3RVcGRhdGVTdGF0ZSgkKHRoaXMpLmNsb3Nlc3QoXCJmb3JtW25hbWU9cG9zdF91cGRhdGVdXCIpKTtcbiAgICB9KTtcblxuICAgICQoXCIuY29tbWVudHNcIikub24oXCJjaGFuZ2VcIiwgXCJmb3JtW25hbWU9cG9zdF91cGRhdGVdIHRleHRhcmVhLnBvc3QtY29tbWVudFwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGNoZWNrUG9zdFVwZGF0ZVN0YXRlKCQodGhpcykuY2xvc2VzdChcImZvcm1bbmFtZT1wb3N0X3VwZGF0ZV1cIikpO1xuICAgIH0pO1xuXG4gICAgJChcIi5jb21tZW50c1wiKS5vbihcInN1Ym1pdFwiLCBcImZvcm1bbmFtZT1wb3N0X3VwZGF0ZV1cIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgdmFyICRmb3JtID0gJCh0aGlzKTtcblxuICAgICAgICAvLyBQcmV2ZW50IGRvdWJsZSBzdWJtaXNzaW9uc1xuXG4gICAgICAgIGlmICgkZm9ybS5oYXNDbGFzcyhcImRhdGEtc3VibWl0dGluZy1pbi1wcm9ncmVzc1wiKSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgJGZvcm0uYWRkQ2xhc3MoXCJkYXRhLXN1Ym1pdHRpbmctaW4tcHJvZ3Jlc3NcIik7XG4gICAgICAgICRmb3JtLmZpbmQoXCJpbnB1dFt0eXBlPXN1Ym1pdF1cIikuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcbiAgICAgICAgcG9zdFVwZGF0ZSgkZm9ybSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyBEaXNhYmxlIFBvc3QgYnV0dG9uXG4gICAgICAgICAgICBjaGVja1Bvc3RVcGRhdGVTdGF0ZSgkZm9ybSk7XG4gICAgICAgICAgICAvLyBSZWxvYWQgdXBkYXRlcy9yZXBsaWVzXG4gICAgICAgICAgICBpZiAoJGZvcm0uZmluZChcImlucHV0W25hbWU9cmVwbHlfdG9dXCIpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgJGNvbnRhaW5lciA9ICRmb3JtLmNsb3Nlc3QoXCIuYWRkaXRpb25hbC1jb21tZW50c1wiKS5jbG9zZXN0KFwibGlcIik7XG4gICAgICAgICAgICAgICAgbG9hZFVwZGF0ZVJlcGxpZXMoJGNvbnRhaW5lciwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgYXV0b3Jlc2l6ZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsb2FkVXBkYXRlcygkZm9ybS5wYXJlbnRzKCkuZmluZChcImZvcm1bbmFtZT11cGRhdGVzX3ZpZXdfbW9yZV1cIiksIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG5cbiAgICAvLyBGb2xsb3cvVW5mb2xsb3dcbiAgICBmdW5jdGlvbiBmb2xsb3dVbmZvbGxvdygkZm9ybSkge1xuICAgICAgICBpZiAoJGZvcm0gPT0gdW5kZWZpbmVkIHx8ICRmb3JtLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgJGFjdGlvbiA9ICRmb3JtLmZpbmQoXCJpbnB1dFt0eXBlPWhpZGRlbl1bbmFtZT1hY3Rpb25dXCIpLFxuICAgICAgICAgICAgYWN0aW9uID0gJGFjdGlvbi52YWwoKSxcbiAgICAgICAgICAgIGNvbnRleHQgPSAkZm9ybS5maW5kKFwiaW5wdXRbdHlwZT1oaWRkZW5dW25hbWU9Y29udGV4dF1cIikudmFsKCksXG4gICAgICAgICAgICAkc3VibWl0ID0gJGZvcm0uZmluZChcImFbbmFtZT1zdWJtaXRdIC5mb2xsb3ctdGV4dFwiKSxcbiAgICAgICAgICAgIHVybCA9IGhvc3R1cmwgKyBcIi9cIiArIGNvbnRleHQgKyBcIi9cIiArIGFjdGlvbjtcblxuICAgICAgICB2YXIgcG9zdERhdGEgPSBuZXcgT2JqZWN0KCk7XG4gICAgICAgIHBvc3REYXRhLmlkID0gJGZvcm0uZmluZChcImlucHV0W3R5cGU9aGlkZGVuXVtuYW1lPWlkXVwiKS52YWwoKTtcbiAgICAgICAgcG9zdERhdGEucmV0dXJuX2ZvbGxvd3MgPSAkZm9ybS5maW5kKFwiaW5wdXRbdHlwZT1oaWRkZW5dW25hbWU9cmV0dXJuX2ZvbGxvd3NdXCIpLnZhbCgpO1xuXG4gICAgICAgIHZhciBwb3N0aW5nID0gJC5wb3N0KHVybCwgcG9zdERhdGEsIFwianNvblwiKTtcblxuICAgICAgICBwb3N0aW5nLmRvbmUoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgaWYgKGRhdGEuc3RhdHVzID09IFwic3VjY2Vzc1wiKSB7XG4gICAgICAgICAgICAgICAgJHN1Ym1pdC50ZXh0KChhY3Rpb24gPT0gXCJmb2xsb3dcIikgPyBsYW5nW1wiZm9sbG93aW5nXCJdIDogbGFuZ1tcImZvbGxvd1wiXSk7XG5cbiAgICAgICAgICAgICAgICB2YXIgdW5mb2xsb3dUZXh0ID0gKGFjdGlvbiA9PSBcImZvbGxvd1wiKSA/IGxhbmdbXCJ1bmZvbGxvd1wiXSA6IFwiXCI7XG4gICAgICAgICAgICAgICAgJHN1Ym1pdC5wYXJlbnQoKS5hdHRyKFwiZGF0YS11bmZvbGxvd1wiLCB1bmZvbGxvd1RleHQpO1xuXG4gICAgICAgICAgICAgICAgaWYgKCRzdWJtaXQucGFyZW50KCkuYXR0cihcImRhdGEtdW5mb2xsb3dcIikgIT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICAkc3VibWl0LnBhcmVudCgpLmFkZENsYXNzKCd1bmZvbGxvdycpLmFkZENsYXNzKCdqdXN0X2NoYW5nZWQnKS5tb3VzZWxlYXZlKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmp1c3RfY2hhbmdlZCcpLnJlbW92ZUNsYXNzKCdqdXN0X2NoYW5nZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJHN1Ym1pdC5wYXJlbnQoKS5yZW1vdmVDbGFzcygndW5mb2xsb3cnKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAkYWN0aW9uLnZhbCgoYWN0aW9uID09IFwiZm9sbG93XCIpID8gXCJ1bmZvbGxvd1wiIDogXCJmb2xsb3dcIik7XG5cbiAgICAgICAgICAgICAgICAvLyBBbmFsaXRpY3NcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5hbmFseXRpY3MpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VnbWVudEFuYWx5dGljcyhkYXRhLmFuYWx5dGljcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgYWxlcnQoXCJFcnJvciB3aGlsZSB0cnlpbmcgdG8gKHVuKWZvbGxvdy5cIilcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gRm9sbG93L1VuZm9sbG93IGJ1dHRvbiBpbXBsZW1lbnRlZCBhcyBhbiBhbmNob3IuIFRoZXJlZm9yZSB3ZSBuZWVkIHRvIHRyaWdnZXIgdGhlIHN1Ym1pdCBldmVudCBmb3IgdGhlIGZvcm1cbiAgICAkKFwiZm9ybVtuYW1lPWZvbGxvd19mb3JtXSBhW25hbWU9c3VibWl0XVwiKS5jbGljayhmdW5jdGlvbihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKFwiZm9ybVtuYW1lPWZvbGxvd19mb3JtXVwiKS5zdWJtaXQoKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuXG4gICAgJChcImZvcm1bbmFtZT1mb2xsb3dfZm9ybV1cIikuc3VibWl0KGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBmb2xsb3dVbmZvbGxvdygkKHRoaXMpKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuXG4gICAgLy8gU3VibWl0IHRoZSBmb3JtIGlmIHNvcnQgb3JkZXIgaGFzIGJlZW4gY2hhbmdlZCBmb3IgYSBsaXN0IHZpZXcgKFByb2plY3RzLCBFeHBlcnRpc2UsIExpZ2h0bmluZy4uLilcbiAgICAkKFwic2VsZWN0W25hbWU9c29ydF9vcHRpb25zXVwiKS5jaGFuZ2UoZnVuY3Rpb24oZSkge1xuICAgICAgICB2YXIgJGZvcm0gPSAkKCdmb3JtW25hbWU9c2VhcmNoX2Zvcm1dJyksXG4gICAgICAgICAgICB2YWx1ZSA9ICQodGhpcykudmFsKCk7XG4gICAgICAgIGlmICgkZm9ybS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAkZm9ybS5maW5kKCdpbnB1dFt0eXBlPWhpZGRlbl1bbmFtZT1zb3J0XScpLnZhbCh2YWx1ZSk7XG4gICAgICAgICAgICAkZm9ybS5zdWJtaXQoKTtcbiAgICAgICAgfVxuICAgIH0pXG5cbiAgICAvLyBTdWJtaXQgdGhlIGZvcm0gaWYgbGltaXQgKGl0ZW1zIHBlciBwYWdlKSBvcHRpb24gaGFzIGJlZW4gY2hhbmdlZCBmb3IgYSBsaXN0IHZpZXcgKFByb2plY3RzLCBFeHBlcnRpc2UsIExpZ2h0bmluZy4uLilcbiAgICAkKFwic2VsZWN0W25hbWU9bGltaXRfb3B0aW9uc11cIikuY2hhbmdlKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdmFyICRmb3JtID0gJCgnZm9ybVtuYW1lPXNlYXJjaF9mb3JtXScpLFxuICAgICAgICAgICAgdmFsdWUgPSAkKHRoaXMpLnZhbCgpO1xuICAgICAgICBpZiAoJGZvcm0ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgJGZvcm0uZmluZCgnaW5wdXRbdHlwZT1oaWRkZW5dW25hbWU9bGltaXRdJykudmFsKHZhbHVlKTtcbiAgICAgICAgICAgICRmb3JtLnN1Ym1pdCgpO1xuICAgICAgICB9XG4gICAgfSlcblxuICAgIC8qIHNjcm9sbCB0byAqL1xuICAgIHZhciBzY3JvbGxfdG8gPSAkKCdkaXYuc2Nyb2xsX3RvJyk7XG4gICAgaWYgKHNjcm9sbF90by5sZW5ndGgpIHtcbiAgICAgICAgc2Nyb2xsX3RvLmZpbmQoJ2EnKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB3aGVyZSA9ICQodGhpcykuYXR0cignaHJlZicpO1xuICAgICAgICAgICAgc2Nyb2xsSXQoJCh3aGVyZSkpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyogZW5kIHNjcm9sbCB0byAqL1xuXG4gICAgLyogRWRpdCBTZWF0cyAmIHNlYXJjaCBmaWx0ZXIgKi9cbiAgICB2YXIgJHNlYXRfcG9ydGxldHMgPSAkKCcuc2VhdF9wb3J0bGV0cycpLFxuICAgICAgICAkc2VhcmNoX2ZpbHRlciA9ICQoJy5zZWFyY2hfZmlsdGVyJyk7XG5cbiAgICBpZiAoJHNlYXRfcG9ydGxldHMubGVuZ3RoKSB7XG5cbiAgICAgICAgdmFyICRpbnZpdGVCdXR0b24gPSAkKCcuaW52aXRlJykuZmluZCgnLmJ1dHRvbicpLFxuICAgICAgICAgICAgJGNhbmNlbEJ1dHRvbiA9ICQoJy5pbnZpdGVfZm9ybScpLmZpbmQoJ2EuY2FuY2VsJyk7XG5cbiAgICAgICAgJGludml0ZUJ1dHRvbi5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmludml0ZScpLmhpZGUoKS5uZXh0KCcuaW52aXRlX2Zvcm0nKS5zaG93KCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICRjYW5jZWxCdXR0b24uY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5pbnZpdGVfZm9ybScpLmhpZGUoKS5wcmV2KCcuaW52aXRlJykuc2hvdygpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoJHNlYXJjaF9maWx0ZXIubGVuZ3RoKSB7XG4gICAgICAgIHZhciAkc2ZkID0gJCgnLnNlYXJjaF9maWx0ZXJfZHJvcCcpLFxuICAgICAgICAgICAgJHNmaCA9ICQoJ2lucHV0LnNlYXJjaC1maWx0ZXItaGlkZGVuJyksXG4gICAgICAgICAgICAkY3VycmVudCA9ICQoJ3NwYW4uY3VycmVudCcsICRzZWFyY2hfZmlsdGVyKTtcblxuICAgICAgICAkc2ZkLmZpbmQoJ2EnKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBkYXRhX2ZpbHRlciA9ICQodGhpcykuYXR0cignZGF0YS1maWx0ZXItdmFsdWUnKSxcbiAgICAgICAgICAgICAgICB0ZXh0ID0gJCh0aGlzKS50ZXh0KCk7XG5cbiAgICAgICAgICAgICRjdXJyZW50LnRleHQodGV4dCk7XG4gICAgICAgICAgICAkc2ZoLmF0dHIoJ3ZhbHVlJywgZGF0YV9maWx0ZXIpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyogZW5kIEVkaXQgU2VhdHMgKi9cblxuICAgIHZhciAkdG9vbHRpcCA9ICQoXCIudG9vbHRpcFwiKTtcbiAgICBpZiAoJHRvb2x0aXAubGVuZ3RoID4gMCkge1xuICAgICAgICAkdG9vbHRpcC5wb3NoeXRpcCh7XG4gICAgICAgICAgICBjbGFzc05hbWU6IFwidGlwLXllbGxvd3NpbXBsZVwiLFxuICAgICAgICAgICAgc2hvd1RpbWVvdXQ6IDEsXG4gICAgICAgICAgICBhbGlnblRvOiBcInRhcmdldFwiLFxuICAgICAgICAgICAgYWxpZ25YOiBcImNlbnRlclwiLFxuICAgICAgICAgICAgb2Zmc2V0WTogNSxcbiAgICAgICAgICAgIGFsbG93VGlwSG92ZXI6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIG5vIGVudHJpZXMgbWVzc2FnZSBvbiBwcm9qZWN0IHNlYXJjaFxuICAgIGlmICghJCgnLnByb2plY3RfZW50cmllcyAucHJvamVjdF9saXN0aW5nJykuc2l6ZSgpKSB7XG4gICAgICAgICQoJy5wcm9qZWN0X2VudHJpZXMnKS5odG1sKCc8cD4nICsgbGFuZ1snU2VhcmNoTm9Qcm9qZWN0J10gKyAnPC9wPicpXG4gICAgfVxuXG5cbiAgICAvLyBVU0VSIHNlYXJjaCBmb3JtXG4gICAgJCgnI3Byb2plY3RzX3NlYXJjaF9mb3JtLCAjdXNlcl9zZWFyY2hfZm9ybScpLnN1Ym1pdChmdW5jdGlvbigpIHtcbiAgICAgICAgJCgnc2VsZWN0JywgdGhpcykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLnZhbCgpID09ICcnKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KVxuXG4gICAgJChcIi5hY2NvcmRpb25cIikuYWNjb3JkaW9uKHtcbiAgICAgICAgYXV0b0hlaWdodDogZmFsc2UsXG4gICAgICAgIG5hdmlnYXRpb246IHRydWUsXG4gICAgICAgIGNoYW5nZTogc2hvd19zdGFnZV9zdGF0dXMsXG4gICAgICAgIGNyZWF0ZTogc2hvd19zdGFnZV9zdGF0dXNcbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIHNob3dfc3RhZ2Vfc3RhdHVzKCkge1xuICAgICAgICAkKCcjc3RhZ2VfYWNjb3JkaW9uIC51aS1hY2NvcmRpb24tY29udGVudC51aS1hY2NvcmRpb24tY29udGVudC1hY3RpdmUnKS5jc3MoJ292ZXJmbG93JywgJ3Zpc2libGUnKTtcbiAgICB9XG5cblxuICAgIC8vIG9ubHkgYWxsb3cgb25lIG9wZW4gUHJvamVjdCBTdGFnZVxuICAgICQoJy5zdGFnZV9zdGF0dXNfc2VsZWN0JykuY2hhbmdlKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIGlmICgkKCdvcHRpb246c2VsZWN0ZWQnLCB0aGlzKS52YWwoKSA9PSAnT3BlbicpIHtcblxuICAgICAgICAgICAgJCgnI3N0YWdlX2FjY29yZGlvbiBoMy51aS1hY2NvcmRpb24taGVhZGVyIGEgc3BhbicpLnJlbW92ZSgpO1xuXG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudHMoJ2Rpdi51aS1hY2NvcmRpb24tY29udGVudCcpLnByZXYoJ2gzJykuZmluZCgnYScpLmFwcGVuZCgnPHNwYW4+b3Blbjwvc3Bhbj4nKTtcblxuICAgICAgICAgICAgJCgnLnN0YWdlX3N0YXR1c19zZWxlY3QnKS52YWwoJ0Nsb3NlZCcpO1xuICAgICAgICAgICAgJCh0aGlzKS52YWwoJ09wZW4nKTtcbiAgICAgICAgfVxuXG4gICAgfSkuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCQoJ29wdGlvbjpzZWxlY3RlZCcsIHRoaXMpLnZhbCgpID09ICdPcGVuJykge1xuXG4gICAgICAgICAgICAkKCcjc3RhZ2VfYWNjb3JkaW9uIGgzLnVpLWFjY29yZGlvbi1oZWFkZXIgYSBzcGFuJykucmVtb3ZlKCk7XG5cbiAgICAgICAgICAgICQodGhpcykucGFyZW50cygnZGl2LnVpLWFjY29yZGlvbi1jb250ZW50JykucHJldignaDMnKS5maW5kKCdhJykuYXBwZW5kKCc8c3Bhbj5vcGVuPC9zcGFuPicpO1xuXG4gICAgICAgICAgICAkKCcuc3RhZ2Vfc3RhdHVzX3NlbGVjdCcpLnZhbCgnQ2xvc2VkJyk7XG4gICAgICAgICAgICAkKHRoaXMpLnZhbCgnT3BlbicpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBzdGFydCBpbml0c1xuICAgIGVkdV9saXN0aW5nX2luaXQoKTtcbiAgICBhamF4X2Zvcm1faW5pdCgpO1xuXG5cbiAgICAvLyBQcm9qZWN0IFN1Yi1TZWN0b3IgRHluYW1pYyBMaXN0IFBvcHVsYXRpb25cbiAgICB2YXIgJHByb2plY3Rfc2VjdG9yX3N1YiA9ICQoJyNwcm9qZWN0X3NlY3Rvcl9zdWIgb3B0aW9uJykubm90KCcuaGFyZGNvZGUnKTtcbiAgICB2YXIgJHByb2plY3Rfc2VjdG9yX3N1Yl9ob2xkZXIgPSAkcHJvamVjdF9zZWN0b3Jfc3ViLmNsb25lKCk7XG5cbiAgICAkcHJvamVjdF9zZWN0b3Jfc3ViLnJlbW92ZSgpLm5vdCgnLmhhcmRjb2RlJyk7XG5cbiAgICAkKCcjcHJvamVjdF9zZWN0b3JfbWFpbicpLmxpdmUoXCJjaGFuZ2VcIiwgZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgJCgnI3Byb2plY3Rfc2VjdG9yX3N1YicpLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7XG4gICAgICAgICQoJyNwcm9qZWN0X3NlY3Rvcl9zdWInKS5mb2N1cygpO1xuXG4gICAgICAgIHZhciB0aGlzQ2xhc3MgPSAkKHRoaXMpLmZpbmQoJ29wdGlvbjpzZWxlY3RlZCcpLmF0dHIoJ2NsYXNzJykucmVwbGFjZSgnc2VjdG9yX21haW4nLCAncHJvamVjdF9zZWN0b3Jfc3ViJyk7XG4gICAgICAgICQoJyNwcm9qZWN0X3NlY3Rvcl9zdWIgb3B0aW9uJykubm90KCcuaGFyZGNvZGUnKS5yZW1vdmUoKVxuICAgICAgICAkKCcjcHJvamVjdF9zZWN0b3Jfc3ViIG9wdGlvbjpmaXJzdCcpLmFmdGVyKCRwcm9qZWN0X3NlY3Rvcl9zdWJfaG9sZGVyLmZpbHRlcignLicgKyB0aGlzQ2xhc3MpKTtcbiAgICAgICAgaWYgKCQoJyNzZWxlY3RlZF9zdWJfc2VjdG9yJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgaWYgKCQoJyNzZWxlY3RlZF9zdWJfc2VjdG9yJykudGV4dCgpID09IFwiT3RoZXJcIikge1xuICAgICAgICAgICAgICAgICQoJyNwcm9qZWN0X3NlY3Rvcl9zdWInKS52YWwoXCJPdGhlclwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pLnRyaWdnZXIoXCJjaGFuZ2VcIik7XG5cblxuICAgIC8vIFN1Yi1TZWN0b3IgXCJPdGhlclwiIFRleHQgSW5wdXRcbiAgICAvLyBpbmNsdWRlZCBpbiBwcm9maWxlL19nZW5lcmFsX2luZm9fZm9ybSB0byByZXNldFxuICAgICQoJyNwcm9qZWN0X3NlY3Rvcl9zdWInKS5jaGFuZ2UoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciAkb3RoZXIgPSAkKCcjcHJvamVjdF9zZWN0b3Jfc3ViX290aGVyJyk7XG4gICAgICAgIGlmICgkKCdvcHRpb246c2VsZWN0ZWQnLCB0aGlzKS52YWwoKSA9PT0gJ090aGVyJykge1xuICAgICAgICAgICAgJG90aGVyLnBhcmVudCgpLnNob3coKS5lbmQoKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpLmZvY3VzKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkb3RoZXIucGFyZW50KCkuaGlkZSgpLmVuZCgpLnZhbCgnJykuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcbiAgICAgICAgfVxuICAgIH0pLnRyaWdnZXIoJ2NoYW5nZScpO1xuXG4gICAgLy8gRmluYW5jaWFsIFN0cnVjdHVyZSBcIk90aGVyXCIgVGV4dCBJbnB1dFxuICAgICQoJyNwcm9qZWN0X2ZpbmFuY2lhbCcpLmNoYW5nZShmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyICRvdGhlciA9ICQoJyNwcm9qZWN0X2ZzX290aGVyJyk7XG4gICAgICAgIGlmICgkKCdvcHRpb246c2VsZWN0ZWQnLCB0aGlzKS52YWwoKSA9PT0gJ090aGVyJykge1xuICAgICAgICAgICAgJG90aGVyLnBhcmVudCgpLnNob3coKS5lbmQoKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpLmZvY3VzKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkb3RoZXIucGFyZW50KCkuaGlkZSgpLmVuZCgpLnZhbCgnJykuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcbiAgICAgICAgfVxuXG4gICAgfSkudHJpZ2dlcignY2hhbmdlJyk7XG5cbiAgICAvKlxuICAgICQoJy50YXJnZXQnKS5jaGFuZ2UoZnVuY3Rpb24oKSB7XG4gICAgICBhbGVydCgnSGFuZGxlciBmb3IgLmNoYW5nZSgpIGNhbGxlZC4nKTtcbiAgICB9KTtcbiAgICAqL1xuXG4gICAgLy8gc2F2ZSByZXR1cm4gdmFsdWVcbiAgICAkcmV0ID0gJCgnaW5wdXRbbmFtZT1cInJldHVyblwiXScpO1xuICAgIHJldF92YWwgPSAkcmV0LnZhbCgpO1xuXG4gICAgLy9yZW1vdmUgbGFzdCBhcnJvdyBmcm9tIGhlYWRlciBicmVhZCBjcnVtYlxuICAgICQoJyNoZWFkZXJfYnJlYWRfY3J1bWIgbGkgYTpsYXN0JykuY3NzKCdiYWNrZ3JvdW5kJywgJ25vbmUnKTtcblxuICAgIC8vYWN0aXZhdGUgdGFic1xuICAgICQoJyNwcm9maWxlX3RhYnMnKS50YWJzKHtcbiAgICAgICAgZng6IHtcbiAgICAgICAgICAgIG9wYWNpdHk6ICd0b2dnbGUnLFxuICAgICAgICAgICAgZHVyYXRpb246IDEwMFxuICAgICAgICB9LFxuICAgICAgICBzZWxlY3Q6IGFkZF90YWJfdG9fc3VibWl0LFxuICAgICAgICBjcmVhdGU6IHNob3dfdGFic1xuICAgIH0pO1xuXG4gICAgJCgnLmVkaXRfcHJvamVjdCcpLmNsaWNrKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICQoXCIjcHJvZmlsZV90YWJzXCIpLnRhYnMoe1xuICAgICAgICAgICAgc2VsZWN0ZWQ6IDJcbiAgICAgICAgfSk7XG5cbiAgICB9KVxuXG5cblxuICAgIC8vIGFkZF90YWJfdG9fc3VibWl0IC0gYXBwZW5kIHRhYiBoYXNoIHRvIHJldHVybiB2YWx1ZS4gVGhpcyBjb2RlIGlzIHJ1biBlYWNoIHRpbWUgc29tZW9uZSBzd2l0Y2hlcyB0YWJcbiAgICBmdW5jdGlvbiBhZGRfdGFiX3RvX3N1Ym1pdChldmVudCwgdWkpIHtcblxuICAgICAgICAkcmV0LnZhbChyZXRfdmFsICsgdWkudGFiLmhhc2gpO1xuXG4gICAgfVxuXG4gICAgLy8gc2hvdyB0YWJzIGFmdGVyIGluaXRcbiAgICBmdW5jdGlvbiBzaG93X3RhYnMoZXZlbnQsIHVpKSB7XG4gICAgICAgICQoJyNwcm9maWxlX3RhYnMsICNwcm9qZWN0X3RhYnMnKS5mYWRlSW4oKTtcbiAgICAgICAgdmFyIHRhYiA9ICQoJyNwcm9maWxlX3RhYnMgLnVpLXRhYnMtcGFuZWwsICNwcm9qZWN0X3RhYnMgLnVpLXRhYnMtcGFuZWwnKS5maWx0ZXIoJzpub3QoXCIudWktdGFicy1oaWRlXCIpJykuYXR0cignaWQnKTtcbiAgICAgICAgJHJldC52YWwocmV0X3ZhbCArICcjJyArIHRhYik7XG4gICAgfVxuXG4gICAgLy8gc3VibWl0IGZvciBvbiB1cGRhdGUgcHJvZmlsZSBidXR0b24gY2xpY2tcbiAgICAkKCcudXBkYXRlX3Byb2plY3QsICN1cGRhdGVfcHJvamVjdCcpLmNsaWNrKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZm9ybXN1Ym1pdCA9ICQoXCIjcHJvamVjdF9uYW1lX2Zvcm1cIikuc3VibWl0KCk7XG5cbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pXG5cbiAgICAvLyBwcm9qZWN0IG1lbWJlciBzZWxlY3RcbiAgICAkKFwiLmNoem4tc2VsZWN0XCIpLmNob3Nlbih7XG4gICAgICAgIG5vX3Jlc3VsdHNfdGV4dDogbGFuZ1snTm9yZXN1bHRzbWF0Y2hlZCddXG4gICAgfSk7XG5cblxuXG5cbiAgICAvLyBkaXNhYmxlIHRoZSBzdWJtaXQgZnVuY3Rpb24gb24gdGhlIGNyZWF0ZSBhIG5ldyBwcm9qZWN0IGJ1dHRvblxuICAgIC8vIHRoaXMgd2lsbCBiZSBjaGFuZ2VkIGluIGZ1dHVyZSByZWxlYXNlc1xuICAgIC8vIGNoYW5nZWQgZm9yIGNhbmNlbCBidXR0b24gY2xpY2sgdG8gZ28gb24gcHJvamVjdCBsaXN0IHBhZ2VcbiAgICAvLyQoXCIjbmV3X3Byb2plY3QgLmxtb2xcIikuY2xpY2soZnVuY3Rpb24oZSkge2UucHJldmVudERlZmF1bHQoKTt9KTtcblxuICAgIC8vY2xlYW4gdXAgcHJvZmlsZV9hY3Rpb25zIHBvcnRsZXRcbiAgICAkKCcjcHJvZmlsZV9hY3Rpb25zIGE6bGFzdCcpLmNzcygnYm9yZGVyLWJvdHRvbScsICdub25lJyk7XG5cbiAgICAvLyBTdWJtaXQgY3JlYXRlIHByb2ZpbGUgZm9ybSBmcm9tIGFuY2hvclxuICAgICQoJ2Zvcm0jcHJvZmlsZV91cGxvYWRfaW1hZ2UgYSNzdWJtaXRfdXBsb2FkJykuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgICQoJ2Zvcm0jcHJvZmlsZV91cGxvYWRfaW1hZ2UnKS5zdWJtaXQoKTtcbiAgICB9KVxuXG4gICAgLyogUHJvZmlsZSBFZGl0IFN1Ym1pdCBCdXR0b24gKi9cblxuICAgIC8vIFN1Ym1pdCB1cGRhdGUgcHJvZmlsZSBmcm9tIGZyb20gYW5jaG9yXG4gICAgJCgnYSN1cGRhdGVfcHJvZmlsZScpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyQoJy51aS10YWJzLXBhbmVsOnZpc2libGUgZm9ybScpLnN1Ym1pdCgpO1xuICAgICAgICAvLyBsb2coJCgnLnVpLXRhYnMtcGFuZWw6dmlzaWJsZSBmb3JtJykpO1xuICAgIH0pXG5cbiAgICAkKCcuZWR1Y2F0aW9uX2VkaXQgLmVkdWNhdGlvbl9lZGl0X2NhbmNlbCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAvL2xvZyggJ3lheScgKTtcbiAgICB9KTtcblxuXG5cbiAgICAvKiQoJ2EuZWRpdCcpLm9uKCdjbGljaycsZnVuY3Rpb24oZSl7XG4gICAgXHQvL2xvZyggJ3lheScgKTtcbiAgICBcdGUucHJldmVudERlZmF1bHQoKTtcbiAgICBcdHZhciAkZWRpdF9kaXYgPSAkKHRoaXMpLnBhcmVudCgpLm5leHQoJ2Rpdi5lZGl0Jyk7XG4gICAgXHRjb25zb2xlLmxvZygkZWRpdF9kaXYpO1xuICAgIFx0JGVkaXRfZGl2LnNsaWRlVG9nZ2xlKCk7XG5cbiAgICBcdGlmKCAkKHRoaXMpLmhhc0NsYXNzKCdwcm9qZWN0X3Jvd19hZGQnKSl7XG4gICAgXHQvL1x0bG9nKCAncHJvamVjdF9yb3dfYWRkJyApO1xuICAgIFx0XHQkZWRpdF9kaXYuZmluZCgnLnByb2plY3RfbmV3X3JvdycpLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7XG4gICAgXHR9XG5cbiAgICB9KTsqL1xuXG5cbiAgICAvLyBwcm9qZWN0IGVkaXQgbWF0cml4IGRyb3Bkb3duc1xuICAgIC8qJCgnYS5lZGl0JykuY2xpY2soZnVuY3Rpb24oZSl7XG4gICAgXHRlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgXHR2YXIgJGVkaXRfZGl2ID0gJCh0aGlzKS5wYXJlbnQoKS5uZXh0KCdkaXYuZWRpdCcpO1xuICAgIFx0Y29uc29sZS5sb2coJGVkaXRfZGl2KTtcbiAgICBcdCRlZGl0X2Rpdi5zbGlkZVRvZ2dsZSgpO1xuXG4gICAgXHRpZiggJCh0aGlzKS5oYXNDbGFzcygncHJvamVjdF9yb3dfYWRkJykpe1xuICAgIFx0Ly9cdGxvZyggJ3Byb2plY3Rfcm93X2FkZCcgKTtcbiAgICBcdFx0JGVkaXRfZGl2LmZpbmQoJy5wcm9qZWN0X25ld19yb3cnKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xuICAgIFx0fVxuICAgIH0pOyovXG5cbiAgICAkKCcubWF0cml4X2Ryb3Bkb3duIGEudXBsb2FkX25ldycpLmNsaWNrKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICQodGhpcykucGFyZW50KCkucGFyZW50KCkubmV4dCgpLm5leHQoJ2Rpdi5uZXdfdmVyc2lvbicpLnNsaWRlVG9nZ2xlKCk7XG5cbiAgICB9KTtcblxuICAgICQoJyNwcm9qZWN0X2Zvcm0nKS5zdWJtaXQoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgLy8gZGlzYWJsZSB1bnVzZWQgZmlsZSBpbnB1dHNcbiAgICAgICAgJCgnaW5wdXRbdHlwZT1cImZpbGVcIl0nKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy9pZiggISAkKHRoaXMpLnZhbCgpICl7JCh0aGlzKS5hdHRyKCdkaXNhYmxlZCcsJ2Rpc2FibGVkJyk7fVxuICAgICAgICAgICAgLy9sb2coICQodGhpcykgKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJCgnc2VsZWN0LmNoem4tc2VsZWN0JykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGZpZWxkX25hbWUgPSAnI2RlZmF1bHRfJyArICQodGhpcykuYXR0cignbmFtZScpLnJlcGxhY2UoJ1tdJywgJycpO1xuICAgICAgICAgICAgJG1vcmUgPSAkKGZpZWxkX25hbWUpLnZhbCgpLnNwbGl0KCd8Jyk7XG4gICAgICAgICAgICAvL2xvZyggJGZpZWxkICk7XG4gICAgICAgICAgICBpZiAoJGFyciA9ICQodGhpcykudmFsKCkpIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnZhbCgkLnVuaXF1ZSgkYXJyLmNvbmNhdCgkbW9yZSkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIC8vcmV0dXJuIGZhbHNlO1xuICAgIH0pXG5cbiAgICAvLyBNYXRpeCBmaWxlIHJlcGxhY2VcbiAgICAkKCdpbnB1dFt0eXBlPVwiZmlsZVwiXScpLmNoYW5nZShmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCQodGhpcykudmFsKCkpIHtcbiAgICAgICAgICAgIGZpbGVfaW5wdXRfbmFtZSA9ICQodGhpcykuYXR0cignbmFtZScpO1xuICAgICAgICAgICAgaGlkZGVuX2lucHV0X25hbWUgPSBmaWxlX2lucHV0X25hbWUuc3Vic3RyaW5nKDAsIGZpbGVfaW5wdXRfbmFtZS5sZW5ndGggLSAxKSArICdfaGlkZGVuJztcblxuICAgICAgICAgICAgJGhpZGRlbiA9ICQoJ2lucHV0W25hbWU9XCInICsgaGlkZGVuX2lucHV0X25hbWUgKyAnXCJdJykudmFsKCcnKTtcblxuXG4gICAgICAgIH1cbiAgICB9KVxuXG4gICAgLy8gTWF0aXggZmlsZSByZXBsYWNlXG4gICAgJCgnI3Byb2plY3RfZm9ybSBpbnB1dFt0eXBlPVwiZmlsZVwiXScpLmNoYW5nZShmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCQodGhpcykudmFsKCkpIHtcbiAgICAgICAgICAgIGZpbGVfaW5wdXRfbmFtZSA9ICQodGhpcykuYXR0cignbmFtZScpO1xuICAgICAgICAgICAgaGlkZGVuX2lucHV0X25hbWUgPSBmaWxlX2lucHV0X25hbWUgKyAnX2hpZGRlbic7XG5cbiAgICAgICAgICAgICRoaWRkZW4gPSAkKCdpbnB1dFtuYW1lPVwiJyArIGhpZGRlbl9pbnB1dF9uYW1lICsgJ1wiXScpLnZhbCgkKHRoaXMpLnZhbCgpKTtcblxuXG4gICAgICAgIH1cbiAgICB9KVxuXG5cbiAgICBhamF4X2RlbGV0ZV9pbml0KCk7XG5cbiAgICAkKCdkaXYuZWRpdCBpbnB1dFt0eXBlPVwicmVzZXRcIl0nKS5jbGljayhmdW5jdGlvbihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoJ2Rpdi5lZGl0Jykuc2xpZGVUb2dnbGUoKTtcbiAgICB9KVxuXG4gICAgLy8gRm9ybSBWYWxpZGF0aW9uXG4gICAgLy8kKCcjbWVtYmVyX2Zvcm0nKS52YWxpZGF0ZSh7XG4gICAgLy9cdHJ1bGVzOiB7XG4gICAgLy9cdFx0bWVtYmVyX2ZpcnN0X25hbWU6ICdyZXF1aXJlZCcsXG4gICAgLy9cdFx0bWVtYmVyX2xhc3RfbmFtZTogJ3JlcXVpcmVkJyxcbiAgICAvL1x0XHRlbWFpbDoge3JlcXVpcmVkOiB0cnVlLCBlbWFpbDogdHJ1ZX0sXG4gICAgLy9cdFx0bWVtYmVyX29yZ2FuaXphdGlvbjogJ3JlcXVpcmVkJyxcbiAgICAvL1x0XHRyZWdpc3Rlcl9wYXNzd29yZDoge3JlcXVpcmVkOiB0cnVlLG1pbmxlbmd0aDogNixtYXhsZW5ndGg6IDE2fSxcbiAgICAvLyAgICAgICBwYXNzd29yZF9jb25maXJtOiB7cmVxdWlyZWQ6IHRydWUsIG1pbmxlbmd0aDogNCxtYXhsZW5ndGg6MTYsIGVxdWFsVG86IFwiI3JlZ2lzdGVyX3Bhc3N3b3JkXCIgfVxuICAgIC8vXHR9LFxuICAgIC8vXHRtZXNzYWdlczoge1xuICAgIC8vXHRcdG1lbWJlcl9maXJzdF9uYW1lOiBsYW5nWydGaXJzdE5hbWVSZXEnXSxcbiAgICAvL1x0XHRtZW1iZXJfbGFzdF9uYW1lOiBcIkxhc3QgTmFtZSBpcyBSZXF1aXJlZC5cIixcbiAgICAvL1x0XHRlbWFpbDoge3JlcXVpcmVkOmxhbmdbJ0VtYWlsUmVxJ10sIGVtYWlsOmxhbmdbJ0VtYWlsTm90VmFsaWQnXX0sXG4gICAgLy9cdFx0bWVtYmVyX29yZ2FuaXphdGlvbjogbGFuZ1snT3JnYW5pemF0aW9uUmVxJ10sXG4gICAgLy9cdFx0cmVnaXN0ZXJfcGFzc3dvcmQ6IHtyZXF1aXJlZDogbGFuZ1snUGFzc3dvcmRSZXEnXSxtaW5sZW5ndGg6IGxhbmdbJ1Bhc3N3b3JkYXRsZWFzdCddfSxcbiAgICAvL1x0XHRwYXNzd29yZF9jb25maXJtOiB7cmVxdWlyZWQ6IGxhbmdbJ0NvbmZQYXNzUmVxJ10sbWlubGVuZ3RoOiBsYW5nWydQYXNzd29yZGF0bGVhc3QnXSwgZXF1YWxUbzogbGFuZ1snRW50ZXJTYW1lUGFzcyddIH1cbiAgICAvL1xuICAgIC8vXHR9LFxuICAgIC8vXHRlcnJvclBsYWNlbWVudDogZnVuY3Rpb24oZXJyb3IsIGVsZW1lbnQpIHtcbiAgICAvL1x0XHRlcnJvci5hcHBlbmRUbyggZWxlbWVudC5wYXJlbnQoKS5maW5kKFwiLmVycm9ybXNnXCIpICk7XG4gICAgLy9cdH1cbiAgICAvL30pO1xuXG5cbiAgICAvLyBGb3JtIFZhbGlkYXRpb25cbiAgICAkKCcjZW1haWxfc2V0dGluZ3NfZm9ybScpLnZhbGlkYXRlKHtcbiAgICAgICAgcnVsZXM6IHtcbiAgICAgICAgICAgIGVzX3VzZXJuYW1lOiB7XG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgZW1haWw6IHRydWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZWdpc3Rlcl9wYXNzd29yZDoge1xuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIG1pbmxlbmd0aDogNixcbiAgICAgICAgICAgICAgICBtYXhsZW5ndGg6IDE2XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBtZXNzYWdlczoge1xuICAgICAgICAgICAgZXNfdXNlcm5hbWU6IHtcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogbGFuZ1snRW1haWxSZXEnXSxcbiAgICAgICAgICAgICAgICBlbWFpbDogbGFuZ1snRW1haWxOb3RWYWxpZCddXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXNfcGFzc3dvcmQ6IHtcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogbGFuZ1snUGFzc3dvcmRSZXEnXSxcbiAgICAgICAgICAgICAgICBtaW5sZW5ndGg6IGxhbmdbJ1Bhc3N3b3JkYXRsZWFzdCddXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBlcnJvclBsYWNlbWVudDogZnVuY3Rpb24oZXJyb3IsIGVsZW1lbnQpIHtcbiAgICAgICAgICAgIGVycm9yLmFwcGVuZFRvKGVsZW1lbnQucGFyZW50KCkuZmluZChcIi5lcnJvcm1zZ1wiKSk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIEZvcm0gVmFsaWRhdGlvblxuICAgICQoJyNwYXNzd29yZF9zZXR0aW5nc19mb3JtJykudmFsaWRhdGUoe1xuICAgICAgICBydWxlczoge1xuICAgICAgICAgICAgcHNfY3VycmVudHBhc3M6IHtcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBtaW5sZW5ndGg6IDYsXG4gICAgICAgICAgICAgICAgbWF4bGVuZ3RoOiAxNlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBzX25ld3Bhc3N3b3JkOiB7XG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgbWlubGVuZ3RoOiA2LFxuICAgICAgICAgICAgICAgIG1heGxlbmd0aDogMTZcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwc19jb25mcGFzc3dvcmQ6IHtcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBtaW5sZW5ndGg6IDQsXG4gICAgICAgICAgICAgICAgbWF4bGVuZ3RoOiAxNixcbiAgICAgICAgICAgICAgICBlcXVhbFRvOiBcIiNwc19uZXdwYXNzd29yZFwiXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIG1lc3NhZ2VzOiB7XG4gICAgICAgICAgICBwc19jdXJyZW50cGFzczoge1xuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBsYW5nWydQYXNzd29yZFJlcSddLFxuICAgICAgICAgICAgICAgIG1pbmxlbmd0aDogbGFuZ1snUGFzc3dvcmRhdGxlYXN0J11cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwc19uZXdwYXNzd29yZDoge1xuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBsYW5nWydQYXNzd29yZFJlcSddLFxuICAgICAgICAgICAgICAgIG1pbmxlbmd0aDogbGFuZ1snUGFzc3dvcmRhdGxlYXN0J11cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwc19jb25mcGFzc3dvcmQ6IHtcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogbGFuZ1snQ29uZlBhc3NSZXEnXSxcbiAgICAgICAgICAgICAgICBtaW5sZW5ndGg6IGxhbmdbJ1Bhc3N3b3JkYXRsZWFzdCddLFxuICAgICAgICAgICAgICAgIGVxdWFsVG86IGxhbmdbJ0VudGVyU2FtZVBhc3MnXVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBlcnJvclBsYWNlbWVudDogZnVuY3Rpb24oZXJyb3IsIGVsZW1lbnQpIHtcbiAgICAgICAgICAgIGVycm9yLmFwcGVuZFRvKGVsZW1lbnQucGFyZW50KCkuZmluZChcIi5lcnJvcm1zZ1wiKSk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuXG5cbiAgICAkKCcjaGVhZGVyX2xvZ2luJykudmFsaWRhdGUoe1xuICAgICAgICBydWxlczoge1xuICAgICAgICAgICAgdXNlcm5hbWU6IHtcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBlbWFpbDogdHJ1ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBhc3N3b3JkOiAncmVxdWlyZWQnXG4gICAgICAgIH0sXG4gICAgICAgIG1lc3NhZ2VzOiB7XG4gICAgICAgICAgICB1c2VybmFtZToge1xuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBsYW5nWydFbWFpbFJlcSddLFxuICAgICAgICAgICAgICAgIGVtYWlsOiBsYW5nWydFbnRlclZhbGlkRW1haWwnXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBhc3N3b3JkOiBsYW5nWydQYXNzd29yZFJlcSddXG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yUGxhY2VtZW50OiBmdW5jdGlvbihlcnJvciwgZWxlbWVudCkge1xuICAgICAgICAgICAgJChcIiN1MFwiKS5zaG93KCk7XG4gICAgICAgICAgICAkKFwiI3BkMHUwXCIpLmhpZGUoKTtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coZWxlbWVudC5wYXJlbnQoKSk7XG4gICAgICAgICAgICAvL2Vycm9yLmFwcGVuZFRvKCAkKFwiI3BkMHUwXCIpICk7XG4gICAgICAgICAgICAvL2FsZXJ0KGVsZW1lbnQuYXR0cihcIm5hbWVcIikpO1xuICAgICAgICAgICAgJChcIi5cIiArIGVsZW1lbnQuYXR0cihcIm5hbWVcIikgKyBcIl9lcnJvcm1zZ1wiKS5odG1sKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgJCgnI25ld19wcm9qZWN0JykudmFsaWRhdGUoe1xuICAgICAgICBydWxlczoge1xuICAgICAgICAgICAgdGl0bGU6ICdyZXF1aXJlZCdcbiAgICAgICAgfSxcbiAgICAgICAgbWVzc2FnZXM6IHtcbiAgICAgICAgICAgIHRpdGxlOiBsYW5nWydUaXRsZVJlcSddXG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yUGxhY2VtZW50OiBmdW5jdGlvbihlcnJvciwgZWxlbWVudCkge1xuICAgICAgICAgICAgZXJyb3IuYXBwZW5kVG8oZWxlbWVudC5wYXJlbnQoKS5maW5kKFwiLmVycm9ybXNnXCIpKTtcbiAgICAgICAgfVxuXG4gICAgfSk7XG5cbiAgICAkKCcjZ2VuZXJhbF9waG90b19mb3JtJykudmFsaWRhdGUoe1xuICAgICAgICBydWxlczoge1xuICAgICAgICAgICAgcGhvdG9fZmlsZW5hbWU6ICdyZXF1aXJlZCdcbiAgICAgICAgfSxcbiAgICAgICAgbWVzc2FnZXM6IHtcbiAgICAgICAgICAgIHBob3RvX2ZpbGVuYW1lOiBsYW5nWydQaG90b1JlcSddXG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yUGxhY2VtZW50OiBmdW5jdGlvbihlcnJvciwgZWxlbWVudCkge1xuICAgICAgICAgICAgZXJyb3IuYXBwZW5kVG8oZWxlbWVudC5wYXJlbnQoKS5maW5kKFwiLmVycm9ybXNnXCIpKTtcbiAgICAgICAgfVxuXG4gICAgfSk7XG5cblxuICAgICQoJyNnZW5lcmFsX3ZpZGVvX2Zvcm0nKS52YWxpZGF0ZSh7XG4gICAgICAgIHJ1bGVzOiB7XG4gICAgICAgICAgICBtZW1iZXJfdmlkZW86IHtcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICB1cmw6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgbWVzc2FnZXM6IHtcbiAgICAgICAgICAgIG1lbWJlcl92aWRlbzoge1xuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBsYW5nWydWaWRlb1JlcSddLFxuICAgICAgICAgICAgICAgIHVybDogbGFuZ1snVmlkZW9VcmxOb3RWYWxpZCddXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yUGxhY2VtZW50OiBmdW5jdGlvbihlcnJvciwgZWxlbWVudCkge1xuICAgICAgICAgICAgZXJyb3IuYXBwZW5kVG8oZWxlbWVudC5wYXJlbnQoKS5maW5kKFwiLmVycm9ybXNnXCIpKTtcbiAgICAgICAgfVxuXG4gICAgfSk7XG5cbiAgICAkKCcjZ2VuZXJhbF9pbmZvX2Zvcm0nKS52YWxpZGF0ZSh7XG4gICAgICAgIHJ1bGVzOiB7XG4gICAgICAgICAgICBtZW1iZXJfZmlyc3RfbmFtZToge1xuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbWVtYmVyX2xhc3RfbmFtZToge1xuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbWVtYmVyX3RpdGxlOiB7XG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtZW1iZXJfb3JnYW5pemF0aW9uOiB7XG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIG1lc3NhZ2VzOiB7XG4gICAgICAgICAgICBtZW1iZXJfZmlyc3RfbmFtZToge1xuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBsYW5nWydGaXJzdE5hbWVSZXEnXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1lbWJlcl9sYXN0X25hbWU6IHtcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogbGFuZ1snTGFzdE5hbWVSZXEnXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1lbWJlcl90aXRsZToge1xuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBsYW5nWydUaXRsZVJlcSddXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbWVtYmVyX29yZ2FuaXphdGlvbjoge1xuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBsYW5nWydPcmdhbml6YXRpb25SZXEnXVxuICAgICAgICAgICAgfSxcblxuICAgICAgICB9LFxuICAgICAgICBlcnJvclBsYWNlbWVudDogZnVuY3Rpb24oZXJyb3IsIGVsZW1lbnQpIHtcbiAgICAgICAgICAgIGVycm9yLmFwcGVuZFRvKGVsZW1lbnQucGFyZW50KCkuZmluZChcIi5lcnJvcm1zZ1wiKSk7XG4gICAgICAgIH1cblxuICAgIH0pO1xuXG5cbiAgICAkKCcjZXhwZXJ0aXNlX2VkdWNhdGlvbl9mb3JtJykudmFsaWRhdGUoe1xuICAgICAgICBydWxlczoge1xuICAgICAgICAgICAgZWR1Y2F0aW9uX3VuaXZlcnNpdHk6IHtcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVkdWNhdGlvbl9kZWdyZWU6IHtcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVkdWNhdGlvbl9tYWpvcjoge1xuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBtZXNzYWdlczoge1xuICAgICAgICAgICAgZWR1Y2F0aW9uX3VuaXZlcnNpdHk6IHtcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogbGFuZ1snVW5pdmVyc2l0eVJlcSddXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZWR1Y2F0aW9uX2RlZ3JlZToge1xuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBsYW5nWydEZWdyZWVSZXEnXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVkdWNhdGlvbl9tYWpvcjoge1xuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBsYW5nWydNYWpvclJlcSddXG4gICAgICAgICAgICB9LFxuXG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yUGxhY2VtZW50OiBmdW5jdGlvbihlcnJvciwgZWxlbWVudCkge1xuICAgICAgICAgICAgZXJyb3IuYXBwZW5kVG8oZWxlbWVudC5wYXJlbnQoKS5maW5kKFwiLmVycm9ybXNnXCIpKTtcbiAgICAgICAgfVxuXG4gICAgfSk7XG5cbiAgICAkKCcjcHJvamVjdF9uYW1lX2Zvcm0nKS52YWxpZGF0ZSh7XG4gICAgICAgIHJ1bGVzOiB7XG4gICAgICAgICAgICB0aXRsZV9pbnB1dDoge1xuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBtZXNzYWdlczoge1xuICAgICAgICAgICAgdGl0bGVfaW5wdXQ6IHtcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogJyonXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBlcnJvclBsYWNlbWVudDogZnVuY3Rpb24oZXJyb3IsIGVsZW1lbnQpIHtcbiAgICAgICAgICAgIGVycm9yLmFwcGVuZFRvKGVsZW1lbnQucGFyZW50KCkuZmluZChcIi5lcnJvcm1zZ1wiKSk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgICQoJyNwcm9qZWN0X2Zvcm1fbWFpbicpLnZhbGlkYXRlKHtcbiAgICAgICAgcnVsZXM6IHtcbiAgICAgICAgICAgIC8vcHJvamVjdF9vdmVydmlldzogeyByZXF1aXJlZDogdHJ1ZSxtYXhsZW5ndGg6IDIwMH0sXG4gICAgICAgICAgICBwcm9qZWN0X292ZXJ2aWV3OiB7XG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwcm9qZWN0X2tleXdvcmRzOiB7XG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwcm9qZWN0X2NvdW50cnk6IHtcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHByb2plY3RfbG9jYXRpb246IHtcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHByb2plY3Rfc2VjdG9yX21haW46IHtcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHByb2plY3Rfc2VjdG9yX3N1Yjoge1xuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcHJvamVjdF9idWRnZXRfbWF4OiB7XG4gICAgICAgICAgICAgICAgZGlnaXRzOiB0cnVlLFxuICAgICAgICAgICAgICAgIG1pbjogMFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHByb2plY3RfZmluYW5jaWFsOiB7XG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgbWVzc2FnZXM6IHtcbiAgICAgICAgICAgIC8vcHJvamVjdF9vdmVydmlldzogeyByZXF1aXJlZDogbGFuZ1snRGVzY1JlcSddLG1heGxlbmd0aDogbGFuZ1snRGVzYzIwMCddfSxcbiAgICAgICAgICAgIHByb2plY3Rfb3ZlcnZpZXc6IHtcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogbGFuZ1snRGVzY1JlcSddXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcHJvamVjdF9rZXl3b3Jkczoge1xuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBsYW5nWydLZXl3b3JkUmVxJ11cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwcm9qZWN0X2NvdW50cnk6IHtcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogbGFuZ1snQ291bnRyeVJlcSddXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcHJvamVjdF9sb2NhdGlvbjoge1xuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBsYW5nWydMb2NhdGlvblJlcSddXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcHJvamVjdF9zZWN0b3JfbWFpbjoge1xuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBsYW5nWydTZWN0b3JSZXEnXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHByb2plY3Rfc2VjdG9yX3N1Yjoge1xuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBsYW5nWydTdWJTZWN0b3JSZXEnXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8vXHRcdFx0cHJvamVjdF9idWRnZXRfbWF4OiB7IHJlcXVpcmVkOiBsYW5nWydCdWRnZXRSZXEnXX0sXG4gICAgICAgICAgICBwcm9qZWN0X2ZpbmFuY2lhbDoge1xuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBsYW5nWydGaW5hbmNpYWxSZXEnXVxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yUGxhY2VtZW50OiBmdW5jdGlvbihlcnJvciwgZWxlbWVudCkge1xuICAgICAgICAgICAgZXJyb3IuYXBwZW5kVG8oZWxlbWVudC5wYXJlbnQoKS5maW5kKFwiLmVycm9ybXNnXCIpKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgJChcIiNleGVjdXRpdmVfZm9ybVwiKS52YWxpZGF0ZSh7XG4gICAgICAgIHJ1bGVzOiB7XG4gICAgICAgICAgICBwcm9qZWN0X2V4ZWN1dGl2ZXNfbmFtZToge1xuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcHJvamVjdF9leGVjdXRpdmVzX2NvbXBhbnk6IHtcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHByb2plY3RfZXhlY3V0aXZlc19yb2xlOiB7XG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwcm9qZWN0X2V4ZWN1dGl2ZXNfZW1haWw6IHtcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBlbWFpbDogdHJ1ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgbWVzc2FnZXM6IHtcbiAgICAgICAgICAgIHByb2plY3RfZXhlY3V0aXZlc19uYW1lOiB7XG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGxhbmdbJ05hbWVSZXEnXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHByb2plY3RfZXhlY3V0aXZlc19jb21wYW55OiB7XG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGxhbmdbJ0NvbXBhbnlSZXEnXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHByb2plY3RfZXhlY3V0aXZlc19yb2xlOiB7XG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGxhbmdbJ1JvbGVSZXEnXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHByb2plY3RfZXhlY3V0aXZlc19lbWFpbDoge1xuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBsYW5nWydFbWFpbFJlcSddLFxuICAgICAgICAgICAgICAgIGVtYWlsOiBsYW5nWydFbWFpbE5vdFZhbGlkJ11cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yUGxhY2VtZW50OiBmdW5jdGlvbihlcnJvciwgZWxlbWVudCkge1xuICAgICAgICAgICAgZXJyb3IuYXBwZW5kVG8oZWxlbWVudC5wYXJlbnQoKS5maW5kKFwiLmVycm9ybXNnXCIpKTtcbiAgICAgICAgfVxuXG4gICAgfSk7XG4gICAgJChcIiNtYXBfcG9pbnRzX2Zvcm1cIikudmFsaWRhdGUoe1xuICAgICAgICBydWxlczoge1xuICAgICAgICAgICAgcHJvamVjdF9tYXBfcG9pbnRzX21hcG5hbWU6IHtcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBtZXNzYWdlczoge1xuICAgICAgICAgICAgcHJvamVjdF9tYXBfcG9pbnRzX21hcG5hbWU6IHtcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogbGFuZ1snTmFtZVJlcSddXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yUGxhY2VtZW50OiBmdW5jdGlvbihlcnJvciwgZWxlbWVudCkge1xuICAgICAgICAgICAgZXJyb3IuYXBwZW5kVG8oZWxlbWVudC5wYXJlbnQoKS5maW5kKFwiLmVycm9ybXNnXCIpKTtcbiAgICAgICAgfVxuXG4gICAgfSk7XG5cbiAgICAkKFwiI2ZvcmdvdF9wYXNzd29yZF9mb3JtXCIpLnZhbGlkYXRlKHtcbiAgICAgICAgcnVsZXM6IHtcbiAgICAgICAgICAgIGVtYWlsOiB7XG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgZW1haWw6IHRydWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIG1lc3NhZ2VzOiB7XG4gICAgICAgICAgICBlbWFpbDoge1xuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBsYW5nWydFbWFpbFJlcSddLFxuICAgICAgICAgICAgICAgIGVtYWlsOiBsYW5nWydFbWFpbE5vdFZhbGlkJ11cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3JQbGFjZW1lbnQ6IGZ1bmN0aW9uKGVycm9yLCBlbGVtZW50KSB7XG4gICAgICAgICAgICBlcnJvci5hcHBlbmRUbyhlbGVtZW50LnBhcmVudCgpLmZpbmQoXCIuZXJyb3Jtc2dcIikpO1xuICAgICAgICB9XG5cbiAgICB9KTtcblxuICAgICQoXCIucHJvamVjdHMgLm1vcmVcIikuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgICQoXCIuaGlkZGVucHJvamVjdFwiKS50b2dnbGUoXCJibGluZFwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQoXCIucHJvamVjdHMgLm1vcmVcIikuZmluZChcImFcIikudGV4dCgkKHRoaXMpLmlzKCc6dmlzaWJsZScpID8gbGFuZ1snU2hvd0xlc3MnXSA6IGxhbmdbJ1Nob3dNb3JlJ10pO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgICQoXCIuZnJvbnRmaWxlc190clwiKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGZpbGVsaW5rID0gJCh0aGlzKS5maW5kKCcuZnJvbnRmaWxlc19saW5rJykuYXR0cignaHJlZicpO1xuICAgICAgICBpZiAoZmlsZWxpbmspIHtcbiAgICAgICAgICAgIHdpbmRvdy5vcGVuKGZpbGVsaW5rKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gU3ViLVNlY3RvciBcIk90aGVyXCIgVGV4dCBJbnB1dFxuICAgIC8vIGluY2x1ZGVkIGluIHByb2ZpbGUvX2dlbmVyYWxfaW5mb19mb3JtIHRvIHJlc2V0XG5cbiAgICBmdW5jdGlvbiBtZW1iZXJfZW1haWxfZGlhbG9nKCkge1xuICAgICAgICAkKFwiI21vZGVsX2VtYWlsX2RpdlwiKS5kaWFsb2coXCJvcGVuXCIpO1xuICAgIH1cblxuICAgICQoXCIjbWVtYmVyX3NlbmRfbWVzc2FnZVwiKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgbWVtYmVyX2VtYWlsX2RpYWxvZygpO1xuICAgIH0pO1xuXG4gICAgJChcIiNwcm9qZWN0X3NlbmRfbWVzc2FnZVwiKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgbWVtYmVyX2VtYWlsX2RpYWxvZygpO1xuICAgIH0pO1xuXG4gICAgJChcIiNtb2RlbF9lbWFpbF9kaXZcIikuZGlhbG9nKHtcbiAgICAgICAgYXV0b09wZW46IGZhbHNlLFxuICAgICAgICB3aWR0aDogNDAwLFxuICAgICAgICBtb2RhbDogdHJ1ZSxcbiAgICAgICAgYnV0dG9uczoge1xuICAgICAgICAgICAgXCJTZW5kIE1haWxcIjogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIHZhciByZWNpcGllbnQgPSAkKFwiI2hkbl90b1wiKS52YWwoKSxcbiAgICAgICAgICAgICAgICAgICAgc2VuZGVyID0gJChcIiNoZG5fZnJvbVwiKS52YWwoKTtcblxuICAgICAgICAgICAgICAgIGlmIChyZWNpcGllbnQgPT0gc2VuZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbm5vdF9zZW5kX21lc3NhZ2UoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICQoXCIjbW9kZWxfZW1haWxfZm9ybVwiKS5zdWJtaXQoKTtcbiAgICAgICAgICAgICAgICAkKFwiI21vZGVsX2VzdWJqZWN0XCIpLnZhbChcIlwiKTtcbiAgICAgICAgICAgICAgICAkKFwiI21vZGVsX2VtZXNzYWdlXCIpLnZhbChcIlwiKTtcblxuICAgICAgICAgICAgICAgICQodGhpcykuZGlhbG9nKFwiY2xvc2VcIik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgQ2FuY2VsOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmRpYWxvZyhcImNsb3NlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAkKFwiI2VkdWNhdGlvbl9kZWdyZWVcIikubGl2ZShcImNoYW5nZVwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCQoJ29wdGlvbjpzZWxlY3RlZCcsIHRoaXMpLnZhbCgpID09PSAnT3RoZXInKSB7XG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLm5leHQoKS5zaG93KCkuZmluZChcImlucHV0XCIpLmZvY3VzKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLm5leHQoKS5oaWRlKCkuZmluZChcImlucHV0XCIpLnZhbCgnJyk7XG4gICAgICAgIH1cblxuICAgIH0pO1xuXG4gICAgLy8gRmVhdHVyZWQgRm9ydW0gaG92ZXIgZWZmZWN0XG4gICAgdmFyICRmZWF0dXJlZEZvcnVtID0gJChcIi5mZWF0dXJlZC1mb3J1bVwiKTtcbiAgICBpZiAoJGZlYXR1cmVkRm9ydW0ubGVuZ3RoKSB7XG4gICAgICAgICQoXCIuZm9ydW0tdGl0bGUgYSwgLmZlYXR1cmVkLWltYWdlXCIsICRmZWF0dXJlZEZvcnVtKS5ob3ZlcihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZlYXR1cmVkLWZvcnVtJykuYWRkQ2xhc3MoJ2hvdmVyZWQnKTtcbiAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mZWF0dXJlZC1mb3J1bScpLnJlbW92ZUNsYXNzKCdob3ZlcmVkJyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBXaGVuIFJlZ2lzdGVyIHRvIEF0dGVuZCBsaW5rIGlzIGNsaWNrZWQgZm9yIGEgZm9ydW1cbiAgICAvLyB0cmFjayB0aGlzIGV2ZW50IHdpdGggU2VnbWVudCBBbmFseXRpY3NcbiAgICB2YXIgJGF0dGVuZEZvcnVtID0gJChcImEuYnV0dG9uLmF0dGVuZFwiKTtcbiAgICBpZiAoJGF0dGVuZEZvcnVtLmxlbmd0aCkge1xuICAgICAgICAkYXR0ZW5kRm9ydW0uY2xpY2soZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKSxcbiAgICAgICAgICAgICAgICBmb3J1bUlkID0gJHRoaXMuYXR0cihcImRhdGEtaWRcIiksXG4gICAgICAgICAgICAgICAgZm9ydW1OYW1lID0gJHRoaXMuYXR0cihcImRhdGEtbmFtZVwiKTtcbiAgICAgICAgICAgIHNlZ21lbnRBbmFseXRpY3Moe1xuICAgICAgICAgICAgICAgIFwiZXZlbnRcIjoge1xuICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJSZWdpc3RlciB0byBBdHRlbmQgQ2xpY2tlZFwiLFxuICAgICAgICAgICAgICAgICAgICBcInByb3BlcnRpZXNcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJGb3J1bSBJZFwiOiBmb3J1bUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJGb3J1bSBOYW1lXCI6IGZvcnVtTmFtZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFdoZW4gYSByZWNvbW1lbmRhdGlvbiBsaW5rIGlzIGNsaWNrZWQgb24gTXkgR1ZpUCxcbiAgICAvLyB0cmFjayB0aGlzIGV2ZW50IHdpdGggU2VnbWVudCBBbmFseXRpY3NcbiAgICB2YXIgJHJlY29tbWVuZGF0aW9uID0gJChcImEucmVjb21tZW5kYXRpb25cIik7XG4gICAgaWYgKCRyZWNvbW1lbmRhdGlvbi5sZW5ndGgpIHtcbiAgICAgICAgJHJlY29tbWVuZGF0aW9uLmNsaWNrKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyksXG4gICAgICAgICAgICAgICAgcmVjb21tZW5kYXRpb25DYXRlZ29yeSA9ICR0aGlzLmRhdGEoXCJyZWNvbW1lbmRhdGlvbkNhdGVnb3J5XCIpLFxuICAgICAgICAgICAgICAgIHJlY29tbWVuZGF0aW9uTG9jYXRpb24gPSAkdGhpcy5kYXRhKFwicmVjb21tZW5kYXRpb25Mb2NhdGlvblwiKSxcbiAgICAgICAgICAgICAgICByZWNvbW1lbmRhdGlvblNlY3Rpb24gPSAkdGhpcy5kYXRhKFwicmVjb21tZW5kYXRpb25TZWN0aW9uXCIpLFxuICAgICAgICAgICAgICAgIHJlY29tbWVuZGF0aW9uVGFyZ2V0SWQgPSAkdGhpcy5kYXRhKFwicmVjb21tZW5kYXRpb25UYXJnZXRJZFwiKSxcbiAgICAgICAgICAgICAgICByZWNvbW1lbmRhdGlvblRhcmdldE5hbWUgPSAkdGhpcy5kYXRhKFwicmVjb21tZW5kYXRpb25UYXJnZXROYW1lXCIpO1xuICAgICAgICAgICAgc2VnbWVudEFuYWx5dGljcyh7XG4gICAgICAgICAgICAgICAgXCJldmVudFwiOiB7XG4gICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIlJlY29tbWVuZGF0aW9uIENsaWNrZWRcIixcbiAgICAgICAgICAgICAgICAgICAgXCJwcm9wZXJ0aWVzXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiQ2F0ZWdvcnlcIiAgICA6IHJlY29tbWVuZGF0aW9uQ2F0ZWdvcnksXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkxvY2F0aW9uXCIgICAgOiByZWNvbW1lbmRhdGlvbkxvY2F0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJTZWN0aW9uXCIgICAgIDogcmVjb21tZW5kYXRpb25TZWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJUYXJnZXQgSWRcIiAgIDogcmVjb21tZW5kYXRpb25UYXJnZXRJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiVGFyZ2V0IE5hbWVcIiA6IHJlY29tbWVuZGF0aW9uVGFyZ2V0TmFtZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHZhciAkcmF0aW5ncyA9ICQoXCIucmF0aW5nLWJsb2NrXCIpLFxuICAgICAgICByYXRpbmdTY29yZXMgPSBbXSxcbiAgICAgICAgJHJlc1ZvdGUgPSAkKFwiLnZvdGluZyAjcmVzcG9uc2l2ZS12b3RlXCIpLFxuICAgICAgICAkaGVscFZvdGUgPSAkKFwiLnZvdGluZyAjaGVscGZ1bC12b3RlXCIpLFxuICAgICAgICAka25vd1ZvdGUgPSAkKFwiLnZvdGluZyAja25vd2xlZGdlYWJsZS12b3RlXCIpLFxuICAgICAgICAkcmVzUmVzdWx0ID0gJChcIiNyZXNwb25zaXZlX3JhdGVcIiksXG4gICAgICAgICRoZWxwUmVzdWx0ID0gJChcIiNoZWxwZnVsX3JhdGVcIiksXG4gICAgICAgICRrbm93UmVzdWx0ID0gJChcIiNrbm93bGVkZ2VhYmxlX3JhdGVcIiksXG4gICAgICAgICRleHBlcnQgPSAkKFwiI2V4cGVydF9yYXRpbmdcIiksXG4gICAgICAgICRzY29yZSA9ICQoJ2hlYWRlciBoMiAuc2NvcmUnKSxcbiAgICAgICAgJHJlc1BvaW50cyA9ICQoXCIucmVzdWx0cyAjcmVzcG9uc2l2ZSAuc2NvcmVcIiksXG4gICAgICAgICRoZWxwUG9pbnRzID0gJChcIi5yZXN1bHRzICNoZWxwZnVsIC5zY29yZVwiKSxcbiAgICAgICAgJGtub3dQb2ludHMgPSAkKFwiLnJlc3VsdHMgI2tub3dsZWRnZWFibGUgLnNjb3JlXCIpLFxuICAgICAgICAvLyBMYXlvdXRcbiAgICAgICAgYmdfY29sb3IgPSAnI2JlYmViZScsXG4gICAgICAgIGV4cGVydF9jb2xvciA9ICcjM2NhM2RkJyxcbiAgICAgICAgc3VtbWFyeV9jb2xvciA9ICdibGFjaycsXG4gICAgICAgIHJhdGVfY29sb3IgPSAnIzQ0YTZlMycsXG4gICAgICAgIGRpbSA9IDIwO1xuICAgIC8vIFNjb3JlYm9hcmRcbiAgICB2YXIgbWFpblNjb3JlID0gMDtcbiAgICB2YXIgaGVscFNjb3JlID0gMDtcbiAgICB2YXIgcmVzU2NvcmUgPSAwO1xuICAgIHZhciBrbm93U2NvcmUgPSAwO1xuXG4gICAgaWYgKCRyYXRpbmdzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgaWYgKCRzY29yZS5odG1sKCkgIT0gXCJcIikge1xuICAgICAgICAgICAgbWFpblNjb3JlID0gTnVtYmVyKCRzY29yZS5odG1sKCkpO1xuICAgICAgICAgICAgaGVscFNjb3JlID0gTnVtYmVyKCRoZWxwUG9pbnRzLmh0bWwoKSk7XG4gICAgICAgICAgICByZXNTY29yZSA9IE51bWJlcigkcmVzUG9pbnRzLmh0bWwoKSk7XG4gICAgICAgICAgICBrbm93U2NvcmUgPSBOdW1iZXIoJGtub3dQb2ludHMuaHRtbCgpKTtcbiAgICAgICAgfVxuICAgICAgICAkKFwiLnJhdGluZy1ibG9jayBmb3JtW25hbWU9cmF0ZV9leHBlcnRfZm9ybV1cIikuc3VibWl0KGZ1bmN0aW9uKGUpIHtcblxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICB2YXIgJGZvcm0gPSAkKHRoaXMpLFxuICAgICAgICAgICAgICAgIHVybCA9ICRmb3JtLmF0dHIoJ2FjdGlvbicpLFxuICAgICAgICAgICAgICAgICRyYXRpbmdCbG9jayA9ICRmb3JtLnBhcmVudHMoXCIucmF0aW5nLWJsb2NrXCIpLFxuICAgICAgICAgICAgICAgICRlcnJvcnMgPSAkcmF0aW5nQmxvY2suZmluZChcIi5lcnJvcm1zZ1wiKTtcblxuICAgICAgICAgICAgdmFyIHBvc3RpbmcgPSAkLnBvc3QodXJsLCAkZm9ybS5zZXJpYWxpemUoKSwgXCJqc29uXCIpO1xuICAgICAgICAgICAgcG9zdGluZy5kb25lKGZ1bmN0aW9uKGRhdGEpIHtcblxuICAgICAgICAgICAgICAgIGlmIChkYXRhLnN0YXR1cyA9PSBcInN1Y2Nlc3NcIikge1xuICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgcmF0aW5ncyB3aXRoIG5ldyAocmVjYWxjdWxhdGVkKSB2YWx1ZXNcbiAgICAgICAgICAgICAgICAgICAgJHJhdGluZ0Jsb2NrLmZpbmQoXCJoZWFkZXIgaDIgLnNjb3JlXCIpLnRleHQoZGF0YS5yYXRpbmdzLm92ZXJhbGwudG9GaXhlZCgxKSk7XG4gICAgICAgICAgICAgICAgICAgICRyYXRpbmdCbG9jay5maW5kKFwiaGVhZGVyIGgyIC52b3Rlc1wiKS50ZXh0KFwiKFwiICsgZGF0YS5yYXRpbmdzLnVuaXF1ZV9jb3VudCArIFwiKVwiKTtcbiAgICAgICAgICAgICAgICAgICAgJHJhdGluZ0Jsb2NrLmZpbmQoXCIucmF0aW5nLWRldGFpbHMgLnJlc3VsdHMgcCBzcGFuXCIpLnRleHQoZGF0YS5yYXRpbmdzLnVuaXF1ZV9jb3VudCk7XG4gICAgICAgICAgICAgICAgICAgICRyYXRpbmdCbG9jay5maW5kKFwiI2hlbHBmdWwgLnNjb3JlXCIpLnRleHQoZGF0YS5yYXRpbmdzLmhlbHBmdWwudG9GaXhlZCgxKSk7XG4gICAgICAgICAgICAgICAgICAgICRyYXRpbmdCbG9jay5maW5kKFwiI3Jlc3BvbnNpdmUgLnNjb3JlXCIpLnRleHQoZGF0YS5yYXRpbmdzLnJlc3BvbnNpdmUudG9GaXhlZCgxKSk7XG4gICAgICAgICAgICAgICAgICAgICRyYXRpbmdCbG9jay5maW5kKFwiI2tub3dsZWRnZWFibGUgLnNjb3JlXCIpLnRleHQoZGF0YS5yYXRpbmdzLmtub3dsZWRnZWFibGUudG9GaXhlZCgxKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgbWFpblNjb3JlID0gTnVtYmVyKGRhdGEucmF0aW5ncy5vdmVyYWxsKTtcbiAgICAgICAgICAgICAgICAgICAgaGVscFNjb3JlID0gTnVtYmVyKGRhdGEucmF0aW5ncy5oZWxwZnVsKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzU2NvcmUgPSBOdW1iZXIoZGF0YS5yYXRpbmdzLnJlc3BvbnNpdmUpO1xuICAgICAgICAgICAgICAgICAgICBrbm93U2NvcmUgPSBOdW1iZXIoZGF0YS5yYXRpbmdzLmtub3dsZWRnZWFibGUpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgdm90aW5nIGJsb2NrIHRvIHByZXZlbnQgc3Vic2VxdWVudCBzdWJtaXNzaW9uXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkcmF0aW5nQmxvY2suZmluZChcIi52b3RpbmcgZm9ybVwiKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRyYXRpbmdCbG9jay5maW5kKFwiLnZvdGluZyAudm90aW5nLXRoYW5reW91XCIpLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgMTAwKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBTaG93IHJlY2FsY3VsYXRlZCBhdmVyYWdlc1xuICAgICAgICAgICAgICAgICAgICByYXRlU3RhcnooKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBBbmFsaXRpY3NcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuYW5hbHl0aWNzKSBzZWdtZW50QW5hbHl0aWNzKGRhdGEuYW5hbHl0aWNzKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5lcnJvcikgJGVycm9ycy50ZXh0KGRhdGEuZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLmZhaWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJGVycm9ycy5odG1sKFwiRXJyb3Igb2NjdXJyZWQgd2hpbGUgdHJ5aW5nIHRvIHBvc3QgdGhlIHJhdGluZ3MuXCIpXG4gICAgICAgICAgICB9KS5hbHdheXMoZnVuY3Rpb24oZSkge30pO1xuXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGpSYXRlXG4gICAgICAgICQoXCIucmF0aW5nLWJsb2NrIGhlYWRlclwiKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGV4cGVydFRvZ2dsZUNoZWNrKCQodGhpcykuY2xvc2VzdCgnLnJhdGluZy1ibG9jaycpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZnVuY3Rpb24gZXhwZXJ0VG9nZ2xlQ2hlY2soJHRoaXMpIHtcbiAgICAgICAgICAgIGlmICgkKFwiLnJhdGluZy1kZXRhaWxzXCIsICR0aGlzKS5pcygnOnZpc2libGUnKSkge1xuICAgICAgICAgICAgICAgICQoXCIudG9nZ2xlXCIsICR0aGlzKS5hZGRDbGFzcygnaWNvbi1leHBhbmQtbW9yZScpLnJlbW92ZUNsYXNzKCdpY29uLWV4cGFuZC1sZXNzJyk7XG4gICAgICAgICAgICAgICAgLy8kKFwiLnJhdGluZy1kZXRhaWxzXCIsICR0aGlzKS5zbGlkZVVwKDIwMCk7XG4gICAgICAgICAgICAgICAgJChcIi5yYXRpbmctZGV0YWlsc1wiLCAkdGhpcykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICQoXCIudG9nZ2xlLWRlc2NcIiwgJHRoaXMpLnRleHQobGFuZ1tcIlNob3dNb3JlXCJdICsgXCIvXCIgKyBsYW5nW1wiUmF0ZUV4cGVydFwiXSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgJChcIi50b2dnbGVcIiwgJHRoaXMpLmFkZENsYXNzKCdpY29uLWV4cGFuZC1sZXNzJykucmVtb3ZlQ2xhc3MoJ2ljb24tZXhwYW5kLW1vcmUnKTtcbiAgICAgICAgICAgICAgICAvLyQoXCIucmF0aW5nLWRldGFpbHNcIiwgJHRoaXMpLnNsaWRlRG93bigyMDApO1xuICAgICAgICAgICAgICAgICQoXCIudG9nZ2xlLWRlc2NcIiwgJHRoaXMpLnRleHQobGFuZ1tcIlNob3dMZXNzXCJdKTtcbiAgICAgICAgICAgICAgICAkKFwiLnJhdGluZy1kZXRhaWxzXCIsICR0aGlzKS5zaG93KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiByYXRlU3RhcnooKSB7XG4gICAgICAgICAgICAvLyBSZXNldFxuICAgICAgICAgICAgJGV4cGVydC5odG1sKFwiXCIpO1xuICAgICAgICAgICAgJGhlbHBSZXN1bHQuaHRtbChcIlwiKTtcbiAgICAgICAgICAgICRyZXNSZXN1bHQuaHRtbChcIlwiKTtcbiAgICAgICAgICAgICRrbm93UmVzdWx0Lmh0bWwoXCJcIik7XG5cbiAgICAgICAgICAgIC8vIFN0YXIgRGVmYXVsdHNcbiAgICAgICAgICAgICRleHBlcnQualJhdGUoe1xuICAgICAgICAgICAgICAgIHJhdGluZzogbWFpblNjb3JlLFxuICAgICAgICAgICAgICAgIHN0YXJ0Q29sb3I6IGV4cGVydF9jb2xvcixcbiAgICAgICAgICAgICAgICBlbmRDb2xvcjogZXhwZXJ0X2NvbG9yLFxuICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogYmdfY29sb3IsXG4gICAgICAgICAgICAgICAgc3Ryb2tlQ29sb3I6ICdub25lJyxcbiAgICAgICAgICAgICAgICByZWFkT25seTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB3aWR0aDogZGltLFxuICAgICAgICAgICAgICAgIGhlaWdodDogZGltLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICRoZWxwUmVzdWx0LmpSYXRlKHtcbiAgICAgICAgICAgICAgICByYXRpbmc6IGhlbHBTY29yZSxcbiAgICAgICAgICAgICAgICBzdGFydENvbG9yOiBzdW1tYXJ5X2NvbG9yLFxuICAgICAgICAgICAgICAgIGVuZENvbG9yOiBzdW1tYXJ5X2NvbG9yLFxuICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogYmdfY29sb3IsXG4gICAgICAgICAgICAgICAgc3Ryb2tlQ29sb3I6ICdub25lJyxcbiAgICAgICAgICAgICAgICByZWFkT25seTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB3aWR0aDogZGltLFxuICAgICAgICAgICAgICAgIGhlaWdodDogZGltLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICRyZXNSZXN1bHQualJhdGUoe1xuICAgICAgICAgICAgICAgIHJhdGluZzogcmVzU2NvcmUsXG4gICAgICAgICAgICAgICAgc3RhcnRDb2xvcjogc3VtbWFyeV9jb2xvcixcbiAgICAgICAgICAgICAgICBlbmRDb2xvcjogc3VtbWFyeV9jb2xvcixcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGJnX2NvbG9yLFxuICAgICAgICAgICAgICAgIHN0cm9rZUNvbG9yOiAnbm9uZScsXG4gICAgICAgICAgICAgICAgcmVhZE9ubHk6IHRydWUsXG4gICAgICAgICAgICAgICAgd2lkdGg6IGRpbSxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IGRpbSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAka25vd1Jlc3VsdC5qUmF0ZSh7XG4gICAgICAgICAgICAgICAgcmF0aW5nOiBrbm93U2NvcmUsXG4gICAgICAgICAgICAgICAgc3RhcnRDb2xvcjogc3VtbWFyeV9jb2xvcixcbiAgICAgICAgICAgICAgICBlbmRDb2xvcjogc3VtbWFyeV9jb2xvcixcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGJnX2NvbG9yLFxuICAgICAgICAgICAgICAgIHN0cm9rZUNvbG9yOiAnbm9uZScsXG4gICAgICAgICAgICAgICAgcmVhZE9ubHk6IHRydWUsXG4gICAgICAgICAgICAgICAgd2lkdGg6IGRpbSxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IGRpbSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdm90ZVN0YXJ6KCkge1xuXG4gICAgICAgICAgICAkcmVzVm90ZS5odG1sKFwiXCIpO1xuICAgICAgICAgICAgJGhlbHBWb3RlLmh0bWwoXCJcIik7XG4gICAgICAgICAgICAka25vd1ZvdGUuaHRtbChcIlwiKTtcblxuICAgICAgICAgICAgJGhlbHBWb3RlLmpSYXRlKHtcbiAgICAgICAgICAgICAgICBzdGFydENvbG9yOiByYXRlX2NvbG9yLFxuICAgICAgICAgICAgICAgIGVuZENvbG9yOiByYXRlX2NvbG9yLFxuICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogYmdfY29sb3IsXG4gICAgICAgICAgICAgICAgc3Ryb2tlQ29sb3I6ICdub25lJyxcbiAgICAgICAgICAgICAgICBwcmVjaXNpb246IDAsXG4gICAgICAgICAgICAgICAgd2lkdGg6IGRpbSxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IGRpbSxcbiAgICAgICAgICAgICAgICBvblNldDogZnVuY3Rpb24ocmF0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJ2lucHV0W3R5cGU9XCJoaWRkZW5cIl1bbmFtZT1cInJhdGluZ3NbMV1cIl0nKS52YWwocmF0aW5nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgJHJlc1ZvdGUualJhdGUoe1xuXG4gICAgICAgICAgICAgICAgc3RhcnRDb2xvcjogcmF0ZV9jb2xvcixcbiAgICAgICAgICAgICAgICBlbmRDb2xvcjogcmF0ZV9jb2xvcixcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGJnX2NvbG9yLFxuICAgICAgICAgICAgICAgIHN0cm9rZUNvbG9yOiAnbm9uZScsXG4gICAgICAgICAgICAgICAgcHJlY2lzaW9uOiAwLFxuICAgICAgICAgICAgICAgIHdpZHRoOiBkaW0sXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBkaW0sXG4gICAgICAgICAgICAgICAgb25TZXQ6IGZ1bmN0aW9uKHJhdGluZykge1xuICAgICAgICAgICAgICAgICAgICAkKCdpbnB1dFt0eXBlPVwiaGlkZGVuXCJdW25hbWU9XCJyYXRpbmdzWzJdXCJdJykudmFsKHJhdGluZyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICRrbm93Vm90ZS5qUmF0ZSh7XG5cbiAgICAgICAgICAgICAgICBzdGFydENvbG9yOiByYXRlX2NvbG9yLFxuICAgICAgICAgICAgICAgIGVuZENvbG9yOiByYXRlX2NvbG9yLFxuICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogYmdfY29sb3IsXG4gICAgICAgICAgICAgICAgc3Ryb2tlQ29sb3I6ICdub25lJyxcbiAgICAgICAgICAgICAgICBwcmVjaXNpb246IDAsXG4gICAgICAgICAgICAgICAgd2lkdGg6IGRpbSxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IGRpbSxcbiAgICAgICAgICAgICAgICBvblNldDogZnVuY3Rpb24ocmF0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJ2lucHV0W3R5cGU9XCJoaWRkZW5cIl1bbmFtZT1cInJhdGluZ3NbM11cIl0nKS52YWwocmF0aW5nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJhdGVTdGFyeigpO1xuICAgICAgICBpZiAoJCgnLnZvdGluZycpLmxlbmd0aCkge1xuICAgICAgICAgICAgdm90ZVN0YXJ6KCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBhY3RpdmF0ZUV4cGVydCgpIHtcbiAgICAgICAgICAgIHZhciBhbGwgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciAkYnV0dG9uID0gJCgnZGl2LnZvdGluZyAuYnRuJyk7XG4gICAgICAgICAgICAkLmVhY2goJCgnZGl2LnZvdGluZyBpbnB1dFt0eXBlPVwiaGlkZGVuXCJdJyksIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLnZhbCgpID09PSBcIjBcIikge1xuICAgICAgICAgICAgICAgICAgICAkYnV0dG9uLmFkZENsYXNzKCdpbmFjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICBhbGwgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFsbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoYWxsID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgJGJ1dHRvbi5yZW1vdmVDbGFzcygnaW5hY3RpdmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgICQoJ2Rpdi52b3RpbmcgLmluYWN0aXZlJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ2luYWN0aXZlJykpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgICRyZXNWb3RlLm9uKCdjbGljaycsIGFjdGl2YXRlRXhwZXJ0KTtcbiAgICAgICAgJGhlbHBWb3RlLm9uKCdjbGljaycsIGFjdGl2YXRlRXhwZXJ0KTtcbiAgICAgICAgJGtub3dWb3RlLm9uKCdjbGljaycsIGFjdGl2YXRlRXhwZXJ0KTtcbiAgICB9XG5cbiAgICBpZiAoJCgnLm1haW4taGVhZGVyIC5uYXYtbWFpbicpKSB7XG4gICAgICAgIHZhciBkb2NXaWR0aCA9ICQod2luZG93KS53aWR0aCgpLFxuICAgICAgICAgICAgdXNlclRpbWVyLFxuICAgICAgICAgICAgbW9iaWxlTWVudVN0YXRlID0gJ2Nsb3NlZCcsXG4gICAgICAgICAgICAkd3JhcHBlciA9ICQoJy53cmFwcGVyJyksXG4gICAgICAgICAgICAkbWFpbkhlYWRlciA9ICQoJy5tYWluLWhlYWRlcicpLFxuICAgICAgICAgICAgJHVzZXJQcm8gPSAkKCcudXNlci1wcm9maWxlJyksXG4gICAgICAgICAgICAkdXNlck1lbnUgPSAkKCcudXNlci1tZW51JyksXG4gICAgICAgICAgICAkbWFpbk1lbnUgPSAkKCcuaWljb24tbWVudScpLFxuICAgICAgICAgICAgJGludE1lbnUgPSAkKCcubmF2LW1haW4nKSxcbiAgICAgICAgICAgICRsYW5nSWNvbiA9ICQoJy5hY3RpdmUtbGFuZ3VhZ2UnKSxcbiAgICAgICAgICAgICRhY3RpdmVMYW5nID0gJCgnLm0tbGFuZ3VhZ2UgLmFjdGl2ZSBpbWcnKS5hdHRyKCdzcmMnKTtcblxuICAgICAgICAkbGFuZ0ljb24uYXR0cignc3JjJywgJGFjdGl2ZUxhbmcpO1xuICAgIH1cbiAgICAvKlxuICAgICAgICAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmF0ZVN0YXJ6KCk7XG4gICAgICAgIH0pO1xuICAgICovXG59KTtcblxuZ2xvYmFsLmNoZWNrTGVuZ3RoID0gZnVuY3Rpb24obywgbiwgbWluLCBtYXgpIHtcbiAgICBpZiAoby52YWwoKS5sZW5ndGggPiBtYXggfHwgby52YWwoKS5sZW5ndGggPCBtaW4pIHtcbiAgICAgICAgby5hZGRDbGFzcyhcInVpLXN0YXRlLWVycm9yXCIpO1xuICAgICAgICB1cGRhdGVUaXBzKFwiTGVuZ3RoIG9mIFwiICsgbiArIFwiIG11c3QgYmUgYmV0d2VlbiBcIiArXG4gICAgICAgICAgICBtaW4gKyBcIiBhbmQgXCIgKyBtYXggKyBcIi5cIik7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG59XG5cbmdsb2JhbC5jaGVja1JlZ2V4cCA9IGZ1bmN0aW9uKG8sIHJlZ2V4cCwgbikge1xuICAgIGlmICghKHJlZ2V4cC50ZXN0KG8udmFsKCkpKSkge1xuICAgICAgICBvLmFkZENsYXNzKFwidWktc3RhdGUtZXJyb3JcIik7XG4gICAgICAgIHVwZGF0ZVRpcHMobik7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG59XG5cblxuZ2xvYmFsLmFqYXhfZGVsZXRlX2luaXQgPSBmdW5jdGlvbigpIHtcbiAgICAvLyBkZWxldGUgbWF0cml4IHJvd1xuICAgICQoJy5tYXRyaXhfZHJvcGRvd24gYS5kZWxldGUnKS5jbGljayhmdW5jdGlvbihlKSB7XG5cbiAgICAgICAgJGxpX3JvdyA9ICQodGhpcykucGFyZW50cygnbGknKTtcbiAgICAgICAgbGlfcm93X2lkID0gJGxpX3Jvdy5hdHRyKCdpZCcpO1xuICAgICAgICByb3dfaWQgPSAkbGlfcm93LmF0dHIoJ2lkJykucmVwbGFjZSgncm93X2lkXycsICcnKTtcbiAgICAgICAgbGluayA9ICQodGhpcykuYXR0cignaHJlZicpO1xuXG4gICAgICAgICRtZXNzYWdlID0gbGFuZ1snQXJlWW91U3VyZSddO1xuXG4gICAgICAgIHZhciBidXR0b25zID0ge1xuICAgICAgICAgICAgXCJZZXNcIjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlX21heHRyaXhfYWN0aW9uKGxpbmssIHJvd19pZCwgbGlfcm93X2lkKTtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmRpYWxvZyhcImNsb3NlXCIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiTm9cIjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5kaWFsb2coXCJjbG9zZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNyZWF0ZV9tZXNzYWdlKCRtZXNzYWdlLCB7XG4gICAgICAgICAgICBidXR0b25zOiBidXR0b25zLFxuICAgICAgICAgICAgdGl0bGU6IGxhbmdbJ0RlbGV0ZSddXG4gICAgICAgIH0pO1xuXG4gICAgfSk7XG59XG5cbi8vIERFTEVURSBNQVRSSVggUk9XIEZVTkNUSU9OU1xuZ2xvYmFsLmRlbGV0ZV9tYXh0cml4X2FjdGlvbiA9IGZ1bmN0aW9uKGxpbmssIHJvd19pZCwgbGlfcm93X2lkKSB7XG5cbiAgICB2YXIgbmV3X2xpbmsgPSBob3N0dXJsICsgJy8nICsgbGluay5yZXBsYWNlKCcjJywgJycpICsgJy8nICsgcm93X2lkO1xuXG4gICAgJC5hamF4KHtcbiAgICAgICAgdXJsOiBuZXdfbGluayxcbiAgICAgICAgdHlwZTogXCJHRVRcIixcbiAgICAgICAgZGF0YToge30sXG4gICAgICAgIGRhdGFUeXBlOiBcImpzb25cIixcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgaWYgKGRhdGEucmVtb3ZlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuZm9ybW5hbWUgPT0gJ2V4cGVydGlzZV9zZWN0b3JfZm9ybScpIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnI2hkbl9leHBlcnRfc2VjdG9yX251bWJlcicpLnZhbChOdW1iZXIoJCgnI2hkbl9leHBlcnRfc2VjdG9yX251bWJlcicpLnZhbCgpKSAtIDEpO1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVQQ0koKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJCgnIycgKyBsaV9yb3dfaWQpLmZhZGVPdXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG4vLyBERUxFVEUgRURVQ0FUSU9OIEVOVFJZIEZVTkNUSU9OU1xuZ2xvYmFsLmRlbGV0ZV9lZHVjYXRpb25fYWN0aW9uID0gZnVuY3Rpb24obGluaywgZW50cnlfaWQpIHtcblxuICAgIHZhciBBQ1QgPSBob3N0dXJsICsgbGluaztcblxuICAgICQuZ2V0KGxpbmssIGZ1bmN0aW9uKGxvYWRkYXRhKSB7XG4gICAgICAgIGlmIChsb2FkZGF0YS5yZW1vdmUpIHtcbiAgICAgICAgICAgICQoJyNlZHVjYXRpb25fJyArIGVudHJ5X2lkKS5mYWRlT3V0KCk7XG4gICAgICAgIH1cblxuICAgIH0pO1xuICAgIC8vIFVwZGF0ZSBjdXJlbnQgdXNlcidzIFByb2ZpbGUgQ29tcGxldGVuZXNzIEluZGV4XG4gICAgdXBkYXRlUENJKCk7XG59XG5cbi8qZnVuY3Rpb24gZGVsZXRlX2VkdWNhdGlvbl9hY3Rpb24obGluayxuYW1lKSB7XG5cblx0XHR2YXIgZW50cnlfaWQgPSBsaW5rLnJlcGxhY2UoJy9wcm9maWxlL2Zvcm1fbG9hZC8nK25hbWUrJy9kZWxldGUvJywnJyk7XG5cdFx0dmFyIHVybCA9ICdodHRwOi8vdmlwLmNvbmNlcHQuY29tJyArIGxpbms7XG5cblx0XHQkLmdldChsaW5rLCBmdW5jdGlvbihsb2FkZGF0YSkge1xuXHRcdFx0aWYoIGRhdGEucmVtb3ZlICl7JCgnI2VkdWNhdGlvbl8nK2VudHJ5X2lkKS5mYWRlT3V0KCk7fVxuXHRcdFx0XHRhamF4X2Zvcm1faW5pdCgpO1xuXG5cdFx0fSk7XG5cblxuXHRcdC8qJC5hamF4KHtcblx0XHRcdHVybDogdXJsLFxuXHRcdFx0dHlwZTogXCJHRVRcIixcblx0XHRcdGRhdGE6IHtlbnRyeV9pZCA6IGVudHJ5X2lkfSxcblx0XHRcdGRhdGFUeXBlOiBcImh0bWxcIixcblx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcblx0XHRcdFx0Ly9sb2coIGRhdGEgKTtcblx0XHRcdFx0JCgnI2VkdWNhdGlvbl8nK2VudHJ5X2lkKS5hcHBlbmQoZGF0YSk7XG5cblx0XHRcdFx0YWpheF9mb3JtX2luaXQoKTtcbiAgXHRcdFx0fVxuXHRcdH0pOyovXG5cbi8qfSovXG5cblxuLy8gRURJVCBFRFVDQVRJT04gRU5UUlkgRlVOQ1RJT05TXG5nbG9iYWwuZWRpdF9lZHVjYXRpb25fYWN0aW9uID0gZnVuY3Rpb24obGluaywgZW50cnlfaWQpIHtcbiAgICAvL3ZhciBlbnRyeV9pZCA9IGxpbmsucmVwbGFjZSgnL3Byb2ZpbGUvZm9ybV9sb2FkLycrbmFtZSsnL2VkaXQvJywnJyk7XG4gICAgdmFyIHVybCA9ICdodHRwOi8vdmlwLmNvbmNlcHQuY29tJyArIGxpbms7XG5cbiAgICAkLmdldChsaW5rLCBmdW5jdGlvbihsb2FkZGF0YSkge1xuICAgICAgICBpZiAoJCgnLmVkdWNhdGlvbl9lZGl0JykpIHtcbiAgICAgICAgICAgICQoJy5lZHVjYXRpb25fZWRpdCcpLnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgICAgICQoJyNlZHVjYXRpb25fJyArIGVudHJ5X2lkKS5hcHBlbmQobG9hZGRhdGEpO1xuXG5cbiAgICAgICAgYWpheF9mb3JtX2luaXQoKTtcblxuICAgIH0pO1xufVxuXG4vLyBXcmFwcGVyIGZvciBhamF4IGZvcm0gdG8gY2FsbCBvbiByZWxvYWRzXG5nbG9iYWwuYWpheF9mb3JtX2luaXQgPSBmdW5jdGlvbigpIHtcblxuICAgICQoJ2Zvcm0uYWpheF9mb3JtJykudW5iaW5kKCdzdWJtaXQnKTtcblxuICAgIC8vIGJpbmQgc3VibWl0IGhhbmRsZXIgdG8gZm9ybVxuICAgICQoJ2Zvcm0uYWpheF9mb3JtJykuc3VibWl0KGZ1bmN0aW9uKGUpIHtcblxuICAgICAgICAvLyBwcmV2ZW50IG5hdGl2ZSBzdWJtaXRcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cbiAgICAgICAgaWYgKCQodGhpcykudmFsaWRhdGUoKS5mb3JtKCkgPT0gdHJ1ZSkge1xuICAgICAgICAgICAgLy8gZGVmaW5lIHNwaW5uZXJcbiAgICAgICAgICAgIHZhciAkc3Bpbm5lciA9ICQoJzxkaXYvPicpXG4gICAgICAgICAgICAgICAgLmh0bWwoJCgnPGltZyBjbGFzcz1cInNwaW5uZXJcIiBzcmM9XCIvaW1hZ2VzL3NpdGUvbG9hZGVyLmdpZlwiIGFsdD1cInNwaW5uZXJcIiB3aWR0aD1cIjM0XCIgLz4nKSlcbiAgICAgICAgICAgICAgICAuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgJ2Rpc3BsYXknOiAnaW5saW5lJ1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBwcmV2ZW50IG11bHRpcGxlIHN1Ym1pdHNcbiAgICAgICAgICAgIHZhciAkYnRuID0gJCgnaW5wdXRbdHlwZT1cInN1Ym1pdFwiXScsIHRoaXMpO1xuICAgICAgICAgICAgdmFyIHRleHQgPSAkYnRuLnZhbCgpO1xuXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5hdHRyKCdpZCcpICE9IFwiY29tbWVudF9mb3JtXCIpIHtcbiAgICAgICAgICAgICAgICAkYnRuLnZhbCgnUGxlYXNlIFdhaXQnKS5yZW1vdmVDbGFzcygnbGlnaHRfZ3JlZW4nKS5hZGRDbGFzcygnbGlnaHRfZ3JheScpLmF0dHIoJ2Rpc2FibGVkJywgdHJ1ZSkuYWZ0ZXIoJHNwaW5uZXIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBnZXQgZm9ybSBpZCBhbmQgZGl2IGlkXG4gICAgICAgICAgICB2YXIgbmFtZSA9ICQodGhpcykuYXR0cignaWQnKTtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSAnIycgKyBuYW1lLnN1YnN0cigxLCBuYW1lLmxlbmd0aCk7XG5cbiAgICAgICAgICAgICQodGhpcykuYWpheFN1Ym1pdCh7XG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6IFwianNvblwiLFxuICAgICAgICAgICAgICAgIGJlZm9yZVN1Ym1pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vJCh0aGlzKS52YWxpZGF0ZSgpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocGFnZSwgc3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlO1xuICAgICAgICAgICAgICAgICAgICAvLyRyZXR1cm5fcGFnZSA9ICQocGFnZSk7XG4gICAgICAgICAgICAgICAgICAgIC8vJG1lc3NhZ2UgPSAkcmV0dXJuX3BhZ2UuZmluZCgnYm9keSNhbGVydF9tZXNzYWdlJyk7XG4gICAgICAgICAgICAgICAgICAgICRtZXNzYWdlID0gcGFnZS5tZXNzYWdlO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFN1Y2Nlc3NcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhZ2UubWVzc2FnZSB8fCBuYW1lID09ICdlZHVjYXRpb25fbGlzdCcgfHwgbmFtZSA9PSAnZXhwZXJ0aXNlX2VkdWNhdGlvbl9mb3JtJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhZ2Uuc3RhdHVzID09IFwic3VjY2Vzc1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FzZSBzdHVkeVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYWdlLmNhc2VzdHVkeWlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gJyMnICsgbmFtZSArICcgaW5wdXRbbmFtZT1cImhkbl9jYXNlc3R1ZHlpZFwiXSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoZWxlbWVudCkudmFsKHBhZ2UuY2FzZXN0dWR5aWQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYW5jZWwgPSAnIycgKyBuYW1lICsgJyBidXR0b25bbmFtZT1cImNhc2VfY2FuY2VsXCJdJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJChjYW5jZWwpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIuZXJyb3Jtc2dcIikuaHRtbChcIlwiKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBwYWdlLm1lc3NhZ2UgfHwgJ1Byb2ZpbGUgVXBkYXRlZCc7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2FmdGVyIHN1Ym1pdHRpbmcgaW52aXRlIGZvcm0gZm9yIGF2YWlsYWJsZSBzZWF0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUgPT0gJ2ludml0ZV9zZWF0c19mb3JtJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyQoJyNpbnZpdGVfc2VhdHNfZm9ybScpLmNsb3Nlc3QoJy5pbnZpdGVfZm9ybScpLmhpZGUoKS5wcmV2KCcuaW52aXRlJykuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVfbWVzc2FnZShtZXNzYWdlLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc3JlZGlyZWN0OiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGFnZS5pbWdwYXRoICYmIHBhZ2UuaW1ncGF0aCAhPSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY3JlYXRlX21lc3NhZ2UoIG1lc3NhZ2Use2lzcmVkaXJlY3Q6dHJ1ZX0gKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiLnVwbG9hZGVkX2ltZ1wiKS5hdHRyKFwic3JjXCIsIHBhZ2UuaW1ncGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjcGhvdG9fZmlsZW5hbWVcIikudmFsKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJChcIiN3aXRob3V0X3Bob3RvXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiI3dpdGhvdXRfcGhvdG9cIikuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKFwiI3dpdGhfcGhvdG9cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjd2l0aF9waG90b1wiKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhZ2UuaGVhZGVyaW1ncGF0aCAmJiBwYWdlLmhlYWRlcmltZ3BhdGggIT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJChcIiNoZWFkZXJfdXNlcnBob3RvXCIpLmF0dHIoXCJzcmNcIiwgcGFnZS5oZWFkZXJpbWdwYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGFnZS5pc3JlbG9hZCA9PSBcInllc1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZV9tZXNzYWdlKG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGFnZS5pc2xvYWQgPT0gXCJ5ZXNcIiAmJiBwYWdlLmxvYWR1cmwgIT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmFtZSA9PSAnZXhwZXJ0aXNlX3NlY3Rvcl9mb3JtJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI2hkbl9leHBlcnRfc2VjdG9yX251bWJlcicpLnZhbChOdW1iZXIoJCgnI2hkbl9leHBlcnRfc2VjdG9yX251bWJlcicpLnZhbCgpKSArIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQuZ2V0KHBhZ2UubG9hZHVybCwgZnVuY3Rpb24obG9hZGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNsb2FkXycgKyBwYWdlLmxpc3RkaXYpLmh0bWwobG9hZGRhdGEpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJCgnIycgKyBwYWdlLmxpc3RkaXYpLnBhcmVudCgpLmF0dHIoJ2NsYXNzJykgPT0gJ2VkaXQgYWRkX25ldycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjJyArIHBhZ2UubGlzdGRpdikucGFyZW50KCkuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhamF4X2Zvcm1faW5pdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWR1X2xpc3RpbmdfaW5pdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWpheF9kZWxldGVfaW5pdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSXMgbm9sb25nZXIgdXNlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9pZiAoJCgnLmNvbW1lbnQnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8kKCcuY29tbWVudCcpLkNvbW1lbnRFZGl0b3IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBhZ2UuaXNyZWRpcmVjdCA9PSAneWVzJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVfbWVzc2FnZShtZXNzYWdlLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc3JlZGlyZWN0OiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZV9tZXNzYWdlKG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYWpheF9mb3JtX2luaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2VkdV9saXN0aW5nX2luaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyQoJy5lZHVjYXRpb25fZWRpdCcpLnJlbW92ZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQW5hbHl0aWNzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhZ2UuYW5hbHl0aWNzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlZ21lbnRBbmFseXRpY3MocGFnZS5hbmFseXRpY3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2FmdGVyIHN1Ym1pdHRpbmcgaW52aXRlIGZvcm0gZm9yIGF2YWlsYWJsZSBzZWF0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUgPT0gJ2ludml0ZV9zZWF0c19mb3JtJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFnZS5zdGF0dXMgPT0gJ2N1c3RvbV9lcnJvcicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZV9tZXNzYWdlKHBhZ2UubWVzc2FnZSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzcmVkaXJlY3Q6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jcmVhdGVfbWVzc2FnZSggcGFnZS5tZXNzYWdlICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGhvc3R1cmwgKyAnL3Byb2ZpbGUvZWRpdF9zZWF0cyc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLmVhY2gocGFnZS5tZXNzYWdlLCBmdW5jdGlvbihmb3JtZWxlbWVudCwgZXJyb3Jtc2cpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICQoXCJmb3JtI1wiK2Zvcm1lbGVtZW50KS5wYXJlbnQoKS5maW5kKFwiLmVycm9ybXNnXCIpLmh0bWwoZXJyb3Jtc2cpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJChcIiNcIiArIG5hbWUgKyBcIiAjXCIgKyBmb3JtZWxlbWVudCkubmV4dChcIi5lcnJvcm1zZ1wiKS5odG1sKGVycm9ybXNnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSXQgbG9va3MgbGlrZSBpdCdzIG5vIGxvbmdlciBuZWVkZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuYW1lICE9IFwiY29tbWVudF9mb3JtXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkYnRuLnZhbCh0ZXh0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ2xpZ2h0X2dyYXknKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ2xpZ2h0X2dyZWVuJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICQoJ2ltZy5zcGlubmVyJykucmVtb3ZlKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8qJC5nZXQoJy9wcm9maWxlLycgKyBuYW1lLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcdCQodGFyZ2V0KS5yZXBsYWNlV2l0aChkYXRhKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgXHRjcmVhdGVfbWVzc2FnZSggbWVzc2FnZSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBcdGFqYXhfZm9ybV9pbml0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcdGVkdV9saXN0aW5nX2luaXQoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7Ki9cblxuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGFnZS5pc3N1Ym1pdCAmJiBwYWdlLmlzc3VibWl0ICE9ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiI3RpdGxlX2lucHV0X2hpZGRlblwiKS52YWwoJChcIiN0aXRsZV9pbnB1dFwiKS52YWwoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyQoJyMnK3BhZ2UuZm9ybW5hbWUrJycpLnN1Ym1pdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnRvcHVwZGF0ZScpLnN1Ym1pdCgpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkcmV0dXJuX3BhZ2UgPSAkKHBhZ2UpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkZXJyb3IgPSAkcmV0dXJuX3BhZ2UuZmluZCgnI2NvbDUgLmlubmVyIHVsJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICQoJ2JvZHknKS5hcHBlbmQoY3JlYXRlX21lc3NhZ2UoJGVycm9yLmh0bWwoKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICRidG4udmFsKHRleHQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZUNsYXNzKCdsaWdodF9ncmF5JylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ2xpZ2h0X2dyZWVuJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnaW1nLnNwaW5uZXInKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYWdlLmlzcmVzZXQgJiYgcGFnZS5pc3Jlc2V0ID09ICd5ZXMnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNldEZvcm0oJCgnIycgKyBuYW1lKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBUcmFwIGFsbCB1cGRhdGVzIGZvciBtZW1iZXIgKGV4cGVydCkgcHJvZmlsZVxuICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudFBhdGggPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50UGF0aC5zdWJzdHJpbmcoMCwgMjUpID09IFwiL3Byb2ZpbGUvYWNjb3VudF9zZXR0aW5nc1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVQQ0koKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuZ2xvYmFsLnNlZ21lbnRBbmFseXRpY3MgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgaWYgKGRhdGEudXNlcl9wcm9wZXJ0aWVzKSB7XG4gICAgICAgIC8vdmFyIHVzZXJJZCA9IHBhcnNlSW50KGRhdGEuaWQsIDEwKTsgLy8gTWFrZSBzdXJlIGlkIHRoYXQgY2FtZSBpcyBvZiB0eXBlIGludFxuICAgICAgICB3aW5kb3cuYW5hbHl0aWNzLmlkZW50aWZ5KEdWSVAuQXBwLkFuYWx5dGljcy51c2VyX2lkLCBkYXRhLnVzZXJfcHJvcGVydGllcywgR1ZJUC5BcHAuQW5hbHl0aWNzLmNvbnRleHQpO1xuICAgIH1cblxuICAgIGlmIChkYXRhLmV2ZW50KSB7XG4gICAgICAgIHdpbmRvdy5hbmFseXRpY3MudHJhY2soZGF0YS5ldmVudC5uYW1lLCBkYXRhLmV2ZW50LnByb3BlcnRpZXMsIEdWSVAuQXBwLkFuYWx5dGljcy5jb250ZXh0KTtcbiAgICB9XG59XG5cbmdsb2JhbC5kaXNtaXNzUENJID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHVybCA9IGhvc3R1cmwgKyBcIi9wcm9maWxlL2Rpc21pc3NfcGNpXCIsXG4gICAgICAgIHBvc3REYXRhID0ge1xuICAgICAgICAgICAgXCJkaXNtaXNzX3BjaVwiOiBcImRpc21pc3NfcGNpXCJcbiAgICAgICAgfSxcbiAgICAgICAgcG9zdGluZyA9ICQucG9zdCh1cmwsIHBvc3REYXRhLCBcImpzb25cIik7XG4gICAgLy9wb3N0aW5nLmRvbmUoZnVuY3Rpb24oZGF0YSkge1xuICAgIC8vfSkuZmFpbChmdW5jdGlvbigpIHtcbiAgICAvL30pO1xufVxuXG4vLyBMb2FkIGFuZCB1cGRhdGUgY3VycmVudCB1c2VyJ3MgUHJvZmlsZSBDb21wbGV0ZW5lc3MgSW5kZXhcbmdsb2JhbC51cGRhdGVQQ0kgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgJHBjaSA9ICQoXCJzcGFuLnByb2ZpbGVfZWRpdF9wY2lcIiksXG4gICAgICAgIHVybCA9IGhvc3R1cmwgKyBcIi9wcm9maWxlL3BjaVwiO1xuXG4gICAgaWYgKCRwY2kubGVuZ3RoID09IDApIHJldHVybjtcblxuICAgIHZhciBnZXR0aW5nID0gJC5nZXQodXJsLCBudWxsLCBcImpzb25cIik7XG5cbiAgICBnZXR0aW5nLmRvbmUoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLnBjaSAmJiBkYXRhLnBjaSAhPSBcIlwiKSB7XG4gICAgICAgICAgICAkcGNpLnRleHQoZGF0YS5wY2kpO1xuICAgICAgICB9XG4gICAgfSkuZmFpbChmdW5jdGlvbigpIHtcbiAgICAgICAgYWxlcnQoXCJFcnJvciB3aGlsZSB0cnlpbmcgdG8gZ2V0IFBDSS5cIik7XG4gICAgfSk7XG5cbiAgICAvLyBEaXNtaXNzIFBDSSBtZXRlciB3aGVuZXZlciBhIHVzZXIgbWFrZXMgYW55IGNoYW5nZSBpbiB0aGUgcHJvZmlsZVxuICAgIGRpc21pc3NQQ0koKTtcbn1cblxuLy8gSnF1ZXJ5IERpYWxvZyBib3hcbmdsb2JhbC5jcmVhdGVfbWVzc2FnZSA9IGZ1bmN0aW9uKG1lc3NhZ2UsIG9wdGlvbnMpIHtcblxuICAgIHZhciBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICB2YXIgY2xvc2UgPSBvcHRpb25zLmNsb3NlIHx8IGZhbHNlO1xuICAgIHZhciBpc3JlZGlyZWN0ID0gb3B0aW9ucy5pc3JlZGlyZWN0IHx8IGZhbHNlO1xuICAgIHZhciB1cmwgPSAkKGxvY2F0aW9uKS5hdHRyKCdocmVmJyk7XG4gICAgLy92YXIgcGF0aG5hbWVcdD0gdXJsLnJlcGxhY2UoXCIjXCIsXCJcIik7XG4gICAgdmFyIHBhdGhuYW1lID0gdXJsLnNwbGl0KFwiI1wiKTtcbiAgICB2YXIgdGl0bGUgPSBvcHRpb25zLnRpdGxlIHx8ICdNZXNzYWdlJztcbiAgICB2YXIgYnV0dG9ucyA9IG9wdGlvbnMuYnV0dG9ucyB8fCB7XG4gICAgICAgICAgICBPazogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzcmVkaXJlY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBwYXRobmFtZVswXTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmRpYWxvZyhcImNsb3NlXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvKlxuICAgICAgICAkY2xvc2UgPSAkKCc8YS8+JylcbiAgICAgICAgXHQuaHRtbCgnY2xvc2UnKVxuICAgICAgICBcdC5hdHRyKCdocmVmJywnamF2YXNjcmlwdDogJChcXCcjZnVsbF9wYWdlXFwnKS5yZW1vdmUoKScpXG4gICAgICAgIFx0LmNzcyh7J3Bvc2l0aW9uJzonYWJzb2x1dGUnLCd0b3AnOic1cHgnLCdyaWdodCc6JzVweCd9KTtcblxuICAgICAgICAkbWVzc2FnZV9ibG9jayBcdD0gJCgnPGRpdi8+JylcbiAgICAgICAgXHQuYXR0cignaWQnLCdmdWxsX3BhZ2VfbWVzc2FnZScpXG4gICAgICAgIFx0Lmh0bWwoICQoJzxwLz4nKS5odG1sKCBtZXNzYWdlICkgKVxuICAgICAgICBcdC5jc3Moeyd3aWR0aCc6JzUwMHB4JywnaGVpZ2h0JzonMzAwcHgnLCdtYXJnaW4nOicyMDBweCBhdXRvIDAgYXV0bycsICdiYWNrZ3JvdW5kJzonZ3JheScsJ3Bvc2l0aW9uJzoncmVsYXRpdmUnfSk7XG5cbiAgICAgICAgaWYoIGNsb3NlICkgJG1lc3NhZ2VfYmxvY2suYXBwZW5kKCRjbG9zZSk7XG5cbiAgICAgICAgJGZ1bGxfcGFnZSBcdD0gJCgnPGRpdi8+JylcbiAgICAgICAgXHQuYXR0cignaWQnLCdmdWxsX3BhZ2UnKVxuICAgICAgICBcdC5jc3Moeyd6LWluZGV4Jzo5OTksJ3Bvc2l0aW9uJzonZml4ZWQnLCd0b3AnOjAsJ2xlZnQnOjAsJ3dpZHRoJzonMTAwJScsJ2hlaWdodCc6JzEwMCUnLCdiYWNrZ3JvdW5kJzoncmdiYSgwLDAsMCwwLjMpJ30pXG4gICAgICAgIFx0Lmh0bWwoICRtZXNzYWdlX2Jsb2NrICk7XG5cbiAgICAgICAgLy9yZXR1cm4gJGZ1bGxfcGFnZTtcbiAgICAgICAgKi9cblxuICAgICRkaWFsb2cgPSAkKCcjZGlhbG9nLW1lc3NhZ2UnKVxuICAgICAgICAuYXR0cigndGl0bGUnLCB0aXRsZSlcbiAgICAgICAgLmh0bWwobWVzc2FnZSlcblxuICAgICQoXCIjZGlhbG9nLW1lc3NhZ2VcIikuZGlhbG9nKHtcbiAgICAgICAgbW9kYWw6IHRydWUsXG4gICAgICAgIGJ1dHRvbnM6IGJ1dHRvbnNcbiAgICB9KTtcblxufVxuXG4vL2NoYW5nZSBzdHlsZSBvbiBjbGljayBmb3IgZGVsZXRpbmcgZWR1Y2F0aW9uXG5nbG9iYWwuZWR1X2xpc3RpbmdfaW5pdCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgLy9sb2coICdlZHVfbGlzdGluZ19pbml0JyApO1xuXG4gICAgJCgnLmVkdV9saXN0aW5nIC5kZWxldGUsIC5lZHVfbGlzdGluZyAuZWRpdCcpLnVuYmluZCgnY2xpY2snKTtcblxuICAgICQoJy5lZHVfbGlzdGluZyAuZGVsZXRlLCAuZWR1X2xpc3RpbmcgLmVkaXQnKS5jbGljayhmdW5jdGlvbihldmVudCkge1xuXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgdmFyIHRhcmdldCA9ICQodGhpcykucGFyZW50cygnLmVkdV9saXN0aW5nJyk7XG4gICAgICAgIHZhciBidG4gPSAkKHRoaXMpO1xuXG4gICAgICAgIGlmIChidG4uaGFzQ2xhc3MoJ2RlbGV0ZScpKSB7XG4gICAgICAgICAgICAvL2NsaWNrZWQgZGVsZXRlIG9yIHllc1xuXG4gICAgICAgICAgICBpZiAoYnRuLmh0bWwoKSA9PSAnWWVzJykge1xuICAgICAgICAgICAgICAgIC8vIHJ1biBhamF4IGRlbGV0ZVxuXG4gICAgICAgICAgICAgICAgZGVsZXRlX2VkdWNhdGlvbl9hY3Rpb24oYnRuLmF0dHIoJ2hyZWYnKSwgdGFyZ2V0LmF0dHIoJ2lkJykucmVwbGFjZSgnZWR1Y2F0aW9uXycsICcnKSk7XG5cbiAgICAgICAgICAgICAgICAvL3dpbmRvdy5sb2NhdGlvbiA9ICcnO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnRuLmh0bWwoJ1llcycpO1xuICAgICAgICAgICAgdGFyZ2V0LmZpbmQoJy5lZGl0JykuaHRtbCgnTm8nKTtcbiAgICAgICAgICAgIHRhcmdldC5hZGRDbGFzcygnYWN0aXZlJyk7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vY2xpY2tlZCBlZGl0IG9yIG5vXG5cbiAgICAgICAgICAgIGlmIChidG4uaHRtbCgpID09IFwiRWRpdFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEkKCcuZWR1Y2F0aW9uX2VkaXQnLCB0YXJnZXQpLnNpemUoKSkge1xuICAgICAgICAgICAgICAgICAgICBlZGl0X2VkdWNhdGlvbl9hY3Rpb24oYnRuLmF0dHIoJ2hyZWYnKSwgdGFyZ2V0LmF0dHIoJ2lkJykucmVwbGFjZSgnZWR1Y2F0aW9uXycsICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5lZHVjYXRpb25fZWRpdF9jYW5jZWwnKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZygneWF5Jyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vd2luZG93LmxvY2F0aW9uID0gYnRuLmF0dHIoJ2hyZWYnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGJ0bi5odG1sKCkgPT0gXCJOb1wiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCQoJy5lZHVjYXRpb25fZWRpdCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJy5lZHVjYXRpb25fZWRpdCcpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJ0bi5odG1sKCdFZGl0Jyk7XG4gICAgICAgICAgICB0YXJnZXQuZmluZCgnLmRlbGV0ZScpLmh0bWwoJ0RlbGV0ZScpO1xuICAgICAgICAgICAgdGFyZ2V0LnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcblxuICAgICAgICB9XG5cbiAgICB9KTtcblxufVxuXG5cbmdsb2JhbC5jaGFuZ2VzdGFnZSA9IGZ1bmN0aW9uKGVsKSB7XG4gICAgaWYgKGVsLnZhbHVlID09IFwiT3BlblwiKSB7XG4gICAgICAgIHN0YWdlYXJyID0gZWwubmFtZS5zcGxpdChcIl9cIik7XG4gICAgICAgICQoXCIjc2VsZWN0X3N0YWdlXCIpLnZhbChzdGFnZWFyclsxXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgJChcIiNzZWxlY3Rfc3RhZ2VcIikudmFsKFwiXCIpO1xuICAgIH1cbn1cblxuXG5nbG9iYWwucm93dG9nZ2xlID0gZnVuY3Rpb24oaWQyKSB7XG5cbiAgICB2YXIgJGVkaXRfZGl2ID0gJCgnIycgKyBpZDIpLnBhcmVudCgpLm5leHQoJ2Rpdi5lZGl0Jyk7XG5cbiAgICAkZWRpdF9kaXYuc2xpZGVUb2dnbGUoKTtcblxuICAgIGlmICgkKCcjJyArIGlkMikuaGFzQ2xhc3MoJ3Byb2plY3Rfcm93X2FkZCcpKSB7XG4gICAgICAgIC8vXHRsb2coICdwcm9qZWN0X3Jvd19hZGQnICk7XG4gICAgICAgICRlZGl0X2Rpdi5maW5kKCcucHJvamVjdF9uZXdfcm93JykucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcbiAgICB9XG59XG5cbmdsb2JhbC5lZHVfcm93dG9nZ2xlID0gZnVuY3Rpb24oaWQyKSB7XG5cbiAgICB2YXIgJGVkaXRfZGl2ID0gJCgnIycgKyBpZDIpLnBhcmVudCgpLm5leHQoJ2Rpdi5lZHVjYXRpb25fZWRpdCcpO1xuXG4gICAgJGVkaXRfZGl2LnNsaWRlVG9nZ2xlKCk7XG5cbiAgICBpZiAoJCgnIycgKyBpZDIpLmhhc0NsYXNzKCdwcm9qZWN0X3Jvd19hZGQnKSkge1xuICAgICAgICAvL1x0bG9nKCAncHJvamVjdF9yb3dfYWRkJyApO1xuICAgICAgICAkZWRpdF9kaXYuZmluZCgnLnByb2plY3RfbmV3X3JvdycpLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7XG4gICAgfVxufVxuXG5nbG9iYWwudGFibG9hZCA9IGZ1bmN0aW9uKHVybCkge1xuICAgICQoJyN0YWJDb250YWluZXInKS5sb2FkKHVybCk7XG59XG5cbmdsb2JhbC5zZWN0b3JiaW5kID0gZnVuY3Rpb24oc2VjaWQpIHtcbiAgICBzZWxlY3RlZGlkID0gJCgnI3Byb2plY3Rfc2VjdG9yX21haW4nICsgc2VjaWQpLmZpbmQoJ29wdGlvbjpzZWxlY3RlZCcpLmF0dHIoJ2NsYXNzJykucmVwbGFjZSgnc2VjdG9yX21haW5fJywgJycpO1xuXG4gICAgdmFyIGxpbmsgPSBob3N0dXJsICsgJy9wcm9maWxlL2Zvcm1fbG9hZC9nZXRfc3Vic2VjdG9yX2RkbC8nICsgc2VsZWN0ZWRpZDtcblxuICAgICQoJyNkeW5hbWljU3Vic2VjdG9yXycgKyBzZWNpZCkubG9hZChsaW5rKTtcbn1cblxuXG5nbG9iYWwucmVzZXRGb3JtID0gZnVuY3Rpb24oJGZvcm0pIHtcbiAgICAkZm9ybS5maW5kKCdpbnB1dDp0ZXh0LCBpbnB1dDpwYXNzd29yZCwgaW5wdXQ6ZmlsZSwgc2VsZWN0LCB0ZXh0YXJlYScpLnZhbCgnJyk7XG4gICAgJGZvcm0uZmluZCgnaW5wdXQ6cmFkaW8sIGlucHV0OmNoZWNrYm94JylcbiAgICAgICAgLnJlbW92ZUF0dHIoJ2NoZWNrZWQnKS5yZW1vdmVBdHRyKCdzZWxlY3RlZCcpO1xufVxuXG5nbG9iYWwuc2hvd19jb25maXJtYXRpb24gPSBmdW5jdGlvbihjb25maXJtaWQpIHtcbiAgICAkKCcjJyArIGNvbmZpcm1pZCkucGFyZW50KCkucGFyZW50KCkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgJCgnIycgKyBjb25maXJtaWQpLnBhcmVudCgpLmZpbmQoJ2EuZWRpdCcpLmhpZGUoKTtcbiAgICAkKCcjJyArIGNvbmZpcm1pZCkucGFyZW50KCkuZmluZCgnYS5kZWxldGUnKS5oaWRlKCk7XG5cbiAgICAkKCcuJyArIGNvbmZpcm1pZCkuc2hvdygpO1xufVxuXG5nbG9iYWwucmVzZXRfY29uZmlybWF0aW9uID0gZnVuY3Rpb24oY29uZmlybWlkKSB7XG4gICAgJCgnIycgKyBjb25maXJtaWQpLnBhcmVudCgpLnBhcmVudCgpLnBhcmVudCgpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAkKCcjJyArIGNvbmZpcm1pZCkucGFyZW50KCkucGFyZW50KCkuZmluZCgnYS5lZGl0Jykuc2hvdygpO1xuICAgICQoJyMnICsgY29uZmlybWlkKS5wYXJlbnQoKS5wYXJlbnQoKS5maW5kKCdhLmRlbGV0ZScpLnNob3coKTtcblxuICAgICQoJyMnICsgY29uZmlybWlkKS5wYXJlbnQoKS5oaWRlKCk7XG59XG5cbi8vIHJlc2VuZF9pbnZpdGVfc2VhdFxuZ2xvYmFsLnJlc2VuZF9pbnZpdGVfc2VhdCA9IGZ1bmN0aW9uKGxpbmssIGVudHJ5X2lkKSB7XG4gICAgdmFyIEFDVCA9IGhvc3R1cmwgKyBsaW5rICsgZW50cnlfaWQ7XG5cbiAgICAkLmdldEpTT04oQUNULCBmdW5jdGlvbihsb2FkZGF0YSkge1xuICAgICAgICBjcmVhdGVfbWVzc2FnZShsb2FkZGF0YS5tZXNzYWdlLCB7XG4gICAgICAgICAgICBpc3JlZGlyZWN0OiB0cnVlXG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG59XG5cbi8vIHJlc2VuZF9pbnZpdGVfc2VhdFxuZ2xvYmFsLnJlbW92ZV9zZWF0ID0gZnVuY3Rpb24obGluaywgZW50cnlfaWQpIHtcbiAgICB2YXIgQUNUID0gaG9zdHVybCArIGxpbmsgKyBlbnRyeV9pZDtcblxuICAgICQuZ2V0SlNPTihBQ1QsIGZ1bmN0aW9uKGxvYWRkYXRhKSB7XG4gICAgICAgIGNyZWF0ZV9tZXNzYWdlKGxvYWRkYXRhLm1lc3NhZ2UsIHtcbiAgICAgICAgICAgIGlzcmVkaXJlY3Q6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIC8vd2luZG93LmxvY2F0aW9uLmhyZWY9IGhvc3R1cmwgKyAnL3Byb2ZpbGUvZWRpdF9zZWF0cyc7XG4gICAgfSk7XG59XG5cbi8vIHByb2plY3RfZXhlY3V0aXZlX290aGVyXG5nbG9iYWwucHJvamVjdF9leGVjdXRpdmVfb3RoZXIgPSBmdW5jdGlvbihkZGxyb2xlKSB7XG4gICAgaWYgKGRkbHJvbGUudmFsdWUgPT0gJ090aGVyJykge1xuICAgICAgICAkKGRkbHJvbGUpLnBhcmVudCgpLm5leHQoJy5yb2xlX290aGVyJykuc2hvdygpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgICQoZGRscm9sZSkucGFyZW50KCkubmV4dCgnLnJvbGVfb3RoZXInKS5oaWRlKCk7XG4gICAgfVxufVxuXG5cbmdsb2JhbC5lZGl0X2Nhc2Vfc3R1ZGllcyA9IGZ1bmN0aW9uKGNsaWNraWQpIHtcbiAgICAvL2FsZXJ0KGNsaWNraWQpO1xuICAgICQoY2xpY2tpZCkuY2xvc2VzdCgnLmVkaXRfcG9ydGxldCcpLmhpZGUoKTtcbiAgICAkKGNsaWNraWQpLnBhcmVudCgpLnBhcmVudCgpLm5leHQoJy5hZGRfY2FzZV9zdHVkeScpLnNob3coKTtcblxufVxuXG5nbG9iYWwuZGVsZXRlX2Nhc2Vfc3R1ZGllcyA9IGZ1bmN0aW9uKGxpbmssIGNsaWNraWQpIHtcbiAgICBpZiAobGluay5sZW5ndGggPiAwKSB7XG4gICAgICAgIHZhciBBQ1QgPSBob3N0dXJsICsgbGluaztcbiAgICAgICAgJC5nZXQobGluaywgZnVuY3Rpb24obG9hZGRhdGEpIHtcbiAgICAgICAgICAgIGlmIChsb2FkZGF0YS5yZW1vdmUpIHtcbiAgICAgICAgICAgICAgICBjcmVhdGVfbWVzc2FnZShsb2FkZGF0YS5tZXNzYWdlLCB7XG4gICAgICAgICAgICAgICAgICAgIGlzcmVkaXJlY3Q6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5nbG9iYWwuYWNjZXB0X3Byb2pFeHBhZHZfcmVxID0gZnVuY3Rpb24obGluaywgb3duZXJpZCwgcHJvamlkKSB7XG4gICAgaWYgKGxpbmsubGVuZ3RoID4gMCkge1xuICAgICAgICB2YXIgQUNUID0gaG9zdHVybCArIGxpbmsgKyBvd25lcmlkICsgJy8nICsgcHJvamlkO1xuICAgICAgICAkLmdldChBQ1QsIGZ1bmN0aW9uKGxvYWRkYXRhKSB7XG4gICAgICAgICAgICBpZiAobG9hZGRhdGEuc3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgdmFyIHVybCA9ICQobG9jYXRpb24pLmF0dHIoJ2hyZWYnKTtcbiAgICAgICAgICAgICAgICAvL3ZhciBwYXRobmFtZVx0PSB1cmwucmVwbGFjZShcIiNcIixcIlwiKTtcblxuICAgICAgICAgICAgICAgICQoXCIjYWNjZXB0X3Byal9cIiArIG93bmVyaWQpLmNzcyhcImJhY2tncm91bmQtcG9zaXRpb25cIiwgXCIwcHggLTQ4cHhcIik7XG4gICAgICAgICAgICAgICAgJChcIiNjYW5jZWxfcHJqX1wiICsgb3duZXJpZCkuY3NzKFwiYmFja2dyb3VuZC1wb3NpdGlvblwiLCBcIjBweCAwcHhcIik7XG4gICAgICAgICAgICAgICAgLy93aW5kb3cubG9jYXRpb24uaHJlZiA9IHVybDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5nbG9iYWwucmVqZWN0X3Byb2pFeHBhZHZfcmVxID0gZnVuY3Rpb24obGluaywgb3duZXJpZCwgcHJvamlkKSB7XG4gICAgaWYgKGxpbmsubGVuZ3RoID4gMCkge1xuICAgICAgICB2YXIgQUNUID0gaG9zdHVybCArIGxpbmsgKyBvd25lcmlkICsgJy8nICsgcHJvamlkO1xuICAgICAgICAkLmdldChBQ1QsIGZ1bmN0aW9uKGxvYWRkYXRhKSB7XG4gICAgICAgICAgICBpZiAobG9hZGRhdGEuc3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgdmFyIHVybCA9ICQobG9jYXRpb24pLmF0dHIoJ2hyZWYnKTtcbiAgICAgICAgICAgICAgICAvL3ZhciBwYXRobmFtZVx0PSB1cmwucmVwbGFjZShcIiNcIixcIlwiKTtcbiAgICAgICAgICAgICAgICAkKFwiI2FjY2VwdF9wcmpfXCIgKyBvd25lcmlkKS5jc3MoXCJiYWNrZ3JvdW5kLXBvc2l0aW9uXCIsIFwiMHB4IDBweFwiKTtcbiAgICAgICAgICAgICAgICAkKFwiI2NhbmNlbF9wcmpfXCIgKyBvd25lcmlkKS5jc3MoXCJiYWNrZ3JvdW5kLXBvc2l0aW9uXCIsIFwiMHB4IC00OHB4XCIpO1xuICAgICAgICAgICAgICAgIC8vd2luZG93LmxvY2F0aW9uLmhyZWYgPSB1cmw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuXG5cblxuZ2xvYmFsLmNhbmNsZV9jYXNlX3N0dWRpZXMgPSBmdW5jdGlvbihjbGlja2lkKSB7XG4gICAgdmFyIGZvcm1pZCA9IGNsaWNraWQuZm9ybS5pZDtcbiAgICAkKCcjJyArIGZvcm1pZCkucGFyZW50KCkucHJldignLmVkaXRfcG9ydGxldCcpLnNob3coKTtcbiAgICAkKCcjJyArIGZvcm1pZCkucGFyZW50KCkuaGlkZSgpO1xuICAgIC8vJChjbGlja2lkKS5wcmV2KCcuZWRpdF9wb3J0bGV0Jykuc2hvdygpO1xuICAgIC8vJChjbGlja2lkKS5wYXJlbnQoKS5wYXJlbnQoKS5uZXh0KCcuYWRkX2Nhc2Vfc3R1ZHknKS5zaG93KCk7XG59XG5cbmdsb2JhbC5jYW5ub3Rfc2VuZF9tZXNzYWdlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG1vZGVsbXNnID0gbGFuZ1snQ2FudFNlbmQnXTtcbiAgICBjcmVhdGVfbWVzc2FnZShtb2RlbG1zZywge1xuICAgICAgICBpc3JlZGlyZWN0OiB0cnVlXG4gICAgfSk7XG59XG5cbmdsb2JhbC5zY3JvbGxJdCA9IGZ1bmN0aW9uKHdoZXJlKSB7XG4gICAgJCgnaHRtbCxib2R5JykuYW5pbWF0ZSh7XG4gICAgICAgICAgICBzY3JvbGxUb3A6IHdoZXJlLm9mZnNldCgpLnRvcFxuICAgICAgICB9LFxuICAgICAgICA1MDBcbiAgICApO1xufVxuXG5nbG9iYWwuY2hhbmdlTGFuZ3VhZ2UgPSByZXF1aXJlKCcuL19jaGFuZ2VMYW5ndWFnZS5qcycpO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy9cdFx0Q09OQ0lFUkdFIEZPUk1cblxudmFyICRjb25jaWVyZ2UgPSAkKCcjY29uY2llcmdlJyksXG4gICAgJGNfYWN0aW9uID0gJCgnI2NfYWN0aW9uJyksXG4gICAgJGNfZm9ybSA9ICQoJyNjX2Zvcm0nKSxcbiAgICAkY19jb25maXJtYXRpb24gPSAkKCcjY19jb25maXJtYXRpb24nKSxcbiAgICAkY2xvc2VfYnRuID0gJCgnLmNsb3NlLCAuY2xvc2VfYnRuJywgJGNvbmNpZXJnZSksXG4gICAgJHRleHRib3ggPSAkKCd0ZXh0YXJlYScsICRjX2Zvcm0pLFxuICAgIHBvc3RfbGluayA9ICcvYXBpL3NlYXJjaC9jb25jaWVyZ2VfcXVlc3Rpb24nO1xuXG4kY2xvc2VfYnRuLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICQodGhpcykuY2xvc2VzdCgnLnZpZXcnKS5mYWRlT3V0KCk7XG4gICAgcmV0dXJuIGZhbHNlO1xufSk7XG5cbiQoJy5idG4sIC5mb3JtLWxpbmsnLCAkY19hY3Rpb24pLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICRjX2FjdGlvbi5mYWRlT3V0KCk7XG4gICAgJGNfZm9ybS5mYWRlSW4oKTtcbiAgICByZXR1cm4gZmFsc2U7XG59KTtcblxuJHRleHRib3gua2V5dXAoZnVuY3Rpb24oKSB7XG4gICAgdmFyICRidG4gPSAkKCcuYnRuJywgJGNfZm9ybSksXG4gICAgICAgIHRleHQgPSAkdGV4dGJveC52YWwoKTtcbiAgICBpZiAodGV4dC5sZW5ndGggPiAwKSB7XG4gICAgICAgICRidG4ucmVtb3ZlQ2xhc3MoJ2xpZ2h0X2dyYXknKS5hZGRDbGFzcygnbGlnaHRfb3JhbmdlJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgJGJ0bi5yZW1vdmVDbGFzcygnbGlnaHRfb3JhbmdlJykuYWRkQ2xhc3MoJ2xpZ2h0X2dyYXknKTtcbiAgICB9XG59KTtcblxuJCgnLmJ0bicsICRjX2Zvcm0pLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgIHZhciB0ZXh0ID0gJHRleHRib3gudmFsKCk7XG4gICAgaWYgKHRleHQgPT0gJycpIHtcbiAgICAgICAgLy8kdGV4dGJveC5hdHRyKCdwbGFjZWhvbGRlcicsJ1BsZWFzZSBhZGQgeW91ciBxdWVzdGlvbi4nKTtcbiAgICAgICAgJHRleHRib3guYWRkQ2xhc3MoJ2Vycm9yJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHJlcSA9ICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IHBvc3RfbGluayxcbiAgICAgICAgICAgIHR5cGU6IFwiR0VUXCIsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgJ21lc3NhZ2UnOiB0ZXh0XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGF0YVR5cGU6IFwianNvblwiXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJlcS5kb25lKGZ1bmN0aW9uKGRhdGEpIHtcblxuICAgICAgICAgICAgaWYgKGRhdGEuc3RhdHVzID09ICdzdWNjZXNzJykge1xuICAgICAgICAgICAgICAgICRjX2Zvcm0uZmFkZU91dCgpO1xuICAgICAgICAgICAgICAgICRjX2NvbmZpcm1hdGlvbi5mYWRlSW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkYXRhLnN0YXR1cyA9PSAnZXJyb3InKSB7XG4gICAgICAgICAgICAgICAgYWxlcnQoZGF0YS5tZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmVxLmZhaWwoZnVuY3Rpb24oeCwgeSwgeikge1xuICAgICAgICAgICAgYWxlcnQoJ2Vycm9yJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJlcS5hbHdheXMoZnVuY3Rpb24oeCwgeSwgeikge30pO1xuXG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn0pOyJdfQ=="}