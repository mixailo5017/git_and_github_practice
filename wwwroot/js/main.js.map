{"version":3,"sources":["node_modules/browser-pack/_prelude.js","build/_js/_custom/main.js"],"names":[],"mappings":"AAAA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","$(function() {\n\tvar $prettyPhoto = $(\"a[rel^='prettyPhoto']\");\n\tif ($prettyPhoto.length > 0) {\n\t\t$(\"a[rel^='prettyPhoto']\").prettyPhoto({social_tools:\"\"});\n\t}\n\n\tif($('.m-navbar .nav-main')) {\n\t\tvar docWidth = $(window).width(),\n\t\t\tuserTimer,\n\t\t\tmobileMenuState = 'closed',\n\t\t\tddOpen = false,\n\t\t\t$mw = $('.m-wrap'),\n\t\t\t$wrapper = $('.wrapper'),\n\t\t\t$mainHeader = $('.main-header'),\n\t\t\t$userPro = $('.user-profile'),\n\t\t\t$userMenu = $('.user-menu'),\n\t\t\t$mainMenu = $('.icon-menu'),\n\t\t\t$mmAlt = $('.icon-menu, .iicon-menu'),\n\t\t\t$intMenu = $('.nav-main'),\n\t\t\t$langIcon = $('.active-language'),\n\t\t\t$langMenu = $('.m-language'),\n\t\t\t$dropDown = $('.m-dropdown'),\n\t\t\t$mnav = $('.m-nav');\n\t\t\t$activeLang = $('.m-language .active img').attr('src');\n\n\t\t$(window).on('resize', function() {\n\t\t\tdocWidth = $(window).width();\n\t\t\tif(docWidth <= 1024) {\n\t\t\t\t$userMenu.show();\n\t\t\t} else {\n\t\t\t\t$userMenu.hide();\n\t\t\t}\n\t\t});\n\n\t\t$langIcon.attr('src', $activeLang);\n\n\t\t$userPro.on('click', function() {\n\t\t\tif(docWidth <= 1024) {\n\t\t\t\t\n\t\t\t\tif(mobileMenuState === 'closed') {\n\t\t\t\t\t$wrapper.animate({\n\t\t\t\t\t\t'right': '50%'\n\t\t\t\t\t}, 250);\n\t\t\t\t\t$userMenu.animate({\n\t\t\t\t\t\t'right': '0%'\n\t\t\t\t\t}, 250);\n\t\t\t\t\t$userPro.addClass('active');\n\t\t\t\t\tmobileMenuState = 'user';\n\t\t\t\t} else if(mobileMenuState === 'user') {\n\t\t\t\t\t$wrapper.animate({\n\t\t\t\t\t\t'right': '0%'\n\t\t\t\t\t}, 250);\n\t\t\t\t\t$userMenu.animate({\n\t\t\t\t\t\t'right': '-50%'\n\t\t\t\t\t}, 250);\n\t\t\t\t\t$userPro.removeClass('active');\n\t\t\t\t\tmobileMenuState = 'closed';\n\t\t\t\t}\n\n\t\t\t\t\n\t\t\t}\n\t\t});\n\n\t\t$mmAlt.on('click', function() {\n\t\t\tif(docWidth <= 1024) {\n\t\t\t\tif(mobileMenuState === 'closed') {\n\t\t\t\t\t$wrapper.animate({\n\t\t\t\t\t\t'right': '-50%'\n\t\t\t\t\t}, 250);\n\t\t\t\t\t$intMenu.animate({\n\t\t\t\t\t\t'left': '0%'\n\t\t\t\t\t}, 250);\n\t\t\t\t\t$mmAlt.addClass('active');\n\t\t\t\t\t$mw.addClass('h-lock');\n\t\t\t\t\tmobileMenuState = 'main';\n\t\t\t\t} else if(mobileMenuState === 'main') {\n\t\t\t\t\t$wrapper.animate({\n\t\t\t\t\t\t'right': '0%'\n\t\t\t\t\t}, 250);\n\t\t\t\t\t$intMenu.animate({\n\t\t\t\t\t\t'left': '-50%'\n\t\t\t\t\t}, 250, function() {\n\t\t\t\t\t\t$mmAlt.removeClass('active');\n\t\t\t\t\t\t$mw.removeClass('h-lock');\n\t\t\t\t\t});\n\t\t\t\t\tmobileMenuState = 'closed';\n\t\t\t\t}\t\n\t\t\t}\n\t\t});\n\n\t\t$dropDown.on('click', function() {\n\t\t\t// Clear old Dropdowns\n\t\t\tif($mnav.find($('.dropdown-menu')).hasClass('active')) {\n\t\t\t\t// So that you can close it if you click it.\n\t\t\t\tif(!$(this).find($('.dropdown-menu'))) {\n\t\t\t\t\t$mnav.find($('.dropdown-menu')).removeClass('active');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(docWidth <= 1024) {\n\t\t\t\tif($(this).parent().parent().attr('class') !== 'm-nav nav-main') {\n\t\t\t\t\tif($(this).find($('.dropdown-menu')).is(':hidden')) {\n\t\t\t\t\t\t$(this).find($('.dropdown-menu')).addClass('active');\n\t\t\t\t\t\t$(this).addClass('open');\n\t\t\t\t\t\tddOpen = true;\n\t\t\t\t\t} else if($(this).find($('.dropdown-menu')).is(':visible')) {\n\t\t\t\t\t\t$(this).find($('.dropdown-menu')).removeClass('active');\n\t\t\t\t\t\t$(this).removeClass('open');\n\t\t\t\t\t\t$(this).blur();\n\t\t\t\t\t\tddOpen = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t$(document).on('click touchstart', function(e) {\n\t\t\tif(docWidth <= 1024) {\n\t\t\t\tif(ddOpen === true) {\n\t\t\t\t\tif(!$(e.target).closest('.m-dropdown').length) {\n\t\t\t\t\t\t$dropDown.find($('.dropdown-menu')).removeClass('active');\n\t\t\t\t\t\t$dropDown.removeClass('open');\n\t\t\t\t\t\tddOpen = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tfunction trimHTML(inputHTML, maxChars) {\n\t\t\tvar regex = /<\\/?em>/;\n\t\t\tvar splitCompany = inputHTML.split(regex);\n\t\t\tvar characterCount = 0;\n\t\t\tvar insideEm = false;\n\t\t\tvar trimmedHTML = '';\n\n\t\t\tif (splitCompany[0] === '') {\n\t\t\t    insideEm = true;\n\t\t\t}\n\n\t\t\tsplitCompany.forEach(function(element, index, array) {\n\t\t\t  if (element.length === 0) {\n\t\t\t  \treturn;\n\t\t\t  }\n\t\t\t  if (characterCount < maxChars) {\n\t\t\t  \tif (insideEm) {\n\t\t\t    \ttrimmedHTML += '<em>';\n\t\t\t    }\n\t\t\t    trimmedHTML += element.substring(0, (maxChars - characterCount));\n\t\t\t    if (insideEm) {\n\t\t\t    \ttrimmedHTML += '</em>';\n\t\t\t    }\n\t\t\t    insideEm = !insideEm;\n\t\t\t    characterCount += element.length;\n\t\t\t    if (characterCount > maxChars) {\n\t\t\t    \ttrimmedHTML += '…';\n\t\t\t    }\n\t\t\t  }\n\t\t\t});\n\n\t\t\treturn trimmedHTML;\n\n\t\t}\n\n\t\tvar client = algoliasearch(\"61EU8IS2O1\", \"fdcec7b6178f9a9c128ae03d9b7f5f40\");\n\t\tvar members = client.initIndex(algoliaIndexMembers);\n\t\tvar projects = client.initIndex(algoliaIndexProjects);\n\t\t//initialize autocomplete on search input (ID selector must match)\n\t\t$('#aa-search-input').autocomplete(\n\t\t\t{\n\t\t\t\thint: false,\n\t\t\t\tdebug: true,\n\t\t\t\tkeyboardShortcuts: ['/']\n\t\t\t}, \n\t\t\t[\n\t\t\t\t{\n\t\t\t\t  source: $.fn.autocomplete.sources.hits(members, { hitsPerPage: 3 }),\n\t\t\t\t  //value to be displayed in input control after user's suggestion selection\n\t\t\t\t  displayKey: function(suggestion) {\n\t\t\t\t  \treturn suggestion.firstname + ' ' + suggestion.lastname;\n\t\t\t\t  },\n\t\t\t\t  //hash of templates used when rendering dataset\n\t\t\t\t  templates: {\n\t\t\t\t    header: '<div class=\"aa-suggestions-category\">' + lang['Experts'] + '</div>',\n\t\t\t\t    //'suggestion' templating function used to render a single suggestion\n\t\t\t\t    suggestion: function(suggestion) {\n\t\t\t\t      var maxChars = 35;\n\t\t\t\t      var organizationDisplayHTML = suggestion._highlightResult.organization.value;\n\t\t\t\t      if (suggestion.organization.length > maxChars) {\n\t\t\t\t      \torganizationDisplayHTML = trimHTML(organizationDisplayHTML, maxChars);\n\t\t\t\t      }\n\t\t\t\t      return '<img src=\"' + suggestion.image + '\"><span>' +\n\t\t\t\t        suggestion._highlightResult.firstname.value + ' ' +\n\t\t\t\t        suggestion._highlightResult.lastname.value + '</span> <span>' +\n\t\t\t\t        organizationDisplayHTML + '</span>';\n\t\t\t\t    },\n\t\t\t\t    empty: '<div class=\"aa-suggestion aa-suggestion-empty\">' + lang['NoResultsFound'] + '&nbsp;<a href=\"/expertise/\">Advanced Search</a></div>'\n\t\t\t\t  }\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t  source: $.fn.autocomplete.sources.hits(projects, { hitsPerPage: 3 }),\n\t\t\t\t  //value to be displayed in input control after user's suggestion selection\n\t\t\t\t  displayKey: 'projectname',\n\t\t\t\t  //hash of templates used when rendering dataset\n\t\t\t\t  templates: {\n\t\t\t\t    header: '<div class=\"aa-suggestions-category\">' + lang['Projects'] + '</div>',\n\t\t\t\t    //'suggestion' templating function used to render a single suggestion\n\t\t\t\t    suggestion: function(suggestion) {\n\t\t\t\t      if (typeof suggestion._highlightResult.country != 'undefined') {\n\t\t\t\t      \tvar country = suggestion._highlightResult.country.value;\n\t\t\t\t      } else {\n\t\t\t\t      \tvar country = '–';\n\t\t\t\t      }\n\t\t\t\t      return '<img src=\"' + suggestion.image + '\"><span>' +\n\t\t\t\t        suggestion._highlightResult.projectname.value + '</span><span>' +\n\t\t\t\t        country + '</span>';\n\t\t\t\t    },\n\t\t\t\t    empty: '<div class=\"aa-suggestion aa-suggestion-empty\">' + lang['NoResultsFound'] + '&nbsp;<a href=\"/projects/\">Advanced Search</a></div>',\n\t\t\t\t    footer: '<div class=\"aa-suggestions-footer\">Powered by <img src=\"/images/Algolia_logo_bg-white.svg\" width=\"48\" height=\"17\"></div>'\n\t\t\t\t  }\n\t\t\t\t}\n\t\t\t])\n\t\t\t.on('autocomplete:selected', function(event, suggestion, dataset) {\n\t\t\t\twindow.location.href = suggestion.uri;\n\t\t\t});\n\t}\n});\n\nglobal.changeLanguage = function(language, callback) {\n\n    var posting = $.post('/language', { language: language }, \"json\");\n\n    posting.done(function(data) {\n        if (typeof callback == 'function') {\n            callback();\n        }\n        location.reload();\n    }).fail(function() {\n        //\n    }).always(function(e) {\n        //\n    });\n}"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJidWlsZC9fanMvX2N1c3RvbS9tYWluLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIiQoZnVuY3Rpb24oKSB7XG5cdHZhciAkcHJldHR5UGhvdG8gPSAkKFwiYVtyZWxePSdwcmV0dHlQaG90byddXCIpO1xuXHRpZiAoJHByZXR0eVBob3RvLmxlbmd0aCA+IDApIHtcblx0XHQkKFwiYVtyZWxePSdwcmV0dHlQaG90byddXCIpLnByZXR0eVBob3RvKHtzb2NpYWxfdG9vbHM6XCJcIn0pO1xuXHR9XG5cblx0aWYoJCgnLm0tbmF2YmFyIC5uYXYtbWFpbicpKSB7XG5cdFx0dmFyIGRvY1dpZHRoID0gJCh3aW5kb3cpLndpZHRoKCksXG5cdFx0XHR1c2VyVGltZXIsXG5cdFx0XHRtb2JpbGVNZW51U3RhdGUgPSAnY2xvc2VkJyxcblx0XHRcdGRkT3BlbiA9IGZhbHNlLFxuXHRcdFx0JG13ID0gJCgnLm0td3JhcCcpLFxuXHRcdFx0JHdyYXBwZXIgPSAkKCcud3JhcHBlcicpLFxuXHRcdFx0JG1haW5IZWFkZXIgPSAkKCcubWFpbi1oZWFkZXInKSxcblx0XHRcdCR1c2VyUHJvID0gJCgnLnVzZXItcHJvZmlsZScpLFxuXHRcdFx0JHVzZXJNZW51ID0gJCgnLnVzZXItbWVudScpLFxuXHRcdFx0JG1haW5NZW51ID0gJCgnLmljb24tbWVudScpLFxuXHRcdFx0JG1tQWx0ID0gJCgnLmljb24tbWVudSwgLmlpY29uLW1lbnUnKSxcblx0XHRcdCRpbnRNZW51ID0gJCgnLm5hdi1tYWluJyksXG5cdFx0XHQkbGFuZ0ljb24gPSAkKCcuYWN0aXZlLWxhbmd1YWdlJyksXG5cdFx0XHQkbGFuZ01lbnUgPSAkKCcubS1sYW5ndWFnZScpLFxuXHRcdFx0JGRyb3BEb3duID0gJCgnLm0tZHJvcGRvd24nKSxcblx0XHRcdCRtbmF2ID0gJCgnLm0tbmF2Jyk7XG5cdFx0XHQkYWN0aXZlTGFuZyA9ICQoJy5tLWxhbmd1YWdlIC5hY3RpdmUgaW1nJykuYXR0cignc3JjJyk7XG5cblx0XHQkKHdpbmRvdykub24oJ3Jlc2l6ZScsIGZ1bmN0aW9uKCkge1xuXHRcdFx0ZG9jV2lkdGggPSAkKHdpbmRvdykud2lkdGgoKTtcblx0XHRcdGlmKGRvY1dpZHRoIDw9IDEwMjQpIHtcblx0XHRcdFx0JHVzZXJNZW51LnNob3coKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdCR1c2VyTWVudS5oaWRlKCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQkbGFuZ0ljb24uYXR0cignc3JjJywgJGFjdGl2ZUxhbmcpO1xuXG5cdFx0JHVzZXJQcm8ub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cdFx0XHRpZihkb2NXaWR0aCA8PSAxMDI0KSB7XG5cdFx0XHRcdFxuXHRcdFx0XHRpZihtb2JpbGVNZW51U3RhdGUgPT09ICdjbG9zZWQnKSB7XG5cdFx0XHRcdFx0JHdyYXBwZXIuYW5pbWF0ZSh7XG5cdFx0XHRcdFx0XHQncmlnaHQnOiAnNTAlJ1xuXHRcdFx0XHRcdH0sIDI1MCk7XG5cdFx0XHRcdFx0JHVzZXJNZW51LmFuaW1hdGUoe1xuXHRcdFx0XHRcdFx0J3JpZ2h0JzogJzAlJ1xuXHRcdFx0XHRcdH0sIDI1MCk7XG5cdFx0XHRcdFx0JHVzZXJQcm8uYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuXHRcdFx0XHRcdG1vYmlsZU1lbnVTdGF0ZSA9ICd1c2VyJztcblx0XHRcdFx0fSBlbHNlIGlmKG1vYmlsZU1lbnVTdGF0ZSA9PT0gJ3VzZXInKSB7XG5cdFx0XHRcdFx0JHdyYXBwZXIuYW5pbWF0ZSh7XG5cdFx0XHRcdFx0XHQncmlnaHQnOiAnMCUnXG5cdFx0XHRcdFx0fSwgMjUwKTtcblx0XHRcdFx0XHQkdXNlck1lbnUuYW5pbWF0ZSh7XG5cdFx0XHRcdFx0XHQncmlnaHQnOiAnLTUwJSdcblx0XHRcdFx0XHR9LCAyNTApO1xuXHRcdFx0XHRcdCR1c2VyUHJvLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcblx0XHRcdFx0XHRtb2JpbGVNZW51U3RhdGUgPSAnY2xvc2VkJztcblx0XHRcdFx0fVxuXG5cdFx0XHRcdFxuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0JG1tQWx0Lm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYoZG9jV2lkdGggPD0gMTAyNCkge1xuXHRcdFx0XHRpZihtb2JpbGVNZW51U3RhdGUgPT09ICdjbG9zZWQnKSB7XG5cdFx0XHRcdFx0JHdyYXBwZXIuYW5pbWF0ZSh7XG5cdFx0XHRcdFx0XHQncmlnaHQnOiAnLTUwJSdcblx0XHRcdFx0XHR9LCAyNTApO1xuXHRcdFx0XHRcdCRpbnRNZW51LmFuaW1hdGUoe1xuXHRcdFx0XHRcdFx0J2xlZnQnOiAnMCUnXG5cdFx0XHRcdFx0fSwgMjUwKTtcblx0XHRcdFx0XHQkbW1BbHQuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuXHRcdFx0XHRcdCRtdy5hZGRDbGFzcygnaC1sb2NrJyk7XG5cdFx0XHRcdFx0bW9iaWxlTWVudVN0YXRlID0gJ21haW4nO1xuXHRcdFx0XHR9IGVsc2UgaWYobW9iaWxlTWVudVN0YXRlID09PSAnbWFpbicpIHtcblx0XHRcdFx0XHQkd3JhcHBlci5hbmltYXRlKHtcblx0XHRcdFx0XHRcdCdyaWdodCc6ICcwJSdcblx0XHRcdFx0XHR9LCAyNTApO1xuXHRcdFx0XHRcdCRpbnRNZW51LmFuaW1hdGUoe1xuXHRcdFx0XHRcdFx0J2xlZnQnOiAnLTUwJSdcblx0XHRcdFx0XHR9LCAyNTAsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0JG1tQWx0LnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcblx0XHRcdFx0XHRcdCRtdy5yZW1vdmVDbGFzcygnaC1sb2NrJyk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0bW9iaWxlTWVudVN0YXRlID0gJ2Nsb3NlZCc7XG5cdFx0XHRcdH1cdFxuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0JGRyb3BEb3duLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuXHRcdFx0Ly8gQ2xlYXIgb2xkIERyb3Bkb3duc1xuXHRcdFx0aWYoJG1uYXYuZmluZCgkKCcuZHJvcGRvd24tbWVudScpKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcblx0XHRcdFx0Ly8gU28gdGhhdCB5b3UgY2FuIGNsb3NlIGl0IGlmIHlvdSBjbGljayBpdC5cblx0XHRcdFx0aWYoISQodGhpcykuZmluZCgkKCcuZHJvcGRvd24tbWVudScpKSkge1xuXHRcdFx0XHRcdCRtbmF2LmZpbmQoJCgnLmRyb3Bkb3duLW1lbnUnKSkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmKGRvY1dpZHRoIDw9IDEwMjQpIHtcblx0XHRcdFx0aWYoJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5hdHRyKCdjbGFzcycpICE9PSAnbS1uYXYgbmF2LW1haW4nKSB7XG5cdFx0XHRcdFx0aWYoJCh0aGlzKS5maW5kKCQoJy5kcm9wZG93bi1tZW51JykpLmlzKCc6aGlkZGVuJykpIHtcblx0XHRcdFx0XHRcdCQodGhpcykuZmluZCgkKCcuZHJvcGRvd24tbWVudScpKS5hZGRDbGFzcygnYWN0aXZlJyk7XG5cdFx0XHRcdFx0XHQkKHRoaXMpLmFkZENsYXNzKCdvcGVuJyk7XG5cdFx0XHRcdFx0XHRkZE9wZW4gPSB0cnVlO1xuXHRcdFx0XHRcdH0gZWxzZSBpZigkKHRoaXMpLmZpbmQoJCgnLmRyb3Bkb3duLW1lbnUnKSkuaXMoJzp2aXNpYmxlJykpIHtcblx0XHRcdFx0XHRcdCQodGhpcykuZmluZCgkKCcuZHJvcGRvd24tbWVudScpKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG5cdFx0XHRcdFx0XHQkKHRoaXMpLnJlbW92ZUNsYXNzKCdvcGVuJyk7XG5cdFx0XHRcdFx0XHQkKHRoaXMpLmJsdXIoKTtcblx0XHRcdFx0XHRcdGRkT3BlbiA9IGZhbHNlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0JChkb2N1bWVudCkub24oJ2NsaWNrIHRvdWNoc3RhcnQnLCBmdW5jdGlvbihlKSB7XG5cdFx0XHRpZihkb2NXaWR0aCA8PSAxMDI0KSB7XG5cdFx0XHRcdGlmKGRkT3BlbiA9PT0gdHJ1ZSkge1xuXHRcdFx0XHRcdGlmKCEkKGUudGFyZ2V0KS5jbG9zZXN0KCcubS1kcm9wZG93bicpLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0JGRyb3BEb3duLmZpbmQoJCgnLmRyb3Bkb3duLW1lbnUnKSkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuXHRcdFx0XHRcdFx0JGRyb3BEb3duLnJlbW92ZUNsYXNzKCdvcGVuJyk7XG5cdFx0XHRcdFx0XHRkZE9wZW4gPSBmYWxzZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdGZ1bmN0aW9uIHRyaW1IVE1MKGlucHV0SFRNTCwgbWF4Q2hhcnMpIHtcblx0XHRcdHZhciByZWdleCA9IC88XFwvP2VtPi87XG5cdFx0XHR2YXIgc3BsaXRDb21wYW55ID0gaW5wdXRIVE1MLnNwbGl0KHJlZ2V4KTtcblx0XHRcdHZhciBjaGFyYWN0ZXJDb3VudCA9IDA7XG5cdFx0XHR2YXIgaW5zaWRlRW0gPSBmYWxzZTtcblx0XHRcdHZhciB0cmltbWVkSFRNTCA9ICcnO1xuXG5cdFx0XHRpZiAoc3BsaXRDb21wYW55WzBdID09PSAnJykge1xuXHRcdFx0ICAgIGluc2lkZUVtID0gdHJ1ZTtcblx0XHRcdH1cblxuXHRcdFx0c3BsaXRDb21wYW55LmZvckVhY2goZnVuY3Rpb24oZWxlbWVudCwgaW5kZXgsIGFycmF5KSB7XG5cdFx0XHQgIGlmIChlbGVtZW50Lmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0ICBcdHJldHVybjtcblx0XHRcdCAgfVxuXHRcdFx0ICBpZiAoY2hhcmFjdGVyQ291bnQgPCBtYXhDaGFycykge1xuXHRcdFx0ICBcdGlmIChpbnNpZGVFbSkge1xuXHRcdFx0ICAgIFx0dHJpbW1lZEhUTUwgKz0gJzxlbT4nO1xuXHRcdFx0ICAgIH1cblx0XHRcdCAgICB0cmltbWVkSFRNTCArPSBlbGVtZW50LnN1YnN0cmluZygwLCAobWF4Q2hhcnMgLSBjaGFyYWN0ZXJDb3VudCkpO1xuXHRcdFx0ICAgIGlmIChpbnNpZGVFbSkge1xuXHRcdFx0ICAgIFx0dHJpbW1lZEhUTUwgKz0gJzwvZW0+Jztcblx0XHRcdCAgICB9XG5cdFx0XHQgICAgaW5zaWRlRW0gPSAhaW5zaWRlRW07XG5cdFx0XHQgICAgY2hhcmFjdGVyQ291bnQgKz0gZWxlbWVudC5sZW5ndGg7XG5cdFx0XHQgICAgaWYgKGNoYXJhY3RlckNvdW50ID4gbWF4Q2hhcnMpIHtcblx0XHRcdCAgICBcdHRyaW1tZWRIVE1MICs9ICfigKYnO1xuXHRcdFx0ICAgIH1cblx0XHRcdCAgfVxuXHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiB0cmltbWVkSFRNTDtcblxuXHRcdH1cblxuXHRcdHZhciBjbGllbnQgPSBhbGdvbGlhc2VhcmNoKFwiNjFFVThJUzJPMVwiLCBcImZkY2VjN2I2MTc4ZjlhOWMxMjhhZTAzZDliN2Y1ZjQwXCIpO1xuXHRcdHZhciBtZW1iZXJzID0gY2xpZW50LmluaXRJbmRleChhbGdvbGlhSW5kZXhNZW1iZXJzKTtcblx0XHR2YXIgcHJvamVjdHMgPSBjbGllbnQuaW5pdEluZGV4KGFsZ29saWFJbmRleFByb2plY3RzKTtcblx0XHQvL2luaXRpYWxpemUgYXV0b2NvbXBsZXRlIG9uIHNlYXJjaCBpbnB1dCAoSUQgc2VsZWN0b3IgbXVzdCBtYXRjaClcblx0XHQkKCcjYWEtc2VhcmNoLWlucHV0JykuYXV0b2NvbXBsZXRlKFxuXHRcdFx0e1xuXHRcdFx0XHRoaW50OiBmYWxzZSxcblx0XHRcdFx0ZGVidWc6IHRydWUsXG5cdFx0XHRcdGtleWJvYXJkU2hvcnRjdXRzOiBbJy8nXVxuXHRcdFx0fSwgXG5cdFx0XHRbXG5cdFx0XHRcdHtcblx0XHRcdFx0ICBzb3VyY2U6ICQuZm4uYXV0b2NvbXBsZXRlLnNvdXJjZXMuaGl0cyhtZW1iZXJzLCB7IGhpdHNQZXJQYWdlOiAzIH0pLFxuXHRcdFx0XHQgIC8vdmFsdWUgdG8gYmUgZGlzcGxheWVkIGluIGlucHV0IGNvbnRyb2wgYWZ0ZXIgdXNlcidzIHN1Z2dlc3Rpb24gc2VsZWN0aW9uXG5cdFx0XHRcdCAgZGlzcGxheUtleTogZnVuY3Rpb24oc3VnZ2VzdGlvbikge1xuXHRcdFx0XHQgIFx0cmV0dXJuIHN1Z2dlc3Rpb24uZmlyc3RuYW1lICsgJyAnICsgc3VnZ2VzdGlvbi5sYXN0bmFtZTtcblx0XHRcdFx0ICB9LFxuXHRcdFx0XHQgIC8vaGFzaCBvZiB0ZW1wbGF0ZXMgdXNlZCB3aGVuIHJlbmRlcmluZyBkYXRhc2V0XG5cdFx0XHRcdCAgdGVtcGxhdGVzOiB7XG5cdFx0XHRcdCAgICBoZWFkZXI6ICc8ZGl2IGNsYXNzPVwiYWEtc3VnZ2VzdGlvbnMtY2F0ZWdvcnlcIj4nICsgbGFuZ1snRXhwZXJ0cyddICsgJzwvZGl2PicsXG5cdFx0XHRcdCAgICAvLydzdWdnZXN0aW9uJyB0ZW1wbGF0aW5nIGZ1bmN0aW9uIHVzZWQgdG8gcmVuZGVyIGEgc2luZ2xlIHN1Z2dlc3Rpb25cblx0XHRcdFx0ICAgIHN1Z2dlc3Rpb246IGZ1bmN0aW9uKHN1Z2dlc3Rpb24pIHtcblx0XHRcdFx0ICAgICAgdmFyIG1heENoYXJzID0gMzU7XG5cdFx0XHRcdCAgICAgIHZhciBvcmdhbml6YXRpb25EaXNwbGF5SFRNTCA9IHN1Z2dlc3Rpb24uX2hpZ2hsaWdodFJlc3VsdC5vcmdhbml6YXRpb24udmFsdWU7XG5cdFx0XHRcdCAgICAgIGlmIChzdWdnZXN0aW9uLm9yZ2FuaXphdGlvbi5sZW5ndGggPiBtYXhDaGFycykge1xuXHRcdFx0XHQgICAgICBcdG9yZ2FuaXphdGlvbkRpc3BsYXlIVE1MID0gdHJpbUhUTUwob3JnYW5pemF0aW9uRGlzcGxheUhUTUwsIG1heENoYXJzKTtcblx0XHRcdFx0ICAgICAgfVxuXHRcdFx0XHQgICAgICByZXR1cm4gJzxpbWcgc3JjPVwiJyArIHN1Z2dlc3Rpb24uaW1hZ2UgKyAnXCI+PHNwYW4+JyArXG5cdFx0XHRcdCAgICAgICAgc3VnZ2VzdGlvbi5faGlnaGxpZ2h0UmVzdWx0LmZpcnN0bmFtZS52YWx1ZSArICcgJyArXG5cdFx0XHRcdCAgICAgICAgc3VnZ2VzdGlvbi5faGlnaGxpZ2h0UmVzdWx0Lmxhc3RuYW1lLnZhbHVlICsgJzwvc3Bhbj4gPHNwYW4+JyArXG5cdFx0XHRcdCAgICAgICAgb3JnYW5pemF0aW9uRGlzcGxheUhUTUwgKyAnPC9zcGFuPic7XG5cdFx0XHRcdCAgICB9LFxuXHRcdFx0XHQgICAgZW1wdHk6ICc8ZGl2IGNsYXNzPVwiYWEtc3VnZ2VzdGlvbiBhYS1zdWdnZXN0aW9uLWVtcHR5XCI+JyArIGxhbmdbJ05vUmVzdWx0c0ZvdW5kJ10gKyAnJm5ic3A7PGEgaHJlZj1cIi9leHBlcnRpc2UvXCI+QWR2YW5jZWQgU2VhcmNoPC9hPjwvZGl2Pidcblx0XHRcdFx0ICB9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0ICBzb3VyY2U6ICQuZm4uYXV0b2NvbXBsZXRlLnNvdXJjZXMuaGl0cyhwcm9qZWN0cywgeyBoaXRzUGVyUGFnZTogMyB9KSxcblx0XHRcdFx0ICAvL3ZhbHVlIHRvIGJlIGRpc3BsYXllZCBpbiBpbnB1dCBjb250cm9sIGFmdGVyIHVzZXIncyBzdWdnZXN0aW9uIHNlbGVjdGlvblxuXHRcdFx0XHQgIGRpc3BsYXlLZXk6ICdwcm9qZWN0bmFtZScsXG5cdFx0XHRcdCAgLy9oYXNoIG9mIHRlbXBsYXRlcyB1c2VkIHdoZW4gcmVuZGVyaW5nIGRhdGFzZXRcblx0XHRcdFx0ICB0ZW1wbGF0ZXM6IHtcblx0XHRcdFx0ICAgIGhlYWRlcjogJzxkaXYgY2xhc3M9XCJhYS1zdWdnZXN0aW9ucy1jYXRlZ29yeVwiPicgKyBsYW5nWydQcm9qZWN0cyddICsgJzwvZGl2PicsXG5cdFx0XHRcdCAgICAvLydzdWdnZXN0aW9uJyB0ZW1wbGF0aW5nIGZ1bmN0aW9uIHVzZWQgdG8gcmVuZGVyIGEgc2luZ2xlIHN1Z2dlc3Rpb25cblx0XHRcdFx0ICAgIHN1Z2dlc3Rpb246IGZ1bmN0aW9uKHN1Z2dlc3Rpb24pIHtcblx0XHRcdFx0ICAgICAgaWYgKHR5cGVvZiBzdWdnZXN0aW9uLl9oaWdobGlnaHRSZXN1bHQuY291bnRyeSAhPSAndW5kZWZpbmVkJykge1xuXHRcdFx0XHQgICAgICBcdHZhciBjb3VudHJ5ID0gc3VnZ2VzdGlvbi5faGlnaGxpZ2h0UmVzdWx0LmNvdW50cnkudmFsdWU7XG5cdFx0XHRcdCAgICAgIH0gZWxzZSB7XG5cdFx0XHRcdCAgICAgIFx0dmFyIGNvdW50cnkgPSAn4oCTJztcblx0XHRcdFx0ICAgICAgfVxuXHRcdFx0XHQgICAgICByZXR1cm4gJzxpbWcgc3JjPVwiJyArIHN1Z2dlc3Rpb24uaW1hZ2UgKyAnXCI+PHNwYW4+JyArXG5cdFx0XHRcdCAgICAgICAgc3VnZ2VzdGlvbi5faGlnaGxpZ2h0UmVzdWx0LnByb2plY3RuYW1lLnZhbHVlICsgJzwvc3Bhbj48c3Bhbj4nICtcblx0XHRcdFx0ICAgICAgICBjb3VudHJ5ICsgJzwvc3Bhbj4nO1xuXHRcdFx0XHQgICAgfSxcblx0XHRcdFx0ICAgIGVtcHR5OiAnPGRpdiBjbGFzcz1cImFhLXN1Z2dlc3Rpb24gYWEtc3VnZ2VzdGlvbi1lbXB0eVwiPicgKyBsYW5nWydOb1Jlc3VsdHNGb3VuZCddICsgJyZuYnNwOzxhIGhyZWY9XCIvcHJvamVjdHMvXCI+QWR2YW5jZWQgU2VhcmNoPC9hPjwvZGl2PicsXG5cdFx0XHRcdCAgICBmb290ZXI6ICc8ZGl2IGNsYXNzPVwiYWEtc3VnZ2VzdGlvbnMtZm9vdGVyXCI+UG93ZXJlZCBieSA8aW1nIHNyYz1cIi9pbWFnZXMvQWxnb2xpYV9sb2dvX2JnLXdoaXRlLnN2Z1wiIHdpZHRoPVwiNDhcIiBoZWlnaHQ9XCIxN1wiPjwvZGl2Pidcblx0XHRcdFx0ICB9XG5cdFx0XHRcdH1cblx0XHRcdF0pXG5cdFx0XHQub24oJ2F1dG9jb21wbGV0ZTpzZWxlY3RlZCcsIGZ1bmN0aW9uKGV2ZW50LCBzdWdnZXN0aW9uLCBkYXRhc2V0KSB7XG5cdFx0XHRcdHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gc3VnZ2VzdGlvbi51cmk7XG5cdFx0XHR9KTtcblx0fVxufSk7XG5cbmdsb2JhbC5jaGFuZ2VMYW5ndWFnZSA9IGZ1bmN0aW9uKGxhbmd1YWdlLCBjYWxsYmFjaykge1xuXG4gICAgdmFyIHBvc3RpbmcgPSAkLnBvc3QoJy9sYW5ndWFnZScsIHsgbGFuZ3VhZ2U6IGxhbmd1YWdlIH0sIFwianNvblwiKTtcblxuICAgIHBvc3RpbmcuZG9uZShmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcbiAgICB9KS5mYWlsKGZ1bmN0aW9uKCkge1xuICAgICAgICAvL1xuICAgIH0pLmFsd2F5cyhmdW5jdGlvbihlKSB7XG4gICAgICAgIC8vXG4gICAgfSk7XG59Il19"}