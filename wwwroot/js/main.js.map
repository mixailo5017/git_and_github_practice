{"version":3,"sources":["node_modules/browser-pack/_prelude.js","build/_js/_custom/_changeLanguage.js","build/_js/_custom/_searchbox.js","build/_js/_custom/_trimHTML.js","build/_js/_custom/main.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\n\n/* Depends on jQuery as $ */\n\nvar changeLanguage = function(language, callback) {\n\n    var posting = $.post('/language', {\n        language: language\n    }, \"json\");\n\n    posting.done(function(data) {\n        if (typeof callback == 'function') {\n            callback();\n        }\n        location.reload();\n    }).fail(function() {\n        //\n    }).always(function(e) {\n        //\n    });\n}\n\nmodule.exports = changeLanguage;","var searchbox = function() {\n\n\tvar trimHTML = require('./_trimHTML.js');\n\tvar client = algoliasearch(\"61EU8IS2O1\", \"fdcec7b6178f9a9c128ae03d9b7f5f40\");\n\tvar members = client.initIndex(algoliaIndexMembers);\n\tvar projects = client.initIndex(algoliaIndexProjects);\n\t//initialize autocomplete on search input (ID selector must match)\n\t$('#aa-search-input').autocomplete(\n\t\t{\n\t\t\thint: false,\n\t\t\tdebug: true,\n\t\t\tkeyboardShortcuts: ['/']\n\t\t}, \n\t\t[\n\t\t\t{\n\t\t\t  source: $.fn.autocomplete.sources.hits(members, { hitsPerPage: 3 }),\n\t\t\t  //value to be displayed in input control after user's suggestion selection\n\t\t\t  displayKey: function(suggestion) {\n\t\t\t  \treturn suggestion.firstname + ' ' + suggestion.lastname;\n\t\t\t  },\n\t\t\t  //hash of templates used when rendering dataset\n\t\t\t  templates: {\n\t\t\t    header: '<div class=\"aa-suggestions-category\">' + lang['Experts'] + '</div>',\n\t\t\t    //'suggestion' templating function used to render a single suggestion\n\t\t\t    suggestion: function(suggestion) {\n\t\t\t      var maxChars = 35;\n\t\t\t      var organizationDisplayHTML = suggestion._highlightResult.organization.value;\n\t\t\t      if (suggestion.organization.length > maxChars) {\n\t\t\t      \torganizationDisplayHTML = trimHTML(organizationDisplayHTML, maxChars);\n\t\t\t      }\n\t\t\t      return '<img src=\"' + suggestion.image + '\"><span>' +\n\t\t\t        suggestion._highlightResult.firstname.value + ' ' +\n\t\t\t        suggestion._highlightResult.lastname.value + '</span> <span>' +\n\t\t\t        organizationDisplayHTML + '</span>';\n\t\t\t    },\n\t\t\t    empty: '<div class=\"aa-suggestion aa-suggestion-empty\">' + lang['NoResultsFound'] + '&nbsp;<a href=\"/expertise/\">Advanced Search</a></div>'\n\t\t\t  }\n\t\t\t},\n\t\t\t{\n\t\t\t  source: $.fn.autocomplete.sources.hits(projects, { hitsPerPage: 3 }),\n\t\t\t  //value to be displayed in input control after user's suggestion selection\n\t\t\t  displayKey: 'projectname',\n\t\t\t  //hash of templates used when rendering dataset\n\t\t\t  templates: {\n\t\t\t    header: '<div class=\"aa-suggestions-category\">' + lang['Projects'] + '</div>',\n\t\t\t    //'suggestion' templating function used to render a single suggestion\n\t\t\t    suggestion: function(suggestion) {\n\t\t\t      if (typeof suggestion._highlightResult.country != 'undefined') {\n\t\t\t      \tvar country = suggestion._highlightResult.country.value;\n\t\t\t      } else {\n\t\t\t      \tvar country = '–';\n\t\t\t      }\n\t\t\t      return '<img src=\"' + suggestion.image + '\"><span>' +\n\t\t\t        suggestion._highlightResult.projectname.value + '</span><span>' +\n\t\t\t        country + '</span>';\n\t\t\t    },\n\t\t\t    empty: '<div class=\"aa-suggestion aa-suggestion-empty\">' + lang['NoResultsFound'] + '&nbsp;<a href=\"/projects/\">Advanced Search</a></div>',\n\t\t\t    footer: '<div class=\"aa-suggestions-footer\">Powered by <img src=\"/images/Algolia_logo_bg-white.svg\" width=\"48\" height=\"17\"></div>'\n\t\t\t  }\n\t\t\t}\n\t\t])\n\t\t.on('autocomplete:selected', function(event, suggestion, dataset) {\n\t\t\twindow.location.href = suggestion.uri;\n\t\t});\n};\n\nmodule.exports = searchbox;","'use strict';\n\nvar trimHTML = function(inputHTML, maxChars) {\n\tvar regex = /<\\/?em>/;\n\tvar splitCompany = inputHTML.split(regex);\n\tvar characterCount = 0;\n\tvar insideEm = false;\n\tvar trimmedHTML = '';\n\n\tif (splitCompany[0] === '') {\n\t    insideEm = true;\n\t}\n\n\tsplitCompany.forEach(function(element, index, array) {\n\t  if (element.length === 0) {\n\t  \treturn;\n\t  }\n\t  if (characterCount < maxChars) {\n\t  \tif (insideEm) {\n\t    \ttrimmedHTML += '<em>';\n\t    }\n\t    trimmedHTML += element.substring(0, (maxChars - characterCount));\n\t    if (insideEm) {\n\t    \ttrimmedHTML += '</em>';\n\t    }\n\t    insideEm = !insideEm;\n\t    characterCount += element.length;\n\t    if (characterCount > maxChars) {\n\t    \ttrimmedHTML += '…';\n\t    }\n\t  }\n\t});\n\n\treturn trimmedHTML;\n};\n\nmodule.exports = trimHTML;\n","$(function() {\n\tvar $prettyPhoto = $(\"a[rel^='prettyPhoto']\");\n\tif ($prettyPhoto.length > 0) {\n\t\t$(\"a[rel^='prettyPhoto']\").prettyPhoto({social_tools:\"\"});\n\t}\n\n\tif($('.m-navbar .nav-main')) {\n\t\tvar docWidth = $(window).width(),\n\t\t\tuserTimer,\n\t\t\tmobileMenuState = 'closed',\n\t\t\tddOpen = false,\n\t\t\t$mw = $('.m-wrap'),\n\t\t\t$wrapper = $('.wrapper'),\n\t\t\t$mainHeader = $('.main-header'),\n\t\t\t$userPro = $('.user-profile'),\n\t\t\t$userMenu = $('.user-menu'),\n\t\t\t$mainMenu = $('.icon-menu'),\n\t\t\t$mmAlt = $('.icon-menu, .iicon-menu'),\n\t\t\t$intMenu = $('.nav-main'),\n\t\t\t$langIcon = $('.active-language'),\n\t\t\t$langMenu = $('.m-language'),\n\t\t\t$dropDown = $('.m-dropdown'),\n\t\t\t$mnav = $('.m-nav');\n\t\t\t$activeLang = $('.m-language .active img').attr('src');\n\n\t\t$(window).on('resize', function() {\n\t\t\tdocWidth = $(window).width();\n\t\t\tif(docWidth <= 1024) {\n\t\t\t\t$userMenu.show();\n\t\t\t} else {\n\t\t\t\t$userMenu.hide();\n\t\t\t}\n\t\t});\n\n\t\t$langIcon.attr('src', $activeLang);\n\n\t\t$userPro.on('click', function() {\n\t\t\tif(docWidth <= 1024) {\n\t\t\t\t\n\t\t\t\tif(mobileMenuState === 'closed') {\n\t\t\t\t\t$wrapper.animate({\n\t\t\t\t\t\t'right': '50%'\n\t\t\t\t\t}, 250);\n\t\t\t\t\t$userMenu.animate({\n\t\t\t\t\t\t'right': '0%'\n\t\t\t\t\t}, 250);\n\t\t\t\t\t$userPro.addClass('active');\n\t\t\t\t\tmobileMenuState = 'user';\n\t\t\t\t} else if(mobileMenuState === 'user') {\n\t\t\t\t\t$wrapper.animate({\n\t\t\t\t\t\t'right': '0%'\n\t\t\t\t\t}, 250);\n\t\t\t\t\t$userMenu.animate({\n\t\t\t\t\t\t'right': '-50%'\n\t\t\t\t\t}, 250);\n\t\t\t\t\t$userPro.removeClass('active');\n\t\t\t\t\tmobileMenuState = 'closed';\n\t\t\t\t}\n\n\t\t\t\t\n\t\t\t}\n\t\t});\n\n\t\t$mmAlt.on('click', function() {\n\t\t\tif(docWidth <= 1024) {\n\t\t\t\tif(mobileMenuState === 'closed') {\n\t\t\t\t\t$wrapper.animate({\n\t\t\t\t\t\t'right': '-50%'\n\t\t\t\t\t}, 250);\n\t\t\t\t\t$intMenu.animate({\n\t\t\t\t\t\t'left': '0%'\n\t\t\t\t\t}, 250);\n\t\t\t\t\t$mmAlt.addClass('active');\n\t\t\t\t\t$mw.addClass('h-lock');\n\t\t\t\t\tmobileMenuState = 'main';\n\t\t\t\t} else if(mobileMenuState === 'main') {\n\t\t\t\t\t$wrapper.animate({\n\t\t\t\t\t\t'right': '0%'\n\t\t\t\t\t}, 250);\n\t\t\t\t\t$intMenu.animate({\n\t\t\t\t\t\t'left': '-50%'\n\t\t\t\t\t}, 250, function() {\n\t\t\t\t\t\t$mmAlt.removeClass('active');\n\t\t\t\t\t\t$mw.removeClass('h-lock');\n\t\t\t\t\t});\n\t\t\t\t\tmobileMenuState = 'closed';\n\t\t\t\t}\t\n\t\t\t}\n\t\t});\n\n\t\t$dropDown.on('click', function() {\n\t\t\t// Clear old Dropdowns\n\t\t\tif($mnav.find($('.dropdown-menu')).hasClass('active')) {\n\t\t\t\t// So that you can close it if you click it.\n\t\t\t\tif(!$(this).find($('.dropdown-menu'))) {\n\t\t\t\t\t$mnav.find($('.dropdown-menu')).removeClass('active');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(docWidth <= 1024) {\n\t\t\t\tif($(this).parent().parent().attr('class') !== 'm-nav nav-main') {\n\t\t\t\t\tif($(this).find($('.dropdown-menu')).is(':hidden')) {\n\t\t\t\t\t\t$(this).find($('.dropdown-menu')).addClass('active');\n\t\t\t\t\t\t$(this).addClass('open');\n\t\t\t\t\t\tddOpen = true;\n\t\t\t\t\t} else if($(this).find($('.dropdown-menu')).is(':visible')) {\n\t\t\t\t\t\t$(this).find($('.dropdown-menu')).removeClass('active');\n\t\t\t\t\t\t$(this).removeClass('open');\n\t\t\t\t\t\t$(this).blur();\n\t\t\t\t\t\tddOpen = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t$(document).on('click touchstart', function(e) {\n\t\t\tif(docWidth <= 1024) {\n\t\t\t\tif(ddOpen === true) {\n\t\t\t\t\tif(!$(e.target).closest('.m-dropdown').length) {\n\t\t\t\t\t\t$dropDown.find($('.dropdown-menu')).removeClass('active');\n\t\t\t\t\t\t$dropDown.removeClass('open');\n\t\t\t\t\t\tddOpen = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\trequire('./_searchbox.js')();\n});\n\nglobal.changeLanguage = require('./_changeLanguage.js');"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJidWlsZC9fanMvX2N1c3RvbS9fY2hhbmdlTGFuZ3VhZ2UuanMiLCJidWlsZC9fanMvX2N1c3RvbS9fc2VhcmNoYm94LmpzIiwiYnVpbGQvX2pzL19jdXN0b20vX3RyaW1IVE1MLmpzIiwiYnVpbGQvX2pzL19jdXN0b20vbWFpbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNyQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIid1c2Ugc3RyaWN0JztcblxuLyogRGVwZW5kcyBvbiBqUXVlcnkgYXMgJCAqL1xuXG52YXIgY2hhbmdlTGFuZ3VhZ2UgPSBmdW5jdGlvbihsYW5ndWFnZSwgY2FsbGJhY2spIHtcblxuICAgIHZhciBwb3N0aW5nID0gJC5wb3N0KCcvbGFuZ3VhZ2UnLCB7XG4gICAgICAgIGxhbmd1YWdlOiBsYW5ndWFnZVxuICAgIH0sIFwianNvblwiKTtcblxuICAgIHBvc3RpbmcuZG9uZShmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcbiAgICB9KS5mYWlsKGZ1bmN0aW9uKCkge1xuICAgICAgICAvL1xuICAgIH0pLmFsd2F5cyhmdW5jdGlvbihlKSB7XG4gICAgICAgIC8vXG4gICAgfSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY2hhbmdlTGFuZ3VhZ2U7IiwidmFyIHNlYXJjaGJveCA9IGZ1bmN0aW9uKCkge1xuXG5cdHZhciB0cmltSFRNTCA9IHJlcXVpcmUoJy4vX3RyaW1IVE1MLmpzJyk7XG5cdHZhciBjbGllbnQgPSBhbGdvbGlhc2VhcmNoKFwiNjFFVThJUzJPMVwiLCBcImZkY2VjN2I2MTc4ZjlhOWMxMjhhZTAzZDliN2Y1ZjQwXCIpO1xuXHR2YXIgbWVtYmVycyA9IGNsaWVudC5pbml0SW5kZXgoYWxnb2xpYUluZGV4TWVtYmVycyk7XG5cdHZhciBwcm9qZWN0cyA9IGNsaWVudC5pbml0SW5kZXgoYWxnb2xpYUluZGV4UHJvamVjdHMpO1xuXHQvL2luaXRpYWxpemUgYXV0b2NvbXBsZXRlIG9uIHNlYXJjaCBpbnB1dCAoSUQgc2VsZWN0b3IgbXVzdCBtYXRjaClcblx0JCgnI2FhLXNlYXJjaC1pbnB1dCcpLmF1dG9jb21wbGV0ZShcblx0XHR7XG5cdFx0XHRoaW50OiBmYWxzZSxcblx0XHRcdGRlYnVnOiB0cnVlLFxuXHRcdFx0a2V5Ym9hcmRTaG9ydGN1dHM6IFsnLyddXG5cdFx0fSwgXG5cdFx0W1xuXHRcdFx0e1xuXHRcdFx0ICBzb3VyY2U6ICQuZm4uYXV0b2NvbXBsZXRlLnNvdXJjZXMuaGl0cyhtZW1iZXJzLCB7IGhpdHNQZXJQYWdlOiAzIH0pLFxuXHRcdFx0ICAvL3ZhbHVlIHRvIGJlIGRpc3BsYXllZCBpbiBpbnB1dCBjb250cm9sIGFmdGVyIHVzZXIncyBzdWdnZXN0aW9uIHNlbGVjdGlvblxuXHRcdFx0ICBkaXNwbGF5S2V5OiBmdW5jdGlvbihzdWdnZXN0aW9uKSB7XG5cdFx0XHQgIFx0cmV0dXJuIHN1Z2dlc3Rpb24uZmlyc3RuYW1lICsgJyAnICsgc3VnZ2VzdGlvbi5sYXN0bmFtZTtcblx0XHRcdCAgfSxcblx0XHRcdCAgLy9oYXNoIG9mIHRlbXBsYXRlcyB1c2VkIHdoZW4gcmVuZGVyaW5nIGRhdGFzZXRcblx0XHRcdCAgdGVtcGxhdGVzOiB7XG5cdFx0XHQgICAgaGVhZGVyOiAnPGRpdiBjbGFzcz1cImFhLXN1Z2dlc3Rpb25zLWNhdGVnb3J5XCI+JyArIGxhbmdbJ0V4cGVydHMnXSArICc8L2Rpdj4nLFxuXHRcdFx0ICAgIC8vJ3N1Z2dlc3Rpb24nIHRlbXBsYXRpbmcgZnVuY3Rpb24gdXNlZCB0byByZW5kZXIgYSBzaW5nbGUgc3VnZ2VzdGlvblxuXHRcdFx0ICAgIHN1Z2dlc3Rpb246IGZ1bmN0aW9uKHN1Z2dlc3Rpb24pIHtcblx0XHRcdCAgICAgIHZhciBtYXhDaGFycyA9IDM1O1xuXHRcdFx0ICAgICAgdmFyIG9yZ2FuaXphdGlvbkRpc3BsYXlIVE1MID0gc3VnZ2VzdGlvbi5faGlnaGxpZ2h0UmVzdWx0Lm9yZ2FuaXphdGlvbi52YWx1ZTtcblx0XHRcdCAgICAgIGlmIChzdWdnZXN0aW9uLm9yZ2FuaXphdGlvbi5sZW5ndGggPiBtYXhDaGFycykge1xuXHRcdFx0ICAgICAgXHRvcmdhbml6YXRpb25EaXNwbGF5SFRNTCA9IHRyaW1IVE1MKG9yZ2FuaXphdGlvbkRpc3BsYXlIVE1MLCBtYXhDaGFycyk7XG5cdFx0XHQgICAgICB9XG5cdFx0XHQgICAgICByZXR1cm4gJzxpbWcgc3JjPVwiJyArIHN1Z2dlc3Rpb24uaW1hZ2UgKyAnXCI+PHNwYW4+JyArXG5cdFx0XHQgICAgICAgIHN1Z2dlc3Rpb24uX2hpZ2hsaWdodFJlc3VsdC5maXJzdG5hbWUudmFsdWUgKyAnICcgK1xuXHRcdFx0ICAgICAgICBzdWdnZXN0aW9uLl9oaWdobGlnaHRSZXN1bHQubGFzdG5hbWUudmFsdWUgKyAnPC9zcGFuPiA8c3Bhbj4nICtcblx0XHRcdCAgICAgICAgb3JnYW5pemF0aW9uRGlzcGxheUhUTUwgKyAnPC9zcGFuPic7XG5cdFx0XHQgICAgfSxcblx0XHRcdCAgICBlbXB0eTogJzxkaXYgY2xhc3M9XCJhYS1zdWdnZXN0aW9uIGFhLXN1Z2dlc3Rpb24tZW1wdHlcIj4nICsgbGFuZ1snTm9SZXN1bHRzRm91bmQnXSArICcmbmJzcDs8YSBocmVmPVwiL2V4cGVydGlzZS9cIj5BZHZhbmNlZCBTZWFyY2g8L2E+PC9kaXY+J1xuXHRcdFx0ICB9XG5cdFx0XHR9LFxuXHRcdFx0e1xuXHRcdFx0ICBzb3VyY2U6ICQuZm4uYXV0b2NvbXBsZXRlLnNvdXJjZXMuaGl0cyhwcm9qZWN0cywgeyBoaXRzUGVyUGFnZTogMyB9KSxcblx0XHRcdCAgLy92YWx1ZSB0byBiZSBkaXNwbGF5ZWQgaW4gaW5wdXQgY29udHJvbCBhZnRlciB1c2VyJ3Mgc3VnZ2VzdGlvbiBzZWxlY3Rpb25cblx0XHRcdCAgZGlzcGxheUtleTogJ3Byb2plY3RuYW1lJyxcblx0XHRcdCAgLy9oYXNoIG9mIHRlbXBsYXRlcyB1c2VkIHdoZW4gcmVuZGVyaW5nIGRhdGFzZXRcblx0XHRcdCAgdGVtcGxhdGVzOiB7XG5cdFx0XHQgICAgaGVhZGVyOiAnPGRpdiBjbGFzcz1cImFhLXN1Z2dlc3Rpb25zLWNhdGVnb3J5XCI+JyArIGxhbmdbJ1Byb2plY3RzJ10gKyAnPC9kaXY+Jyxcblx0XHRcdCAgICAvLydzdWdnZXN0aW9uJyB0ZW1wbGF0aW5nIGZ1bmN0aW9uIHVzZWQgdG8gcmVuZGVyIGEgc2luZ2xlIHN1Z2dlc3Rpb25cblx0XHRcdCAgICBzdWdnZXN0aW9uOiBmdW5jdGlvbihzdWdnZXN0aW9uKSB7XG5cdFx0XHQgICAgICBpZiAodHlwZW9mIHN1Z2dlc3Rpb24uX2hpZ2hsaWdodFJlc3VsdC5jb3VudHJ5ICE9ICd1bmRlZmluZWQnKSB7XG5cdFx0XHQgICAgICBcdHZhciBjb3VudHJ5ID0gc3VnZ2VzdGlvbi5faGlnaGxpZ2h0UmVzdWx0LmNvdW50cnkudmFsdWU7XG5cdFx0XHQgICAgICB9IGVsc2Uge1xuXHRcdFx0ICAgICAgXHR2YXIgY291bnRyeSA9ICfigJMnO1xuXHRcdFx0ICAgICAgfVxuXHRcdFx0ICAgICAgcmV0dXJuICc8aW1nIHNyYz1cIicgKyBzdWdnZXN0aW9uLmltYWdlICsgJ1wiPjxzcGFuPicgK1xuXHRcdFx0ICAgICAgICBzdWdnZXN0aW9uLl9oaWdobGlnaHRSZXN1bHQucHJvamVjdG5hbWUudmFsdWUgKyAnPC9zcGFuPjxzcGFuPicgK1xuXHRcdFx0ICAgICAgICBjb3VudHJ5ICsgJzwvc3Bhbj4nO1xuXHRcdFx0ICAgIH0sXG5cdFx0XHQgICAgZW1wdHk6ICc8ZGl2IGNsYXNzPVwiYWEtc3VnZ2VzdGlvbiBhYS1zdWdnZXN0aW9uLWVtcHR5XCI+JyArIGxhbmdbJ05vUmVzdWx0c0ZvdW5kJ10gKyAnJm5ic3A7PGEgaHJlZj1cIi9wcm9qZWN0cy9cIj5BZHZhbmNlZCBTZWFyY2g8L2E+PC9kaXY+Jyxcblx0XHRcdCAgICBmb290ZXI6ICc8ZGl2IGNsYXNzPVwiYWEtc3VnZ2VzdGlvbnMtZm9vdGVyXCI+UG93ZXJlZCBieSA8aW1nIHNyYz1cIi9pbWFnZXMvQWxnb2xpYV9sb2dvX2JnLXdoaXRlLnN2Z1wiIHdpZHRoPVwiNDhcIiBoZWlnaHQ9XCIxN1wiPjwvZGl2Pidcblx0XHRcdCAgfVxuXHRcdFx0fVxuXHRcdF0pXG5cdFx0Lm9uKCdhdXRvY29tcGxldGU6c2VsZWN0ZWQnLCBmdW5jdGlvbihldmVudCwgc3VnZ2VzdGlvbiwgZGF0YXNldCkge1xuXHRcdFx0d2luZG93LmxvY2F0aW9uLmhyZWYgPSBzdWdnZXN0aW9uLnVyaTtcblx0XHR9KTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gc2VhcmNoYm94OyIsIid1c2Ugc3RyaWN0JztcblxudmFyIHRyaW1IVE1MID0gZnVuY3Rpb24oaW5wdXRIVE1MLCBtYXhDaGFycykge1xuXHR2YXIgcmVnZXggPSAvPFxcLz9lbT4vO1xuXHR2YXIgc3BsaXRDb21wYW55ID0gaW5wdXRIVE1MLnNwbGl0KHJlZ2V4KTtcblx0dmFyIGNoYXJhY3RlckNvdW50ID0gMDtcblx0dmFyIGluc2lkZUVtID0gZmFsc2U7XG5cdHZhciB0cmltbWVkSFRNTCA9ICcnO1xuXG5cdGlmIChzcGxpdENvbXBhbnlbMF0gPT09ICcnKSB7XG5cdCAgICBpbnNpZGVFbSA9IHRydWU7XG5cdH1cblxuXHRzcGxpdENvbXBhbnkuZm9yRWFjaChmdW5jdGlvbihlbGVtZW50LCBpbmRleCwgYXJyYXkpIHtcblx0ICBpZiAoZWxlbWVudC5sZW5ndGggPT09IDApIHtcblx0ICBcdHJldHVybjtcblx0ICB9XG5cdCAgaWYgKGNoYXJhY3RlckNvdW50IDwgbWF4Q2hhcnMpIHtcblx0ICBcdGlmIChpbnNpZGVFbSkge1xuXHQgICAgXHR0cmltbWVkSFRNTCArPSAnPGVtPic7XG5cdCAgICB9XG5cdCAgICB0cmltbWVkSFRNTCArPSBlbGVtZW50LnN1YnN0cmluZygwLCAobWF4Q2hhcnMgLSBjaGFyYWN0ZXJDb3VudCkpO1xuXHQgICAgaWYgKGluc2lkZUVtKSB7XG5cdCAgICBcdHRyaW1tZWRIVE1MICs9ICc8L2VtPic7XG5cdCAgICB9XG5cdCAgICBpbnNpZGVFbSA9ICFpbnNpZGVFbTtcblx0ICAgIGNoYXJhY3RlckNvdW50ICs9IGVsZW1lbnQubGVuZ3RoO1xuXHQgICAgaWYgKGNoYXJhY3RlckNvdW50ID4gbWF4Q2hhcnMpIHtcblx0ICAgIFx0dHJpbW1lZEhUTUwgKz0gJ+KApic7XG5cdCAgICB9XG5cdCAgfVxuXHR9KTtcblxuXHRyZXR1cm4gdHJpbW1lZEhUTUw7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHRyaW1IVE1MO1xuIiwiJChmdW5jdGlvbigpIHtcblx0dmFyICRwcmV0dHlQaG90byA9ICQoXCJhW3JlbF49J3ByZXR0eVBob3RvJ11cIik7XG5cdGlmICgkcHJldHR5UGhvdG8ubGVuZ3RoID4gMCkge1xuXHRcdCQoXCJhW3JlbF49J3ByZXR0eVBob3RvJ11cIikucHJldHR5UGhvdG8oe3NvY2lhbF90b29sczpcIlwifSk7XG5cdH1cblxuXHRpZigkKCcubS1uYXZiYXIgLm5hdi1tYWluJykpIHtcblx0XHR2YXIgZG9jV2lkdGggPSAkKHdpbmRvdykud2lkdGgoKSxcblx0XHRcdHVzZXJUaW1lcixcblx0XHRcdG1vYmlsZU1lbnVTdGF0ZSA9ICdjbG9zZWQnLFxuXHRcdFx0ZGRPcGVuID0gZmFsc2UsXG5cdFx0XHQkbXcgPSAkKCcubS13cmFwJyksXG5cdFx0XHQkd3JhcHBlciA9ICQoJy53cmFwcGVyJyksXG5cdFx0XHQkbWFpbkhlYWRlciA9ICQoJy5tYWluLWhlYWRlcicpLFxuXHRcdFx0JHVzZXJQcm8gPSAkKCcudXNlci1wcm9maWxlJyksXG5cdFx0XHQkdXNlck1lbnUgPSAkKCcudXNlci1tZW51JyksXG5cdFx0XHQkbWFpbk1lbnUgPSAkKCcuaWNvbi1tZW51JyksXG5cdFx0XHQkbW1BbHQgPSAkKCcuaWNvbi1tZW51LCAuaWljb24tbWVudScpLFxuXHRcdFx0JGludE1lbnUgPSAkKCcubmF2LW1haW4nKSxcblx0XHRcdCRsYW5nSWNvbiA9ICQoJy5hY3RpdmUtbGFuZ3VhZ2UnKSxcblx0XHRcdCRsYW5nTWVudSA9ICQoJy5tLWxhbmd1YWdlJyksXG5cdFx0XHQkZHJvcERvd24gPSAkKCcubS1kcm9wZG93bicpLFxuXHRcdFx0JG1uYXYgPSAkKCcubS1uYXYnKTtcblx0XHRcdCRhY3RpdmVMYW5nID0gJCgnLm0tbGFuZ3VhZ2UgLmFjdGl2ZSBpbWcnKS5hdHRyKCdzcmMnKTtcblxuXHRcdCQod2luZG93KS5vbigncmVzaXplJywgZnVuY3Rpb24oKSB7XG5cdFx0XHRkb2NXaWR0aCA9ICQod2luZG93KS53aWR0aCgpO1xuXHRcdFx0aWYoZG9jV2lkdGggPD0gMTAyNCkge1xuXHRcdFx0XHQkdXNlck1lbnUuc2hvdygpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0JHVzZXJNZW51LmhpZGUoKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdCRsYW5nSWNvbi5hdHRyKCdzcmMnLCAkYWN0aXZlTGFuZyk7XG5cblx0XHQkdXNlclByby5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcblx0XHRcdGlmKGRvY1dpZHRoIDw9IDEwMjQpIHtcblx0XHRcdFx0XG5cdFx0XHRcdGlmKG1vYmlsZU1lbnVTdGF0ZSA9PT0gJ2Nsb3NlZCcpIHtcblx0XHRcdFx0XHQkd3JhcHBlci5hbmltYXRlKHtcblx0XHRcdFx0XHRcdCdyaWdodCc6ICc1MCUnXG5cdFx0XHRcdFx0fSwgMjUwKTtcblx0XHRcdFx0XHQkdXNlck1lbnUuYW5pbWF0ZSh7XG5cdFx0XHRcdFx0XHQncmlnaHQnOiAnMCUnXG5cdFx0XHRcdFx0fSwgMjUwKTtcblx0XHRcdFx0XHQkdXNlclByby5hZGRDbGFzcygnYWN0aXZlJyk7XG5cdFx0XHRcdFx0bW9iaWxlTWVudVN0YXRlID0gJ3VzZXInO1xuXHRcdFx0XHR9IGVsc2UgaWYobW9iaWxlTWVudVN0YXRlID09PSAndXNlcicpIHtcblx0XHRcdFx0XHQkd3JhcHBlci5hbmltYXRlKHtcblx0XHRcdFx0XHRcdCdyaWdodCc6ICcwJSdcblx0XHRcdFx0XHR9LCAyNTApO1xuXHRcdFx0XHRcdCR1c2VyTWVudS5hbmltYXRlKHtcblx0XHRcdFx0XHRcdCdyaWdodCc6ICctNTAlJ1xuXHRcdFx0XHRcdH0sIDI1MCk7XG5cdFx0XHRcdFx0JHVzZXJQcm8ucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuXHRcdFx0XHRcdG1vYmlsZU1lbnVTdGF0ZSA9ICdjbG9zZWQnO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQkbW1BbHQub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cdFx0XHRpZihkb2NXaWR0aCA8PSAxMDI0KSB7XG5cdFx0XHRcdGlmKG1vYmlsZU1lbnVTdGF0ZSA9PT0gJ2Nsb3NlZCcpIHtcblx0XHRcdFx0XHQkd3JhcHBlci5hbmltYXRlKHtcblx0XHRcdFx0XHRcdCdyaWdodCc6ICctNTAlJ1xuXHRcdFx0XHRcdH0sIDI1MCk7XG5cdFx0XHRcdFx0JGludE1lbnUuYW5pbWF0ZSh7XG5cdFx0XHRcdFx0XHQnbGVmdCc6ICcwJSdcblx0XHRcdFx0XHR9LCAyNTApO1xuXHRcdFx0XHRcdCRtbUFsdC5hZGRDbGFzcygnYWN0aXZlJyk7XG5cdFx0XHRcdFx0JG13LmFkZENsYXNzKCdoLWxvY2snKTtcblx0XHRcdFx0XHRtb2JpbGVNZW51U3RhdGUgPSAnbWFpbic7XG5cdFx0XHRcdH0gZWxzZSBpZihtb2JpbGVNZW51U3RhdGUgPT09ICdtYWluJykge1xuXHRcdFx0XHRcdCR3cmFwcGVyLmFuaW1hdGUoe1xuXHRcdFx0XHRcdFx0J3JpZ2h0JzogJzAlJ1xuXHRcdFx0XHRcdH0sIDI1MCk7XG5cdFx0XHRcdFx0JGludE1lbnUuYW5pbWF0ZSh7XG5cdFx0XHRcdFx0XHQnbGVmdCc6ICctNTAlJ1xuXHRcdFx0XHRcdH0sIDI1MCwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHQkbW1BbHQucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuXHRcdFx0XHRcdFx0JG13LnJlbW92ZUNsYXNzKCdoLWxvY2snKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRtb2JpbGVNZW51U3RhdGUgPSAnY2xvc2VkJztcblx0XHRcdFx0fVx0XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQkZHJvcERvd24ub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cdFx0XHQvLyBDbGVhciBvbGQgRHJvcGRvd25zXG5cdFx0XHRpZigkbW5hdi5maW5kKCQoJy5kcm9wZG93bi1tZW51JykpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xuXHRcdFx0XHQvLyBTbyB0aGF0IHlvdSBjYW4gY2xvc2UgaXQgaWYgeW91IGNsaWNrIGl0LlxuXHRcdFx0XHRpZighJCh0aGlzKS5maW5kKCQoJy5kcm9wZG93bi1tZW51JykpKSB7XG5cdFx0XHRcdFx0JG1uYXYuZmluZCgkKCcuZHJvcGRvd24tbWVudScpKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0aWYoZG9jV2lkdGggPD0gMTAyNCkge1xuXHRcdFx0XHRpZigkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLmF0dHIoJ2NsYXNzJykgIT09ICdtLW5hdiBuYXYtbWFpbicpIHtcblx0XHRcdFx0XHRpZigkKHRoaXMpLmZpbmQoJCgnLmRyb3Bkb3duLW1lbnUnKSkuaXMoJzpoaWRkZW4nKSkge1xuXHRcdFx0XHRcdFx0JCh0aGlzKS5maW5kKCQoJy5kcm9wZG93bi1tZW51JykpLmFkZENsYXNzKCdhY3RpdmUnKTtcblx0XHRcdFx0XHRcdCQodGhpcykuYWRkQ2xhc3MoJ29wZW4nKTtcblx0XHRcdFx0XHRcdGRkT3BlbiA9IHRydWU7XG5cdFx0XHRcdFx0fSBlbHNlIGlmKCQodGhpcykuZmluZCgkKCcuZHJvcGRvd24tbWVudScpKS5pcygnOnZpc2libGUnKSkge1xuXHRcdFx0XHRcdFx0JCh0aGlzKS5maW5kKCQoJy5kcm9wZG93bi1tZW51JykpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcblx0XHRcdFx0XHRcdCQodGhpcykucmVtb3ZlQ2xhc3MoJ29wZW4nKTtcblx0XHRcdFx0XHRcdCQodGhpcykuYmx1cigpO1xuXHRcdFx0XHRcdFx0ZGRPcGVuID0gZmFsc2U7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQkKGRvY3VtZW50KS5vbignY2xpY2sgdG91Y2hzdGFydCcsIGZ1bmN0aW9uKGUpIHtcblx0XHRcdGlmKGRvY1dpZHRoIDw9IDEwMjQpIHtcblx0XHRcdFx0aWYoZGRPcGVuID09PSB0cnVlKSB7XG5cdFx0XHRcdFx0aWYoISQoZS50YXJnZXQpLmNsb3Nlc3QoJy5tLWRyb3Bkb3duJykubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHQkZHJvcERvd24uZmluZCgkKCcuZHJvcGRvd24tbWVudScpKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG5cdFx0XHRcdFx0XHQkZHJvcERvd24ucmVtb3ZlQ2xhc3MoJ29wZW4nKTtcblx0XHRcdFx0XHRcdGRkT3BlbiA9IGZhbHNlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0cmVxdWlyZSgnLi9fc2VhcmNoYm94LmpzJykoKTtcbn0pO1xuXG5nbG9iYWwuY2hhbmdlTGFuZ3VhZ2UgPSByZXF1aXJlKCcuL19jaGFuZ2VMYW5ndWFnZS5qcycpOyJdfQ=="}