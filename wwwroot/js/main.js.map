{"version":3,"sources":["node_modules/browser-pack/_prelude.js","build/_js/_custom/_changeLanguage.js","build/_js/_custom/main.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\n\n/* Depends on jQuery as $ */\n\nvar changeLanguage = function(language, callback) {\n\n    var posting = $.post('/language', {\n        language: language\n    }, \"json\");\n\n    posting.done(function(data) {\n        if (typeof callback == 'function') {\n            callback();\n        }\n        location.reload();\n    }).fail(function() {\n        //\n    }).always(function(e) {\n        //\n    });\n}\n\nmodule.exports = changeLanguage;","$(function() {\n\tvar $prettyPhoto = $(\"a[rel^='prettyPhoto']\");\n\tif ($prettyPhoto.length > 0) {\n\t\t$(\"a[rel^='prettyPhoto']\").prettyPhoto({social_tools:\"\"});\n\t}\n\n\tif($('.m-navbar .nav-main')) {\n\t\tvar docWidth = $(window).width(),\n\t\t\tuserTimer,\n\t\t\tmobileMenuState = 'closed',\n\t\t\tddOpen = false,\n\t\t\t$mw = $('.m-wrap'),\n\t\t\t$wrapper = $('.wrapper'),\n\t\t\t$mainHeader = $('.main-header'),\n\t\t\t$userPro = $('.user-profile'),\n\t\t\t$userMenu = $('.user-menu'),\n\t\t\t$mainMenu = $('.icon-menu'),\n\t\t\t$mmAlt = $('.icon-menu, .iicon-menu'),\n\t\t\t$intMenu = $('.nav-main'),\n\t\t\t$langIcon = $('.active-language'),\n\t\t\t$langMenu = $('.m-language'),\n\t\t\t$dropDown = $('.m-dropdown'),\n\t\t\t$mnav = $('.m-nav');\n\t\t\t$activeLang = $('.m-language .active img').attr('src');\n\n\t\t$(window).on('resize', function() {\n\t\t\tdocWidth = $(window).width();\n\t\t\tif(docWidth <= 1024) {\n\t\t\t\t$userMenu.show();\n\t\t\t} else {\n\t\t\t\t$userMenu.hide();\n\t\t\t}\n\t\t});\n\n\t\t$langIcon.attr('src', $activeLang);\n\n\t\t$userPro.on('click', function() {\n\t\t\tif(docWidth <= 1024) {\n\t\t\t\t\n\t\t\t\tif(mobileMenuState === 'closed') {\n\t\t\t\t\t$wrapper.animate({\n\t\t\t\t\t\t'right': '50%'\n\t\t\t\t\t}, 250);\n\t\t\t\t\t$userMenu.animate({\n\t\t\t\t\t\t'right': '0%'\n\t\t\t\t\t}, 250);\n\t\t\t\t\t$userPro.addClass('active');\n\t\t\t\t\tmobileMenuState = 'user';\n\t\t\t\t} else if(mobileMenuState === 'user') {\n\t\t\t\t\t$wrapper.animate({\n\t\t\t\t\t\t'right': '0%'\n\t\t\t\t\t}, 250);\n\t\t\t\t\t$userMenu.animate({\n\t\t\t\t\t\t'right': '-50%'\n\t\t\t\t\t}, 250);\n\t\t\t\t\t$userPro.removeClass('active');\n\t\t\t\t\tmobileMenuState = 'closed';\n\t\t\t\t}\n\n\t\t\t\t\n\t\t\t}\n\t\t});\n\n\t\t$mmAlt.on('click', function() {\n\t\t\tif(docWidth <= 1024) {\n\t\t\t\tif(mobileMenuState === 'closed') {\n\t\t\t\t\t$wrapper.animate({\n\t\t\t\t\t\t'right': '-50%'\n\t\t\t\t\t}, 250);\n\t\t\t\t\t$intMenu.animate({\n\t\t\t\t\t\t'left': '0%'\n\t\t\t\t\t}, 250);\n\t\t\t\t\t$mmAlt.addClass('active');\n\t\t\t\t\t$mw.addClass('h-lock');\n\t\t\t\t\tmobileMenuState = 'main';\n\t\t\t\t} else if(mobileMenuState === 'main') {\n\t\t\t\t\t$wrapper.animate({\n\t\t\t\t\t\t'right': '0%'\n\t\t\t\t\t}, 250);\n\t\t\t\t\t$intMenu.animate({\n\t\t\t\t\t\t'left': '-50%'\n\t\t\t\t\t}, 250, function() {\n\t\t\t\t\t\t$mmAlt.removeClass('active');\n\t\t\t\t\t\t$mw.removeClass('h-lock');\n\t\t\t\t\t});\n\t\t\t\t\tmobileMenuState = 'closed';\n\t\t\t\t}\t\n\t\t\t}\n\t\t});\n\n\t\t$dropDown.on('click', function() {\n\t\t\t// Clear old Dropdowns\n\t\t\tif($mnav.find($('.dropdown-menu')).hasClass('active')) {\n\t\t\t\t// So that you can close it if you click it.\n\t\t\t\tif(!$(this).find($('.dropdown-menu'))) {\n\t\t\t\t\t$mnav.find($('.dropdown-menu')).removeClass('active');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(docWidth <= 1024) {\n\t\t\t\tif($(this).parent().parent().attr('class') !== 'm-nav nav-main') {\n\t\t\t\t\tif($(this).find($('.dropdown-menu')).is(':hidden')) {\n\t\t\t\t\t\t$(this).find($('.dropdown-menu')).addClass('active');\n\t\t\t\t\t\t$(this).addClass('open');\n\t\t\t\t\t\tddOpen = true;\n\t\t\t\t\t} else if($(this).find($('.dropdown-menu')).is(':visible')) {\n\t\t\t\t\t\t$(this).find($('.dropdown-menu')).removeClass('active');\n\t\t\t\t\t\t$(this).removeClass('open');\n\t\t\t\t\t\t$(this).blur();\n\t\t\t\t\t\tddOpen = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t$(document).on('click touchstart', function(e) {\n\t\t\tif(docWidth <= 1024) {\n\t\t\t\tif(ddOpen === true) {\n\t\t\t\t\tif(!$(e.target).closest('.m-dropdown').length) {\n\t\t\t\t\t\t$dropDown.find($('.dropdown-menu')).removeClass('active');\n\t\t\t\t\t\t$dropDown.removeClass('open');\n\t\t\t\t\t\tddOpen = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tfunction trimHTML(inputHTML, maxChars) {\n\t\t\tvar regex = /<\\/?em>/;\n\t\t\tvar splitCompany = inputHTML.split(regex);\n\t\t\tvar characterCount = 0;\n\t\t\tvar insideEm = false;\n\t\t\tvar trimmedHTML = '';\n\n\t\t\tif (splitCompany[0] === '') {\n\t\t\t    insideEm = true;\n\t\t\t}\n\n\t\t\tsplitCompany.forEach(function(element, index, array) {\n\t\t\t  if (element.length === 0) {\n\t\t\t  \treturn;\n\t\t\t  }\n\t\t\t  if (characterCount < maxChars) {\n\t\t\t  \tif (insideEm) {\n\t\t\t    \ttrimmedHTML += '<em>';\n\t\t\t    }\n\t\t\t    trimmedHTML += element.substring(0, (maxChars - characterCount));\n\t\t\t    if (insideEm) {\n\t\t\t    \ttrimmedHTML += '</em>';\n\t\t\t    }\n\t\t\t    insideEm = !insideEm;\n\t\t\t    characterCount += element.length;\n\t\t\t    if (characterCount > maxChars) {\n\t\t\t    \ttrimmedHTML += '…';\n\t\t\t    }\n\t\t\t  }\n\t\t\t});\n\n\t\t\treturn trimmedHTML;\n\n\t\t}\n\n\t\tvar client = algoliasearch(\"61EU8IS2O1\", \"fdcec7b6178f9a9c128ae03d9b7f5f40\");\n\t\tvar members = client.initIndex(algoliaIndexMembers);\n\t\tvar projects = client.initIndex(algoliaIndexProjects);\n\t\t//initialize autocomplete on search input (ID selector must match)\n\t\t$('#aa-search-input').autocomplete(\n\t\t\t{\n\t\t\t\thint: false,\n\t\t\t\tdebug: true,\n\t\t\t\tkeyboardShortcuts: ['/']\n\t\t\t}, \n\t\t\t[\n\t\t\t\t{\n\t\t\t\t  source: $.fn.autocomplete.sources.hits(members, { hitsPerPage: 3 }),\n\t\t\t\t  //value to be displayed in input control after user's suggestion selection\n\t\t\t\t  displayKey: function(suggestion) {\n\t\t\t\t  \treturn suggestion.firstname + ' ' + suggestion.lastname;\n\t\t\t\t  },\n\t\t\t\t  //hash of templates used when rendering dataset\n\t\t\t\t  templates: {\n\t\t\t\t    header: '<div class=\"aa-suggestions-category\">' + lang['Experts'] + '</div>',\n\t\t\t\t    //'suggestion' templating function used to render a single suggestion\n\t\t\t\t    suggestion: function(suggestion) {\n\t\t\t\t      var maxChars = 35;\n\t\t\t\t      var organizationDisplayHTML = suggestion._highlightResult.organization.value;\n\t\t\t\t      if (suggestion.organization.length > maxChars) {\n\t\t\t\t      \torganizationDisplayHTML = trimHTML(organizationDisplayHTML, maxChars);\n\t\t\t\t      }\n\t\t\t\t      return '<img src=\"' + suggestion.image + '\"><span>' +\n\t\t\t\t        suggestion._highlightResult.firstname.value + ' ' +\n\t\t\t\t        suggestion._highlightResult.lastname.value + '</span> <span>' +\n\t\t\t\t        organizationDisplayHTML + '</span>';\n\t\t\t\t    },\n\t\t\t\t    empty: '<div class=\"aa-suggestion aa-suggestion-empty\">' + lang['NoResultsFound'] + '&nbsp;<a href=\"/expertise/\">Advanced Search</a></div>'\n\t\t\t\t  }\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t  source: $.fn.autocomplete.sources.hits(projects, { hitsPerPage: 3 }),\n\t\t\t\t  //value to be displayed in input control after user's suggestion selection\n\t\t\t\t  displayKey: 'projectname',\n\t\t\t\t  //hash of templates used when rendering dataset\n\t\t\t\t  templates: {\n\t\t\t\t    header: '<div class=\"aa-suggestions-category\">' + lang['Projects'] + '</div>',\n\t\t\t\t    //'suggestion' templating function used to render a single suggestion\n\t\t\t\t    suggestion: function(suggestion) {\n\t\t\t\t      if (typeof suggestion._highlightResult.country != 'undefined') {\n\t\t\t\t      \tvar country = suggestion._highlightResult.country.value;\n\t\t\t\t      } else {\n\t\t\t\t      \tvar country = '–';\n\t\t\t\t      }\n\t\t\t\t      return '<img src=\"' + suggestion.image + '\"><span>' +\n\t\t\t\t        suggestion._highlightResult.projectname.value + '</span><span>' +\n\t\t\t\t        country + '</span>';\n\t\t\t\t    },\n\t\t\t\t    empty: '<div class=\"aa-suggestion aa-suggestion-empty\">' + lang['NoResultsFound'] + '&nbsp;<a href=\"/projects/\">Advanced Search</a></div>',\n\t\t\t\t    footer: '<div class=\"aa-suggestions-footer\">Powered by <img src=\"/images/Algolia_logo_bg-white.svg\" width=\"48\" height=\"17\"></div>'\n\t\t\t\t  }\n\t\t\t\t}\n\t\t\t])\n\t\t\t.on('autocomplete:selected', function(event, suggestion, dataset) {\n\t\t\t\twindow.location.href = suggestion.uri;\n\t\t\t});\n\t}\n});\n\nglobal.changeLanguage = require('./_changeLanguage.js');"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJidWlsZC9fanMvX2N1c3RvbS9fY2hhbmdlTGFuZ3VhZ2UuanMiLCJidWlsZC9fanMvX2N1c3RvbS9tYWluLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDdEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKiBEZXBlbmRzIG9uIGpRdWVyeSBhcyAkICovXG5cbnZhciBjaGFuZ2VMYW5ndWFnZSA9IGZ1bmN0aW9uKGxhbmd1YWdlLCBjYWxsYmFjaykge1xuXG4gICAgdmFyIHBvc3RpbmcgPSAkLnBvc3QoJy9sYW5ndWFnZScsIHtcbiAgICAgICAgbGFuZ3VhZ2U6IGxhbmd1YWdlXG4gICAgfSwgXCJqc29uXCIpO1xuXG4gICAgcG9zdGluZy5kb25lKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xuICAgIH0pLmZhaWwoZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vXG4gICAgfSkuYWx3YXlzKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgLy9cbiAgICB9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjaGFuZ2VMYW5ndWFnZTsiLCIkKGZ1bmN0aW9uKCkge1xuXHR2YXIgJHByZXR0eVBob3RvID0gJChcImFbcmVsXj0ncHJldHR5UGhvdG8nXVwiKTtcblx0aWYgKCRwcmV0dHlQaG90by5sZW5ndGggPiAwKSB7XG5cdFx0JChcImFbcmVsXj0ncHJldHR5UGhvdG8nXVwiKS5wcmV0dHlQaG90byh7c29jaWFsX3Rvb2xzOlwiXCJ9KTtcblx0fVxuXG5cdGlmKCQoJy5tLW5hdmJhciAubmF2LW1haW4nKSkge1xuXHRcdHZhciBkb2NXaWR0aCA9ICQod2luZG93KS53aWR0aCgpLFxuXHRcdFx0dXNlclRpbWVyLFxuXHRcdFx0bW9iaWxlTWVudVN0YXRlID0gJ2Nsb3NlZCcsXG5cdFx0XHRkZE9wZW4gPSBmYWxzZSxcblx0XHRcdCRtdyA9ICQoJy5tLXdyYXAnKSxcblx0XHRcdCR3cmFwcGVyID0gJCgnLndyYXBwZXInKSxcblx0XHRcdCRtYWluSGVhZGVyID0gJCgnLm1haW4taGVhZGVyJyksXG5cdFx0XHQkdXNlclBybyA9ICQoJy51c2VyLXByb2ZpbGUnKSxcblx0XHRcdCR1c2VyTWVudSA9ICQoJy51c2VyLW1lbnUnKSxcblx0XHRcdCRtYWluTWVudSA9ICQoJy5pY29uLW1lbnUnKSxcblx0XHRcdCRtbUFsdCA9ICQoJy5pY29uLW1lbnUsIC5paWNvbi1tZW51JyksXG5cdFx0XHQkaW50TWVudSA9ICQoJy5uYXYtbWFpbicpLFxuXHRcdFx0JGxhbmdJY29uID0gJCgnLmFjdGl2ZS1sYW5ndWFnZScpLFxuXHRcdFx0JGxhbmdNZW51ID0gJCgnLm0tbGFuZ3VhZ2UnKSxcblx0XHRcdCRkcm9wRG93biA9ICQoJy5tLWRyb3Bkb3duJyksXG5cdFx0XHQkbW5hdiA9ICQoJy5tLW5hdicpO1xuXHRcdFx0JGFjdGl2ZUxhbmcgPSAkKCcubS1sYW5ndWFnZSAuYWN0aXZlIGltZycpLmF0dHIoJ3NyYycpO1xuXG5cdFx0JCh3aW5kb3cpLm9uKCdyZXNpemUnLCBmdW5jdGlvbigpIHtcblx0XHRcdGRvY1dpZHRoID0gJCh3aW5kb3cpLndpZHRoKCk7XG5cdFx0XHRpZihkb2NXaWR0aCA8PSAxMDI0KSB7XG5cdFx0XHRcdCR1c2VyTWVudS5zaG93KCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQkdXNlck1lbnUuaGlkZSgpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0JGxhbmdJY29uLmF0dHIoJ3NyYycsICRhY3RpdmVMYW5nKTtcblxuXHRcdCR1c2VyUHJvLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYoZG9jV2lkdGggPD0gMTAyNCkge1xuXHRcdFx0XHRcblx0XHRcdFx0aWYobW9iaWxlTWVudVN0YXRlID09PSAnY2xvc2VkJykge1xuXHRcdFx0XHRcdCR3cmFwcGVyLmFuaW1hdGUoe1xuXHRcdFx0XHRcdFx0J3JpZ2h0JzogJzUwJSdcblx0XHRcdFx0XHR9LCAyNTApO1xuXHRcdFx0XHRcdCR1c2VyTWVudS5hbmltYXRlKHtcblx0XHRcdFx0XHRcdCdyaWdodCc6ICcwJSdcblx0XHRcdFx0XHR9LCAyNTApO1xuXHRcdFx0XHRcdCR1c2VyUHJvLmFkZENsYXNzKCdhY3RpdmUnKTtcblx0XHRcdFx0XHRtb2JpbGVNZW51U3RhdGUgPSAndXNlcic7XG5cdFx0XHRcdH0gZWxzZSBpZihtb2JpbGVNZW51U3RhdGUgPT09ICd1c2VyJykge1xuXHRcdFx0XHRcdCR3cmFwcGVyLmFuaW1hdGUoe1xuXHRcdFx0XHRcdFx0J3JpZ2h0JzogJzAlJ1xuXHRcdFx0XHRcdH0sIDI1MCk7XG5cdFx0XHRcdFx0JHVzZXJNZW51LmFuaW1hdGUoe1xuXHRcdFx0XHRcdFx0J3JpZ2h0JzogJy01MCUnXG5cdFx0XHRcdFx0fSwgMjUwKTtcblx0XHRcdFx0XHQkdXNlclByby5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG5cdFx0XHRcdFx0bW9iaWxlTWVudVN0YXRlID0gJ2Nsb3NlZCc7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdCRtbUFsdC5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcblx0XHRcdGlmKGRvY1dpZHRoIDw9IDEwMjQpIHtcblx0XHRcdFx0aWYobW9iaWxlTWVudVN0YXRlID09PSAnY2xvc2VkJykge1xuXHRcdFx0XHRcdCR3cmFwcGVyLmFuaW1hdGUoe1xuXHRcdFx0XHRcdFx0J3JpZ2h0JzogJy01MCUnXG5cdFx0XHRcdFx0fSwgMjUwKTtcblx0XHRcdFx0XHQkaW50TWVudS5hbmltYXRlKHtcblx0XHRcdFx0XHRcdCdsZWZ0JzogJzAlJ1xuXHRcdFx0XHRcdH0sIDI1MCk7XG5cdFx0XHRcdFx0JG1tQWx0LmFkZENsYXNzKCdhY3RpdmUnKTtcblx0XHRcdFx0XHQkbXcuYWRkQ2xhc3MoJ2gtbG9jaycpO1xuXHRcdFx0XHRcdG1vYmlsZU1lbnVTdGF0ZSA9ICdtYWluJztcblx0XHRcdFx0fSBlbHNlIGlmKG1vYmlsZU1lbnVTdGF0ZSA9PT0gJ21haW4nKSB7XG5cdFx0XHRcdFx0JHdyYXBwZXIuYW5pbWF0ZSh7XG5cdFx0XHRcdFx0XHQncmlnaHQnOiAnMCUnXG5cdFx0XHRcdFx0fSwgMjUwKTtcblx0XHRcdFx0XHQkaW50TWVudS5hbmltYXRlKHtcblx0XHRcdFx0XHRcdCdsZWZ0JzogJy01MCUnXG5cdFx0XHRcdFx0fSwgMjUwLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdCRtbUFsdC5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG5cdFx0XHRcdFx0XHQkbXcucmVtb3ZlQ2xhc3MoJ2gtbG9jaycpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdG1vYmlsZU1lbnVTdGF0ZSA9ICdjbG9zZWQnO1xuXHRcdFx0XHR9XHRcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdCRkcm9wRG93bi5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcblx0XHRcdC8vIENsZWFyIG9sZCBEcm9wZG93bnNcblx0XHRcdGlmKCRtbmF2LmZpbmQoJCgnLmRyb3Bkb3duLW1lbnUnKSkuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XG5cdFx0XHRcdC8vIFNvIHRoYXQgeW91IGNhbiBjbG9zZSBpdCBpZiB5b3UgY2xpY2sgaXQuXG5cdFx0XHRcdGlmKCEkKHRoaXMpLmZpbmQoJCgnLmRyb3Bkb3duLW1lbnUnKSkpIHtcblx0XHRcdFx0XHQkbW5hdi5maW5kKCQoJy5kcm9wZG93bi1tZW51JykpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRpZihkb2NXaWR0aCA8PSAxMDI0KSB7XG5cdFx0XHRcdGlmKCQodGhpcykucGFyZW50KCkucGFyZW50KCkuYXR0cignY2xhc3MnKSAhPT0gJ20tbmF2IG5hdi1tYWluJykge1xuXHRcdFx0XHRcdGlmKCQodGhpcykuZmluZCgkKCcuZHJvcGRvd24tbWVudScpKS5pcygnOmhpZGRlbicpKSB7XG5cdFx0XHRcdFx0XHQkKHRoaXMpLmZpbmQoJCgnLmRyb3Bkb3duLW1lbnUnKSkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuXHRcdFx0XHRcdFx0JCh0aGlzKS5hZGRDbGFzcygnb3BlbicpO1xuXHRcdFx0XHRcdFx0ZGRPcGVuID0gdHJ1ZTtcblx0XHRcdFx0XHR9IGVsc2UgaWYoJCh0aGlzKS5maW5kKCQoJy5kcm9wZG93bi1tZW51JykpLmlzKCc6dmlzaWJsZScpKSB7XG5cdFx0XHRcdFx0XHQkKHRoaXMpLmZpbmQoJCgnLmRyb3Bkb3duLW1lbnUnKSkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuXHRcdFx0XHRcdFx0JCh0aGlzKS5yZW1vdmVDbGFzcygnb3BlbicpO1xuXHRcdFx0XHRcdFx0JCh0aGlzKS5ibHVyKCk7XG5cdFx0XHRcdFx0XHRkZE9wZW4gPSBmYWxzZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdCQoZG9jdW1lbnQpLm9uKCdjbGljayB0b3VjaHN0YXJ0JywgZnVuY3Rpb24oZSkge1xuXHRcdFx0aWYoZG9jV2lkdGggPD0gMTAyNCkge1xuXHRcdFx0XHRpZihkZE9wZW4gPT09IHRydWUpIHtcblx0XHRcdFx0XHRpZighJChlLnRhcmdldCkuY2xvc2VzdCgnLm0tZHJvcGRvd24nKS5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdCRkcm9wRG93bi5maW5kKCQoJy5kcm9wZG93bi1tZW51JykpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcblx0XHRcdFx0XHRcdCRkcm9wRG93bi5yZW1vdmVDbGFzcygnb3BlbicpO1xuXHRcdFx0XHRcdFx0ZGRPcGVuID0gZmFsc2U7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRmdW5jdGlvbiB0cmltSFRNTChpbnB1dEhUTUwsIG1heENoYXJzKSB7XG5cdFx0XHR2YXIgcmVnZXggPSAvPFxcLz9lbT4vO1xuXHRcdFx0dmFyIHNwbGl0Q29tcGFueSA9IGlucHV0SFRNTC5zcGxpdChyZWdleCk7XG5cdFx0XHR2YXIgY2hhcmFjdGVyQ291bnQgPSAwO1xuXHRcdFx0dmFyIGluc2lkZUVtID0gZmFsc2U7XG5cdFx0XHR2YXIgdHJpbW1lZEhUTUwgPSAnJztcblxuXHRcdFx0aWYgKHNwbGl0Q29tcGFueVswXSA9PT0gJycpIHtcblx0XHRcdCAgICBpbnNpZGVFbSA9IHRydWU7XG5cdFx0XHR9XG5cblx0XHRcdHNwbGl0Q29tcGFueS5mb3JFYWNoKGZ1bmN0aW9uKGVsZW1lbnQsIGluZGV4LCBhcnJheSkge1xuXHRcdFx0ICBpZiAoZWxlbWVudC5sZW5ndGggPT09IDApIHtcblx0XHRcdCAgXHRyZXR1cm47XG5cdFx0XHQgIH1cblx0XHRcdCAgaWYgKGNoYXJhY3RlckNvdW50IDwgbWF4Q2hhcnMpIHtcblx0XHRcdCAgXHRpZiAoaW5zaWRlRW0pIHtcblx0XHRcdCAgICBcdHRyaW1tZWRIVE1MICs9ICc8ZW0+Jztcblx0XHRcdCAgICB9XG5cdFx0XHQgICAgdHJpbW1lZEhUTUwgKz0gZWxlbWVudC5zdWJzdHJpbmcoMCwgKG1heENoYXJzIC0gY2hhcmFjdGVyQ291bnQpKTtcblx0XHRcdCAgICBpZiAoaW5zaWRlRW0pIHtcblx0XHRcdCAgICBcdHRyaW1tZWRIVE1MICs9ICc8L2VtPic7XG5cdFx0XHQgICAgfVxuXHRcdFx0ICAgIGluc2lkZUVtID0gIWluc2lkZUVtO1xuXHRcdFx0ICAgIGNoYXJhY3RlckNvdW50ICs9IGVsZW1lbnQubGVuZ3RoO1xuXHRcdFx0ICAgIGlmIChjaGFyYWN0ZXJDb3VudCA+IG1heENoYXJzKSB7XG5cdFx0XHQgICAgXHR0cmltbWVkSFRNTCArPSAn4oCmJztcblx0XHRcdCAgICB9XG5cdFx0XHQgIH1cblx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gdHJpbW1lZEhUTUw7XG5cblx0XHR9XG5cblx0XHR2YXIgY2xpZW50ID0gYWxnb2xpYXNlYXJjaChcIjYxRVU4SVMyTzFcIiwgXCJmZGNlYzdiNjE3OGY5YTljMTI4YWUwM2Q5YjdmNWY0MFwiKTtcblx0XHR2YXIgbWVtYmVycyA9IGNsaWVudC5pbml0SW5kZXgoYWxnb2xpYUluZGV4TWVtYmVycyk7XG5cdFx0dmFyIHByb2plY3RzID0gY2xpZW50LmluaXRJbmRleChhbGdvbGlhSW5kZXhQcm9qZWN0cyk7XG5cdFx0Ly9pbml0aWFsaXplIGF1dG9jb21wbGV0ZSBvbiBzZWFyY2ggaW5wdXQgKElEIHNlbGVjdG9yIG11c3QgbWF0Y2gpXG5cdFx0JCgnI2FhLXNlYXJjaC1pbnB1dCcpLmF1dG9jb21wbGV0ZShcblx0XHRcdHtcblx0XHRcdFx0aGludDogZmFsc2UsXG5cdFx0XHRcdGRlYnVnOiB0cnVlLFxuXHRcdFx0XHRrZXlib2FyZFNob3J0Y3V0czogWycvJ11cblx0XHRcdH0sIFxuXHRcdFx0W1xuXHRcdFx0XHR7XG5cdFx0XHRcdCAgc291cmNlOiAkLmZuLmF1dG9jb21wbGV0ZS5zb3VyY2VzLmhpdHMobWVtYmVycywgeyBoaXRzUGVyUGFnZTogMyB9KSxcblx0XHRcdFx0ICAvL3ZhbHVlIHRvIGJlIGRpc3BsYXllZCBpbiBpbnB1dCBjb250cm9sIGFmdGVyIHVzZXIncyBzdWdnZXN0aW9uIHNlbGVjdGlvblxuXHRcdFx0XHQgIGRpc3BsYXlLZXk6IGZ1bmN0aW9uKHN1Z2dlc3Rpb24pIHtcblx0XHRcdFx0ICBcdHJldHVybiBzdWdnZXN0aW9uLmZpcnN0bmFtZSArICcgJyArIHN1Z2dlc3Rpb24ubGFzdG5hbWU7XG5cdFx0XHRcdCAgfSxcblx0XHRcdFx0ICAvL2hhc2ggb2YgdGVtcGxhdGVzIHVzZWQgd2hlbiByZW5kZXJpbmcgZGF0YXNldFxuXHRcdFx0XHQgIHRlbXBsYXRlczoge1xuXHRcdFx0XHQgICAgaGVhZGVyOiAnPGRpdiBjbGFzcz1cImFhLXN1Z2dlc3Rpb25zLWNhdGVnb3J5XCI+JyArIGxhbmdbJ0V4cGVydHMnXSArICc8L2Rpdj4nLFxuXHRcdFx0XHQgICAgLy8nc3VnZ2VzdGlvbicgdGVtcGxhdGluZyBmdW5jdGlvbiB1c2VkIHRvIHJlbmRlciBhIHNpbmdsZSBzdWdnZXN0aW9uXG5cdFx0XHRcdCAgICBzdWdnZXN0aW9uOiBmdW5jdGlvbihzdWdnZXN0aW9uKSB7XG5cdFx0XHRcdCAgICAgIHZhciBtYXhDaGFycyA9IDM1O1xuXHRcdFx0XHQgICAgICB2YXIgb3JnYW5pemF0aW9uRGlzcGxheUhUTUwgPSBzdWdnZXN0aW9uLl9oaWdobGlnaHRSZXN1bHQub3JnYW5pemF0aW9uLnZhbHVlO1xuXHRcdFx0XHQgICAgICBpZiAoc3VnZ2VzdGlvbi5vcmdhbml6YXRpb24ubGVuZ3RoID4gbWF4Q2hhcnMpIHtcblx0XHRcdFx0ICAgICAgXHRvcmdhbml6YXRpb25EaXNwbGF5SFRNTCA9IHRyaW1IVE1MKG9yZ2FuaXphdGlvbkRpc3BsYXlIVE1MLCBtYXhDaGFycyk7XG5cdFx0XHRcdCAgICAgIH1cblx0XHRcdFx0ICAgICAgcmV0dXJuICc8aW1nIHNyYz1cIicgKyBzdWdnZXN0aW9uLmltYWdlICsgJ1wiPjxzcGFuPicgK1xuXHRcdFx0XHQgICAgICAgIHN1Z2dlc3Rpb24uX2hpZ2hsaWdodFJlc3VsdC5maXJzdG5hbWUudmFsdWUgKyAnICcgK1xuXHRcdFx0XHQgICAgICAgIHN1Z2dlc3Rpb24uX2hpZ2hsaWdodFJlc3VsdC5sYXN0bmFtZS52YWx1ZSArICc8L3NwYW4+IDxzcGFuPicgK1xuXHRcdFx0XHQgICAgICAgIG9yZ2FuaXphdGlvbkRpc3BsYXlIVE1MICsgJzwvc3Bhbj4nO1xuXHRcdFx0XHQgICAgfSxcblx0XHRcdFx0ICAgIGVtcHR5OiAnPGRpdiBjbGFzcz1cImFhLXN1Z2dlc3Rpb24gYWEtc3VnZ2VzdGlvbi1lbXB0eVwiPicgKyBsYW5nWydOb1Jlc3VsdHNGb3VuZCddICsgJyZuYnNwOzxhIGhyZWY9XCIvZXhwZXJ0aXNlL1wiPkFkdmFuY2VkIFNlYXJjaDwvYT48L2Rpdj4nXG5cdFx0XHRcdCAgfVxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdCAgc291cmNlOiAkLmZuLmF1dG9jb21wbGV0ZS5zb3VyY2VzLmhpdHMocHJvamVjdHMsIHsgaGl0c1BlclBhZ2U6IDMgfSksXG5cdFx0XHRcdCAgLy92YWx1ZSB0byBiZSBkaXNwbGF5ZWQgaW4gaW5wdXQgY29udHJvbCBhZnRlciB1c2VyJ3Mgc3VnZ2VzdGlvbiBzZWxlY3Rpb25cblx0XHRcdFx0ICBkaXNwbGF5S2V5OiAncHJvamVjdG5hbWUnLFxuXHRcdFx0XHQgIC8vaGFzaCBvZiB0ZW1wbGF0ZXMgdXNlZCB3aGVuIHJlbmRlcmluZyBkYXRhc2V0XG5cdFx0XHRcdCAgdGVtcGxhdGVzOiB7XG5cdFx0XHRcdCAgICBoZWFkZXI6ICc8ZGl2IGNsYXNzPVwiYWEtc3VnZ2VzdGlvbnMtY2F0ZWdvcnlcIj4nICsgbGFuZ1snUHJvamVjdHMnXSArICc8L2Rpdj4nLFxuXHRcdFx0XHQgICAgLy8nc3VnZ2VzdGlvbicgdGVtcGxhdGluZyBmdW5jdGlvbiB1c2VkIHRvIHJlbmRlciBhIHNpbmdsZSBzdWdnZXN0aW9uXG5cdFx0XHRcdCAgICBzdWdnZXN0aW9uOiBmdW5jdGlvbihzdWdnZXN0aW9uKSB7XG5cdFx0XHRcdCAgICAgIGlmICh0eXBlb2Ygc3VnZ2VzdGlvbi5faGlnaGxpZ2h0UmVzdWx0LmNvdW50cnkgIT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdFx0ICAgICAgXHR2YXIgY291bnRyeSA9IHN1Z2dlc3Rpb24uX2hpZ2hsaWdodFJlc3VsdC5jb3VudHJ5LnZhbHVlO1xuXHRcdFx0XHQgICAgICB9IGVsc2Uge1xuXHRcdFx0XHQgICAgICBcdHZhciBjb3VudHJ5ID0gJ+KAkyc7XG5cdFx0XHRcdCAgICAgIH1cblx0XHRcdFx0ICAgICAgcmV0dXJuICc8aW1nIHNyYz1cIicgKyBzdWdnZXN0aW9uLmltYWdlICsgJ1wiPjxzcGFuPicgK1xuXHRcdFx0XHQgICAgICAgIHN1Z2dlc3Rpb24uX2hpZ2hsaWdodFJlc3VsdC5wcm9qZWN0bmFtZS52YWx1ZSArICc8L3NwYW4+PHNwYW4+JyArXG5cdFx0XHRcdCAgICAgICAgY291bnRyeSArICc8L3NwYW4+Jztcblx0XHRcdFx0ICAgIH0sXG5cdFx0XHRcdCAgICBlbXB0eTogJzxkaXYgY2xhc3M9XCJhYS1zdWdnZXN0aW9uIGFhLXN1Z2dlc3Rpb24tZW1wdHlcIj4nICsgbGFuZ1snTm9SZXN1bHRzRm91bmQnXSArICcmbmJzcDs8YSBocmVmPVwiL3Byb2plY3RzL1wiPkFkdmFuY2VkIFNlYXJjaDwvYT48L2Rpdj4nLFxuXHRcdFx0XHQgICAgZm9vdGVyOiAnPGRpdiBjbGFzcz1cImFhLXN1Z2dlc3Rpb25zLWZvb3RlclwiPlBvd2VyZWQgYnkgPGltZyBzcmM9XCIvaW1hZ2VzL0FsZ29saWFfbG9nb19iZy13aGl0ZS5zdmdcIiB3aWR0aD1cIjQ4XCIgaGVpZ2h0PVwiMTdcIj48L2Rpdj4nXG5cdFx0XHRcdCAgfVxuXHRcdFx0XHR9XG5cdFx0XHRdKVxuXHRcdFx0Lm9uKCdhdXRvY29tcGxldGU6c2VsZWN0ZWQnLCBmdW5jdGlvbihldmVudCwgc3VnZ2VzdGlvbiwgZGF0YXNldCkge1xuXHRcdFx0XHR3aW5kb3cubG9jYXRpb24uaHJlZiA9IHN1Z2dlc3Rpb24udXJpO1xuXHRcdFx0fSk7XG5cdH1cbn0pO1xuXG5nbG9iYWwuY2hhbmdlTGFuZ3VhZ2UgPSByZXF1aXJlKCcuL19jaGFuZ2VMYW5ndWFnZS5qcycpOyJdfQ=="}